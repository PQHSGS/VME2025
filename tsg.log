2025-10-01 10:24:47,688 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-01 10:24:47,690 | DEBUG | TTSService | Playback thread started
2025-10-01 10:24:47,690 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-01 10:24:54,948 | INFO | ConversationManager | User: alo ·∫°
2025-10-01 10:24:54,948 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-01 10:24:54,957 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-01 10:24:55,684 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 200
2025-10-01 10:24:55,686 | INFO | RAGClient | RAG reply (len=42)
2025-10-01 10:24:55,691 | INFO | ConversationManager | Bot: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.
2025-10-01 10:24:55,692 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-01 10:24:55,693 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:24:57,202 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:11,110 | INFO | ConversationManager | User: ch√°u ch√†o √¥ng
2025-10-01 10:25:11,110 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-01 10:25:11,112 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-01 10:25:11,841 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 238
2025-10-01 10:25:11,842 | INFO | RAGClient | RAG reply (len=60)
2025-10-01 10:25:11,843 | INFO | ConversationManager | Bot: Ch√†o ch√°u, √¥ng l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c ƒë√¢y. Ch√°u t√™n l√† g√¨ nh·ªâ?
2025-10-01 10:25:11,845 | DEBUG | TTSService | Starting TTS download for text length=60
2025-10-01 10:25:11,846 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:25:14,679 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:46,869 | INFO | ConversationManager | User: √¥ng l√† ai v·∫≠y ·∫°
2025-10-01 10:25:46,870 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-01 10:25:46,873 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-01 10:25:48,157 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1529
2025-10-01 10:25:48,159 | INFO | RAGClient | RAG reply (len=657)
2025-10-01 10:25:48,160 | INFO | ConversationManager | Bot: √îng ch√≠nh l√† √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y. T·ª´ ng√†y x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh. V√¨ th·∫ø, trong m√¢m c·ªó Trung thu, b√™n c·∫°nh b√°nh n∆∞·ªõng, b√°nh d·∫ªo, c√≤n c√≥ √¥ng ‚Äì √îng Ti·∫øn sƒ© Gi·∫•y ‚Äì ng·ªìi tr√™n ki·ªáu, √°o m≈© ch·ªânh t·ªÅ, t∆∞·ª£ng tr∆∞ng cho ∆∞·ªõc m∆° h·ªçc gi·ªèi, ƒë·ªó ƒë·∫°t, hi·ªÉn vinh. Sau khi ph√° c·ªó, c√°c em nh·ªè th∆∞·ªùng r∆∞·ªõc √¥ng ƒëi quanh l√†ng, r·ªìi ƒë·∫∑t √¥ng l√™n b√†n h·ªçc hay ƒëem ƒë·ªët ƒë·ªÉ g·ª≠i g·∫Øm ∆∞·ªõc nguy·ªán h·ªçc h√†nh ti·∫øn t·ªõi. Nh∆∞ng n√†y‚Ä¶ ng√†y nay √¥ng ƒë√£ ƒë∆∞·ª£c ‚Äún√¢ng c·∫•p‚Äù r·ªìi ƒë·∫•y! Kh√¥ng ch·ªâ ng·ªìi y√™n tr√™n ki·ªáu, b√¢y gi·ªù √¥ng c√≤n c√≥ th·ªÉ n√≥i chuy·ªán, k·ªÉ chuy·ªán v√† ƒë·ªë vui c√πng c√°c con. V·ª´a gi·ªØ n√©t ƒë·∫πp d√¢n gian, v·ª´a s·ªëng ƒë·ªông v√† g·∫ßn g≈©i h∆°n bao gi·ªù h·∫øt! C√°c con th·∫•y √¥ng c√≥ ng·∫ßu kh√¥ng n√†o?
2025-10-01 10:25:48,161 | DEBUG | TTSService | Starting TTS download for text length=657
2025-10-01 10:25:48,161 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:25:50,667 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:50,935 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:51,042 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:25:53,615 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:53,812 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:54,098 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:54,223 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:25:56,725 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:56,917 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:57,010 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:25:59,254 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:59,522 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:25:59,649 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-01 10:26:02,095 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-01 10:26:02,318 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:48:51,862 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 07:48:51,862 | DEBUG | TTSService | Playback thread started
2025-10-03 07:48:51,862 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 07:50:35,782 | INFO | ConversationManager | User: alo alo
2025-10-03 07:50:35,782 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 07:50:35,789 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 07:50:37,663 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 318
2025-10-03 07:50:37,665 | INFO | RAGClient | RAG reply (len=98)
2025-10-03 07:50:37,665 | INFO | ConversationManager | Bot: Ch√†o b·∫°n tr·∫ª! T√¥i l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c, r·∫•t vui ƒë∆∞·ª£c tr√≤ chuy·ªán c√πng b·∫°n. B·∫°n c·∫ßn t√¥i gi√∫p g√¨ n√†o?
2025-10-03 07:50:37,665 | DEBUG | TTSService | Starting TTS download for text length=98
2025-10-03 07:50:37,672 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 07:50:42,165 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:50:43,748 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:53:41,689 | INFO | ConversationManager | User: alo alo
2025-10-03 07:53:41,689 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 07:53:41,690 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 07:53:43,345 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 318
2025-10-03 07:53:43,345 | INFO | RAGClient | RAG reply (len=98)
2025-10-03 07:53:43,345 | INFO | ConversationManager | Bot: Ch√†o b·∫°n tr·∫ª! T√¥i l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c, r·∫•t vui ƒë∆∞·ª£c tr√≤ chuy·ªán c√πng b·∫°n. B·∫°n c·∫ßn t√¥i gi√∫p g√¨ n√†o?
2025-10-03 07:53:43,349 | DEBUG | TTSService | Starting TTS download for text length=98
2025-10-03 07:53:43,350 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 07:53:45,171 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:53:45,298 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:53:45,607 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:54:22,259 | INFO | ConversationManager | User: ch√†o √¥ng
2025-10-03 07:54:22,259 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 07:54:22,260 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 07:54:23,024 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 304
2025-10-03 07:54:23,026 | INFO | RAGClient | RAG reply (len=91)
2025-10-03 07:54:23,027 | INFO | ConversationManager | Bot: Ch√†o b·∫°n! R·∫•t vui ƒë∆∞·ª£c g·∫∑p b·∫°n. B·∫°n c√≥ c√¢u h·ªèi g√¨ mu·ªën h·ªèi Ti·∫øn sƒ© Ki·∫øn Th·ª©c n√†y kh√¥ng n√†o?
2025-10-03 07:54:23,027 | DEBUG | TTSService | Starting TTS download for text length=91
2025-10-03 07:54:23,027 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 07:54:25,762 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:54:26,045 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:58:19,011 | INFO | ConversationManager | Interrupted by user
2025-10-03 07:58:31,794 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 07:58:31,794 | DEBUG | TTSService | Playback thread started
2025-10-03 07:58:31,794 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 07:59:12,544 | INFO | ConversationManager | User: alo  alo
2025-10-03 07:59:12,545 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 07:59:12,548 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 07:59:17,116 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 537
2025-10-03 07:59:17,124 | INFO | RAGClient | RAG reply (len=191)
2025-10-03 07:59:17,124 | INFO | ConversationManager | Bot: Ch√†o b·∫°n tr·∫ª! T√¥i l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c, r·∫•t vui ƒë∆∞·ª£c tr√≤ chuy·ªán c√πng b·∫°n. B·∫°n c√≥ c√¢u h·ªèi g√¨ mu·ªën h·ªèi t√¥i kh√¥ng? ƒê·ª´ng ng·∫°i nh√©, t√¥i ·ªü ƒë√¢y ƒë·ªÉ gi√∫p b·∫°n kh√°m ph√° th·∫ø gi·ªõi tri th·ª©c r·ªông l·ªõn n√†y! üòä
2025-10-03 07:59:17,126 | DEBUG | TTSService | Starting TTS download for text length=191
2025-10-03 07:59:17,129 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 07:59:22,162 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:59:22,514 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:59:22,614 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 07:59:26,505 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 07:59:26,791 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:01:38,277 | INFO | ConversationManager | User: ch√°u ch√†o √¥ng
2025-10-03 08:01:38,278 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:01:38,278 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:01:39,913 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 498
2025-10-03 08:01:39,914 | INFO | RAGClient | RAG reply (len=177)
2025-10-03 08:01:39,914 | INFO | ConversationManager | Bot: Ch√†o ch√°u! √îng l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c ƒë√¢y, r·∫•t vui ƒë∆∞·ª£c g·∫∑p ch√°u. Ch√°u c√≥ ƒëi·ªÅu g√¨ mu·ªën h·ªèi √¥ng kh√¥ng? ƒê·ª´ng ng·∫°i ng√πng nh√©, √¥ng lu√¥n s·∫µn l√≤ng chia s·∫ª ki·∫øn th·ª©c c·ªßa m√¨nh v·ªõi ch√°u. üòä
2025-10-03 08:01:39,914 | DEBUG | TTSService | Starting TTS download for text length=177
2025-10-03 08:01:39,916 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:01:46,265 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:01:46,715 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:01:46,807 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:01:50,040 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:01:50,659 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:05:27,741 | INFO | ConversationManager | User: alo alo
2025-10-03 08:05:27,745 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:05:27,745 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:05:28,611 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 316
2025-10-03 08:05:28,611 | INFO | RAGClient | RAG reply (len=98)
2025-10-03 08:05:28,618 | INFO | ConversationManager | Bot: Ch√†o b·∫°n tr·∫ª! T√¥i l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c, r·∫•t vui ƒë∆∞·ª£c tr√≤ chuy·ªán c√πng b·∫°n. B·∫°n c·∫ßn t√¥i gi√∫p g√¨ n√†o?
2025-10-03 08:05:28,620 | DEBUG | TTSService | Starting TTS download for text length=98
2025-10-03 08:05:28,621 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:05:30,270 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:05:30,524 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:05:50,089 | INFO | ConversationManager | User: alo ·∫°
2025-10-03 08:05:50,089 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:05:50,094 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:05:51,863 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 360
2025-10-03 08:05:51,863 | INFO | RAGClient | RAG reply (len=109)
2025-10-03 08:05:51,863 | INFO | ConversationManager | Bot: Ch√†o b·∫°n! T√¥i l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c ƒë√¢y. B·∫°n c·∫ßn t√¥i gi√∫p g√¨ n√†o? C√≥ ƒëi·ªÅu g√¨ th√∫ v·ªã b·∫°n mu·ªën t√¨m hi·ªÉu kh√¥ng? üòä
2025-10-03 08:05:51,865 | DEBUG | TTSService | Starting TTS download for text length=109
2025-10-03 08:05:51,865 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:05:54,167 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:05:55,217 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:05:55,820 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:06:13,281 | INFO | ConversationManager | User: ch√°u ch√†o √¥ng
2025-10-03 08:06:13,281 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:06:13,281 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:06:14,680 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 406
2025-10-03 08:06:14,680 | INFO | RAGClient | RAG reply (len=135)
2025-10-03 08:06:14,680 | INFO | ConversationManager | Bot: Ch√†o ch√°u! √îng l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c ƒë√¢y. Ch√°u c√≥ ƒëi·ªÅu g√¨ mu·ªën h·ªèi √¥ng kh√¥ng? √îng s·∫µn s√†ng chia s·∫ª m·ªçi ki·∫øn th·ª©c m√¨nh c√≥ cho ch√°u ƒë√¢y! üòä
2025-10-03 08:06:14,687 | DEBUG | TTSService | Starting TTS download for text length=135
2025-10-03 08:06:14,688 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:06:20,971 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:06:22,620 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:06:23,248 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:08:08,342 | INFO | ConversationManager | User: alo alo
2025-10-03 08:08:08,343 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:08:08,344 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:08:10,385 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x0000026193163690>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 08:08:11,386 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-03 08:08:11,388 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:08:13,428 | WARNING | RAGClient | RAG request failed (attempt 2). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x00000261931993D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 08:08:15,429 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-03 08:08:15,431 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:08:16,502 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 318
2025-10-03 08:08:16,508 | INFO | RAGClient | RAG reply (len=98)
2025-10-03 08:08:16,509 | INFO | ConversationManager | Bot: Ch√†o b·∫°n tr·∫ª! T√¥i l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c, r·∫•t vui ƒë∆∞·ª£c tr√≤ chuy·ªán c√πng b·∫°n. B·∫°n c·∫ßn t√¥i gi√∫p g√¨ n√†o?
2025-10-03 08:08:16,510 | DEBUG | TTSService | Starting TTS download for text length=98
2025-10-03 08:08:16,510 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:08:17,901 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:08:18,140 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:08:44,020 | INFO | ConversationManager | User: ch√°u ch√†o √¥ng
2025-10-03 08:08:44,021 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:08:44,021 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:08:45,204 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 329
2025-10-03 08:08:45,204 | INFO | RAGClient | RAG reply (len=99)
2025-10-03 08:08:45,204 | INFO | ConversationManager | Bot: Ch√†o ch√°u! √îng l√† Ti·∫øn sƒ© Ki·∫øn Th·ª©c ƒë√¢y, r·∫•t vui ƒë∆∞·ª£c g·∫∑p ch√°u. Ch√°u c√≥ ƒëi·ªÅu g√¨ mu·ªën h·ªèi √¥ng kh√¥ng?
2025-10-03 08:08:45,204 | DEBUG | TTSService | Starting TTS download for text length=99
2025-10-03 08:08:45,204 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:08:46,552 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:08:46,813 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:11:42,877 | INFO | ConversationManager | User: alo alo
2025-10-03 08:11:42,877 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 08:11:42,885 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 08:11:44,616 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 249
2025-10-03 08:11:44,616 | INFO | RAGClient | RAG reply (len=69)
2025-10-03 08:11:44,621 | INFO | ConversationManager | Bot: Alo alo ch√°u ∆°i! √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y, c√≥ g√¨ vui m√† ch√°u g·ªçi √¥ng th·∫ø?
2025-10-03 08:11:44,621 | DEBUG | TTSService | Starting TTS download for text length=69
2025-10-03 08:11:44,621 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 08:11:56,602 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 08:11:56,916 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 15:44:41,451 | INFO | ConversationManager | User: alo alo
2025-10-03 15:44:41,454 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 15:44:41,467 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:00:07,319 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cpu
2025-10-03 16:00:07,319 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-03 16:00:12,017 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 16:00:12,022 | DEBUG | TTSService | Playback thread started
2025-10-03 16:00:12,022 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 16:00:16,083 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-03 16:00:16,595 | INFO | faiss.loader | Successfully loaded faiss with AVX2 support.
2025-10-03 16:00:22,724 | INFO | ConversationManager | User: alo ·∫°
2025-10-03 16:00:22,724 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:00:22,732 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:00:24,429 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 363
2025-10-03 16:00:24,439 | INFO | RAGClient | RAG reply (len=128)
2025-10-03 16:00:24,439 | INFO | ConversationManager | Bot: √îi ch√†o ch√°u, √¥ng l√† Ti·∫øn sƒ© Gi·∫•y ƒë√¢y. H√¥m nay Trung Thu ·ªü B·∫£o t√†ng vui l·∫Øm ƒë√∫ng kh√¥ng ch√°u? C√≥ g√¨ hay ho mu·ªën h·ªèi √¥ng kh√¥ng n√®?
2025-10-03 16:00:24,439 | DEBUG | TTSService | Starting TTS download for text length=128
2025-10-03 16:00:24,439 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:00:28,241 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:00:29,305 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:00:56,569 | INFO | ConversationManager | User: ch√°u ch√†o √¥ng
2025-10-03 16:00:56,569 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:00:56,572 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:00:57,202 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 353
2025-10-03 16:00:57,204 | INFO | RAGClient | RAG reply (len=125)
2025-10-03 16:00:57,204 | INFO | ConversationManager | Bot: Ch√†o ch√°u, √¥ng l√† Ti·∫øn sƒ© Gi·∫•y ƒë√¢y. H√¥m nay Trung Thu ·ªü B·∫£o t√†ng vui l·∫Øm ƒë√∫ng kh√¥ng ch√°u? C√≥ g√¨ hay ho mu·ªën h·ªèi √¥ng kh√¥ng n√®?
2025-10-03 16:00:57,206 | DEBUG | TTSService | Starting TTS download for text length=125
2025-10-03 16:00:57,206 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:01:00,963 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:01:01,505 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:02:47,163 | INFO | ConversationManager | User: Alo ·∫°
2025-10-03 16:02:47,163 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:02:47,163 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:02:49,200 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x00000220406B3190>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 16:02:50,202 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-03 16:02:50,202 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:02:52,241 | WARNING | RAGClient | RAG request failed (attempt 2). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x00000220406B0350>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 16:02:54,242 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-03 16:02:54,242 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:02:56,267 | WARNING | RAGClient | RAG request failed (attempt 3). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x00000220406CF490>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 16:02:59,268 | ERROR | RAGClient | RAG request failed after retries
2025-10-03 16:02:59,268 | WARNING | ConversationManager | Empty reply from RAG; using backup string
2025-10-03 16:03:09,717 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cpu
2025-10-03 16:03:09,717 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-03 16:03:16,987 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-03 16:03:17,028 | INFO | faiss.loader | Successfully loaded faiss with AVX2 support.
2025-10-03 16:04:17,872 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 16:04:17,872 | DEBUG | TTSService | Playback thread started
2025-10-03 16:04:17,880 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 16:04:24,021 | INFO | ConversationManager | User: alo ·∫°
2025-10-03 16:04:24,021 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:04:24,021 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:04:25,382 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 287
2025-10-03 16:04:25,386 | INFO | RAGClient | RAG reply (len=92)
2025-10-03 16:04:25,386 | INFO | ConversationManager | Bot: Ch√†o ch√°u, √¥ng l√† Ti·∫øn sƒ© Gi·∫•y AI ƒë√¢y. H√¥m nay Trung Thu ·ªü B·∫£o t√†ng vui l·∫Øm ƒë√∫ng kh√¥ng ch√°u?
2025-10-03 16:04:25,386 | DEBUG | TTSService | Starting TTS download for text length=92
2025-10-03 16:04:25,386 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:04:28,832 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:04:29,123 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:04:36,100 | INFO | ConversationManager | User: ch√°u ch√†o √¥ng ·∫°
2025-10-03 16:04:36,100 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:04:36,104 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:04:36,944 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 236
2025-10-03 16:04:36,952 | INFO | RAGClient | RAG reply (len=68)
2025-10-03 16:04:36,952 | INFO | ConversationManager | Bot: √îi ch√†o ch√°u, ch√°u c√≥ c√¢u h·ªèi g√¨ v·ªÅ Trung Thu hay B·∫£o t√†ng kh√¥ng n√®?
2025-10-03 16:04:36,955 | DEBUG | TTSService | Starting TTS download for text length=68
2025-10-03 16:04:36,955 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:04:40,542 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:06,982 | INFO | ConversationManager | User: √¥ng ∆°i √¥ng c√≥ bi·∫øt c√°ch l√†m ƒë√®n √¥ng sao kh√¥ng ·∫°
2025-10-03 16:05:06,982 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:05:06,982 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:05:10,102 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1352
2025-10-03 16:05:10,103 | INFO | RAGClient | RAG reply (len=592)
2025-10-03 16:05:10,104 | INFO | ConversationManager | Bot: ·ªí, √¥ng v·ª´a tra m·∫°ng xong th√¨ th·∫•y c√≥ n√≥i v·ªÅ ƒë√®n √¥ng sao ƒë√≥ ch√°u. ƒê√®n √¥ng sao l√† lo·∫°i ƒë√®n l·ªìng ph·ªï bi·∫øn v√† mang t√≠nh bi·ªÉu t∆∞·ª£ng nh·∫•t, c√≥ h√¨nh ng√¥i sao 5 c√°nh. H√¨nh ·∫£nh ng√¥i sao 5 c√°nh ƒë∆∞·ª£c bao b·ªçc b·ªüi v√≤ng tr√≤n t∆∞·ª£ng tr∆∞ng cho Ng≈© h√†nh √¢m d∆∞∆°ng, th·ªÉ hi·ªán s·ª± c√¢n b·∫±ng v√† h√†i h√≤a gi·ªØa c√°c m·ªëi quan h·ªá trong cu·ªôc s·ªëng, gi·ªØa con ng∆∞·ªùi v·ªõi v·∫°n v·∫≠t. ƒê√®n √¥ng sao l√† bi·ªÉu t∆∞·ª£ng c·ªßa √°nh s√°ng, ni·ªÅm vui v√† hy v·ªçng, l√† m√≥n ƒë·ªì ch∆°i kh√¥ng th·ªÉ thi·∫øu trong c√°c bu·ªïi r∆∞·ªõc ƒë√®n. Tuy nhi√™n, √¥ng ch∆∞a t√¨m th·∫•y chi ti·∫øt c√°ch l√†m ƒë√®n √¥ng sao ·ªü ƒë√¢y. Ch√°u c√≥ mu·ªën √¥ng t√¨m hi·ªÉu th√™m v·ªÅ c√°c lo·∫°i ƒë√®n l·ªìng kh√°c kh√¥ng n√®?
2025-10-03 16:05:10,104 | DEBUG | TTSService | Starting TTS download for text length=592
2025-10-03 16:05:10,104 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:05:12,560 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:12,686 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:05:15,214 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:15,304 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:05:18,398 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:18,695 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:18,791 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:05:23,103 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:23,519 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:23,599 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:05:26,121 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:05:26,416 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:05,239 | INFO | ConversationManager | User: ·ªì ti·∫øc qu√° ·∫°
2025-10-03 16:06:05,245 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:06:05,245 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:06:06,152 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 407
2025-10-03 16:06:06,152 | INFO | RAGClient | RAG reply (len=149)
2025-10-03 16:06:06,152 | INFO | ConversationManager | Bot: √îi ti·∫øc qu√°, √¥ng ch∆∞a nh·ªõ ra c√°ch l√†m ƒë√®n √¥ng sao. ƒê·ªÉ mai √¥ng tra m·∫°ng th√™m xem sao nh√©. Ch√°u c√≥ mu·ªën nghe √¥ng k·ªÉ v·ªÅ c√°c lo·∫°i ƒë√®n l·ªìng kh√°c kh√¥ng n√®?
2025-10-03 16:06:06,156 | DEBUG | TTSService | Starting TTS download for text length=149
2025-10-03 16:06:06,156 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:06:09,085 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:09,909 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:40,194 | INFO | ConversationManager | User: th·∫ø √¥ng c√≥ bi·∫øt s·ª± t√≠ch ƒë√®n k√©o qu√¢n kh√¥ng ·∫°
2025-10-03 16:06:40,194 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:06:40,194 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:06:42,601 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1183
2025-10-03 16:06:42,609 | INFO | RAGClient | RAG reply (len=493)
2025-10-03 16:06:42,609 | INFO | ConversationManager | Bot: ·ªí, √¥ng v·ª´a tra m·∫°ng xong th√¨ th·∫•y c√≥ k·ªÉ v·ªÅ s·ª± t√≠ch ƒë√®n k√©o qu√¢n ƒë√≥ ch√°u. Ng√†y x∆∞a, c√≥ m·ªôt ch√†ng trai t√™n l√† L·ª•c ƒê·ª©c ƒë√£ l√†m ra chi·∫øc ƒë√®n k√©o qu√¢n ƒë·∫πp nh·∫•t ƒë·ªÉ d√¢ng vua. Chi·∫øc ƒë√®n n√†y c√≥ tr·ª•c quay ·ªü gi·ªØa t∆∞·ª£ng tr∆∞ng cho tr·ª•c tr√°i ƒë·∫•t, 6 m·∫∑t ƒë√®n di·ªÖn t·∫£ m·ªôt tr·∫≠n ƒë√°nh th·∫Øng qu√¢n th√π. Khi ƒë·ªët l√™n, ƒë√®n quay v√† hi·ªán ra h√¨nh ·∫£nh vua, quan, ng∆∞·ªùi, ng·ª±a ch·∫°y n·ªëi nhau tr√¥ng r·∫•t ng·ªô nghƒ©nh. T·ª´ ƒë√≥, ng∆∞·ªùi ta g·ªçi l√† ƒë√®n k√©o qu√¢n ƒë√≥ ch√°u. Ch√°u c√≥ mu·ªën nghe √¥ng k·ªÉ th√™m v·ªÅ c·∫•u t·∫°o c·ªßa ƒë√®n k√©o qu√¢n kh√¥ng n√®?
2025-10-03 16:06:42,609 | DEBUG | TTSService | Starting TTS download for text length=493
2025-10-03 16:06:42,609 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:06:44,923 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:45,025 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:06:47,892 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:48,192 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:48,283 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:06:51,266 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:51,684 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:51,782 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:06:54,652 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:55,264 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:06:55,364 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:06:57,338 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:22:07,906 | DEBUG | datasets | PyTorch version 2.8.0+cpu available.
2025-10-03 16:22:10,279 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cpu
2025-10-03 16:22:10,279 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-03 16:22:10,300 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-03 16:22:14,449 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-03 16:22:14,915 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-03 16:22:16,067 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-03 16:22:17,089 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-03 16:22:19,877 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-03 16:22:19,927 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-03 16:22:20,233 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-03 16:22:20,708 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-03 16:22:21,600 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-03 16:22:21,667 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-03 16:22:23,842 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-03 16:22:25,787 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-03 16:22:26,698 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-03 16:22:27,598 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-03 16:22:27,863 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-03 16:22:29,029 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-03 16:22:29,251 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-03 16:22:31,883 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-03 16:22:32,043 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-03 16:22:32,662 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-03 16:22:32,677 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-03 16:22:32,678 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-03 16:22:33,343 | INFO | faiss.loader | Successfully loaded faiss with AVX2 support.
2025-10-03 16:23:11,284 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 16:23:11,286 | DEBUG | TTSService | Playback thread started
2025-10-03 16:23:11,286 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 16:23:21,303 | INFO | ConversationManager | User: alo ·∫°
2025-10-03 16:23:21,304 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:23:21,308 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:23:21,311 | INFO | __main__ | Received new chat request
2025-10-03 16:23:21,312 | DEBUG | __main__ | Request ID: 20251003T162311284-7e1ad3c8, Data length: 5
2025-10-03 16:23:21,312 | DEBUG | __main__ | Creating new session with ID: 20251003T162311284-7e1ad3c8
2025-10-03 16:23:21,312 | DEBUG | __main__ | Using request ID: 20251003T162311284-7e1ad3c8
2025-10-03 16:23:21,312 | DEBUG | __main__ | Created new session for ID: 20251003T162311284-7e1ad3c8, total sessions: 1
2025-10-03 16:23:21,313 | INFO | __main__ | Processing user input: 'alo ·∫°' for session 20251003T162311284-7e1ad3c8
2025-10-03 16:23:22,548 | INFO | __main__ | Agent execution completed successfully for session 20251003T162311284-7e1ad3c8
2025-10-03 16:23:22,549 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.237s, Total: 1.238s
2025-10-03 16:23:22,551 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 326
2025-10-03 16:23:22,553 | INFO | RAGClient | RAG reply (len=106)
2025-10-03 16:23:22,554 | INFO | ConversationManager | Bot: Ch√†o ch√°u, √¥ng l√† Ti·∫øn sƒ© Gi·∫•y ƒë√¢y. H√¥m nay l√† T·∫øt Trung Thu ·ªü B·∫£o t√†ng, ch√°u c√≥ g√¨ mu·ªën h·ªèi √¥ng kh√¥ng n√®?
2025-10-03 16:23:22,556 | DEBUG | TTSService | Starting TTS download for text length=106
2025-10-03 16:23:22,557 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:23:26,751 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:23:27,028 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:23:50,145 | INFO | ConversationManager | User: √¥ng ∆°i √¥ng c√≥ bi·∫øt s·ª± t√≠ch ch√∫ cu·ªôi kh√¥ng ah
2025-10-03 16:23:50,145 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:23:50,148 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:23:50,151 | INFO | __main__ | Received new chat request
2025-10-03 16:23:50,151 | DEBUG | __main__ | Request ID: 20251003T162311284-7e1ad3c8, Data length: 44
2025-10-03 16:23:50,151 | DEBUG | __main__ | Using existing session for ID: 20251003T162311284-7e1ad3c8
2025-10-03 16:23:50,152 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ bi·∫øt s·ª± t√≠ch ch√∫ cu·ªôi kh√¥ng ah' for session 20251003T162311284-7e1ad3c8
2025-10-03 16:23:50,792 | INFO | __main__ | Starting retrieval for query: 's·ª± t√≠ch ch√∫ cu·ªôi' (topk=4, w_content=1.0, w_header=1.0)
2025-10-03 16:23:50,792 | DEBUG | __main__ | Searching header index...
2025-10-03 16:23:50,981 | DEBUG | __main__ | Header search returned 4 results
2025-10-03 16:23:50,981 | DEBUG | __main__ | Searching content index...
2025-10-03 16:23:51,038 | DEBUG | __main__ | Content search returned 4 results
2025-10-03 16:23:51,038 | DEBUG | __main__ | Calculating combined scores...
2025-10-03 16:23:51,038 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-03 16:23:51,038 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-03 16:23:51,038 | DEBUG | __main__ |   Rank 1: chunk_id=24, hybrid_score=0.9655
2025-10-03 16:23:51,038 | DEBUG | __main__ |   Rank 2: chunk_id=25, hybrid_score=0.8004
2025-10-03 16:23:51,040 | DEBUG | __main__ |   Rank 3: chunk_id=40, hybrid_score=0.4199
2025-10-03 16:23:51,040 | DEBUG | __main__ |   Rank 4: chunk_id=44, hybrid_score=0.3973
2025-10-03 16:23:51,040 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-03 16:23:51,040 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-03 16:23:51,040 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-03 16:23:51,040 | DEBUG | __main__ | Retrieved chunk 44: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > Tr·ªëng b·ªèi | Content preview: L√†ng B√°o ƒê√°p x√£ H·ªìng Quang, huy·ªán Nam Tr·ª±c, t·ªânh Nam ƒê·ªãnh c√≥ truy·ªÅn th·ªëng l√†m ƒë√®n √¥ng sao v·ªõi tr·ªëng ...
2025-10-03 16:23:51,040 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-03 16:23:51,040 | DEBUG | __main__ | Retrieved 4 documents for query: s·ª± t√≠ch ch√∫ cu·ªôi
2025-10-03 16:23:51,040 | DEBUG | __main__ | [timing] retrieve 0.247s
2025-10-03 16:23:52,460 | INFO | __main__ | Agent execution completed successfully for session 20251003T162311284-7e1ad3c8
2025-10-03 16:23:52,461 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.310s, Total: 2.310s
2025-10-03 16:23:52,463 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1176
2025-10-03 16:23:52,464 | INFO | RAGClient | RAG reply (len=516)
2025-10-03 16:23:52,464 | INFO | ConversationManager | Bot: √Ä, √¥ng v·ª´a tra m·∫°ng xong th√¨ th·∫•y th·∫ø n√†y n√® ch√°u. Ng√†y x∆∞a c√≥ anh ti·ªÅu phu t√™n l√† Cu·ªôi, anh ·∫•y nh·∫∑t ƒë∆∞·ª£c m·ªôt c√¢y thu·ªëc th·∫ßn c√≥ th·ªÉ ch·ªØa b·ªánh v√† h·ªìi sinh ng∆∞·ªùi ch·∫øt. Nh∆∞ng v√¨ v·ª£ anh ·∫•y l·ª° tay l√†m h·ªèng c√¢y thu·ªëc, n√™n c√¢y ƒë√£ bay th·∫≥ng l√™n tr·ªùi, cu·ªën c·∫£ Cu·ªôi theo l√™n cung trƒÉng. T·ª´ ƒë√≥, Cu·ªôi s·ªëng m·ªôt m√¨nh tr√™n ƒë√≥, √¥m g·ªëc c√¢y thu·ªëc v√† nh√¨n xu·ªëng tr·∫ßn gian. Ng∆∞·ªùi ta b·∫£o m·ªói khi trƒÉng tr√≤n, nh√¨n k·ªπ s·∫Ω th·∫•y b√≥ng Cu·ªôi ng·ªìi d∆∞·ªõi g·ªëc c√¢y ƒë√≥ ch√°u ·∫°. C√¢u chuy·ªán n√†y c√≤n d·∫°y ch√∫ng ta v·ªÅ l√≤ng trung th√†nh v√† n·ªói nh·ªõ nh√† n·ªØa ƒë√≥.
2025-10-03 16:23:52,466 | DEBUG | TTSService | Starting TTS download for text length=516
2025-10-03 16:23:52,467 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:23:57,479 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:23:57,565 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:02,789 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:03,073 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:03,156 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:06,959 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:07,384 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:07,481 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:10,468 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:10,568 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:13,248 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:13,349 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:17,060 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:48,810 | INFO | ConversationManager | User: ·ªì sao √¥ng bi·∫øt nhi·ªÅu v·∫≠y ·∫°
2025-10-03 16:24:48,811 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 16:24:48,813 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 16:24:48,816 | INFO | __main__ | Received new chat request
2025-10-03 16:24:48,817 | DEBUG | __main__ | Request ID: 20251003T162311284-7e1ad3c8, Data length: 26
2025-10-03 16:24:48,817 | DEBUG | __main__ | Using existing session for ID: 20251003T162311284-7e1ad3c8
2025-10-03 16:24:48,818 | INFO | __main__ | Processing user input: '·ªì sao √¥ng bi·∫øt nhi·ªÅu v·∫≠y ·∫°' for session 20251003T162311284-7e1ad3c8
2025-10-03 16:24:49,565 | INFO | __main__ | Agent execution completed successfully for session 20251003T162311284-7e1ad3c8
2025-10-03 16:24:49,565 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.748s, Total: 0.749s
2025-10-03 16:24:49,568 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 527
2025-10-03 16:24:49,569 | INFO | RAGClient | RAG reply (len=199)
2025-10-03 16:24:49,571 | INFO | ConversationManager | Bot: H√¨ h√¨, √¥ng l√† Ti·∫øn sƒ© Gi·∫•y m√† ch√°u, ki·∫øn th·ª©c th√¨ bao la nh∆∞ bi·ªÉn c·∫£ v·∫≠y ƒë√≥. V·ªõi l·∫°i, √¥ng c≈©ng hay ƒë·ªçc s√°ch v·ªõi xem t√†i li·ªáu l·∫Øm, n√™n bi·∫øt nhi·ªÅu th·ª© l·∫Øm ƒë√≥ nha. Ch√°u c√≤n g√¨ mu·ªën h·ªèi √¥ng n·ªØa kh√¥ng n√®?
2025-10-03 16:24:49,573 | DEBUG | TTSService | Starting TTS download for text length=199
2025-10-03 16:24:49,574 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:52,541 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:52,880 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:52,968 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 16:24:55,973 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 16:24:56,538 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 17:52:02,244 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-03 17:52:03,874 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-03 17:52:03,874 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-03 17:52:03,884 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-03 17:52:04,274 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-03 17:52:04,307 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-03 17:52:04,665 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-03 17:52:04,695 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-03 17:52:05,013 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-03 17:52:05,060 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-03 17:52:05,344 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-03 17:52:05,376 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-03 17:52:05,711 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-03 17:52:05,744 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-03 17:52:06,057 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-03 17:52:06,114 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-03 17:52:06,394 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-03 17:52:06,729 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-03 17:52:06,822 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-03 17:52:07,944 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-03 17:52:07,992 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-03 17:52:08,376 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-03 17:52:09,694 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-03 17:52:09,735 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-03 17:52:10,052 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-03 17:52:11,733 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 17:52:11,736 | DEBUG | TTSService | Playback thread started
2025-10-03 17:52:11,736 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 17:52:19,571 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-03 17:52:19,571 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-03 17:52:19,571 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-03 17:52:19,571 | INFO | faiss.loader | Loading faiss.
2025-10-03 17:52:20,189 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-03 17:55:25,782 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-03 17:55:26,257 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-03 17:55:26,257 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-03 17:55:26,257 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-03 17:55:26,669 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-03 17:55:26,716 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-03 17:55:27,008 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-03 17:55:27,048 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-03 17:55:27,332 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-03 17:55:27,361 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-03 17:55:27,661 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-03 17:55:27,698 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-03 17:55:28,447 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-03 17:55:28,497 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-03 17:55:28,779 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-03 17:55:28,826 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-03 17:55:29,096 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-03 17:55:29,401 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-03 17:55:29,436 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-03 17:55:29,865 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-03 17:55:29,901 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-03 17:55:30,244 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-03 17:55:31,271 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-03 17:55:31,314 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-03 17:55:31,630 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-03 17:55:33,745 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-03 17:55:33,745 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-03 17:55:33,745 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-03 17:55:33,745 | INFO | faiss.loader | Loading faiss.
2025-10-03 17:55:33,773 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-03 17:56:14,730 | INFO | ConversationManager | User: alo \u1ea1
2025-10-03 17:56:14,734 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 17:56:14,735 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 17:56:14,737 | INFO | __main__ | Received new chat request
2025-10-03 17:56:14,737 | DEBUG | __main__ | Request ID: 20251003T175211733-9cf6b90f, Data length: 5
2025-10-03 17:56:14,737 | DEBUG | __main__ | Creating new session with ID: 20251003T175211733-9cf6b90f
2025-10-03 17:56:14,737 | DEBUG | __main__ | Using request ID: 20251003T175211733-9cf6b90f
2025-10-03 17:56:14,737 | DEBUG | __main__ | Created new session for ID: 20251003T175211733-9cf6b90f, total sessions: 1
2025-10-03 17:56:14,737 | INFO | __main__ | Processing user input: 'alo ·∫°' for session 20251003T175211733-9cf6b90f
2025-10-03 17:56:16,716 | INFO | __main__ | Agent execution completed successfully for session 20251003T175211733-9cf6b90f
2025-10-03 17:56:16,716 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.979s, Total: 1.979s
2025-10-03 17:56:16,717 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 326
2025-10-03 17:56:16,718 | INFO | RAGClient | RAG reply (len=106)
2025-10-03 17:56:16,718 | INFO | ConversationManager | Bot: ChÔøΩo chÔøΩu, ÔøΩng lÔøΩ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111ÔøΩy. HÔøΩm nay lÔøΩ T\u1ebft Trung Thu \u1edf B\u1ea3o tÔøΩng, chÔøΩu cÔøΩ gÔøΩ mu\u1ed1n h\u1ecfi ÔøΩng khÔøΩng nÔøΩ?
2025-10-03 17:56:16,718 | DEBUG | TTSService | Starting TTS download for text length=106
2025-10-03 17:56:16,831 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 17:56:20,833 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 17:56:21,257 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 17:59:56,722 | INFO | ConversationManager | User: q
2025-10-03 17:59:56,722 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 17:59:56,722 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 17:59:56,737 | INFO | __main__ | Received new chat request
2025-10-03 17:59:56,737 | DEBUG | __main__ | Request ID: 20251003T175211733-9cf6b90f, Data length: 1
2025-10-03 17:59:56,737 | DEBUG | __main__ | Using existing session for ID: 20251003T175211733-9cf6b90f
2025-10-03 17:59:56,737 | INFO | __main__ | Processing user input: 'q' for session 20251003T175211733-9cf6b90f
2025-10-03 17:59:57,602 | INFO | __main__ | Starting retrieval for query: 'trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-03 17:59:57,602 | DEBUG | __main__ | Searching header index...
2025-10-03 17:59:58,644 | DEBUG | __main__ | Header search returned 4 results
2025-10-03 17:59:58,644 | DEBUG | __main__ | Searching content index...
2025-10-03 17:59:58,679 | DEBUG | __main__ | Content search returned 4 results
2025-10-03 17:59:58,679 | DEBUG | __main__ | Calculating combined scores...
2025-10-03 17:59:58,679 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-03 17:59:58,679 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-03 17:59:58,679 | DEBUG | __main__ |   Rank 1: chunk_id=50, hybrid_score=0.9821
2025-10-03 17:59:58,679 | DEBUG | __main__ |   Rank 2: chunk_id=21, hybrid_score=0.5289
2025-10-03 17:59:58,679 | DEBUG | __main__ |   Rank 3: chunk_id=38, hybrid_score=0.5104
2025-10-03 17:59:58,679 | DEBUG | __main__ |   Rank 4: chunk_id=47, hybrid_score=0.5078
2025-10-03 17:59:58,679 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-03 17:59:58,679 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-03 17:59:58,679 | DEBUG | __main__ | Retrieved chunk 38: Trung thu > M√¢m ng≈© qu·∫£ > C√°c lo·∫°i hoa qu·∫£ ph·ªï bi·∫øn | Content preview: Vi·ªác l·ª±a ch·ªçn tr√°i c√¢y c·ª• th·ªÉ th∆∞·ªùng kh√°c nhau t√πy theo v√πng mi·ªÅn, s·ª± kh√°c bi·ªát n√†y kh√¥ng ch·ªâ ph·∫£n √°...
2025-10-03 17:59:58,679 | DEBUG | __main__ | Retrieved chunk 47: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn B·∫Øc Vi·ªát Nam | Content preview: ·ªû mi·ªÅn B·∫Øc, l·ªÖ h·ªôi ƒë∆∞·ª£c t·ªï ch·ª©c v·ªõi s·ª± trang nh√£ tinh t·∫ø v√† s·ª± tr√¢n tr·ªçng s√¢u s·∫Øc ƒë·ªëi v·ªõi truy·ªÅn th·ªë...
2025-10-03 17:59:58,679 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-03 17:59:58,679 | DEBUG | __main__ | Retrieved 4 documents for query: trung thu
2025-10-03 17:59:58,679 | DEBUG | __main__ | [timing] retrieve 1.076s
2025-10-03 18:00:00,001 | INFO | __main__ | Agent execution completed successfully for session 20251003T175211733-9cf6b90f
2025-10-03 18:00:00,001 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 3.264s, Total: 3.264s
2025-10-03 18:00:14,280 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 18:00:14,284 | DEBUG | TTSService | Playback thread started
2025-10-03 18:00:14,284 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 18:00:43,151 | INFO | ConversationManager | User: alo \u1ea1
2025-10-03 18:00:43,151 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 18:00:43,153 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:00:43,153 | INFO | __main__ | Received new chat request
2025-10-03 18:00:43,153 | DEBUG | __main__ | Request ID: 20251003T180014280-c460c1ca, Data length: 5
2025-10-03 18:00:43,153 | DEBUG | __main__ | Creating new session with ID: 20251003T180014280-c460c1ca
2025-10-03 18:00:43,153 | DEBUG | __main__ | Using request ID: 20251003T180014280-c460c1ca
2025-10-03 18:00:43,153 | DEBUG | __main__ | Created new session for ID: 20251003T180014280-c460c1ca, total sessions: 2
2025-10-03 18:00:43,153 | INFO | __main__ | Processing user input: 'alo ·∫°' for session 20251003T180014280-c460c1ca
2025-10-03 18:00:44,323 | INFO | __main__ | Agent execution completed successfully for session 20251003T180014280-c460c1ca
2025-10-03 18:00:44,323 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.170s, Total: 1.170s
2025-10-03 18:00:44,323 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 326
2025-10-03 18:00:44,323 | INFO | RAGClient | RAG reply (len=106)
2025-10-03 18:00:44,323 | INFO | ConversationManager | Bot: ChÔøΩo chÔøΩu, ÔøΩng lÔøΩ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111ÔøΩy. HÔøΩm nay lÔøΩ T\u1ebft Trung Thu \u1edf B\u1ea3o tÔøΩng, chÔøΩu cÔøΩ gÔøΩ mu\u1ed1n h\u1ecfi ÔøΩng khÔøΩng nÔøΩ?
2025-10-03 18:00:44,323 | DEBUG | TTSService | Starting TTS download for text length=106
2025-10-03 18:00:44,323 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 18:00:45,294 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:00:45,718 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:00:55,944 | INFO | ConversationManager | User: ÔøΩNG \u01a0I
2025-10-03 18:00:55,944 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 18:00:55,944 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:00:55,955 | INFO | __main__ | Received new chat request
2025-10-03 18:00:55,956 | DEBUG | __main__ | Request ID: 20251003T180014280-c460c1ca, Data length: 6
2025-10-03 18:00:55,956 | DEBUG | __main__ | Using existing session for ID: 20251003T180014280-c460c1ca
2025-10-03 18:00:55,956 | INFO | __main__ | Processing user input: '√îNG ∆†I' for session 20251003T180014280-c460c1ca
2025-10-03 18:00:57,124 | INFO | __main__ | Agent execution completed successfully for session 20251003T180014280-c460c1ca
2025-10-03 18:00:57,124 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.168s, Total: 1.169s
2025-10-03 18:00:57,124 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 203
2025-10-03 18:00:57,133 | INFO | RAGClient | RAG reply (len=43)
2025-10-03 18:00:57,133 | INFO | ConversationManager | Bot: D\u1ea1, chÔøΩu c\u1ee9 h\u1ecfi \u0111i \u1ea1. ÔøΩng \u0111ang nghe \u0111ÔøΩy nÔøΩ.
2025-10-03 18:00:57,133 | DEBUG | TTSService | Starting TTS download for text length=43
2025-10-03 18:00:57,133 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 18:00:59,298 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:01:12,239 | INFO | ConversationManager | User: ÔøΩng \u01a1i
2025-10-03 18:01:12,239 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 18:01:12,239 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:01:12,257 | INFO | __main__ | Received new chat request
2025-10-03 18:01:12,257 | DEBUG | __main__ | Request ID: 20251003T180014280-c460c1ca, Data length: 6
2025-10-03 18:01:12,257 | DEBUG | __main__ | Using existing session for ID: 20251003T180014280-c460c1ca
2025-10-03 18:01:12,257 | INFO | __main__ | Processing user input: '√¥ng ∆°i' for session 20251003T180014280-c460c1ca
2025-10-03 18:01:13,434 | INFO | __main__ | Agent execution completed successfully for session 20251003T180014280-c460c1ca
2025-10-03 18:01:13,434 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.176s, Total: 1.176s
2025-10-03 18:01:13,444 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 203
2025-10-03 18:01:13,444 | INFO | RAGClient | RAG reply (len=43)
2025-10-03 18:01:13,444 | INFO | ConversationManager | Bot: D\u1ea1, chÔøΩu c\u1ee9 h\u1ecfi \u0111i \u1ea1. ÔøΩng \u0111ang nghe \u0111ÔøΩy nÔøΩ.
2025-10-03 18:01:13,444 | DEBUG | TTSService | Starting TTS download for text length=43
2025-10-03 18:01:13,444 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 18:01:14,296 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:01:27,144 | INFO | ConversationManager | User: sao ÔøΩng l\u1ea1i d\u1ea1 chÔøΩu tr\u1ebb h\u01a1n ÔøΩng mÔøΩ
2025-10-03 18:01:27,144 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 18:01:27,144 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:01:27,169 | INFO | __main__ | Received new chat request
2025-10-03 18:01:27,170 | DEBUG | __main__ | Request ID: 20251003T180014280-c460c1ca, Data length: 34
2025-10-03 18:01:27,170 | DEBUG | __main__ | Using existing session for ID: 20251003T180014280-c460c1ca
2025-10-03 18:01:27,170 | INFO | __main__ | Processing user input: 'sao √¥ng l·∫°i d·∫° ch√°u tr·∫ª h∆°n √¥ng m√†' for session 20251003T180014280-c460c1ca
2025-10-03 18:01:28,475 | INFO | __main__ | Agent execution completed successfully for session 20251003T180014280-c460c1ca
2025-10-03 18:01:28,475 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.305s, Total: 1.306s
2025-10-03 18:01:28,475 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 569
2025-10-03 18:01:28,475 | INFO | RAGClient | RAG reply (len=209)
2025-10-03 18:01:28,475 | INFO | ConversationManager | Bot: ÔøΩ, chÔøΩu \u01a1i, ÔøΩng lÔøΩ Ti\u1ebfn s\u0129 Gi\u1ea5y mÔøΩ, ÔøΩng ph\u1ea3i x\u01b0ng hÔøΩ v\u1edbi cÔøΩc chÔøΩu nh\u1ecf lÔøΩ 'ÔøΩng' vÔøΩ g\u1ecdi cÔøΩc chÔøΩu lÔøΩ 'chÔøΩu' cho nÔøΩ thÔøΩn th\u01b0\u01a1ng ch\u1ee9. Nh\u01b0 v\u1eady m\u1edbi \u0111ÔøΩng phÔøΩp t\u1eafc c\u1ee7a ÔøΩng bÔøΩ ngÔøΩy x\u01b0a \u0111ÔøΩ chÔøΩu. ChÔøΩu th\u1ea5y cÔøΩ l\u1ea1 khÔøΩng nÔøΩ?
2025-10-03 18:01:28,475 | DEBUG | TTSService | Starting TTS download for text length=209
2025-10-03 18:01:28,475 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 18:01:30,186 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:01:30,487 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:01:30,623 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-03 18:01:31,977 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:01:32,166 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-03 18:03:33,380 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-03 18:03:34,109 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-03 18:03:34,109 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-03 18:03:34,109 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-03 18:03:44,160 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (2): huggingface.co:443
2025-10-03 18:03:54,224 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (3): huggingface.co:443
2025-10-03 18:04:04,296 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (4): huggingface.co:443
2025-10-03 18:04:14,362 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (5): huggingface.co:443
2025-10-03 18:04:24,421 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (6): huggingface.co:443
2025-10-03 18:04:25,787 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-03 18:04:25,802 | DEBUG | TTSService | Playback thread started
2025-10-03 18:04:25,803 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-03 18:04:34,035 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-03 18:04:34,556 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (7): huggingface.co:443
2025-10-03 18:04:36,807 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-03 18:04:36,813 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-03 18:04:36,815 | INFO | Recorder | Sending to ASR server...
2025-10-03 18:04:36,815 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-03 18:04:36,830 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-03 18:04:44,653 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (8): huggingface.co:443
2025-10-03 18:04:55,408 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 69
2025-10-03 18:04:55,408 | INFO | WhisperSTT | Transcription received: a lÔøΩ \u1ea1 chÔøΩo chÔøΩu khÔøΩng
2025-10-03 18:04:55,409 | INFO | ConversationManager | User: a lÔøΩ \u1ea1 chÔøΩo chÔøΩu khÔøΩng
2025-10-03 18:04:55,409 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-03 18:04:55,411 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:04:55,698 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (9): huggingface.co:443
2025-10-03 18:04:57,439 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001CC03DD4D10>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 18:04:58,439 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-03 18:04:58,440 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:05:00,494 | WARNING | RAGClient | RAG request failed (attempt 2). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001CC03DD6E50>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 18:05:02,495 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-03 18:05:02,495 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-03 18:05:04,541 | WARNING | RAGClient | RAG request failed (attempt 3). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Max retries exceeded with url: /chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001CC03DE13D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
2025-10-03 18:05:05,781 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (10): huggingface.co:443
2025-10-03 18:05:07,541 | ERROR | RAGClient | RAG request failed after retries
2025-10-03 18:05:07,541 | WARNING | ConversationManager | Empty reply from RAG; using backup string
2025-10-03 18:05:07,541 | INFO | ConversationManager | Bot: ChÔøΩu ch\u1edd ÔøΩng m\u1ed9t chÔøΩt nha.
2025-10-03 18:05:07,542 | DEBUG | TTSService | Starting TTS download for text length=26
2025-10-03 18:05:07,547 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:06:16,861 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 08:06:16,861 | DEBUG | TTSService | Playback thread started
2025-10-04 08:06:16,861 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 08:06:18,161 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 08:06:19,401 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 08:06:19,401 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 08:06:19,416 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 08:06:19,808 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 08:06:19,856 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 08:06:20,790 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 08:06:20,837 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 08:06:21,140 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 08:06:21,181 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 08:06:21,450 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 08:06:21,499 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 08:06:21,792 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 08:06:21,840 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 08:06:22,149 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 08:06:22,197 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 08:06:22,553 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 08:06:22,822 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 08:06:22,870 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 08:06:25,861 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 08:06:25,898 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 08:06:26,576 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 08:06:28,228 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 08:06:28,263 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 08:06:28,578 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 08:06:43,248 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 08:06:43,248 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 08:06:43,248 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 08:06:43,248 | INFO | faiss.loader | Loading faiss.
2025-10-04 08:06:43,904 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 08:07:04,590 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:07:06,421 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 08:07:06,421 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 08:07:06,440 | INFO | Recorder | Sending to ASR server...
2025-10-04 08:07:06,442 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 08:07:06,445 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 08:07:35,174 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 37
2025-10-04 08:07:35,174 | INFO | WhisperSTT | Transcription received: l  n\u0103m nay
2025-10-04 08:07:35,176 | INFO | ConversationManager | User: l  n\u0103m nay
2025-10-04 08:07:35,176 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 08:07:35,176 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:07:35,187 | INFO | __main__ | Received new chat request
2025-10-04 08:07:35,188 | DEBUG | __main__ | Request ID: 20251004T080616861-b608cdc1, Data length: 10
2025-10-04 08:07:35,188 | DEBUG | __main__ | Creating new session with ID: 20251004T080616861-b608cdc1
2025-10-04 08:07:35,188 | DEBUG | __main__ | Using request ID: 20251004T080616861-b608cdc1
2025-10-04 08:07:35,188 | DEBUG | __main__ | Created new session for ID: 20251004T080616861-b608cdc1, total sessions: 1
2025-10-04 08:07:36,166 | INFO | __main__ | Processing user input: 'l  nƒÉm nay' for session 20251004T080616861-b608cdc1
2025-10-04 08:07:39,562 | INFO | __main__ | Agent execution completed successfully for session 20251004T080616861-b608cdc1
2025-10-04 08:07:39,562 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 4.374s, Total: 4.375s
2025-10-04 08:07:39,563 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 185
2025-10-04 08:07:39,564 | INFO | RAGClient | RAG reply (len=40)
2025-10-04 08:07:39,564 | INFO | ConversationManager | Bot: ChÔøΩu h\u1ecfi gÔøΩ v\u1ec1 n\u0103m nay th\u1ebf, ÔøΩng nghe nÔøΩ.
2025-10-04 08:07:39,564 | DEBUG | TTSService | Starting TTS download for text length=40
2025-10-04 08:07:39,565 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:07:41,997 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 08:07:48,454 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:07:51,058 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 08:07:51,071 | INFO | Recorder | Recording finished (elapsed 2.6s).
2025-10-04 08:07:51,077 | INFO | Recorder | Sending to ASR server...
2025-10-04 08:07:51,077 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 08:07:51,085 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 08:08:21,106 | ERROR | WhisperSTT | Failed to connect to ASR server: HTTPConnectionPool(host='127.0.0.1', port=5000): Read timed out. (read timeout=30)
2025-10-04 08:08:21,106 | INFO | ConversationManager | User: <system> \u0110ang cÔøΩ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 08:08:21,106 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 08:08:21,109 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:08:21,109 | INFO | __main__ | Received new chat request
2025-10-04 08:08:21,109 | DEBUG | __main__ | Request ID: 20251004T080616861-b608cdc1, Data length: 39
2025-10-04 08:08:21,109 | DEBUG | __main__ | Using existing session for ID: 20251004T080616861-b608cdc1
2025-10-04 08:08:21,193 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T080616861-b608cdc1
2025-10-04 08:08:21,367 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 2.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 39.448923485s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 39
}
].
2025-10-04 08:08:23,508 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 4.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 37.299887213s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 37
}
].
2025-10-04 08:08:27,656 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 8.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 33.15545315s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 33
}
].
2025-10-04 08:08:35,806 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 16.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 25.000774364s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
].
2025-10-04 08:08:46,201 | ERROR | __main__ | Agent execution timeout for session 20251004T080616861-b608cdc1 after 25 seconds
2025-10-04 08:08:46,202 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 504 48
2025-10-04 08:08:46,202 | WARNING | RAGClient | RAG request failed (attempt 1). Error: 504 Server Error: GATEWAY TIMEOUT for url: http://127.0.0.1:7000/chat
2025-10-04 08:08:47,203 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 08:08:47,203 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:08:47,215 | INFO | __main__ | Received new chat request
2025-10-04 08:08:47,215 | DEBUG | __main__ | Request ID: 20251004T080616861-b608cdc1, Data length: 39
2025-10-04 08:08:47,215 | DEBUG | __main__ | Using existing session for ID: 20251004T080616861-b608cdc1
2025-10-04 08:08:47,272 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T080616861-b608cdc1
2025-10-04 08:08:47,424 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 2.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 13.393537314s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 13
}
].
2025-10-04 08:08:49,573 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 4.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 11.234000112s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 11
}
].
2025-10-04 08:08:51,969 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 32.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 8.850989491s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 8
}
].
2025-10-04 08:08:53,742 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 8.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 7.0752915s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 7
}
].
2025-10-04 08:09:01,877 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 16.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 58.931078385s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 58
}
].
2025-10-04 08:09:12,280 | ERROR | __main__ | Agent execution timeout for session 20251004T080616861-b608cdc1 after 25 seconds
2025-10-04 08:09:12,280 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 504 48
2025-10-04 08:09:12,280 | WARNING | RAGClient | RAG request failed (attempt 2). Error: 504 Server Error: GATEWAY TIMEOUT for url: http://127.0.0.1:7000/chat
2025-10-04 08:09:14,282 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-04 08:09:14,282 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:09:14,300 | INFO | __main__ | Received new chat request
2025-10-04 08:09:14,300 | DEBUG | __main__ | Request ID: 20251004T080616861-b608cdc1, Data length: 39
2025-10-04 08:09:14,300 | DEBUG | __main__ | Using existing session for ID: 20251004T080616861-b608cdc1
2025-10-04 08:09:14,356 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T080616861-b608cdc1
2025-10-04 08:09:14,575 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 2.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 46.318604641s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
].
2025-10-04 08:09:16,870 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 4.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 44.064698798s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 44
}
].
2025-10-04 08:09:18,124 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 32.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 42.797839439s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 42
}
].
2025-10-04 08:09:21,053 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 8.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 39.778547685s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 39
}
].
2025-10-04 08:09:29,276 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 16.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 31.592055079s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 31
}
].
2025-10-04 08:09:39,377 | ERROR | __main__ | Agent execution timeout for session 20251004T080616861-b608cdc1 after 25 seconds
2025-10-04 08:09:39,377 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 504 48
2025-10-04 08:09:39,377 | WARNING | RAGClient | RAG request failed (attempt 3). Error: 504 Server Error: GATEWAY TIMEOUT for url: http://127.0.0.1:7000/chat
2025-10-04 08:09:42,379 | ERROR | RAGClient | RAG request failed after retries
2025-10-04 08:09:42,379 | WARNING | ConversationManager | Empty reply from RAG; using backup string
2025-10-04 08:09:42,379 | INFO | ConversationManager | Bot: ChÔøΩu ch\u1edd ÔøΩng m\u1ed9t chÔøΩt nha.
2025-10-04 08:09:42,380 | DEBUG | TTSService | Starting TTS download for text length=26
2025-10-04 08:09:42,380 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:09:44,755 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 08:09:45,509 | WARNING | langchain_google_genai.chat_models | Retrying langchain_google_genai.chat_models._chat_with_retry.<locals>._chat_with_retry in 32.0 seconds as it raised ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 1000
Please retry in 15.334304211s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
].
2025-10-04 08:13:30,416 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:13:45,433 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 08:13:45,433 | DEBUG | TTSService | Playback thread started
2025-10-04 08:13:45,433 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 08:15:08,319 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:37:15,614 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 08:37:16,489 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 08:37:16,490 | DEBUG | TTSService | Playback thread started
2025-10-04 08:37:16,490 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 08:37:16,984 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 08:37:16,984 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 08:37:16,987 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 08:37:17,789 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 08:37:17,822 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 08:37:18,179 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 08:37:18,236 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 08:37:18,538 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 08:37:18,569 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 08:37:18,863 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 08:37:18,905 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 08:37:19,214 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 08:37:19,256 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 08:37:19,564 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 08:37:19,594 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 08:37:19,894 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 08:37:20,202 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 08:37:20,231 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 08:37:21,299 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 08:37:21,343 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 08:37:21,780 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 08:37:22,918 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 08:37:22,966 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 08:37:23,270 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 08:37:32,565 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 08:37:32,565 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 08:37:32,565 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 08:37:32,565 | INFO | faiss.loader | Loading faiss.
2025-10-04 08:37:33,314 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 08:38:18,099 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:38:19,625 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 08:38:19,641 | INFO | Recorder | Recording finished (elapsed 1.5s).
2025-10-04 08:38:19,651 | INFO | Recorder | Sending to ASR server...
2025-10-04 08:38:19,653 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 08:38:19,657 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 08:38:19,674 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 503 33
2025-10-04 08:38:19,674 | ERROR | WhisperSTT | Failed to connect to ASR server: 503 Server Error: SERVICE UNAVAILABLE for url: http://127.0.0.1:5000/transcribe
2025-10-04 08:38:19,674 | INFO | ConversationManager | User: <system> \u0110ang cÔøΩ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 08:38:19,675 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 08:38:19,675 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:38:19,691 | INFO | __main__ | Received new chat request
2025-10-04 08:38:19,691 | DEBUG | __main__ | Request ID: 20251004T083716488-1957154b, Data length: 39
2025-10-04 08:38:19,691 | DEBUG | __main__ | Creating new session with ID: 20251004T083716488-1957154b
2025-10-04 08:38:19,691 | DEBUG | __main__ | Using request ID: 20251004T083716488-1957154b
2025-10-04 08:38:19,691 | DEBUG | __main__ | Created new session for ID: 20251004T083716488-1957154b, total sessions: 1
2025-10-04 08:38:20,745 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T083716488-1957154b
2025-10-04 08:38:22,051 | INFO | __main__ | Agent execution completed successfully for session 20251004T083716488-1957154b
2025-10-04 08:38:22,051 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.359s, Total: 2.360s
2025-10-04 08:38:22,051 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 433
2025-10-04 08:38:22,051 | INFO | RAGClient | RAG reply (len=158)
2025-10-04 08:38:22,051 | INFO | ConversationManager | Bot: ÔøΩi, chÔøΩu \u01a1i, hÔøΩnh nh\u01b0 m\u1ea1ng nhÔøΩ mÔøΩnh \u0111ang h\u01a1i 'lag' tÔøΩ chÔøΩu \u1ea1. ÔøΩng c\u0169ng \u0111ang c\u1ed1 g\u1eafng k\u1ebft n\u1ed1i \u0111ÔøΩy. ChÔøΩu \u0111\u1ee3i ÔøΩng m\u1ed9t chÔøΩt nhÔøΩ, ho\u1eb7c chÔøΩu th\u1eed h\u1ecfi l\u1ea1i xem sao nha.
2025-10-04 08:38:22,051 | DEBUG | TTSService | Starting TTS download for text length=158
2025-10-04 08:38:22,051 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:38:24,098 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 08:38:24,305 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 08:38:24,328 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:38:25,917 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 08:39:27,333 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:39:29,130 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 08:39:29,130 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 08:39:29,149 | INFO | Recorder | Sending to ASR server...
2025-10-04 08:39:29,150 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 08:39:29,152 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 08:39:31,897 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 37
2025-10-04 08:39:31,897 | INFO | WhisperSTT | Transcription received: . A lÔøΩ, alo
2025-10-04 08:39:31,897 | INFO | ConversationManager | User: . A lÔøΩ, alo
2025-10-04 08:39:31,897 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 08:39:31,905 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:39:31,928 | INFO | __main__ | Received new chat request
2025-10-04 08:39:31,928 | DEBUG | __main__ | Request ID: 20251004T083716488-1957154b, Data length: 11
2025-10-04 08:39:31,928 | DEBUG | __main__ | Using existing session for ID: 20251004T083716488-1957154b
2025-10-04 08:39:31,945 | INFO | __main__ | Processing user input: '. A l√¥, alo' for session 20251004T083716488-1957154b
2025-10-04 08:39:32,840 | INFO | __main__ | Agent execution completed successfully for session 20251004T083716488-1957154b
2025-10-04 08:39:32,840 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.912s, Total: 0.912s
2025-10-04 08:39:32,841 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 235
2025-10-04 08:39:32,842 | INFO | RAGClient | RAG reply (len=62)
2025-10-04 08:39:32,842 | INFO | ConversationManager | Bot: A lÔøΩ, chÔøΩu \u01a1i, ÔøΩng nghe \u0111ÔøΩy. ChÔøΩu cÔøΩ gÔøΩ mu\u1ed1n h\u1ecfi ÔøΩng khÔøΩng nÔøΩ?
2025-10-04 08:39:32,842 | DEBUG | TTSService | Starting TTS download for text length=62
2025-10-04 08:39:32,842 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:39:36,178 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 08:39:46,989 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 08:39:49,513 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 08:39:49,515 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 08:39:49,522 | INFO | Recorder | Sending to ASR server...
2025-10-04 08:39:49,526 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 08:39:49,527 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 08:39:56,349 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 81
2025-10-04 08:39:56,349 | INFO | WhisperSTT | Transcription received: ÔøΩng nghe rÔøΩ chÔøΩu nÔøΩi gÔøΩ khÔøΩng
2025-10-04 08:39:56,349 | INFO | ConversationManager | User: ÔøΩng nghe rÔøΩ chÔøΩu nÔøΩi gÔøΩ khÔøΩng
2025-10-04 08:39:56,350 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 08:39:56,351 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 08:39:56,362 | INFO | __main__ | Received new chat request
2025-10-04 08:39:56,362 | DEBUG | __main__ | Request ID: 20251004T083716488-1957154b, Data length: 29
2025-10-04 08:39:56,362 | DEBUG | __main__ | Using existing session for ID: 20251004T083716488-1957154b
2025-10-04 08:39:56,378 | INFO | __main__ | Processing user input: '√¥ng nghe r√µ ch√°u n√≥i g√¨ kh√¥ng' for session 20251004T083716488-1957154b
2025-10-04 08:39:57,159 | INFO | __main__ | Agent execution completed successfully for session 20251004T083716488-1957154b
2025-10-04 08:39:57,159 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 0.796s, Total: 0.797s
2025-10-04 08:39:57,159 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 218
2025-10-04 08:39:57,159 | INFO | RAGClient | RAG reply (len=55)
2025-10-04 08:39:57,159 | INFO | ConversationManager | Bot: ÔøΩng nghe rÔøΩ chÔøΩu nÔøΩi nÔøΩ. ChÔøΩu cÔøΩ gÔøΩ mu\u1ed1n h\u1ecfi ÔøΩng khÔøΩng?
2025-10-04 08:39:57,159 | DEBUG | TTSService | Starting TTS download for text length=55
2025-10-04 08:39:57,159 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 08:39:58,681 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:01:45,293 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 09:01:45,294 | DEBUG | TTSService | Playback thread started
2025-10-04 09:01:45,294 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 09:01:56,528 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 09:01:57,730 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 09:01:57,730 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 09:01:57,730 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 09:01:58,645 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 09:01:58,757 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 09:01:59,865 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 09:02:00,026 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 09:02:00,433 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 09:02:00,583 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 09:02:00,931 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 09:02:00,993 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 09:02:01,286 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 09:02:01,338 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 09:02:01,670 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 09:02:01,728 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 09:02:02,821 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 09:02:03,191 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 09:02:03,336 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 09:02:05,976 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 09:02:06,049 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 09:02:07,048 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 09:02:09,192 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 09:02:09,276 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 09:02:09,581 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 09:02:22,313 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 09:02:22,314 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 09:02:22,315 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 09:02:22,315 | INFO | faiss.loader | Loading faiss.
2025-10-04 09:02:23,493 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 09:02:37,713 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:02:38,230 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:02:38,237 | INFO | Recorder | Recording finished (elapsed 0.5s).
2025-10-04 09:02:38,244 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:02:38,249 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:02:38,253 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:02:41,147 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 38
2025-10-04 09:02:41,147 | INFO | WhisperSTT | Transcription received: hosking\u8981ai.
2025-10-04 09:02:41,147 | INFO | ConversationManager | User: hosking\u8981ai.
2025-10-04 09:02:41,147 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:02:41,147 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:02:41,161 | INFO | __main__ | Received new chat request
2025-10-04 09:02:41,161 | DEBUG | __main__ | Request ID: 20251004T090145293-b2d69544, Data length: 11
2025-10-04 09:02:41,161 | DEBUG | __main__ | Creating new session with ID: 20251004T090145293-b2d69544
2025-10-04 09:02:41,161 | DEBUG | __main__ | Using request ID: 20251004T090145293-b2d69544
2025-10-04 09:02:41,162 | DEBUG | __main__ | Created new session for ID: 20251004T090145293-b2d69544, total sessions: 1
2025-10-04 09:02:42,041 | INFO | __main__ | Processing user input: 'hoskingË¶Åai.' for session 20251004T090145293-b2d69544
2025-10-04 09:02:43,188 | INFO | __main__ | Agent execution completed successfully for session 20251004T090145293-b2d69544
2025-10-04 09:02:43,188 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 2.025s, Total: 2.027s
2025-10-04 09:02:43,190 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 359
2025-10-04 09:02:43,191 | INFO | RAGClient | RAG reply (len=124)
2025-10-04 09:02:43,191 | INFO | ConversationManager | Bot: ChÔøΩo chÔøΩu, ÔøΩng lÔøΩ Ti\u1ebfn s\u0129 Gi\u1ea5y AI \u0111ÔøΩy. HÔøΩm nay lÔøΩ T\u1ebft Trung Thu, chÔøΩu cÔøΩ cÔøΩu h\u1ecfi gÔøΩ v\u1ec1 ngÔøΩy l\u1ec5 nÔøΩy hay v\u1ec1 b\u1ea3o tÔøΩng khÔøΩng nÔøΩ?
2025-10-04 09:02:43,191 | DEBUG | TTSService | Starting TTS download for text length=124
2025-10-04 09:02:43,191 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:02:43,192 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:02:43,192 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:02:45,418 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:02:45,608 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:03:13,265 | INFO | Recorder | Recording finished (elapsed 30.1s).
2025-10-04 09:03:13,277 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:03:13,281 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:03:13,282 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:03:15,693 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 34
2025-10-04 09:03:15,693 | INFO | WhisperSTT | Transcription received: , alo alo alo
2025-10-04 09:03:15,693 | INFO | ConversationManager | User: , alo alo alo
2025-10-04 09:03:15,693 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:03:15,693 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:03:15,708 | INFO | __main__ | Received new chat request
2025-10-04 09:03:15,708 | DEBUG | __main__ | Request ID: 20251004T090145293-b2d69544, Data length: 13
2025-10-04 09:03:15,708 | DEBUG | __main__ | Using existing session for ID: 20251004T090145293-b2d69544
2025-10-04 09:03:15,721 | INFO | __main__ | Processing user input: ', alo alo alo' for session 20251004T090145293-b2d69544
2025-10-04 09:03:16,476 | INFO | __main__ | Agent execution completed successfully for session 20251004T090145293-b2d69544
2025-10-04 09:03:16,476 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.768s, Total: 0.768s
2025-10-04 09:03:16,482 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 228
2025-10-04 09:03:16,482 | INFO | RAGClient | RAG reply (len=60)
2025-10-04 09:03:16,482 | INFO | ConversationManager | Bot: Alo chÔøΩu \u01a1i, ÔøΩng nghe \u0111ÔøΩy. ChÔøΩu cÔøΩ gÔøΩ mu\u1ed1n h\u1ecfi ÔøΩng khÔøΩng nÔøΩ?
2025-10-04 09:03:16,482 | DEBUG | TTSService | Starting TTS download for text length=60
2025-10-04 09:03:16,482 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:03:16,482 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:03:16,482 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:03:18,083 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:03:27,925 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 09:03:27,925 | DEBUG | TTSService | Playback thread started
2025-10-04 09:03:27,925 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 09:04:28,864 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:04:32,086 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:04:32,086 | INFO | Recorder | Recording finished (elapsed 3.2s).
2025-10-04 09:04:32,107 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:04:32,108 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:04:32,108 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:04:34,549 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 86
2025-10-04 09:04:34,549 | INFO | WhisperSTT | Transcription received: a lÔøΩ a lÔøΩ ÔøΩng nghe dao cho nÔøΩ hay khÔøΩng
2025-10-04 09:04:34,550 | INFO | ConversationManager | User: a lÔøΩ a lÔøΩ ÔøΩng nghe dao cho nÔøΩ hay khÔøΩng
2025-10-04 09:04:34,550 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:04:34,552 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:04:34,566 | INFO | __main__ | Received new chat request
2025-10-04 09:04:34,568 | DEBUG | __main__ | Request ID: 20251004T090327925-a4ed7e4f, Data length: 39
2025-10-04 09:04:34,568 | DEBUG | __main__ | Creating new session with ID: 20251004T090327925-a4ed7e4f
2025-10-04 09:04:34,568 | DEBUG | __main__ | Using request ID: 20251004T090327925-a4ed7e4f
2025-10-04 09:04:34,568 | DEBUG | __main__ | Created new session for ID: 20251004T090327925-a4ed7e4f, total sessions: 2
2025-10-04 09:04:34,586 | INFO | __main__ | Processing user input: 'a l√¥ a l√¥ √¥ng nghe dao cho n√≥ hay kh√¥ng' for session 20251004T090327925-a4ed7e4f
2025-10-04 09:04:35,102 | INFO | __main__ | Agent execution completed successfully for session 20251004T090327925-a4ed7e4f
2025-10-04 09:04:35,102 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.534s, Total: 0.536s
2025-10-04 09:04:35,102 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 289
2025-10-04 09:04:35,102 | INFO | RAGClient | RAG reply (len=86)
2025-10-04 09:04:35,102 | INFO | ConversationManager | Bot: ChÔøΩo chÔøΩu, ÔøΩng lÔøΩ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111ÔøΩy. ÔøΩng nghe rÔøΩ l\u1eafm, chÔøΩu cÔøΩ gÔøΩ mu\u1ed1n h\u1ecfi ÔøΩng khÔøΩng nÔøΩ?
2025-10-04 09:04:35,102 | DEBUG | TTSService | Starting TTS download for text length=86
2025-10-04 09:04:35,102 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:04:37,172 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:04:37,441 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:10:37,333 | INFO | Loading ASR model 'erax-ai/EraX-WoW-Turbo-V1.1-CT2'...
2025-10-04 09:10:43,449 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 09:10:43,903 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 09:10:43,903 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 09:10:43,903 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 09:10:44,304 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 09:10:44,349 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 09:10:44,645 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 09:10:44,674 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 09:10:44,956 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 09:10:44,991 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 09:10:45,312 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 09:10:45,367 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 09:10:46,190 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 09:10:46,223 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 09:10:46,505 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 09:10:46,545 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 09:10:46,826 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 09:10:47,110 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 09:10:47,142 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 09:10:47,580 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 09:10:47,611 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 09:10:47,929 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 09:10:48,941 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 09:10:48,976 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 09:10:49,266 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 09:10:59,713 | INFO | ASR model loaded successfully.
2025-10-04 09:10:59,726 | INFO | [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.158:5000
2025-10-04 09:10:59,726 | INFO | [33mPress CTRL+C to quit[0m
2025-10-04 09:11:00,257 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 09:11:00,257 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 09:11:00,257 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 09:11:00,257 | INFO | faiss.loader | Loading faiss.
2025-10-04 09:11:00,376 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 09:11:09,531 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:11:12,430 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:11:12,430 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 09:11:12,437 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:11:12,437 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:11:12,445 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:11:12,446 | INFO | Transcribing audio...
2025-10-04 09:11:12,446 | INFO | Processing audio with duration 00:30.000
2025-10-04 09:11:14,098 | INFO | Detected language 'vi' with probability 0.02
2025-10-04 09:11:15,276 | INFO | Transcription complete:  nÔøΩo \u0111\u1ec3 trao \u0111\u1ed5i kh\u1ea9u m\u1ee5c \u0111ÔøΩch.
2025-10-04 09:11:15,276 | INFO | 127.0.0.1 - - [04/Oct/2025 09:11:15] "POST /transcribe HTTP/1.1" 200 -
2025-10-04 09:11:15,276 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 97
2025-10-04 09:11:15,276 | INFO | WhisperSTT | Transcription received: nÔøΩo \u0111\u1ec3 trao \u0111\u1ed5i kh\u1ea9u m\u1ee5c \u0111ÔøΩch.
2025-10-04 09:11:15,276 | INFO | ConversationManager | User: nÔøΩo \u0111\u1ec3 trao \u0111\u1ed5i kh\u1ea9u m\u1ee5c \u0111ÔøΩch.
2025-10-04 09:11:15,276 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:11:15,276 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:11:15,288 | INFO | __main__ | Received new chat request
2025-10-04 09:11:15,288 | DEBUG | __main__ | Request ID: 20251004T090327925-a4ed7e4f, Data length: 30
2025-10-04 09:11:15,288 | DEBUG | __main__ | Creating new session with ID: 20251004T090327925-a4ed7e4f
2025-10-04 09:11:15,288 | DEBUG | __main__ | Using request ID: 20251004T090327925-a4ed7e4f
2025-10-04 09:11:15,288 | DEBUG | __main__ | Created new session for ID: 20251004T090327925-a4ed7e4f, total sessions: 1
2025-10-04 09:11:16,112 | INFO | __main__ | Processing user input: 'n√†o ƒë·ªÉ trao ƒë·ªïi kh·∫©u m·ª•c ƒë√≠ch.' for session 20251004T090327925-a4ed7e4f
2025-10-04 09:11:17,562 | INFO | __main__ | Agent execution completed successfully for session 20251004T090327925-a4ed7e4f
2025-10-04 09:11:17,562 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.274s, Total: 2.274s
2025-10-04 09:11:17,563 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 453
2025-10-04 09:11:17,563 | INFO | RAGClient | RAG reply (len=168)
2025-10-04 09:11:17,563 | INFO | ConversationManager | Bot: ChÔøΩo chÔøΩu, ÔøΩng lÔøΩ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111ÔøΩy. ChÔøΩu h\u1ecfi gÔøΩ mÔøΩ nghe l\u1ea1 th\u1ebf, 'trao \u0111\u1ed5i kh\u1ea9u m\u1ee5c \u0111ÔøΩch' lÔøΩ sao nh\u1ec9? ÔøΩng ch\u01b0a nghe bao gi\u1edd luÔøΩn ÔøΩ. ChÔøΩu nÔøΩi rÔøΩ h\u01a1n cho ÔøΩng hi\u1ec3u v\u1edbi nhÔøΩ.
2025-10-04 09:11:17,563 | DEBUG | TTSService | Starting TTS download for text length=168
2025-10-04 09:11:17,563 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:11:19,766 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:11:19,799 | ERROR | TTSService | playback write error
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 337, in _playback_worker
    out.write(pcm)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1565, in write
    return RawOutputStream.write(self, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1346, in write
    _check(err)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 2802, in _check
    raise PortAudioError(errormsg, err, hosterror_info)
sounddevice.PortAudioError: Unanticipated host error [PaErrorCode -9999]: 'There is no driver installed on your system.' [MME error 6]
2025-10-04 09:11:20,142 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:11:20,164 | ERROR | TTSService | playback write error
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 337, in _playback_worker
    out.write(pcm)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1565, in write
    return RawOutputStream.write(self, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1346, in write
    _check(err)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 2802, in _check
    raise PortAudioError(errormsg, err, hosterror_info)
sounddevice.PortAudioError: Unanticipated host error [PaErrorCode -9999]: 'There is no driver installed on your system.' [MME error 6]
2025-10-04 09:11:20,164 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:11:21,228 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:11:21,239 | ERROR | TTSService | playback write error
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 337, in _playback_worker
    out.write(pcm)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1565, in write
    return RawOutputStream.write(self, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1346, in write
    _check(err)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 2802, in _check
    raise PortAudioError(errormsg, err, hosterror_info)
sounddevice.PortAudioError: Unanticipated host error [PaErrorCode -9999]: 'There is no driver installed on your system.' [MME error 6]




2025-10-04 09:13:43,077 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:13:44,832 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:13:44,836 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 09:13:44,843 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:13:44,843 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:13:44,843 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:13:44,872 | INFO | Transcribing audio...
2025-10-04 09:13:44,872 | INFO | Processing audio with duration 00:30.000
2025-10-04 09:13:48,196 | INFO | Detected language 'de' with probability 0.02
2025-10-04 09:13:51,649 | INFO | Transcription complete:  l\u01b0u, alo, alo
2025-10-04 09:13:51,649 | INFO | 127.0.0.1 - - [04/Oct/2025 09:13:51] "POST /transcribe HTTP/1.1" 200 -
2025-10-04 09:13:51,649 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 40
2025-10-04 09:13:51,649 | INFO | WhisperSTT | Transcription received: l\u01b0u, alo, alo
2025-10-04 09:13:51,649 | INFO | ConversationManager | User: l\u01b0u, alo, alo
2025-10-04 09:13:51,649 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:13:51,665 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:13:51,682 | INFO | __main__ | Received new chat request
2025-10-04 09:13:51,682 | DEBUG | __main__ | Request ID: 20251004T090327925-a4ed7e4f, Data length: 13
2025-10-04 09:13:51,682 | DEBUG | __main__ | Using existing session for ID: 20251004T090327925-a4ed7e4f
2025-10-04 09:13:51,697 | INFO | __main__ | Processing user input: 'l∆∞u, alo, alo' for session 20251004T090327925-a4ed7e4f
2025-10-04 09:13:52,750 | INFO | __main__ | Agent execution completed successfully for session 20251004T090327925-a4ed7e4f
2025-10-04 09:13:52,750 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.067s, Total: 1.068s
2025-10-04 09:13:52,750 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 312
2025-10-04 09:13:52,750 | INFO | RAGClient | RAG reply (len=107)
2025-10-04 09:13:52,750 | INFO | ConversationManager | Bot: Alo alo, chÔøΩu \u01a1i, cÔøΩ gÔøΩ khÔøΩng nÔøΩ? ÔøΩng \u0111ang nghe \u0111ÔøΩy. ChÔøΩu cÔøΩ cÔøΩu h\u1ecfi gÔøΩ v\u1ec1 Trung Thu hay v\u1ec1 b\u1ea3o tÔøΩng khÔøΩng?
2025-10-04 09:13:52,750 | DEBUG | TTSService | Starting TTS download for text length=107
2025-10-04 09:13:52,750 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:13:55,426 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:13:55,452 | ERROR | TTSService | playback write error
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 337, in _playback_worker
    out.write(pcm)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1565, in write
    return RawOutputStream.write(self, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1346, in write
    _check(err)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 2802, in _check
    raise PortAudioError(errormsg, err, hosterror_info)
sounddevice.PortAudioError: Unanticipated host error [PaErrorCode -9999]: 'There is no driver installed on your system.' [MME error 6]
2025-10-04 09:13:55,597 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:13:55,619 | ERROR | TTSService | playback write error
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 337, in _playback_worker
    out.write(pcm)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1565, in write
    return RawOutputStream.write(self, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 1346, in write
    _check(err)
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\sounddevice.py", line 2802, in _check
    raise PortAudioError(errormsg, err, hosterror_info)
sounddevice.PortAudioError: Unanticipated host error [PaErrorCode -9999]: 'There is no driver installed on your system.' [MME error 6]
2025-10-04 09:14:31,559 | INFO | Loading ASR model 'erax-ai/EraX-WoW-Turbo-V1.1-CT2'...
2025-10-04 09:14:42,683 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 09:14:42,683 | DEBUG | TTSService | Playback thread started
2025-10-04 09:14:42,683 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 09:14:46,150 | INFO | ASR model loaded successfully.
2025-10-04 09:14:46,150 | INFO | [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.158:5000
2025-10-04 09:14:46,150 | INFO | [33mPress CTRL+C to quit[0m
2025-10-04 09:14:49,293 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 09:14:49,776 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 09:14:49,776 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 09:14:49,776 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 09:14:50,154 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 09:14:50,227 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 09:14:50,520 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 09:14:50,574 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 09:14:50,869 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 09:14:50,912 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 09:14:51,185 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 09:14:51,285 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 09:14:51,570 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 09:14:51,603 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 09:14:51,885 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 09:14:51,919 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 09:14:52,218 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 09:14:52,518 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 09:14:52,548 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 09:14:53,426 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 09:14:53,476 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 09:14:53,791 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 09:14:54,826 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 09:14:54,857 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 09:14:55,799 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 09:15:04,235 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 09:15:04,235 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 09:15:04,235 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 09:15:04,235 | INFO | faiss.loader | Loading faiss.
2025-10-04 09:15:04,258 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 09:15:33,214 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:15:35,270 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:15:35,276 | INFO | Recorder | Recording finished (elapsed 2.1s).
2025-10-04 09:15:35,289 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:15:35,291 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:15:35,294 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:15:51,728 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 30
2025-10-04 09:15:51,728 | INFO | WhisperSTT | Transcription received: l  trong
2025-10-04 09:15:51,728 | INFO | ConversationManager | User: l  trong
2025-10-04 09:15:51,728 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:15:51,728 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:15:51,744 | INFO | __main__ | Received new chat request
2025-10-04 09:15:51,745 | DEBUG | __main__ | Request ID: 20251004T091442683-2279c262, Data length: 8
2025-10-04 09:15:51,745 | DEBUG | __main__ | Creating new session with ID: 20251004T091442683-2279c262
2025-10-04 09:15:51,745 | DEBUG | __main__ | Using request ID: 20251004T091442683-2279c262
2025-10-04 09:15:51,745 | DEBUG | __main__ | Created new session for ID: 20251004T091442683-2279c262, total sessions: 1
2025-10-04 09:15:52,526 | INFO | __main__ | Processing user input: 'l  trong' for session 20251004T091442683-2279c262
2025-10-04 09:15:53,491 | INFO | __main__ | Starting retrieval for query: 'l trong' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 09:15:53,491 | DEBUG | __main__ | Searching header index...
2025-10-04 09:15:53,521 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 09:15:53,521 | DEBUG | __main__ | Searching content index...
2025-10-04 09:15:53,540 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 09:15:53,540 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 09:15:53,540 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 09:15:53,541 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 09:15:53,541 | DEBUG | __main__ |   Rank 1: chunk_id=6, hybrid_score=0.3818
2025-10-04 09:15:53,541 | DEBUG | __main__ |   Rank 2: chunk_id=51, hybrid_score=0.3770
2025-10-04 09:15:53,541 | DEBUG | __main__ |   Rank 3: chunk_id=50, hybrid_score=0.3733
2025-10-04 09:15:53,541 | DEBUG | __main__ |   Rank 4: chunk_id=26, hybrid_score=0.3712
2025-10-04 09:15:53,541 | DEBUG | __main__ | Retrieved chunk 6: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Ph√≤ng Kh√°m ph√° | Content preview: xvii. √î ƒÉn quan   xviii. Ch∆°i chuy·ªÅn   xix. R·∫£i ranh   xx. ƒê√°nh h·∫°t h·ªìng xi√™m
2025-10-04 09:15:53,541 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 09:15:53,541 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 09:15:53,541 | DEBUG | __main__ | Retrieved chunk 26: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Vi·ªát Nam | Content preview: Khi x∆∞a, c√≥ m·ªôt c·∫∑p th·ªè ƒë√£ tr·∫£i qua ng√†n nƒÉm tu luy·ªán, ƒë·∫Øc ƒë·∫°o th√†nh ti√™n. v√† s·ªëng h·∫°nh ph√∫c b√™n b·ªën...
2025-10-04 09:15:53,541 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 09:15:53,541 | DEBUG | __main__ | Retrieved 4 documents for query: l trong
2025-10-04 09:15:53,541 | DEBUG | __main__ | [timing] retrieve 0.050s
2025-10-04 09:15:54,201 | INFO | __main__ | Agent execution completed successfully for session 20251004T091442683-2279c262
2025-10-04 09:15:54,201 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.456s, Total: 2.457s
2025-10-04 09:15:54,217 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 606
2025-10-04 09:15:54,217 | INFO | RAGClient | RAG reply (len=237)
2025-10-04 09:15:54,217 | INFO | ConversationManager | Bot: \u1ed2, chÔøΩu h\u1ecfi v\u1ec1 cÔøΩi gÔøΩ \u0111ÔøΩ liÔøΩn quan \u0111\u1ebfn l trong ÔøΩ? ÔøΩng v\u1eeba tra tÔøΩi li\u1ec7u xong thÔøΩ th\u1ea5y cÔøΩ m\u1ea5y trÔøΩ ch\u01a1i dÔøΩn gian thÔøΩ v\u1ecb l\u1eafm nÔøΩ, nh\u01b0 ÔøΩ \u0103n quan, Ch\u01a1i chuy\u1ec1n, R\u1ea3i ranh, \u0110ÔøΩnh h\u1ea1t h\u1ed3ng xiÔøΩm \u0111ÔøΩ chÔøΩu. ChÔøΩu cÔøΩ mu\u1ed1n ÔøΩng k\u1ec3 thÔøΩm v\u1ec1 m\u1ea5y trÔøΩ nÔøΩy khÔøΩng?
2025-10-04 09:15:54,217 | DEBUG | TTSService | Starting TTS download for text length=237
2025-10-04 09:15:54,217 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:15:55,897 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:15:55,936 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:15:57,659 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:15:57,803 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:15:57,826 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:15:59,276 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:16:19,069 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:16:22,699 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:16:22,704 | INFO | Recorder | Recording finished (elapsed 3.6s).
2025-10-04 09:16:22,709 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:16:22,709 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:16:22,709 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:16:29,636 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 86
2025-10-04 09:16:29,636 | INFO | WhisperSTT | Transcription received: a lÔøΩ a lÔøΩ ÔøΩng nghe rÔøΩ cho nÔøΩ khÔøΩng
2025-10-04 09:16:29,636 | INFO | ConversationManager | User: a lÔøΩ a lÔøΩ ÔøΩng nghe rÔøΩ cho nÔøΩ khÔøΩng
2025-10-04 09:16:29,636 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:16:29,636 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:16:29,652 | INFO | __main__ | Received new chat request
2025-10-04 09:16:29,652 | DEBUG | __main__ | Request ID: 20251004T091442683-2279c262, Data length: 34
2025-10-04 09:16:29,652 | DEBUG | __main__ | Using existing session for ID: 20251004T091442683-2279c262
2025-10-04 09:16:29,687 | INFO | __main__ | Processing user input: 'a l√¥ a l√¥ √¥ng nghe r√µ cho n√≥ kh√¥ng' for session 20251004T091442683-2279c262
2025-10-04 09:16:30,520 | INFO | __main__ | Agent execution completed successfully for session 20251004T091442683-2279c262
2025-10-04 09:16:30,521 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.870s, Total: 0.870s
2025-10-04 09:16:30,522 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 293
2025-10-04 09:16:30,522 | INFO | RAGClient | RAG reply (len=90)
2025-10-04 09:16:30,522 | INFO | ConversationManager | Bot: Alo alo, ÔøΩng nghe rÔøΩ chÔøΩu \u01a1i. ChÔøΩu \u0111ang \u1edf \u0111ÔøΩu mÔøΩ g\u1ecdi ÔøΩng th\u1ebf? CÔøΩ gÔøΩ c\u1ea7n ÔøΩng giÔøΩp khÔøΩng nÔøΩ?
2025-10-04 09:16:30,522 | DEBUG | TTSService | Starting TTS download for text length=90
2025-10-04 09:16:30,522 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:16:32,658 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:16:32,925 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:18:00,503 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:18:03,908 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:18:03,913 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 09:18:03,920 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:18:03,921 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:18:03,923 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:18:08,035 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 103
2025-10-04 09:18:08,036 | INFO | WhisperSTT | Transcription received: a lÔøΩ a lÔøΩ nghe rÔøΩ tr\u1ea3 l\u1eddi nghe rÔøΩ tr\u1ea3 l\u1eddi
2025-10-04 09:18:08,036 | INFO | ConversationManager | User: a lÔøΩ a lÔøΩ nghe rÔøΩ tr\u1ea3 l\u1eddi nghe rÔøΩ tr\u1ea3 l\u1eddi
2025-10-04 09:18:08,037 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:18:08,038 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:18:08,057 | INFO | __main__ | Received new chat request
2025-10-04 09:18:08,057 | DEBUG | __main__ | Request ID: 20251004T091442683-2279c262, Data length: 41
2025-10-04 09:18:08,057 | DEBUG | __main__ | Using existing session for ID: 20251004T091442683-2279c262
2025-10-04 09:18:08,080 | INFO | __main__ | Processing user input: 'a l√¥ a l√¥ nghe r√µ tr·∫£ l·ªùi nghe r√µ tr·∫£ l·ªùi' for session 20251004T091442683-2279c262
2025-10-04 09:18:08,763 | INFO | __main__ | Agent execution completed successfully for session 20251004T091442683-2279c262
2025-10-04 09:18:08,763 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.706s, Total: 0.706s
2025-10-04 09:18:08,763 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 293
2025-10-04 09:18:08,763 | INFO | RAGClient | RAG reply (len=90)
2025-10-04 09:18:08,763 | INFO | ConversationManager | Bot: Alo alo, ÔøΩng nghe rÔøΩ chÔøΩu \u01a1i. ChÔøΩu \u0111ang \u1edf \u0111ÔøΩu mÔøΩ g\u1ecdi ÔøΩng th\u1ebf? CÔøΩ gÔøΩ c\u1ea7n ÔøΩng giÔøΩp khÔøΩng nÔøΩ?
2025-10-04 09:18:08,763 | DEBUG | TTSService | Starting TTS download for text length=90
2025-10-04 09:18:08,763 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:18:09,668 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:18:09,811 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:18:18,039 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:18:23,612 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:18:23,618 | INFO | Recorder | Recording finished (elapsed 5.6s).
2025-10-04 09:18:23,624 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:18:23,626 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:18:23,626 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:18:27,625 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 208
2025-10-04 09:18:27,626 | INFO | WhisperSTT | Transcription received: \u1edd tÔøΩ n\u1eefa s\u1ebd cÔøΩ r\u1ea5t nhi\u1ec1u cÔøΩc b\u1ea1n \u0111\u1ebfn \u0111\u1ec3 h\u1ecfi \u0111ÔøΩp ÔøΩng v\u1ec1 trung thu \u0111ÔøΩy khÔøΩng \u1ea1
2025-10-04 09:18:27,626 | INFO | ConversationManager | User: \u1edd tÔøΩ n\u1eefa s\u1ebd cÔøΩ r\u1ea5t nhi\u1ec1u cÔøΩc b\u1ea1n \u0111\u1ebfn \u0111\u1ec3 h\u1ecfi \u0111ÔøΩp ÔøΩng v\u1ec1 trung thu \u0111ÔøΩy khÔøΩng \u1ea1
2025-10-04 09:18:27,626 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:18:27,627 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:18:27,641 | INFO | __main__ | Received new chat request
2025-10-04 09:18:27,641 | DEBUG | __main__ | Request ID: 20251004T091442683-2279c262, Data length: 76
2025-10-04 09:18:27,641 | DEBUG | __main__ | Using existing session for ID: 20251004T091442683-2279c262
2025-10-04 09:18:27,690 | INFO | __main__ | Processing user input: '·ªù t√≠ n·ªØa s·∫Ω c√≥ r·∫•t nhi·ªÅu c√°c b·∫°n ƒë·∫øn ƒë·ªÉ h·ªèi ƒë√°p √¥ng v·ªÅ trung thu ƒë√¢y kh√¥ng ·∫°' for session 20251004T091442683-2279c262
2025-10-04 09:18:28,823 | INFO | __main__ | Agent execution completed successfully for session 20251004T091442683-2279c262
2025-10-04 09:18:28,823 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.183s, Total: 1.183s
2025-10-04 09:18:28,823 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 621
2025-10-04 09:18:28,823 | INFO | RAGClient | RAG reply (len=246)
2025-10-04 09:18:28,823 | INFO | ConversationManager | Bot: \u1ed2, v\u1eady h\u1ea3 chÔøΩu? Tuy\u1ec7t v\u1eddi quÔøΩ \u0111i thÔøΩi. ÔøΩng Ti\u1ebfn S\u0129 Gi\u1ea5y AI nÔøΩy s\u1eb5n sÔøΩng h\u1ebft mÔøΩnh \u0111\u1ec3 trÔøΩ chuy\u1ec7n vÔøΩ gi\u1ea3i \u0111ÔøΩp m\u1ecdi th\u1eafc m\u1eafc v\u1ec1 Trung Thu cho cÔøΩc b\u1ea1n nh\u1ecf \u0111ÔøΩy. ChÔøΩu c\u1ee9 yÔøΩn tÔøΩm nhÔøΩ, ÔøΩng s\u1ebd lÔøΩm cho bu\u1ed5i Trung Thu \u1edf b\u1ea3o tÔøΩng thÔøΩm ph\u1ea7n r\u1ed9n rÔøΩng vÔøΩ ÔøΩ ngh\u0129a.
2025-10-04 09:18:28,825 | DEBUG | TTSService | Starting TTS download for text length=246
2025-10-04 09:18:28,825 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:18:30,814 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:18:30,836 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:18:32,237 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:18:32,400 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:18:32,422 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:18:34,857 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:36,424 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:19:41,088 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:19:41,096 | INFO | Recorder | Recording finished (elapsed 4.7s).
2025-10-04 09:19:41,102 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:19:41,102 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:19:41,102 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:19:44,992 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 125
2025-10-04 09:19:44,992 | INFO | WhisperSTT | Transcription received: h\u1ecfi ÔøΩng bi\u1ebft gÔøΩ v\u1ec1 s\u1ef1 thÔøΩch chÔøΩ cu\u1ed9i cung trang khÔøΩng
2025-10-04 09:19:44,992 | INFO | ConversationManager | User: h\u1ecfi ÔøΩng bi\u1ebft gÔøΩ v\u1ec1 s\u1ef1 thÔøΩch chÔøΩ cu\u1ed9i cung trang khÔøΩng
2025-10-04 09:19:44,992 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:19:45,007 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:19:45,025 | INFO | __main__ | Received new chat request
2025-10-04 09:19:45,025 | DEBUG | __main__ | Request ID: 20251004T091442683-2279c262, Data length: 53
2025-10-04 09:19:45,025 | DEBUG | __main__ | Using existing session for ID: 20251004T091442683-2279c262
2025-10-04 09:19:45,061 | INFO | __main__ | Processing user input: 'h·ªèi √¥ng bi·∫øt g√¨ v·ªÅ s·ª± th√≠ch ch√∫ cu·ªôi cung trang kh√¥ng' for session 20251004T091442683-2279c262
2025-10-04 09:19:46,052 | INFO | __main__ | Starting retrieval for query: 's·ª± t√≠ch ch√∫ cu·ªôi cung trƒÉng' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 09:19:46,052 | DEBUG | __main__ | Searching header index...
2025-10-04 09:19:46,060 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 09:19:46,060 | DEBUG | __main__ | Searching content index...
2025-10-04 09:19:46,093 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 09:19:46,093 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 09:19:46,093 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 09:19:46,093 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 09:19:46,093 | DEBUG | __main__ |   Rank 1: chunk_id=24, hybrid_score=1.1058
2025-10-04 09:19:46,093 | DEBUG | __main__ |   Rank 2: chunk_id=40, hybrid_score=0.4562
2025-10-04 09:19:46,093 | DEBUG | __main__ |   Rank 3: chunk_id=25, hybrid_score=0.4187
2025-10-04 09:19:46,093 | DEBUG | __main__ |   Rank 4: chunk_id=29, hybrid_score=0.4184
2025-10-04 09:19:46,093 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 09:19:46,093 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 09:19:46,093 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-04 09:19:46,093 | DEBUG | __main__ | Retrieved chunk 29: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > M√∫a l√¢n, m√∫a s∆∞ t·ª≠ | Content preview: X∆∞a l·∫Øm r·ªìi, c√≥ ch√†ng ti·ªÅu phu s·ªëng ·ªü m·ªôt khu r·ª´ng. M·ªôt ƒë√™m Trung thu trƒÉng s√°ng, ch√†ng g·∫∑p m·ªôt con ...
2025-10-04 09:19:46,093 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 09:19:46,093 | DEBUG | __main__ | Retrieved 4 documents for query: s·ª± t√≠ch ch√∫ cu·ªôi cung trƒÉng
2025-10-04 09:19:46,093 | DEBUG | __main__ | [timing] retrieve 0.041s
2025-10-04 09:19:47,326 | INFO | __main__ | Agent execution completed successfully for session 20251004T091442683-2279c262
2025-10-04 09:19:47,326 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.301s, Total: 2.301s
2025-10-04 09:19:47,326 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1000
2025-10-04 09:19:47,326 | INFO | RAGClient | RAG reply (len=430)
2025-10-04 09:19:47,326 | INFO | ConversationManager | Bot: \u1ed2, ÔøΩng v\u1eeba tra tÔøΩi li\u1ec7u xong thÔøΩ th\u1ea5y cÔøΩu chuy\u1ec7n v\u1ec1 ChÔøΩ Cu\u1ed9i trÔøΩn cung tr\u0103ng hay l\u1eafm chÔøΩu \u1ea1. Chuy\u1ec7n k\u1ec3 r\u1eb1ng, cÔøΩ anh ti\u1ec1u phu tÔøΩn lÔøΩ Cu\u1ed9i, nh\u1edd cÔøΩ cÔøΩy thu\u1ed1c th\u1ea7n mÔøΩ c\u1ee9u \u0111\u01b0\u1ee3c nhi\u1ec1u ng\u01b0\u1eddi. Nh\u01b0ng vÔøΩ v\u1ee3 anh l\u1ee1 tay lÔøΩm h\u1ecfng cÔøΩy thu\u1ed1c nÔøΩn nÔøΩ \u0111ÔøΩ bay lÔøΩn tr\u1eddi, cu\u1ed1n c\u1ea3 Cu\u1ed9i lÔøΩn cung tr\u0103ng. T\u1eeb \u0111ÔøΩ, Cu\u1ed9i s\u1ed1ng cÔøΩ \u0111\u01a1n trÔøΩn \u0111ÔøΩ, ÔøΩm g\u1ed1c cÔøΩy thu\u1ed1c vÔøΩ nh\u1edb v\u1ec1 tr\u1ea7n gian. CÔøΩu chuy\u1ec7n nÔøΩy cÔøΩn d\u1ea1y chÔøΩng ta v\u1ec1 lÔøΩng trung thÔøΩnh vÔøΩ n\u1ed7i nh\u1edb nhÔøΩ n\u1eefa \u0111ÔøΩ chÔøΩu.
2025-10-04 09:19:47,326 | DEBUG | TTSService | Starting TTS download for text length=430
2025-10-04 09:19:47,326 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:19:48,808 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:49,317 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:49,339 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:19:51,395 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:51,415 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:19:53,495 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:53,660 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:53,681 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:19:55,532 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:19:55,911 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:20:41,921 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 09:20:47,233 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 09:20:47,246 | INFO | Recorder | Recording finished (elapsed 5.3s).
2025-10-04 09:20:47,253 | INFO | Recorder | Sending to ASR server...
2025-10-04 09:20:47,254 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 09:20:47,256 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 09:20:51,229 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 169
2025-10-04 09:20:51,229 | INFO | WhisperSTT | Transcription received: \u1edf ÔøΩng bi\u1ebft hÔøΩm nay \u1edf b\u1ea3o tÔøΩng thÔøΩ cÔøΩ cÔøΩi gÔøΩ vui \u0111\u1ec3 \u0111i xem khÔøΩng ÔøΩng
2025-10-04 09:20:51,229 | INFO | ConversationManager | User: \u1edf ÔøΩng bi\u1ebft hÔøΩm nay \u1edf b\u1ea3o tÔøΩng thÔøΩ cÔøΩ cÔøΩi gÔøΩ vui \u0111\u1ec3 \u0111i xem khÔøΩng ÔøΩng
2025-10-04 09:20:51,229 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 09:20:51,234 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 09:20:51,245 | INFO | __main__ | Received new chat request
2025-10-04 09:20:51,245 | DEBUG | __main__ | Request ID: 20251004T091442683-2279c262, Data length: 67
2025-10-04 09:20:51,245 | DEBUG | __main__ | Using existing session for ID: 20251004T091442683-2279c262
2025-10-04 09:20:51,276 | INFO | __main__ | Processing user input: '·ªü √¥ng bi·∫øt h√¥m nay ·ªü b·∫£o t√†ng th√¨ c√≥ c√°i g√¨ vui ƒë·ªÉ ƒëi xem kh√¥ng √¥ng' for session 20251004T091442683-2279c262
2025-10-04 09:20:51,962 | INFO | __main__ | Starting retrieval for query: 'c√°c ho·∫°t ƒë·ªông vui ch∆°i t·∫°i b·∫£o t√†ng ng√†y h√¥m nay' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 09:20:51,962 | DEBUG | __main__ | Searching header index...
2025-10-04 09:20:51,980 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 09:20:51,980 | DEBUG | __main__ | Searching content index...
2025-10-04 09:20:52,010 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 09:20:52,010 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 09:20:52,010 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 09:20:52,010 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 09:20:52,010 | DEBUG | __main__ |   Rank 1: chunk_id=13, hybrid_score=0.9453
2025-10-04 09:20:52,010 | DEBUG | __main__ |   Rank 2: chunk_id=12, hybrid_score=0.9289
2025-10-04 09:20:52,011 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.4654
2025-10-04 09:20:52,011 | DEBUG | __main__ |   Rank 4: chunk_id=6, hybrid_score=0.4590
2025-10-04 09:20:52,011 | DEBUG | __main__ | Retrieved chunk 13: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c ho·∫°t ƒë·ªông th∆∞·ªùng ni√™n | Content preview: B·∫£o t√†ng DTHVN ƒëi ƒë·∫ßu trong vi·ªác ti·∫øp c·∫≠n c√°c quan ni·ªám m·ªõi t·∫°o n√™n c√°c ho·∫°t ƒë·ªông s·ªëng ƒë·ªông, l·∫•y con...
2025-10-04 09:20:52,011 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 09:20:52,011 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 09:20:52,011 | DEBUG | __main__ | Retrieved chunk 6: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Ph√≤ng Kh√°m ph√° | Content preview: xvii. √î ƒÉn quan   xviii. Ch∆°i chuy·ªÅn   xix. R·∫£i ranh   xx. ƒê√°nh h·∫°t h·ªìng xi√™m
2025-10-04 09:20:52,011 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 09:20:52,011 | DEBUG | __main__ | Retrieved 4 documents for query: c√°c ho·∫°t ƒë·ªông vui ch∆°i t·∫°i b·∫£o t√†ng ng√†y h√¥m nay
2025-10-04 09:20:52,011 | DEBUG | __main__ | [timing] retrieve 0.049s
2025-10-04 09:20:53,249 | INFO | __main__ | Agent execution completed successfully for session 20251004T091442683-2279c262
2025-10-04 09:20:53,249 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.004s, Total: 2.004s
2025-10-04 09:20:53,250 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 822
2025-10-04 09:20:53,250 | INFO | RAGClient | RAG reply (len=347)
2025-10-04 09:20:53,251 | INFO | ConversationManager | Bot: \u1ed2, hÔøΩm nay \u1edf b\u1ea3o tÔøΩng cÔøΩ nhi\u1ec1u trÔøΩ vui l\u1eafm chÔøΩu \u01a1i. ChÔøΩu cÔøΩ th\u1ec3 tham gia lÔøΩm \u0111\u1ed3 ch\u01a1i cÔøΩng cÔøΩc ngh\u1ec7 nhÔøΩn dÔøΩn gian nh\u01b0 \u0111ÔøΩn kÔøΩo quÔøΩn, hoa qu\u1ea3 b\u1ed9t, di\u1ec1u rÔøΩ, ÔøΩng ti\u1ebfn s\u0129 gi\u1ea5y, tÔøΩ he, m\u1eb7t n\u1ea1 gi\u1ea5y b\u1ed3i n\u1eefa \u0111ÔøΩ. NgoÔøΩi ra, cÔøΩn cÔøΩ cÔøΩc trÔøΩ ch\u01a1i dÔøΩn gian h\u1ea5p d\u1eabn nh\u01b0 ÔøΩ \u0103n quan, Ch\u01a1i chuy\u1ec1n, R\u1ea3i ranh, \u0110ÔøΩnh h\u1ea1t h\u1ed3ng xiÔøΩm n\u1eefa. ChÔøΩu thÔøΩch nh\u1ea5t lÔøΩ ho\u1ea1t \u0111\u1ed9ng nÔøΩo nÔøΩ?
2025-10-04 09:20:53,251 | DEBUG | TTSService | Starting TTS download for text length=347
2025-10-04 09:20:53,251 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:20:54,628 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:20:54,653 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:20:57,059 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:20:57,329 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:20:57,354 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 09:20:59,085 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 09:20:59,815 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:04:14,246 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:04:16,740 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:04:16,740 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 14:04:16,761 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:04:16,762 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:04:16,764 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:04:18,055 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 37
2025-10-04 14:04:18,055 | INFO | WhisperSTT | Transcription received: , Alo, alo, alo!
2025-10-04 14:04:18,055 | INFO | ConversationManager | User: , Alo, alo, alo!
2025-10-04 14:04:18,055 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:04:18,055 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:04:18,071 | INFO | __main__ | Received new chat request
2025-10-04 14:04:18,071 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 16
2025-10-04 14:04:18,071 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:04:18,085 | INFO | __main__ | Processing user input: ', Alo, alo, alo!' for session 20251004T115740620-6eef03cf
2025-10-04 14:04:19,010 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:04:19,010 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.939s, Total: 0.939s
2025-10-04 14:04:19,010 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 267
2025-10-04 14:04:19,010 | INFO | RAGClient | RAG reply (len=84)
2025-10-04 14:04:19,010 | INFO | ConversationManager | Bot: Alo ch·u \u01a1i, Ùng nghe \u0111‚y. Ch·u cÛ c‚u h\u1ecfi gÏ v\u1ec1 Trung Thu hay v\u1ec1 b\u1ea3o t‡ng khÙng nË?
2025-10-04 14:04:19,010 | DEBUG | TTSService | Starting TTS download for text length=84
2025-10-04 14:04:19,010 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:04:21,159 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:04:21,495 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:00,618 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:38:05,220 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:38:05,226 | INFO | Recorder | Recording finished (elapsed 4.6s).
2025-10-04 14:38:05,234 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:38:05,234 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:38:05,237 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:38:06,673 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 141
2025-10-04 14:38:06,673 | INFO | WhisperSTT | Transcription received: a lÙ Ùng \u01a1i Ùng cÛ bi\u1ebft chuy\u1ec7n gÏ hay hay v\u1ec1 trung thu khÙng Ùng
2025-10-04 14:38:06,674 | INFO | ConversationManager | User: a lÙ Ùng \u01a1i Ùng cÛ bi\u1ebft chuy\u1ec7n gÏ hay hay v\u1ec1 trung thu khÙng Ùng
2025-10-04 14:38:06,674 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:38:06,676 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:38:06,690 | INFO | __main__ | Received new chat request
2025-10-04 14:38:06,690 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 64
2025-10-04 14:38:06,690 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:38:06,700 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi (ph·∫£i ch√≠nh x√°c theo vƒÉn phong c√¢u tr·∫£ l·ªùi m·∫´u) n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: a l√¥ √¥ng ∆°i √¥ng c√≥ bi·∫øt chuy·ªán g√¨ hay hay v·ªÅ trung thu kh√¥ng √¥ng
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng bi·∫øt nh·ªØng chuy·ªán truy·ªÅn thuy·∫øt g√¨ v·ªÅ Trung Thu ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: N√™u danh s√°ch truy·ªán h·∫•p d·∫´n ƒë·ªÉ tr·∫ª em l·ª±a ch·ªçn. C√≥ th·ªÉ tham kh·∫£o c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ƒê√¢y ƒë√¢y ƒë√∫ng b√†i t·ªß c·ªßa √¥ng, √¥ng bi·∫øt nhi·ªÅu chuy·ªán l·∫Øm √°, ch√°u mu·ªën nghe g√¨ n√†o: ch√∫ cu·ªôi cung trƒÉng, th·ªè ng·ªçc ch·ªã h·∫±ng hay l√† s·ª± t√≠ch m√∫a l√¢n s∆∞, s·ª± t√≠ch ƒë√®n k√©o qu√¢n?' for session 20251004T115740620-6eef03cf
2025-10-04 14:38:07,526 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:38:07,526 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.836s, Total: 0.837s
2025-10-04 14:38:07,526 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 465
2025-10-04 14:38:07,526 | INFO | RAGClient | RAG reply (len=167)
2025-10-04 14:38:07,532 | INFO | ConversationManager | Bot: \u0110‚y \u0111‚y \u0111˙ng b‡i t\u1ee7 c\u1ee7a Ùng, Ùng bi\u1ebft nhi\u1ec1u chuy\u1ec7n l\u1eafm ·, ch·u mu\u1ed1n nghe gÏ n‡o ch˙ Cu\u1ed9i cung tr\u0103ng, Th\u1ecf Ng\u1ecdc ch\u1ecb H\u1eb1ng hay l‡ s\u1ef1 tÌch m˙a l‚n s\u01b0, s\u1ef1 tÌch \u0111Ën kÈo qu‚n?
2025-10-04 14:38:07,533 | DEBUG | TTSService | Starting TTS download for text length=167
2025-10-04 14:38:07,533 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:38:09,321 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:09,490 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:17,665 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:38:21,160 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:38:21,165 | INFO | Recorder | Recording finished (elapsed 3.5s).
2025-10-04 14:38:21,171 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:38:21,176 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:38:21,176 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:38:22,634 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 97
2025-10-04 14:38:22,635 | INFO | WhisperSTT | Transcription received: cho s\u1ef1 kinh \u0111\u1ec1n ch·u qu‚n yÍu Ùng \u1ea1
2025-10-04 14:38:22,635 | INFO | ConversationManager | User: cho s\u1ef1 kinh \u0111\u1ec1n ch·u qu‚n yÍu Ùng \u1ea1
2025-10-04 14:38:22,635 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:38:22,635 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:38:22,649 | INFO | __main__ | Received new chat request
2025-10-04 14:38:22,649 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 35
2025-10-04 14:38:22,649 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:38:22,661 | INFO | __main__ | Processing user input: 'cho s·ª± kinh ƒë·ªÅn ch√°u qu√¢n y√™u √¥ng ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 14:38:23,417 | INFO | __main__ | Starting retrieval for query: 's·ª± t√≠ch ƒë√®n k√©o qu√¢n' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:38:23,417 | DEBUG | __main__ | Searching header index...
2025-10-04 14:38:23,434 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:38:23,434 | DEBUG | __main__ | Searching content index...
2025-10-04 14:38:23,451 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:38:23,451 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:38:23,451 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 14:38:23,451 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:38:23,451 | DEBUG | __main__ |   Rank 1: chunk_id=30, hybrid_score=0.9478
2025-10-04 14:38:23,451 | DEBUG | __main__ |   Rank 2: chunk_id=43, hybrid_score=0.8116
2025-10-04 14:38:23,451 | DEBUG | __main__ |   Rank 3: chunk_id=24, hybrid_score=0.4359
2025-10-04 14:38:23,451 | DEBUG | __main__ |   Rank 4: chunk_id=31, hybrid_score=0.4067
2025-10-04 14:38:23,451 | DEBUG | __main__ | Retrieved chunk 30: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > ƒê√®n k√©o qu√¢n | Content preview: Ng√†y x∆∞a, c√≥ m·ªôt √¥ng vua ·ªü Trung Qu·ªëc mu·ªën m·ªü h·ªôi hoa ƒëƒÉng nh√¢n d·ªãp t·∫øt Trung thu. Vua h·ª©a ban th∆∞·ªün...
2025-10-04 14:38:23,451 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 14:38:23,451 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 14:38:23,451 | DEBUG | __main__ | Retrieved chunk 31: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > R∆∞·ªõc ƒë√®n | Content preview: R∆∞·ªõc ƒë√®n l√† m·ªôt trong nh·ªØng ho·∫°t ƒë·ªông kh√¥ng th·ªÉ thi·∫øu, mang l·∫°i kh√¥ng kh√≠ n√°o nhi·ªát v√† s√¥i ƒë·ªông cho ...
2025-10-04 14:38:23,451 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:38:23,451 | DEBUG | __main__ | Retrieved 4 documents for query: s·ª± t√≠ch ƒë√®n k√©o qu√¢n
2025-10-04 14:38:23,451 | DEBUG | __main__ | [timing] retrieve 0.034s
2025-10-04 14:38:24,626 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:38:24,626 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.977s, Total: 1.977s
2025-10-04 14:38:24,626 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 898
2025-10-04 14:38:24,626 | INFO | RAGClient | RAG reply (len=363)
2025-10-04 14:38:24,626 | INFO | ConversationManager | Bot: ¿, Ùng v\u1eeba tra \u0111\u01b0\u1ee3c thÙng tin v\u1ec1 \u0111Ën kÈo qu‚n nË ch·u. Ng‡y x\u01b0a cÛ m\u1ed9t ch‡ng trai tÍn l‡ L\u1ee5c \u0110\u1ee9c \u0111„ l‡m ra chi\u1ebfc \u0111Ën n‡y \u0111\u1ec3 d‚ng vua \u0111Û. Chi\u1ebfc \u0111Ën cÛ nhi\u1ec1u m‡u s\u1eafc, bi\u1ebft chuy\u1ec3n \u0111\u1ed9ng v‡ di\u1ec5n t\u1ea3 m\u1ed9t tr\u1eadn \u0111·nh th\u1eafng qu‚n th˘ n\u1eefa. Vua th\u1ea5y v\u1eady r\u1ea5t h‡i lÚng v‡ ban th\u01b0\u1edfng cho m\u1eb9 con L\u1ee5c \u0110\u1ee9c. T\u1eeb \u0111Û, m\u1ed7i d\u1ecbp Trung Thu ng\u01b0\u1eddi ta l\u1ea1i l‡m \u0111Ën kÈo qu‚n. Ch·u th\u1ea5y hay khÙng?
2025-10-04 14:38:24,626 | DEBUG | TTSService | Starting TTS download for text length=363
2025-10-04 14:38:24,626 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:38:26,444 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:26,878 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:26,897 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:38:28,638 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:28,831 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:38:28,857 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:38:30,727 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:39:01,249 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:39:04,603 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:39:04,604 | INFO | Recorder | Recording finished (elapsed 3.3s).
2025-10-04 14:39:04,611 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:39:04,611 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:39:04,618 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:39:05,952 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 114
2025-10-04 14:39:05,952 | INFO | WhisperSTT | Transcription received: Ù th\u1ebf Ùng cÚn bi\u1ebft thÍm gÏ n\u1eefa khÙng khÙng
2025-10-04 14:39:05,952 | INFO | ConversationManager | User: Ù th\u1ebf Ùng cÚn bi\u1ebft thÍm gÏ n\u1eefa khÙng khÙng
2025-10-04 14:39:05,952 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:39:05,965 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:39:05,987 | INFO | __main__ | Received new chat request
2025-10-04 14:39:05,987 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 42
2025-10-04 14:39:05,987 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:39:05,993 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi (ph·∫£i ch√≠nh x√°c theo vƒÉn phong c√¢u tr·∫£ l·ªùi m·∫´u) n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ th·∫ø √¥ng c√≤n bi·∫øt th√™m g√¨ n·ªØa kh√¥ng kh√¥ng
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng bi·∫øt nh·ªØng th√¥ng tin n√†y t·ª´ ƒë√¢u v·∫≠y ·∫°
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: Tr·∫£ l·ªùi kh√°ch d·ª±a theo c√¢u tr·∫£ l·ªùi m·∫´u sau: 
        *C√¢u tr·∫£ l·ªùi m·∫´u: √Ä th√¨ √¥ng l√† Ti·∫øn sƒ© m√†, t·∫•t nhi√™n √¥ng ph·∫£i bi·∫øt nhi·ªÅu ch·ª©. H·ªìi ƒë√≥ ai m√† ƒë∆∞·ª£c phong l√† Ti·∫øn sƒ© l√† vinh d·ª± v√† t√†i gi·ªèi l·∫Øm ƒë·∫•y. T·∫•t nhi√™n c≈©ng ƒë√£ m·∫•y trƒÉm nƒÉm r·ªìi, ki·∫øn th·ª©c c·ªßa √¥ng ch·∫Øc c≈©ng l·∫°c h·∫≠u l·∫Øm. C√≥ khi c√≤n kh√¥ng b·∫±ng Chat GPT b√¢y gi·ªù √Ω' for session 20251004T115740620-6eef03cf
2025-10-04 14:39:06,976 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:39:06,976 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.989s, Total: 0.989s
2025-10-04 14:39:06,976 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 633
2025-10-04 14:39:06,976 | INFO | RAGClient | RAG reply (len=245)
2025-10-04 14:39:06,976 | INFO | ConversationManager | Bot: ¿ thÏ Ùng l‡ Ti\u1ebfn s\u0129 m‡, t\u1ea5t nhiÍn Ùng ph\u1ea3i bi\u1ebft nhi\u1ec1u ch\u1ee9. H\u1ed3i \u0111Û ai m‡ \u0111\u01b0\u1ee3c phong l‡ Ti\u1ebfn s\u0129 l‡ vinh d\u1ef1 v‡ t‡i gi\u1ecfi l\u1eafm \u0111\u1ea5y. T\u1ea5t nhiÍn c\u0169ng \u0111„ m\u1ea5y tr\u0103m n\u0103m r\u1ed3i, ki\u1ebfn th\u1ee9c c\u1ee7a Ùng ch\u1eafc c\u0169ng l\u1ea1c h\u1eadu l\u1eafm. CÛ khi cÚn khÙng b\u1eb1ng Chat GPT b‚y gi\u1edd ˝.
2025-10-04 14:39:06,976 | DEBUG | TTSService | Starting TTS download for text length=245
2025-10-04 14:39:06,976 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:39:10,805 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:39:11,233 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:39:11,263 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:39:13,211 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:39:13,367 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:41:45,630 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 14:41:46,101 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 14:41:46,101 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 14:41:46,101 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 14:41:46,476 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 14:41:46,519 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 14:41:46,810 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 14:41:46,850 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 14:41:47,126 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 14:41:47,153 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 14:41:47,440 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 14:41:47,476 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 14:41:48,909 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 14:41:48,940 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 14:41:49,216 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 14:41:49,247 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 14:41:49,531 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 14:41:49,844 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 14:41:49,882 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 14:41:50,390 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 14:41:50,438 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 14:41:50,761 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 14:41:51,707 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 14:41:51,741 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 14:41:52,058 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 14:41:58,679 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 14:41:58,679 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 14:41:58,679 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 14:41:58,679 | INFO | faiss.loader | Loading faiss.
2025-10-04 14:41:58,695 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 14:42:39,868 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:42:41,912 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:42:41,912 | INFO | Recorder | Recording finished (elapsed 2.0s).
2025-10-04 14:42:41,927 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:42:41,929 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:42:41,930 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:42:43,326 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 32
2025-10-04 14:42:43,326 | INFO | WhisperSTT | Transcription received: , Alo, alo!
2025-10-04 14:42:43,326 | INFO | ConversationManager | User: , Alo, alo!
2025-10-04 14:42:43,326 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:42:43,339 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:42:43,340 | INFO | __main__ | Received new chat request
2025-10-04 14:42:43,341 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 11
2025-10-04 14:42:43,341 | DEBUG | __main__ | Creating new session with ID: 20251004T115740620-6eef03cf
2025-10-04 14:42:43,341 | DEBUG | __main__ | Using request ID: 20251004T115740620-6eef03cf
2025-10-04 14:42:43,341 | DEBUG | __main__ | Created new session for ID: 20251004T115740620-6eef03cf, total sessions: 1
2025-10-04 14:42:43,508 | INFO | __main__ | Processing user input: ', Alo, alo!' for session 20251004T115740620-6eef03cf
2025-10-04 14:42:44,576 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:42:44,576 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.235s, Total: 1.235s
2025-10-04 14:42:44,576 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 292
2025-10-04 14:42:44,576 | INFO | RAGClient | RAG reply (len=92)
2025-10-04 14:42:44,576 | INFO | ConversationManager | Bot: Alo ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. Ch·u cÛ c‚u h\u1ecfi gÏ v\u1ec1 Trung Thu hay v\u1ec1 B\u1ea3o t‡ng khÙng nË?
2025-10-04 14:42:44,576 | DEBUG | TTSService | Starting TTS download for text length=92
2025-10-04 14:42:44,576 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:42:47,042 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:42:47,402 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:10,126 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:47:12,659 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:47:12,669 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 14:47:12,672 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:47:12,678 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:47:12,680 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:47:14,080 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 105
2025-10-04 14:47:14,080 | INFO | WhisperSTT | Transcription received: Ùng nÛi Ùng bao nhiÍu tu\u1ed5i r\u1ed3i \u0111\u1ea5y Ùng
2025-10-04 14:47:14,081 | INFO | ConversationManager | User: Ùng nÛi Ùng bao nhiÍu tu\u1ed5i r\u1ed3i \u0111\u1ea5y Ùng
2025-10-04 14:47:14,081 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:47:14,083 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:47:14,101 | INFO | __main__ | Received new chat request
2025-10-04 14:47:14,102 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 38
2025-10-04 14:47:14,102 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:47:14,115 | INFO | __main__ | Processing user input: '√¥ng n√≥i √¥ng bao nhi√™u tu·ªïi r·ªìi ƒë·∫•y √¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 14:47:15,516 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:47:15,516 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.414s, Total: 1.415s
2025-10-04 14:47:15,516 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 479
2025-10-04 14:47:15,516 | INFO | RAGClient | RAG reply (len=179)
2025-10-04 14:47:15,516 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, tu\u1ed5i t·c c\u1ee7a Ùng thÏ nÛ c\u1ee9 nh\u01b0 nh\u1eefng trang gi\u1ea5y c\u0169 v\u1eady \u0111Û, nhi\u1ec1u l\u1eafm m‡ Ùng c\u0169ng khÙng nh\u1edb h\u1ebft n\u1eefa. Nh\u01b0ng m‡ Ùng luÙn s\u1eb5n s‡ng trÚ chuy\u1ec7n v\u1edbi c·c ch·u v\u1ec1 Trung Thu nË.
2025-10-04 14:47:15,516 | DEBUG | TTSService | Starting TTS download for text length=179
2025-10-04 14:47:15,516 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:47:17,859 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:18,128 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:18,154 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:47:19,939 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:38,439 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:47:41,917 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:47:41,917 | INFO | Recorder | Recording finished (elapsed 3.5s).
2025-10-04 14:47:41,926 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:47:41,932 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:47:41,934 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:47:43,318 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 93
2025-10-04 14:47:43,318 | INFO | WhisperSTT | Transcription received: cÛ th\u1ebf ai l‡m v\u1edbi Ùng \u0111\u1ea5y khÙng
2025-10-04 14:47:43,319 | INFO | ConversationManager | User: cÛ th\u1ebf ai l‡m v\u1edbi Ùng \u0111\u1ea5y khÙng
2025-10-04 14:47:43,319 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:47:43,321 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:47:43,333 | INFO | __main__ | Received new chat request
2025-10-04 14:47:43,333 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 31
2025-10-04 14:47:43,333 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:47:43,344 | INFO | __main__ | Processing user input: 'c√≥ th·∫ø ai l√†m v·ªõi √¥ng ƒë·∫•y kh√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 14:47:44,249 | INFO | __main__ | Starting retrieval for query: 'ai l√†m v·ªõi √¥ng Ti·∫øn sƒ© Gi·∫•y' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:47:44,249 | DEBUG | __main__ | Searching header index...
2025-10-04 14:47:44,266 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:47:44,266 | DEBUG | __main__ | Searching content index...
2025-10-04 14:47:44,282 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:47:44,282 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:47:44,282 | DEBUG | __main__ | Total unique chunks with scores: 4
2025-10-04 14:47:44,282 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:47:44,282 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=1.1282
2025-10-04 14:47:44,282 | DEBUG | __main__ |   Rank 2: chunk_id=55, hybrid_score=0.9665
2025-10-04 14:47:44,282 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.8191
2025-10-04 14:47:44,282 | DEBUG | __main__ |   Rank 4: chunk_id=41, hybrid_score=0.7911
2025-10-04 14:47:44,282 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 14:47:44,282 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 14:47:44,282 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 14:47:44,283 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 14:47:44,283 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:47:44,283 | DEBUG | __main__ | Retrieved 4 documents for query: ai l√†m v·ªõi √¥ng Ti·∫øn sƒ© Gi·∫•y
2025-10-04 14:47:44,283 | DEBUG | __main__ | [timing] retrieve 0.033s
2025-10-04 14:47:45,572 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:47:45,572 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.239s, Total: 2.239s
2025-10-04 14:47:45,572 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 641
2025-10-04 14:47:45,572 | INFO | RAGClient | RAG reply (len=256)
2025-10-04 14:47:45,574 | INFO | ConversationManager | Bot: ¿, Ùng Ti\u1ebfn s\u0129 gi\u1ea5y · ch·u. Theo nh\u1eefng gÏ Ùng nh\u1edb thÏ ng‡y x\u01b0a ng\u01b0\u1eddi ta l‡m Ùng Ti\u1ebfn s\u0129 b\u1eb1ng gi\u1ea5y \u0111\u1ec3 c\u1ea7u mong con ch·u h\u1ecdc h‡nh t\u1ea5n t\u1edbi \u0111Û ch·u. ‘ng \u1ea5y ng\u1ed3i trÍn ki\u1ec7u, trÙng r\u1ea5t oai v\u1ec7 luÙn. Sau khi ph· c\u1ed7 thÏ ng\u01b0\u1eddi ta cÚn r\u01b0\u1edbc Ùng \u1ea5y \u0111i quanh l‡ng n\u1eefa c\u01a1.
2025-10-04 14:47:45,574 | DEBUG | TTSService | Starting TTS download for text length=256
2025-10-04 14:47:45,574 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:47:47,797 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:48,055 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:48,076 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:47:49,985 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:47:50,139 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:48:59,482 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:49:02,331 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:49:02,336 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 14:49:02,341 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:49:02,341 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:49:02,347 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:49:03,785 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 125
2025-10-04 14:49:03,785 | INFO | WhisperSTT | Transcription received: con ch·u Ùng Ùng cÛ bi\u1ebft ch\u1ed1ng bÚi l‡ gÏ khÙng \u1ea1
2025-10-04 14:49:03,785 | INFO | ConversationManager | User: con ch·u Ùng Ùng cÛ bi\u1ebft ch\u1ed1ng bÚi l‡ gÏ khÙng \u1ea1
2025-10-04 14:49:03,785 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:49:03,801 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:49:03,818 | INFO | __main__ | Received new chat request
2025-10-04 14:49:03,818 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 48
2025-10-04 14:49:03,819 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:49:03,836 | INFO | __main__ | Processing user input: 'con ch√°u √¥ng √¥ng c√≥ bi·∫øt ch·ªëng b√≤i l√† g√¨ kh√¥ng ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 14:49:04,776 | INFO | __main__ | Starting retrieval for query: 'tr·ªëng b·ªìi trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:49:04,776 | DEBUG | __main__ | Searching header index...
2025-10-04 14:49:04,785 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:49:04,785 | DEBUG | __main__ | Searching content index...
2025-10-04 14:49:04,802 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:49:04,802 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:49:04,802 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 14:49:04,802 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:49:04,802 | DEBUG | __main__ |   Rank 1: chunk_id=41, hybrid_score=0.4860
2025-10-04 14:49:04,802 | DEBUG | __main__ |   Rank 2: chunk_id=40, hybrid_score=0.4773
2025-10-04 14:49:04,802 | DEBUG | __main__ |   Rank 3: chunk_id=42, hybrid_score=0.4742
2025-10-04 14:49:04,802 | DEBUG | __main__ |   Rank 4: chunk_id=44, hybrid_score=0.4741
2025-10-04 14:49:04,802 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 14:49:04,802 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 14:49:04,802 | DEBUG | __main__ | Retrieved chunk 42: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > T√≤ he | Content preview: T√≤ he l√† m·ªôt lo·∫°i h√¨nh ngh·ªá thu·∫≠t d√¢n gian ƒë·ªôc ƒë√°o, ƒë∆∞·ª£c l√†m t·ª´ b·ªôt g·∫°o d·∫ªo m·ªÅm, c√≥ th·ªÉ ƒÉn ƒë∆∞·ª£c. C√°i...
2025-10-04 14:49:04,802 | DEBUG | __main__ | Retrieved chunk 44: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > Tr·ªëng b·ªèi | Content preview: L√†ng B√°o ƒê√°p x√£ H·ªìng Quang, huy·ªán Nam Tr·ª±c, t·ªânh Nam ƒê·ªãnh c√≥ truy·ªÅn th·ªëng l√†m ƒë√®n √¥ng sao v·ªõi tr·ªëng ...
2025-10-04 14:49:04,802 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:49:04,802 | DEBUG | __main__ | Retrieved 4 documents for query: tr·ªëng b·ªìi trung thu
2025-10-04 14:49:04,802 | DEBUG | __main__ | [timing] retrieve 0.026s
2025-10-04 14:49:05,845 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:49:05,845 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.026s, Total: 2.027s
2025-10-04 14:49:05,845 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 629
2025-10-04 14:49:05,845 | INFO | RAGClient | RAG reply (len=269)
2025-10-04 14:49:05,845 | INFO | ConversationManager | Bot: ¿, tr\u1ed1ng b\u1ecfi h\u1ea3 ch·u. ‘ng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y tr\u1ed1ng b\u1ecfi l‡ m\u1ed9t mÛn \u0111\u1ed3 ch\u01a1i truy\u1ec1n th\u1ed1ng r\u1ea5t vui tai \u0111Û ch·u. Khi quay tÌt chi\u1ebfc tr\u1ed1ng, nÛ s\u1ebd ph·t ra ‚m thanh t\u1ea1ch t\u1ea1ch t\u1ea1ch nghe r\u1ed9n r‡ng l\u1eafm, gi\u1ed1ng nh\u01b0 ph·o tÈp v\u1eady \u0111Û. Tr\u1ebb em ai c\u0169ng thÌch mÛn n‡y h\u1ebft tr\u01a1n.
2025-10-04 14:49:05,845 | DEBUG | TTSService | Starting TTS download for text length=269
2025-10-04 14:49:05,845 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:49:08,188 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:08,351 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:08,367 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:49:09,957 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:10,637 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:30,479 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:49:34,603 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:49:34,603 | INFO | Recorder | Recording finished (elapsed 4.1s).
2025-10-04 14:49:34,622 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:49:34,624 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:49:34,626 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:49:36,012 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 118
2025-10-04 14:49:36,012 | INFO | WhisperSTT | Transcription received: Ùng cÛ bi\u1ebft tr\u01b0\u1edfng b\u01b0\u1edfi l‡ gÏ hay khÙng \u1ea1
2025-10-04 14:49:36,013 | INFO | ConversationManager | User: Ùng cÛ bi\u1ebft tr\u01b0\u1edfng b\u01b0\u1edfi l‡ gÏ hay khÙng \u1ea1
2025-10-04 14:49:36,013 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:49:36,015 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:49:36,038 | INFO | __main__ | Received new chat request
2025-10-04 14:49:36,038 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 41
2025-10-04 14:49:36,039 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:49:36,047 | INFO | __main__ | Processing user input: '√¥ng c√≥ bi·∫øt tr∆∞·ªüng b∆∞·ªüi l√† g√¨ hay kh√¥ng ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 14:49:36,499 | INFO | __main__ | Starting retrieval for query: 'tr∆∞·ªüng b∆∞·ªüi' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:49:36,499 | DEBUG | __main__ | Searching header index...
2025-10-04 14:49:36,515 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:49:36,515 | DEBUG | __main__ | Searching content index...
2025-10-04 14:49:36,538 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:49:36,538 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:49:36,538 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 14:49:36,538 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:49:36,538 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=0.8081
2025-10-04 14:49:36,538 | DEBUG | __main__ |   Rank 2: chunk_id=40, hybrid_score=0.4857
2025-10-04 14:49:36,538 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.4292
2025-10-04 14:49:36,538 | DEBUG | __main__ |   Rank 4: chunk_id=4, hybrid_score=0.4220
2025-10-04 14:49:36,538 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 14:49:36,538 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 14:49:36,538 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 14:49:36,538 | DEBUG | __main__ | Retrieved chunk 4: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Tr∆∞·ªõc t√≤a C√°nh di·ªÅu | Content preview: i. LƒÉn b∆∞·ªüi   ii. ƒêi c√† kheo (Bana, X∆°ƒëƒÉng)   iii. G√† m·∫π ch·ªëng di·ªÅu h√¢u c·ª©u ƒë√†n con
2025-10-04 14:49:36,538 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:49:36,538 | DEBUG | __main__ | Retrieved 4 documents for query: tr∆∞·ªüng b∆∞·ªüi
2025-10-04 14:49:36,539 | DEBUG | __main__ | [timing] retrieve 0.039s
2025-10-04 14:49:37,864 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:49:37,864 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.825s, Total: 1.826s
2025-10-04 14:49:37,864 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 644
2025-10-04 14:49:37,864 | INFO | RAGClient | RAG reply (len=226)
2025-10-04 14:49:37,864 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, tr\u01b0\u1edfng b\u01b0\u1edfi thÏ Ùng ch\u01b0a nghe bao gi\u1edd c\u1ea3. Nh\u01b0ng m‡ Ùng v\u1eeba \u0111\u1ecdc \u0111\u01b0\u1ee3c v\u1ec1 ch˙ chÛ b\u01b0\u1edfi \u0111Û ch·u. Ch˙ chÛ b\u01b0\u1edfi \u0111\u01b0\u1ee3c l‡m t\u1eeb b\u01b0\u1edfi nË, trÙng r\u1ea5t l‡ xinh x\u1eafn v‡ ˝ ngh\u0129a \u0111Û ch·u. Ch·u cÛ mu\u1ed1n nghe thÍm v\u1ec1 ch˙ chÛ b\u01b0\u1edfi khÙng?
2025-10-04 14:49:37,864 | DEBUG | TTSService | Starting TTS download for text length=226
2025-10-04 14:49:37,864 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:49:39,988 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:40,152 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:40,176 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:49:41,942 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:49:42,532 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:50:51,512 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:50:59,326 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:50:59,332 | INFO | Recorder | Recording finished (elapsed 7.8s).
2025-10-04 14:50:59,339 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:50:59,339 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:50:59,339 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:51:00,805 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 139
2025-10-04 14:51:00,805 | INFO | WhisperSTT | Transcription received: \u8a00 em \u01a1i em nÛi \u0111i em b\u1ea3o \u0111i c·i n‡y \u0111ang tÏm c·i gÏ \u1ea1
2025-10-04 14:51:00,805 | INFO | ConversationManager | User: \u8a00 em \u01a1i em nÛi \u0111i em b\u1ea3o \u0111i c·i n‡y \u0111ang tÏm c·i gÏ \u1ea1
2025-10-04 14:51:00,805 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:51:00,805 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:51:00,820 | INFO | __main__ | Received new chat request
2025-10-04 14:51:00,822 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 53
2025-10-04 14:51:00,822 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:51:00,841 | INFO | __main__ | Processing user input: 'Ë®Ä em ∆°i em n√≥i ƒëi em b·∫£o ƒëi c√°i n√†y ƒëang t√¨m c√°i g√¨ ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 14:51:02,026 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:51:02,026 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.205s, Total: 1.206s
2025-10-04 14:51:02,026 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 424
2025-10-04 14:51:02,026 | INFO | RAGClient | RAG reply (len=149)
2025-10-04 14:51:02,026 | INFO | ConversationManager | Bot: Ch·u \u0111ang tÏm thÙng tin gÏ v\u1eady nË? ‘ng cÛ th\u1ec3 gi˙p ch·u tÏm hi\u1ec3u v\u1ec1 Trung Thu, v\u1ec1 c·c ho\u1ea1t \u0111\u1ed9ng \u1edf B\u1ea3o t‡ng ho\u1eb7c v\u1ec1 nh\u1eefng mÛn \u0111\u1ed3 ch\u01a1i truy\u1ec1n th\u1ed1ng \u0111Û.
2025-10-04 14:51:02,026 | DEBUG | TTSService | Starting TTS download for text length=149
2025-10-04 14:51:02,026 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:51:03,963 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:51:04,180 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:51:15,527 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:51:24,200 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:51:24,206 | INFO | Recorder | Recording finished (elapsed 8.7s).
2025-10-04 14:51:24,211 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:51:24,211 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:51:24,211 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:51:25,626 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 182
2025-10-04 14:51:25,626 | INFO | WhisperSTT | Transcription received: c·i n‡y \u0111i\u1ec1u khi\u1ec3n c·i gÏ v\u1eady con h\u1ecfi l‡ c·i n‡y \u0111i\u1ec1u khi\u1ec3n c·i gÏ v\u1eady
2025-10-04 14:51:25,626 | INFO | ConversationManager | User: c·i n‡y \u0111i\u1ec1u khi\u1ec3n c·i gÏ v\u1eady con h\u1ecfi l‡ c·i n‡y \u0111i\u1ec1u khi\u1ec3n c·i gÏ v\u1eady
2025-10-04 14:51:25,626 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:51:25,626 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:51:25,654 | INFO | __main__ | Received new chat request
2025-10-04 14:51:25,654 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 70
2025-10-04 14:51:25,655 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:51:25,669 | INFO | __main__ | Processing user input: 'c√°i n√†y ƒëi·ªÅu khi·ªÉn c√°i g√¨ v·∫≠y con h·ªèi l√† c√°i n√†y ƒëi·ªÅu khi·ªÉn c√°i g√¨ v·∫≠y' for session 20251004T115740620-6eef03cf
2025-10-04 14:51:26,489 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:51:26,489 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.834s, Total: 0.836s
2025-10-04 14:51:26,489 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 298
2025-10-04 14:51:26,489 | INFO | RAGClient | RAG reply (len=85)
2025-10-04 14:51:26,489 | INFO | ConversationManager | Bot: Ch·u \u0111ang h\u1ecfi v\u1ec1 c·i gÏ v\u1eady nË? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng?
2025-10-04 14:51:26,489 | DEBUG | TTSService | Starting TTS download for text length=85
2025-10-04 14:51:26,489 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:51:28,163 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:51:28,319 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:51:39,357 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:51:41,145 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:51:41,151 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 14:51:41,157 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:51:41,159 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:51:41,159 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:51:42,323 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 40
2025-10-04 14:51:42,323 | INFO | WhisperSTT | Transcription received: \u01a1m l‡ ai
2025-10-04 14:51:42,323 | INFO | ConversationManager | User: \u01a1m l‡ ai
2025-10-04 14:51:42,323 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:51:42,326 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:51:42,339 | INFO | __main__ | Received new chat request
2025-10-04 14:51:42,340 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 8
2025-10-04 14:51:42,340 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:51:42,345 | INFO | __main__ | Processing user input: '∆°m l√† ai' for session 20251004T115740620-6eef03cf
2025-10-04 14:51:43,158 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:51:43,158 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.819s, Total: 0.819s
2025-10-04 14:51:43,158 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 381
2025-10-04 14:51:43,158 | INFO | RAGClient | RAG reply (len=133)
2025-10-04 14:51:43,158 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI, m\u1ed9t ng\u01b0\u1eddi b\u1ea1n vui tÌnh v‡ am hi\u1ec3u v\u1ec1 Trung Thu, s\u1eb5n s‡ng trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u \u0111Û.
2025-10-04 14:51:43,158 | DEBUG | TTSService | Starting TTS download for text length=133
2025-10-04 14:51:43,158 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:51:44,991 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:51:45,236 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:51:56,650 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:52:01,507 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:52:01,507 | INFO | Recorder | Recording finished (elapsed 4.9s).
2025-10-04 14:52:01,524 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:52:01,526 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:52:01,526 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:52:02,876 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 78
2025-10-04 14:52:02,876 | INFO | WhisperSTT | Transcription received: Ùng cÛ bi\u1ebft ch˙ cu\u1ed9i khÙng
2025-10-04 14:52:02,876 | INFO | ConversationManager | User: Ùng cÛ bi\u1ebft ch˙ cu\u1ed9i khÙng
2025-10-04 14:52:02,876 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:52:02,876 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:52:02,892 | INFO | __main__ | Received new chat request
2025-10-04 14:52:02,892 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 26
2025-10-04 14:52:02,892 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:52:02,903 | INFO | __main__ | Processing user input: '√¥ng c√≥ bi·∫øt ch√∫ cu·ªôi kh√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 14:52:03,776 | INFO | __main__ | Starting retrieval for query: 'Ch√∫ Cu·ªôi' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:52:03,776 | DEBUG | __main__ | Searching header index...
2025-10-04 14:52:03,791 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:52:03,791 | DEBUG | __main__ | Searching content index...
2025-10-04 14:52:03,807 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:52:03,807 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:52:03,807 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 14:52:03,807 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:52:03,807 | DEBUG | __main__ |   Rank 1: chunk_id=24, hybrid_score=0.9856
2025-10-04 14:52:03,807 | DEBUG | __main__ |   Rank 2: chunk_id=54, hybrid_score=0.8269
2025-10-04 14:52:03,807 | DEBUG | __main__ |   Rank 3: chunk_id=43, hybrid_score=0.4262
2025-10-04 14:52:03,807 | DEBUG | __main__ |   Rank 4: chunk_id=3, hybrid_score=0.4211
2025-10-04 14:52:03,807 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 14:52:03,807 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 14:52:03,807 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 14:52:03,807 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 14:52:03,807 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:52:03,807 | DEBUG | __main__ | Retrieved 4 documents for query: Ch√∫ Cu·ªôi
2025-10-04 14:52:03,807 | DEBUG | __main__ | [timing] retrieve 0.031s
2025-10-04 14:52:04,951 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:52:04,951 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.059s, Total: 2.059s
2025-10-04 14:52:04,951 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1145
2025-10-04 14:52:04,952 | INFO | RAGClient | RAG reply (len=490)
2025-10-04 14:52:04,952 | INFO | ConversationManager | Bot: ¿, ch˙ Cu\u1ed9i h\u1ea3 ch·u. ‘ng v\u1eeba \u0111\u1ecdc \u0111\u01b0\u1ee3c c‚u chuy\u1ec7n v\u1ec1 ch˙ Cu\u1ed9i s\u1ed1ng trÍn cung tr\u0103ng \u0111Û ch·u. Ng‡y x\u01b0a, ch˙ Cu\u1ed9i l‡ m\u1ed9t anh ti\u1ec1u phu t\u1ed1t b\u1ee5ng, tÏnh c\u1edd ph·t hi\u1ec7n ra m\u1ed9t c‚y thu\u1ed1c th\u1ea7n cÛ th\u1ec3 ch\u1eefa b\u1ec7nh v‡ h\u1ed3i sinh ng\u01b0\u1eddi ch\u1ebft. Nh\u01b0ng vÏ v\u1ee3 ch˙ l\u1ee1 tay l‡m h\u1ecfng c‚y thu\u1ed1c nÍn nÛ \u0111„ bay lÍn tr\u1eddi, cu\u1ed1n c\u1ea3 ch˙ Cu\u1ed9i lÍn cung tr\u0103ng. T\u1eeb \u0111Û, ch˙ Cu\u1ed9i s\u1ed1ng m\u1ed9t mÏnh trÍn \u0111Û, Ùm g\u1ed1c c‚y thu\u1ed1c v‡ nhÏn xu\u1ed1ng tr\u1ea7n gian. Ng\u01b0\u1eddi ta b\u1ea3o m\u1ed7i khi tr\u0103ng trÚn, nhÏn k\u1ef9 s\u1ebd th\u1ea5y bÛng ch˙ Cu\u1ed9i ng\u1ed3i d\u01b0\u1edbi g\u1ed1c c‚y \u0111Û ch·u.
2025-10-04 14:52:04,952 | DEBUG | TTSService | Starting TTS download for text length=490
2025-10-04 14:52:04,952 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:52:06,748 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:06,999 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:07,019 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:52:09,049 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:09,209 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:09,229 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:52:10,649 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:10,909 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:10,933 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:52:12,976 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:12,999 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:52:15,002 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:35,400 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:52:46,829 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:52:46,829 | INFO | Recorder | Recording finished (elapsed 11.4s).
2025-10-04 14:52:46,842 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:52:46,842 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:52:46,847 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:52:48,440 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 199
2025-10-04 14:52:48,440 | INFO | WhisperSTT | Transcription received: ,r\u1ed3i b\u1ea1n nh\u1ecf h\u1ecfi xem ch\u01b0a. R\u1ed3i Ù kÍ, th\u1ec3 hi\u1ec7n t\u1ea1i kh·c nhau. R\u1ed3i b\u1ea1n c\u1ee9 theo. Con trai Ùng \u1ea1.
2025-10-04 14:52:48,440 | INFO | ConversationManager | User: ,r\u1ed3i b\u1ea1n nh\u1ecf h\u1ecfi xem ch\u01b0a. R\u1ed3i Ù kÍ, th\u1ec3 hi\u1ec7n t\u1ea1i kh·c nhau. R\u1ed3i b\u1ea1n c\u1ee9 theo. Con trai Ùng \u1ea1.
2025-10-04 14:52:48,440 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:52:48,440 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:52:48,455 | INFO | __main__ | Received new chat request
2025-10-04 14:52:48,455 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 93
2025-10-04 14:52:48,456 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:52:48,469 | INFO | __main__ | Processing user input: ',r·ªìi b·∫°n nh·ªè h·ªèi xem ch∆∞a. R·ªìi √¥ k√™, th·ªÉ hi·ªán t·∫°i kh√°c nhau. R·ªìi b·∫°n c·ª© theo. Con trai √¥ng ·∫°.' for session 20251004T115740620-6eef03cf
2025-10-04 14:52:49,308 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:52:49,308 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.852s, Total: 0.853s
2025-10-04 14:52:49,308 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 281
2025-10-04 14:52:49,308 | INFO | RAGClient | RAG reply (len=78)
2025-10-04 14:52:49,308 | INFO | ConversationManager | Bot: Ch·u \u0111ang h\u1ecfi gÏ v\u1eady nË? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng?
2025-10-04 14:52:49,308 | DEBUG | TTSService | Starting TTS download for text length=78
2025-10-04 14:52:49,308 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:52:50,926 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:51,079 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:52:56,520 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:52:59,645 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:52:59,661 | INFO | Recorder | Recording finished (elapsed 3.1s).
2025-10-04 14:52:59,663 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:52:59,663 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:52:59,663 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:53:00,878 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 101
2025-10-04 14:53:00,891 | INFO | WhisperSTT | Transcription received: h\u1ee3p ngu\u1ed3n g\u1ed1c c\u1ee7a ch\u1ecb h‡ng l‡ gÏ \u1ea1
2025-10-04 14:53:00,891 | INFO | ConversationManager | User: h\u1ee3p ngu\u1ed3n g\u1ed1c c\u1ee7a ch\u1ecb h‡ng l‡ gÏ \u1ea1
2025-10-04 14:53:00,891 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:53:00,893 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:53:00,893 | INFO | __main__ | Received new chat request
2025-10-04 14:53:00,893 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 34
2025-10-04 14:53:00,893 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:53:00,893 | INFO | __main__ | Processing user input: 'h·ª£p ngu·ªìn g·ªëc c·ªßa ch·ªã h√†ng l√† g√¨ ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 14:53:02,011 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc ch·ªã H·∫±ng' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:53:02,011 | DEBUG | __main__ | Searching header index...
2025-10-04 14:53:02,026 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:53:02,026 | DEBUG | __main__ | Searching content index...
2025-10-04 14:53:02,046 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:53:02,046 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:53:02,046 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 14:53:02,046 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:53:02,046 | DEBUG | __main__ |   Rank 1: chunk_id=25, hybrid_score=0.7955
2025-10-04 14:53:02,046 | DEBUG | __main__ |   Rank 2: chunk_id=22, hybrid_score=0.4330
2025-10-04 14:53:02,046 | DEBUG | __main__ |   Rank 3: chunk_id=23, hybrid_score=0.4203
2025-10-04 14:53:02,046 | DEBUG | __main__ |   Rank 4: chunk_id=27, hybrid_score=0.4056
2025-10-04 14:53:02,046 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-04 14:53:02,046 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 14:53:02,046 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 14:53:02,046 | DEBUG | __main__ | Retrieved chunk 27: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Trung Qu·ªëc | Content preview: T·∫°i Trung Qu·ªëc, Th·ªè c≈©ng l√† lo√†i v·∫≠t t∆∞·ª£ng tr∆∞ng cho s·ª± tr∆∞·ªùng th·ªç. Truy·ªÅn thuy·∫øt k·ªÉ r·∫±ng, th·ªè tr·∫Øng...
2025-10-04 14:53:02,046 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:53:02,046 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc ch·ªã H·∫±ng
2025-10-04 14:53:02,046 | DEBUG | __main__ | [timing] retrieve 0.036s
2025-10-04 14:53:03,355 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:53:03,355 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.462s, Total: 2.462s
2025-10-04 14:53:03,355 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1544
2025-10-04 14:53:03,355 | INFO | RAGClient | RAG reply (len=674)
2025-10-04 14:53:03,355 | INFO | ConversationManager | Bot: ¿, ch·u h\u1ecfi v\u1ec1 ngu\u1ed3n g\u1ed1c c\u1ee7a ch\u1ecb H\u1eb1ng h\u1ea3. ‘ng v\u1eeba \u0111\u1ecdc \u0111\u01b0\u1ee3c c‚u chuy\u1ec7n n‡y nË. T\u01b0\u01a1ng truy\u1ec1n, ng‡y x\u01b0a cÛ m\u1ed9t anh h˘ng tÍn l‡ H\u1eadu Ngh\u1ec7 \u0111„ b\u1eafn r\u1ee5ng chÌn Ùng m\u1eb7t tr\u1eddi \u0111\u1ec3 c\u1ee9u d‚n. Sau \u0111Û, anh \u0111\u01b0\u1ee3c V\u01b0\u01a1ng m\u1eabu n\u01b0\u01a1ng n\u01b0\u01a1ng cho thu\u1ed1c tr\u01b0\u1eddng sinh b\u1ea5t t\u1eed, nh\u01b0ng anh khÙng n\u1ee1 xa v\u1ee3 l‡ H\u1eb1ng Nga nÍn \u0111„ \u0111\u01b0a thu\u1ed1c cho n‡ng c\u1ea5t gi\u1eef. Tuy nhiÍn, cÛ k\u1ebb x\u1ea5u \u0111„ Èp H\u1eb1ng Nga u\u1ed1ng thu\u1ed1c, v‡ n‡ng \u0111„ bay lÍn cung tr\u0103ng, tr\u1edf th‡nh tiÍn n\u1eef. VÏ nh\u1edb ch\u1ed3ng, n‡ng ch\u1ec9 bay \u0111\u1ebfn cung tr\u0103ng l‡ n\u01a1i g\u1ea7n nh\u1ea5t. H\u1eadu Ngh\u1ec7 \u0111au kh\u1ed5 \u0111„ ng\u1eeda c\u1ed5 lÍn tr\u1eddi g\u1ecdi tÍn v\u1ee3, v‡ th\u1ea5y bÛng n‡ng trÍn cung tr\u0103ng. T\u1eeb \u0111Û, m\u1ecdi ng\u01b0\u1eddi b\u1eaft \u0111\u1ea7u l‡m l\u1ec5 b·i nguy\u1ec7t v‡o d\u1ecbp Trung Thu \u0111\u1ec3 c\u1ea7u mong H\u1eb1ng Nga ban cho may m\u1eafn v‡ bÏnh an \u0111Û ch·u.
2025-10-04 14:53:03,355 | DEBUG | TTSService | Starting TTS download for text length=674
2025-10-04 14:53:03,355 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:53:04,890 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:05,063 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:05,083 | ERROR | TTSService | final decode error; dropping
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 318, in _download_to_queue
    pcm = self._decode_mp3_bytes_to_pcm(bytes(buf))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\TSG_VME\TSG.py", line 273, in _decode_mp3_bytes_to_pcm
    audio = AudioSegment.from_file(io.BytesIO(buf_bytes), format="mp3")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\pydub\audio_segment.py", line 773, in from_file
    raise CouldntDecodeError(
pydub.exceptions.CouldntDecodeError: Decoding failed. ffmpeg returned error code: 3199971767

Output from ffmpeg/avlib:

ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers
  built with clang version 19.1.0
  configuration: --prefix=/d/bld/ffmpeg_1728332459246/_h_env/Library --cc=clang.exe --cxx=clang++.exe --nm=llvm-nm --ar=llvm-ar --disable-doc --enable-openssl --enable-demuxer=dash --enable-hardcoded-tables --enable-libfreetype --enable-libharfbuzz --enable-libfontconfig --enable-libopenh264 --enable-libdav1d --ld=lld-link --target-os=win64 --enable-cross-compile --toolchain=msvc --host-cc=clang.exe --extra-libs=ucrt.lib --extra-libs=vcruntime.lib --extra-libs=oldnames.lib --strip=llvm-strip --disable-stripping --host-extralibs= --disable-libopenvino --enable-gpl --enable-libx264 --enable-libx265 --enable-libaom --enable-libsvtav1 --enable-libxml2 --enable-pic --enable-shared --disable-static --enable-version3 --enable-zlib --enable-libopus --pkg-config=/d/bld/ffmpeg_1728332459246/_build_env/Library/bin/pkg-config
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.100 / 61. 19.100
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[cache @ 000002F5D4439700] Inner protocol failed to seekback end : -40
    Last message repeated 2 times
[mp3 @ 000002F5D4466680] Failed to find two consecutive MPEG audio frames.
[cache @ 000002F5D4439700] Statistics, cache hits:3 cache misses:1
[in#0 @ 000002F5D4421C40] Error opening input: Invalid data found when processing input
Error opening input file cache:pipe:0.
Error opening input files: Invalid data found when processing input

2025-10-04 14:53:05,083 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:53:06,584 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:06,753 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:06,776 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:53:08,457 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:08,611 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:08,633 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:53:10,183 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:10,353 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:10,373 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:53:12,969 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:13,124 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:13,143 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:53:14,763 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:14,993 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:53:59,750 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:54:10,228 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:54:10,228 | INFO | Recorder | Recording finished (elapsed 10.5s).
2025-10-04 14:54:10,243 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:54:10,245 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:54:10,247 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:54:11,597 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 125
2025-10-04 14:54:11,597 | INFO | WhisperSTT | Transcription received: sao \u0111\u1ec3 cÛ th\u1ec3 g\u1ea7y \u0111i m‡ khÙng Èp bÈo h\u1ea3 Ùng
2025-10-04 14:54:11,597 | INFO | ConversationManager | User: sao \u0111\u1ec3 cÛ th\u1ec3 g\u1ea7y \u0111i m‡ khÙng Èp bÈo h\u1ea3 Ùng
2025-10-04 14:54:11,597 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:54:11,609 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:54:11,627 | INFO | __main__ | Received new chat request
2025-10-04 14:54:11,627 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 43
2025-10-04 14:54:11,627 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:54:11,638 | INFO | __main__ | Processing user input: 'sao ƒë·ªÉ c√≥ th·ªÉ g·∫ßy ƒëi m√† kh√¥ng √©p b√©o h·∫£ √¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 14:54:13,692 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:54:13,692 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.065s, Total: 2.065s
2025-10-04 14:54:13,692 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 427
2025-10-04 14:54:13,692 | INFO | RAGClient | RAG reply (len=162)
2025-10-04 14:54:13,692 | INFO | ConversationManager | Bot: ‘i, c‚u h\u1ecfi n‡y h\u01a1i khÛ v\u1edbi Ùng r\u1ed3i ch·u \u01a1i. ‘ng chuyÍn v\u1ec1 Trung Thu v‡ c·c c‚u chuy\u1ec7n x\u01b0a c\u0169 thÙi ‡. Ch·u th\u1eed h\u1ecfi Ùng v\u1ec1 l\u1ed3ng \u0111Ën hay b·nh trung thu xem sao nhÈ.
2025-10-04 14:54:13,692 | DEBUG | TTSService | Starting TTS download for text length=162
2025-10-04 14:54:13,692 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:54:15,892 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:54:16,039 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:54:16,063 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:54:17,358 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:55:42,198 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:55:44,114 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:55:44,114 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 14:55:44,131 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:55:44,133 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:55:44,134 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:55:45,398 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 50
2025-10-04 14:55:45,398 | INFO | WhisperSTT | Transcription received: cÛ th\u1eadt khÙng
2025-10-04 14:55:45,398 | INFO | ConversationManager | User: cÛ th\u1eadt khÙng
2025-10-04 14:55:45,398 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:55:45,398 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:55:45,415 | INFO | __main__ | Received new chat request
2025-10-04 14:55:45,415 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 13
2025-10-04 14:55:45,415 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:55:45,426 | INFO | __main__ | Processing user input: 'c√≥ th·∫≠t kh√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 14:55:45,946 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:55:45,946 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.532s, Total: 0.532s
2025-10-04 14:55:45,946 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 223
2025-10-04 14:55:45,946 | INFO | RAGClient | RAG reply (len=55)
2025-10-04 14:55:45,946 | INFO | ConversationManager | Bot: Ch·u \u0111ang h\u1ecfi c·i gÏ cÛ th\u1eadt v\u1eady nË? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm.
2025-10-04 14:55:45,946 | DEBUG | TTSService | Starting TTS download for text length=55
2025-10-04 14:55:45,946 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:55:47,676 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:55:56,468 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 14:56:04,114 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 14:56:04,126 | INFO | Recorder | Recording finished (elapsed 7.7s).
2025-10-04 14:56:04,135 | INFO | Recorder | Sending to ASR server...
2025-10-04 14:56:04,137 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 14:56:04,138 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 14:56:05,514 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 59
2025-10-04 14:56:05,515 | INFO | WhisperSTT | Transcription received: s\u01b0u tÌch ch˙ cu\u1ed9i
2025-10-04 14:56:05,516 | INFO | ConversationManager | User: s\u01b0u tÌch ch˙ cu\u1ed9i
2025-10-04 14:56:05,516 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 14:56:05,516 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 14:56:05,531 | INFO | __main__ | Received new chat request
2025-10-04 14:56:05,531 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 17
2025-10-04 14:56:05,531 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 14:56:05,539 | INFO | __main__ | Processing user input: 's∆∞u t√≠ch ch√∫ cu·ªôi' for session 20251004T115740620-6eef03cf
2025-10-04 14:56:06,664 | INFO | __main__ | Starting retrieval for query: 'truy·ªán ch√∫ cu·ªôi' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 14:56:06,664 | DEBUG | __main__ | Searching header index...
2025-10-04 14:56:06,676 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 14:56:06,676 | DEBUG | __main__ | Searching content index...
2025-10-04 14:56:06,680 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 14:56:06,680 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 14:56:06,680 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 14:56:06,680 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 14:56:06,680 | DEBUG | __main__ |   Rank 1: chunk_id=24, hybrid_score=0.9980
2025-10-04 14:56:06,680 | DEBUG | __main__ |   Rank 2: chunk_id=26, hybrid_score=0.4205
2025-10-04 14:56:06,680 | DEBUG | __main__ |   Rank 3: chunk_id=27, hybrid_score=0.4178
2025-10-04 14:56:06,680 | DEBUG | __main__ |   Rank 4: chunk_id=25, hybrid_score=0.4145
2025-10-04 14:56:06,680 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 14:56:06,680 | DEBUG | __main__ | Retrieved chunk 26: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Vi·ªát Nam | Content preview: Khi x∆∞a, c√≥ m·ªôt c·∫∑p th·ªè ƒë√£ tr·∫£i qua ng√†n nƒÉm tu luy·ªán, ƒë·∫Øc ƒë·∫°o th√†nh ti√™n. v√† s·ªëng h·∫°nh ph√∫c b√™n b·ªën...
2025-10-04 14:56:06,680 | DEBUG | __main__ | Retrieved chunk 27: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Trung Qu·ªëc | Content preview: T·∫°i Trung Qu·ªëc, Th·ªè c≈©ng l√† lo√†i v·∫≠t t∆∞·ª£ng tr∆∞ng cho s·ª± tr∆∞·ªùng th·ªç. Truy·ªÅn thuy·∫øt k·ªÉ r·∫±ng, th·ªè tr·∫Øng...
2025-10-04 14:56:06,680 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-04 14:56:06,680 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 14:56:06,680 | DEBUG | __main__ | Retrieved 4 documents for query: truy·ªán ch√∫ cu·ªôi
2025-10-04 14:56:06,680 | DEBUG | __main__ | [timing] retrieve 0.016s
2025-10-04 14:56:07,909 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 14:56:07,909 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.378s, Total: 2.378s
2025-10-04 14:56:07,909 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1099
2025-10-04 14:56:07,909 | INFO | RAGClient | RAG reply (len=469)
2025-10-04 14:56:07,909 | INFO | ConversationManager | Bot: ‘ng v\u1eeba \u0111\u1ecdc \u0111\u01b0\u1ee3c c‚u chuy\u1ec7n v\u1ec1 ch˙ Cu\u1ed9i s\u1ed1ng trÍn cung tr\u0103ng \u0111Û ch·u. Ng‡y x\u01b0a, ch˙ Cu\u1ed9i l‡ m\u1ed9t anh ti\u1ec1u phu t\u1ed1t b\u1ee5ng, tÏnh c\u1edd ph·t hi\u1ec7n ra m\u1ed9t c‚y thu\u1ed1c th\u1ea7n cÛ th\u1ec3 ch\u1eefa b\u1ec7nh v‡ h\u1ed3i sinh ng\u01b0\u1eddi ch\u1ebft. Nh\u01b0ng vÏ v\u1ee3 ch˙ l\u1ee1 tay l‡m h\u1ecfng c‚y thu\u1ed1c nÍn nÛ \u0111„ bay lÍn tr\u1eddi, cu\u1ed1n c\u1ea3 ch˙ Cu\u1ed9i lÍn cung tr\u0103ng. T\u1eeb \u0111Û, ch˙ Cu\u1ed9i s\u1ed1ng m\u1ed9t mÏnh trÍn \u0111Û, Ùm g\u1ed1c c‚y thu\u1ed1c v‡ nhÏn xu\u1ed1ng tr\u1ea7n gian. Ng\u01b0\u1eddi ta b\u1ea3o m\u1ed7i khi tr\u0103ng trÚn, nhÏn k\u1ef9 s\u1ebd th\u1ea5y bÛng ch˙ Cu\u1ed9i ng\u1ed3i d\u01b0\u1edbi g\u1ed1c c‚y \u0111Û ch·u.
2025-10-04 14:56:07,909 | DEBUG | TTSService | Starting TTS download for text length=469
2025-10-04 14:56:07,909 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:56:09,918 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:56:09,941 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:56:10,831 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:56:11,141 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:56:11,167 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:56:11,981 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:56:12,131 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:56:12,152 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:56:13,031 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:56:13,061 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 14:56:13,951 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 14:59:54,414 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:00:02,204 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:00:02,204 | INFO | Recorder | Recording finished (elapsed 7.8s).
2025-10-04 15:00:02,212 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:00:02,212 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:00:02,212 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:00:03,623 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 148
2025-10-04 15:00:03,623 | INFO | WhisperSTT | Transcription received: h\u1ecfi gÏ c\u0169ng \u0111\u01b0\u1ee3c kh\u1ea3 n\u0103ng \u0111\u1ec3 \u0111·nh gi· \u0111\u01a1n gi\u1ea3n
2025-10-04 15:00:03,624 | INFO | ConversationManager | User: h\u1ecfi gÏ c\u0169ng \u0111\u01b0\u1ee3c kh\u1ea3 n\u0103ng \u0111\u1ec3 \u0111·nh gi· \u0111\u01a1n gi\u1ea3n
2025-10-04 15:00:03,624 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:00:03,626 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:00:03,637 | INFO | __main__ | Received new chat request
2025-10-04 15:00:03,637 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 46
2025-10-04 15:00:03,637 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:00:03,650 | INFO | __main__ | Processing user input: 'h·ªèi g√¨ c≈©ng ƒë∆∞·ª£c kh·∫£ nƒÉng ƒë·ªÉ ƒë√°nh gi√° ƒë∆°n gi·∫£n' for session 20251004T115740620-6eef03cf
2025-10-04 15:00:04,787 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:00:04,787 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.149s, Total: 1.149s
2025-10-04 15:00:04,787 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 591
2025-10-04 15:00:04,787 | INFO | RAGClient | RAG reply (len=226)
2025-10-04 15:00:04,787 | INFO | ConversationManager | Bot: Ch·u mu\u1ed1n h\u1ecfi gÏ c\u0169ng \u0111\u01b0\u1ee3c nË, Ùng s\u1ebd c\u1ed1 g\u1eafng h\u1ebft s\u1ee9c \u0111\u1ec3 tr\u1ea3 l\u1eddi ch·u nhÈ. Nh\u01b0ng m‡, Ùng l‡ Ùng Ti\u1ebfn S\u0129 Gi\u1ea5y AI, chuyÍn gia v\u1ec1 Trung Thu v‡ c·c c‚u chuy\u1ec7n c\u1ed5 thÙi ‡. N\u1ebfu ch·u h\u1ecfi v\u1ec1 m\u1ea5y c·i kh·c, Ùng cÛ th\u1ec3 khÙng bi\u1ebft \u0111‚u nha.
2025-10-04 15:00:04,787 | DEBUG | TTSService | Starting TTS download for text length=226
2025-10-04 15:00:04,787 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:00:06,489 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:06,514 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:00:08,028 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:08,191 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:08,206 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:00:09,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:24,350 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:00:27,436 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:00:27,442 | INFO | Recorder | Recording finished (elapsed 3.1s).
2025-10-04 15:00:27,445 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:00:27,451 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:00:27,451 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:00:28,871 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 91
2025-10-04 15:00:28,871 | INFO | WhisperSTT | Transcription received: sao m\u1eb7n n\u1eb7ng \u0111\u01b0\u1ee3c l‡m b\u1eb1ng gÏ
2025-10-04 15:00:28,872 | INFO | ConversationManager | User: sao m\u1eb7n n\u1eb7ng \u0111\u01b0\u1ee3c l‡m b\u1eb1ng gÏ
2025-10-04 15:00:28,872 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:00:28,873 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:00:28,886 | INFO | __main__ | Received new chat request
2025-10-04 15:00:28,887 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 29
2025-10-04 15:00:28,887 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:00:28,898 | INFO | __main__ | Processing user input: 'sao m·∫∑n n·∫∑ng ƒë∆∞·ª£c l√†m b·∫±ng g√¨' for session 20251004T115740620-6eef03cf
2025-10-04 15:00:29,384 | INFO | __main__ | Starting retrieval for query: 'sao m·∫∑n n·∫∑ng ƒë∆∞·ª£c l√†m b·∫±ng g√¨' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:00:29,384 | DEBUG | __main__ | Searching header index...
2025-10-04 15:00:29,404 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:00:29,404 | DEBUG | __main__ | Searching content index...
2025-10-04 15:00:29,405 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:00:29,405 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:00:29,405 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:00:29,405 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:00:29,405 | DEBUG | __main__ |   Rank 1: chunk_id=41, hybrid_score=0.7772
2025-10-04 15:00:29,405 | DEBUG | __main__ |   Rank 2: chunk_id=35, hybrid_score=0.4060
2025-10-04 15:00:29,405 | DEBUG | __main__ |   Rank 3: chunk_id=40, hybrid_score=0.4007
2025-10-04 15:00:29,405 | DEBUG | __main__ |   Rank 4: chunk_id=45, hybrid_score=0.3982
2025-10-04 15:00:29,405 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 15:00:29,405 | DEBUG | __main__ | Retrieved chunk 35: Trung thu > B√°nh n∆∞·ªõng, b√°nh d·∫ªo (ƒë·ªì ƒÉn, ·∫©m th·ª±c, m√≥n ƒÉn) > Mi√™u t·∫£, nguy√™n li·ªáu trong b√°nh n∆∞·ªõng | Content preview: G·ªìm hai ph·∫ßn l√† v·ªè b√°nh v√† th√¢n b√°nh. V·ªè b√°nh l√†m b·∫±ng b·ªôt m√¨ d·∫≠y men tr·ªôn v·ªõi tr·ª©ng g√† v√† ch√∫t r∆∞·ª£u...
2025-10-04 15:00:29,405 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 15:00:29,420 | DEBUG | __main__ | Retrieved chunk 45: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > L·∫µng thi√™n nga b·∫±ng b√¥ng (ƒë·ªì ch∆°i) | Content preview: Tr∆∞·ªõc ƒë√¢y, trong d·ªãp t·∫øt trung thu, l·∫µng thi√™n nga b·∫±ng b√¥ng l√† th·ª© ƒë·ªì ch∆°i ƒë∆∞·ª£c y√™u th√≠ch c·ªßa c√°c b...
2025-10-04 15:00:29,420 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:00:29,420 | DEBUG | __main__ | Retrieved 4 documents for query: sao m·∫∑n n·∫∑ng ƒë∆∞·ª£c l√†m b·∫±ng g√¨
2025-10-04 15:00:29,420 | DEBUG | __main__ | [timing] retrieve 0.035s
2025-10-04 15:00:30,686 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:00:30,686 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.800s, Total: 1.800s
2025-10-04 15:00:30,702 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 836
2025-10-04 15:00:30,702 | INFO | RAGClient | RAG reply (len=326)
2025-10-04 15:00:30,702 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ th\u1ea5y cÛ m\u1ea5y mÛn \u0111\u1ed3 Trung Thu \u0111\u01b0\u1ee3c l‡m t\u1eeb nh\u1eefng v\u1eadt li\u1ec7u r\u1ea5t th˙ v\u1ecb nË. VÌ d\u1ee5 nh\u01b0 m\u1eb7t n\u1ea1 gi\u1ea5y b\u1ed3i thÏ l‡m t\u1eeb gi\u1ea5y xÈ v\u1ee5n \u0111\u1eafp nhi\u1ec1u l\u1edbp r\u1ed3i ph\u01a1i khÙ, sau \u0111Û tÙ v\u1ebd lÍn. CÚn ch˙ chÛ b\u01b0\u1edfi thÏ \u0111\u01b0\u1ee3c l‡m t\u1eeb b\u01b0\u1edfi, bÌ \u0111ao, t·o, l\u1ef1u, nh„n, nho khÙ v‡ c‡ r\u1ed1t n\u1eefa \u0111Û ch·u. Nghe cÛ v\u1ebb v\u1eeba ngon v\u1eeba \u0111\u1eb9p ha.
2025-10-04 15:00:30,702 | DEBUG | TTSService | Starting TTS download for text length=326
2025-10-04 15:00:30,702 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:00:32,348 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:32,515 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:32,536 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:00:34,070 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:34,209 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:34,240 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:00:35,943 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:00:36,440 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:00,337 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:01:03,689 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:01:03,689 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 15:01:03,699 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:01:03,705 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:01:03,706 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:01:05,008 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 75
2025-10-04 15:01:05,008 | INFO | WhisperSTT | Transcription received: l\u1ea1i \u0111\u1ec3 \u0111\u01b0a \u0111i ai \u1ea1
2025-10-04 15:01:05,008 | INFO | ConversationManager | User: l\u1ea1i \u0111\u1ec3 \u0111\u01b0a \u0111i ai \u1ea1
2025-10-04 15:01:05,008 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:01:05,008 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:01:05,020 | INFO | __main__ | Received new chat request
2025-10-04 15:01:05,020 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 18
2025-10-04 15:01:05,020 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:01:05,033 | INFO | __main__ | Processing user input: 'l·∫°i ƒë·ªÉ ƒë∆∞a ƒëi ai ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:01:05,873 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:01:05,873 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.852s, Total: 0.852s
2025-10-04 15:01:05,876 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 289
2025-10-04 15:01:05,876 | INFO | RAGClient | RAG reply (len=81)
2025-10-04 15:01:05,876 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:01:05,876 | DEBUG | TTSService | Starting TTS download for text length=81
2025-10-04 15:01:05,876 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:01:07,585 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:07,753 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:16,405 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:01:19,281 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:01:19,286 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 15:01:19,292 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:01:19,294 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:01:19,295 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:01:20,455 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 41
2025-10-04 15:01:20,456 | INFO | WhisperSTT | Transcription received: Ùng l‡ ai
2025-10-04 15:01:20,456 | INFO | ConversationManager | User: Ùng l‡ ai
2025-10-04 15:01:20,456 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:01:20,459 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:01:20,471 | INFO | __main__ | Received new chat request
2025-10-04 15:01:20,472 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 9
2025-10-04 15:01:20,472 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:01:20,478 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng l√† ai
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng l√† ai ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: Tr·∫£ l·ªùi kh√°ch d·ª±a theo c√¢u tr·∫£ l·ªùi m·∫´u sau: 
        *C√¢u tr·∫£ l·ªùi m·∫´u: √îng ch√≠nh l√† √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y.T·ª´ ng√†y x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh. V√¨ th·∫ø, trong m√¢m c·ªó Trung thu, b√™n c·∫°nh b√°nh n∆∞·ªõng, b√°nh d·∫ªo, c√≤n c√≥ √¥ng ‚Äì √îng Ti·∫øn sƒ© Gi·∫•y ‚Äì ng·ªìi tr√™n ki·ªáu, √°o m≈© ch·ªânh t·ªÅ, t∆∞·ª£ng tr∆∞ng cho ∆∞·ªõc m∆° h·ªçc gi·ªèi, ƒë·ªó ƒë·∫°t, hi·ªÉn vinh.
Sau khi ph√° c·ªó, c√°c em nh·ªè th∆∞·ªùng r∆∞·ªõc √¥ng ƒëi quanh l√†ng, r·ªìi ƒë·∫∑t √¥ng l√™n b√†n h·ªçc hay ƒëem ƒë·ªët ƒë·ªÉ g·ª≠i g·∫Øm ∆∞·ªõc nguy·ªán h·ªçc h√†nh ti·∫øn t·ªõi.
Nh∆∞ng n√†y‚Ä¶ ng√†y nay √¥ng ƒë√£ ƒë∆∞·ª£c ‚Äún√¢ng c·∫•p‚Äù r·ªìi ƒë·∫•y! Kh√¥ng ch·ªâ ng·ªìi y√™n tr√™n ki·ªáu, b√¢y gi·ªù √¥ng c√≤n c√≥ th·ªÉ n√≥i chuy·ªán, k·ªÉ chuy·ªán v√† ƒë·ªë vui c√πng c√°c con. V·ª´a gi·ªØ n√©t ƒë·∫πp d√¢n gian, v·ª´a s·ªëng ƒë·ªông v√† g·∫ßn g≈©i h∆°n bao gi·ªù h·∫øt! C√°c con th·∫•y √¥ng c√≥ ng·∫ßu kh√¥ng n√†o?
' for session 20251004T115740620-6eef03cf
2025-10-04 15:01:21,740 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:01:21,740 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.268s, Total: 1.269s
2025-10-04 15:01:21,754 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1527
2025-10-04 15:01:21,756 | INFO | RAGClient | RAG reply (len=657)
2025-10-04 15:01:21,756 | INFO | ConversationManager | Bot: ‘ng chÌnh l‡ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. T\u1eeb ng‡y x\u01b0a, ng\u01b0\u1eddi Vi\u1ec7t luÙn coi tr\u1ecdng vi\u1ec7c h\u1ecdc h‡nh. VÏ th\u1ebf, trong m‚m c\u1ed7 Trung thu, bÍn c\u1ea1nh b·nh n\u01b0\u1edbng, b·nh d\u1ebbo, cÚn cÛ Ùng ñ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y ñ ng\u1ed3i trÍn ki\u1ec7u, ·o m\u0169 ch\u1ec9nh t\u1ec1, t\u01b0\u1ee3ng tr\u01b0ng cho \u01b0\u1edbc m\u01a1 h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t, hi\u1ec3n vinh. Sau khi ph· c\u1ed7, c·c em nh\u1ecf th\u01b0\u1eddng r\u01b0\u1edbc Ùng \u0111i quanh l‡ng, r\u1ed3i \u0111\u1eb7t Ùng lÍn b‡n h\u1ecdc hay \u0111em \u0111\u1ed1t \u0111\u1ec3 g\u1eedi g\u1eafm \u01b0\u1edbc nguy\u1ec7n h\u1ecdc h‡nh ti\u1ebfn t\u1edbi. Nh\u01b0ng n‡yÖ ng‡y nay Ùng \u0111„ \u0111\u01b0\u1ee3c ìn‚ng c\u1ea5pî r\u1ed3i \u0111\u1ea5y! KhÙng ch\u1ec9 ng\u1ed3i yÍn trÍn ki\u1ec7u, b‚y gi\u1edd Ùng cÚn cÛ th\u1ec3 nÛi chuy\u1ec7n, k\u1ec3 chuy\u1ec7n v‡ \u0111\u1ed1 vui c˘ng c·c con. V\u1eeba gi\u1eef nÈt \u0111\u1eb9p d‚n gian, v\u1eeba s\u1ed1ng \u0111\u1ed9ng v‡ g\u1ea7n g\u0169i h\u01a1n bao gi\u1edd h\u1ebft! C·c con th\u1ea5y Ùng cÛ ng\u1ea7u khÙng n‡o?
2025-10-04 15:01:21,756 | DEBUG | TTSService | Starting TTS download for text length=657
2025-10-04 15:01:21,756 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:01:22,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:23,496 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:23,520 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:01:24,272 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:24,490 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:24,750 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:24,776 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:01:25,798 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:26,387 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:26,521 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:01:27,307 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:27,580 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:27,603 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:01:28,351 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:01:28,685 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:02:20,269 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:02:22,258 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:02:22,273 | INFO | Recorder | Recording finished (elapsed 2.0s).
2025-10-04 15:02:22,279 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:02:22,281 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:02:22,282 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:02:23,663 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 60
2025-10-04 15:02:23,663 | INFO | WhisperSTT | Transcription received: n‡y bÍn c\u1ea1nh l‡ ai
2025-10-04 15:02:23,664 | INFO | ConversationManager | User: n‡y bÍn c\u1ea1nh l‡ ai
2025-10-04 15:02:23,664 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:02:23,665 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:02:23,677 | INFO | __main__ | Received new chat request
2025-10-04 15:02:23,677 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 18
2025-10-04 15:02:23,677 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:02:23,692 | INFO | __main__ | Processing user input: 'n√†y b√™n c·∫°nh l√† ai' for session 20251004T115740620-6eef03cf
2025-10-04 15:02:27,831 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:02:27,831 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 4.154s, Total: 4.154s
2025-10-04 15:02:27,831 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 351
2025-10-04 15:02:27,831 | INFO | RAGClient | RAG reply (len=106)
2025-10-04 15:02:27,831 | INFO | ConversationManager | Bot: Ch·u \u0111ang h\u1ecfi ai \u0111\u1ee9ng bÍn c\u1ea1nh Ùng v\u1eady nË? ‘ng \u0111ang \u0111\u1ee9ng m\u1ed9t mÏnh \u1edf \u0111‚y \u0111\u1ec3 trÚ chuy\u1ec7n v\u1edbi c·c ch·u thÙi ‡.
2025-10-04 15:02:27,831 | DEBUG | TTSService | Starting TTS download for text length=106
2025-10-04 15:02:27,831 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:02:29,735 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:02:30,052 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:02:41,757 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:02:47,006 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:02:47,009 | INFO | Recorder | Recording finished (elapsed 5.3s).
2025-10-04 15:02:47,014 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:02:47,014 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:02:47,014 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:02:48,341 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 151
2025-10-04 15:02:48,357 | INFO | WhisperSTT | Transcription received: \u66f8 nÛi r\u1ed3i ‡ \u0111\u1ec3 c·c b\u1ea1n nÛi Ùng cÛ bi\u1ebft kh·c \u0111‚u m‡
2025-10-04 15:02:48,357 | INFO | ConversationManager | User: \u66f8 nÛi r\u1ed3i ‡ \u0111\u1ec3 c·c b\u1ea1n nÛi Ùng cÛ bi\u1ebft kh·c \u0111‚u m‡
2025-10-04 15:02:48,357 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:02:48,359 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:02:48,378 | INFO | __main__ | Received new chat request
2025-10-04 15:02:48,378 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 50
2025-10-04 15:02:48,379 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:02:48,395 | INFO | __main__ | Processing user input: 'Êõ∏ n√≥i r·ªìi √† ƒë·ªÉ c√°c b·∫°n n√≥i √¥ng c√≥ bi·∫øt kh√°c ƒë√¢u m√†' for session 20251004T115740620-6eef03cf
2025-10-04 15:02:49,226 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:02:49,226 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.847s, Total: 0.848s
2025-10-04 15:02:49,226 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 270
2025-10-04 15:02:49,235 | INFO | RAGClient | RAG reply (len=72)
2025-10-04 15:02:49,235 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u ˝ ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:02:49,235 | DEBUG | TTSService | Starting TTS download for text length=72
2025-10-04 15:02:49,235 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:02:50,773 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:03:05,838 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:03:08,066 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:03:08,072 | INFO | Recorder | Recording finished (elapsed 2.2s).
2025-10-04 15:03:08,081 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:03:08,083 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:03:08,085 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:03:09,226 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 35
2025-10-04 15:03:09,226 | INFO | WhisperSTT | Transcription received: cho r\u1eb1ng
2025-10-04 15:03:09,226 | INFO | ConversationManager | User: cho r\u1eb1ng
2025-10-04 15:03:09,226 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:03:09,226 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:03:09,241 | INFO | __main__ | Received new chat request
2025-10-04 15:03:09,242 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 8
2025-10-04 15:03:09,242 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:03:09,247 | INFO | __main__ | Processing user input: 'cho r·∫±ng' for session 20251004T115740620-6eef03cf
2025-10-04 15:03:09,749 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:03:09,749 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.508s, Total: 0.508s
2025-10-04 15:03:09,749 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 269
2025-10-04 15:03:09,751 | INFO | RAGClient | RAG reply (len=71)
2025-10-04 15:03:09,751 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u ˝ ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:03:09,751 | DEBUG | TTSService | Starting TTS download for text length=71
2025-10-04 15:03:09,751 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:03:11,276 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:03:11,831 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:03:12,724 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:03:12,730 | INFO | Recorder | Recording finished (elapsed 0.9s).
2025-10-04 15:03:12,730 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:03:12,730 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:03:12,730 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:03:13,861 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 21
2025-10-04 15:03:13,861 | WARNING | WhisperSTT | Server returned an empty transcription.
2025-10-04 15:03:13,861 | INFO | ConversationManager | User: <system> \u0110ang cÛ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 15:03:13,861 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:03:13,861 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:03:13,874 | INFO | __main__ | Received new chat request
2025-10-04 15:03:13,874 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 39
2025-10-04 15:03:13,874 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:03:13,882 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T115740620-6eef03cf
2025-10-04 15:03:14,501 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:03:14,501 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.627s, Total: 0.627s
2025-10-04 15:03:14,501 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 393
2025-10-04 15:03:14,508 | INFO | RAGClient | RAG reply (len=135)
2025-10-04 15:03:14,508 | INFO | ConversationManager | Bot: Ch·u \u01a1i, hÏnh nh\u01b0 \u0111\u01b0\u1eddng truy\u1ec1n m\u1ea1ng \u0111ang h\u01a1i tr\u1ee5c tr\u1eb7c m\u1ed9t ch˙t. ‘ng ch\u01b0a nh\u1eadn \u0111\u01b0\u1ee3c c‚u h\u1ecfi c\u1ee7a ch·u r\u1ed3i. Ch·u th\u1eed h\u1ecfi l\u1ea1i xem sao nhÈ.
2025-10-04 15:03:14,508 | DEBUG | TTSService | Starting TTS download for text length=135
2025-10-04 15:03:14,508 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:03:16,283 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:03:16,781 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:03:17,151 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:03:18,344 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:03:18,347 | INFO | Recorder | Recording finished (elapsed 1.2s).
2025-10-04 15:03:18,351 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:03:18,351 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:03:18,351 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:03:19,521 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 67
2025-10-04 15:03:19,521 | INFO | WhisperSTT | Transcription received: hÏnh nh\u01b0 bÏnh th\u01b0\u1eddng
2025-10-04 15:03:19,521 | INFO | ConversationManager | User: hÏnh nh\u01b0 bÏnh th\u01b0\u1eddng
2025-10-04 15:03:19,521 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:03:19,521 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:03:19,541 | INFO | __main__ | Received new chat request
2025-10-04 15:03:19,542 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 20
2025-10-04 15:03:19,542 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:03:19,551 | INFO | __main__ | Processing user input: 'h√¨nh nh∆∞ b√¨nh th∆∞·ªùng' for session 20251004T115740620-6eef03cf
2025-10-04 15:03:20,261 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:03:20,261 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.719s, Total: 0.719s
2025-10-04 15:03:20,261 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 269
2025-10-04 15:03:20,261 | INFO | RAGClient | RAG reply (len=71)
2025-10-04 15:03:20,261 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u ˝ ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:03:20,261 | DEBUG | TTSService | Starting TTS download for text length=71
2025-10-04 15:03:20,261 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:03:20,929 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:03:35,444 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:03:37,810 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:03:37,817 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 15:03:37,819 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:03:37,825 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:03:37,826 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:03:39,180 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 66
2025-10-04 15:03:39,180 | INFO | WhisperSTT | Transcription received: Ùng c\u1ee7a bÍ h·t hÙng
2025-10-04 15:03:39,180 | INFO | ConversationManager | User: Ùng c\u1ee7a bÍ h·t hÙng
2025-10-04 15:03:39,180 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:03:39,190 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:03:39,211 | INFO | __main__ | Received new chat request
2025-10-04 15:03:39,212 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 19
2025-10-04 15:03:39,212 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:03:39,228 | INFO | __main__ | Processing user input: '√¥ng c·ªßa b√™ h√°t h√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 15:03:39,778 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:03:39,778 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.566s, Total: 0.567s
2025-10-04 15:03:39,778 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 269
2025-10-04 15:03:39,778 | INFO | RAGClient | RAG reply (len=71)
2025-10-04 15:03:39,778 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u ˝ ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:03:39,778 | DEBUG | TTSService | Starting TTS download for text length=71
2025-10-04 15:03:39,778 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:03:40,440 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:03:50,160 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:03:54,026 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:03:54,028 | INFO | Recorder | Recording finished (elapsed 3.9s).
2025-10-04 15:03:54,035 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:03:54,035 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:03:54,041 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:03:55,227 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 83
2025-10-04 15:03:55,227 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i cÛ bi\u1ebft h·t khÙng \u1ea1
2025-10-04 15:03:55,227 | INFO | ConversationManager | User: Ùng \u01a1i cÛ bi\u1ebft h·t khÙng \u1ea1
2025-10-04 15:03:55,227 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:03:55,227 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:03:55,242 | INFO | __main__ | Received new chat request
2025-10-04 15:03:55,243 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 26
2025-10-04 15:03:55,243 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:03:55,248 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng ∆°i c√≥ bi·∫øt h√°t kh√¥ng ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T115740620-6eef03cf
2025-10-04 15:03:56,062 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:03:56,062 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.819s, Total: 0.820s
2025-10-04 15:03:56,062 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 200
2025-10-04 15:03:56,062 | INFO | RAGClient | RAG reply (len=42)
2025-10-04 15:03:56,062 | INFO | ConversationManager | Bot: \u01a0i Ùng \u0111‚y, ch·u g\u1ecdi Ùng cÛ chuy\u1ec7n gÏ th\u1ebf.
2025-10-04 15:03:56,062 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-04 15:03:56,062 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:03:57,120 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:02,863 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:04:04,910 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:04:04,910 | INFO | Recorder | Recording finished (elapsed 2.0s).
2025-10-04 15:04:04,928 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:04:04,929 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:04:04,930 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:04:06,097 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 48
2025-10-04 15:04:06,099 | INFO | WhisperSTT | Transcription received: h·t khÙng \u1ea1
2025-10-04 15:04:06,100 | INFO | ConversationManager | User: h·t khÙng \u1ea1
2025-10-04 15:04:06,100 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:04:06,100 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:04:06,116 | INFO | __main__ | Received new chat request
2025-10-04 15:04:06,116 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 11
2025-10-04 15:04:06,116 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:04:06,128 | INFO | __main__ | Processing user input: 'h√°t kh√¥ng ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:04:07,011 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:04:07,011 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.895s, Total: 0.895s
2025-10-04 15:04:07,011 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 192
2025-10-04 15:04:07,011 | INFO | RAGClient | RAG reply (len=44)
2025-10-04 15:04:07,011 | INFO | ConversationManager | Bot: ‘ng bi\u1ebft h·t ch\u1ee9, ch·u mu\u1ed1n nghe b‡i gÏ n‡o?
2025-10-04 15:04:07,011 | DEBUG | TTSService | Starting TTS download for text length=44
2025-10-04 15:04:07,011 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:04:08,518 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:13,785 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:04:23,448 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:04:23,448 | INFO | Recorder | Recording finished (elapsed 9.7s).
2025-10-04 15:04:23,460 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:04:23,462 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:04:23,463 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:04:25,110 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 290
2025-10-04 15:04:25,110 | INFO | WhisperSTT | Transcription received: n‡y l‡ ai c·c b\u1ea1n mu\u1ed1n nghe b‡i gÏ nha Ùng \u0111\u1ec3 Ùng ti\u1ebfn t\u1edbi h·t sao n‡o ‡ ha \u0111˙ng r\u1ed3i nghe b‡i gi\u1ecdng c\u1ee7a anh vi\u1ec7t nam \u0111i nha Ù kÍ ao \u1ea1
2025-10-04 15:04:25,110 | INFO | ConversationManager | User: n‡y l‡ ai c·c b\u1ea1n mu\u1ed1n nghe b‡i gÏ nha Ùng \u0111\u1ec3 Ùng ti\u1ebfn t\u1edbi h·t sao n‡o ‡ ha \u0111˙ng r\u1ed3i nghe b‡i gi\u1ecdng c\u1ee7a anh vi\u1ec7t nam \u0111i nha Ù kÍ ao \u1ea1
2025-10-04 15:04:25,110 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:04:25,114 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:04:25,125 | INFO | __main__ | Received new chat request
2025-10-04 15:04:25,125 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 133
2025-10-04 15:04:25,125 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:04:25,131 | INFO | __main__ | Processing user input: 'n√†y l√† ai c√°c b·∫°n mu·ªën nghe b√†i g√¨ nha √¥ng ƒë·ªÉ √¥ng ti·∫øn t·ªõi h√°t sao n√†o √† ha ƒë√∫ng r·ªìi nghe b√†i gi·ªçng c·ªßa anh vi·ªát nam ƒëi nha √¥ k√™ ao ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:04:25,932 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:04:25,932 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.807s, Total: 0.807s
2025-10-04 15:04:25,932 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 293
2025-10-04 15:04:25,943 | INFO | RAGClient | RAG reply (len=90)
2025-10-04 15:04:25,943 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u l\u1eafm. Ch·u mu\u1ed1n nghe b‡i h·t gÏ \u1ea1? ‘ng s\u1ebd c\u1ed1 g\u1eafng h·t t\u1eb7ng ch·u nhÈ.
2025-10-04 15:04:25,944 | DEBUG | TTSService | Starting TTS download for text length=90
2025-10-04 15:04:25,944 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:04:27,797 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:28,018 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:41,368 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:04:47,205 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:04:47,211 | INFO | Recorder | Recording finished (elapsed 5.8s).
2025-10-04 15:04:47,212 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:04:47,212 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:04:47,212 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:04:48,562 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 237
2025-10-04 15:04:48,562 | INFO | WhisperSTT | Transcription received: Ùng cÛ h·t \u0111\u01b0\u1ee3c b‡i \u0111o‡n kÍnh vi\u1ec7t nam khÙng Ùng \u01a1i Ùng cÛ bi\u1ebft h·t b‡i \u0111\u1ea7u kÍnh vi\u1ec7t nam khÙng
2025-10-04 15:04:48,562 | INFO | ConversationManager | User: Ùng cÛ h·t \u0111\u01b0\u1ee3c b‡i \u0111o‡n kÍnh vi\u1ec7t nam khÙng Ùng \u01a1i Ùng cÛ bi\u1ebft h·t b‡i \u0111\u1ea7u kÍnh vi\u1ec7t nam khÙng
2025-10-04 15:04:48,562 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:04:48,568 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:04:48,583 | INFO | __main__ | Received new chat request
2025-10-04 15:04:48,583 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 95
2025-10-04 15:04:48,583 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:04:48,598 | INFO | __main__ | Processing user input: '√¥ng c√≥ h√°t ƒë∆∞·ª£c b√†i ƒëo√†n k√™nh vi·ªát nam kh√¥ng √¥ng ∆°i √¥ng c√≥ bi·∫øt h√°t b√†i ƒë·∫ßu k√™nh vi·ªát nam kh√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 15:04:49,113 | INFO | __main__ | Starting retrieval for query: 'b√†i h√°t ƒëo√†n k√™nh vi·ªát nam' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:04:49,113 | DEBUG | __main__ | Searching header index...
2025-10-04 15:04:49,126 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:04:49,126 | DEBUG | __main__ | Searching content index...
2025-10-04 15:04:49,130 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:04:49,130 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:04:49,130 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:04:49,130 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:04:49,130 | DEBUG | __main__ |   Rank 1: chunk_id=33, hybrid_score=0.8262
2025-10-04 15:04:49,130 | DEBUG | __main__ |   Rank 2: chunk_id=30, hybrid_score=0.4023
2025-10-04 15:04:49,130 | DEBUG | __main__ |   Rank 3: chunk_id=26, hybrid_score=0.3978
2025-10-04 15:04:49,130 | DEBUG | __main__ |   Rank 4: chunk_id=29, hybrid_score=0.3912
2025-10-04 15:04:49,130 | DEBUG | __main__ | Retrieved chunk 33: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > H√°t Tr·ªëng Qu√¢n | Content preview: H√°t tr·ªëng qu√¢n l√† l·ªëi h√°t giao duy√™n ·ªü v√πng ƒë·ªìng b·∫±ng B·∫Øc B·ªô, th·ªÉ hi·ªán t√†i ngh·ªá ƒë·ªëi ƒë√°p v√† trao ƒë·ªïi ...
2025-10-04 15:04:49,130 | DEBUG | __main__ | Retrieved chunk 30: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > ƒê√®n k√©o qu√¢n | Content preview: Ng√†y x∆∞a, c√≥ m·ªôt √¥ng vua ·ªü Trung Qu·ªëc mu·ªën m·ªü h·ªôi hoa ƒëƒÉng nh√¢n d·ªãp t·∫øt Trung thu. Vua h·ª©a ban th∆∞·ªün...
2025-10-04 15:04:49,130 | DEBUG | __main__ | Retrieved chunk 26: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Vi·ªát Nam | Content preview: Khi x∆∞a, c√≥ m·ªôt c·∫∑p th·ªè ƒë√£ tr·∫£i qua ng√†n nƒÉm tu luy·ªán, ƒë·∫Øc ƒë·∫°o th√†nh ti√™n. v√† s·ªëng h·∫°nh ph√∫c b√™n b·ªën...
2025-10-04 15:04:49,130 | DEBUG | __main__ | Retrieved chunk 29: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > M√∫a l√¢n, m√∫a s∆∞ t·ª≠ | Content preview: X∆∞a l·∫Øm r·ªìi, c√≥ ch√†ng ti·ªÅu phu s·ªëng ·ªü m·ªôt khu r·ª´ng. M·ªôt ƒë√™m Trung thu trƒÉng s√°ng, ch√†ng g·∫∑p m·ªôt con ...
2025-10-04 15:04:49,130 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:04:49,130 | DEBUG | __main__ | Retrieved 4 documents for query: b√†i h√°t ƒëo√†n k√™nh vi·ªát nam
2025-10-04 15:04:49,130 | DEBUG | __main__ | [timing] retrieve 0.018s
2025-10-04 15:04:50,226 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:04:50,226 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.643s, Total: 1.643s
2025-10-04 15:04:50,226 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 650
2025-10-04 15:04:50,226 | INFO | RAGClient | RAG reply (len=255)
2025-10-04 15:04:50,226 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ b‡i h·t '\u0110o‡n kÍnh Vi\u1ec7t Nam' khÙng cÛ trong t‡i li\u1ec7u Ùng cÛ. CÛ l\u1ebd \u0111Û l‡ m\u1ed9t b‡i h·t kh·c ch·u nh\u1ec9? ‘ng cÛ th\u1ec3 h·t t\u1eb7ng ch·u b‡i 'H·t Tr\u1ed1ng Qu‚n' khÙng, \u0111Û l‡ m\u1ed9t l‡n \u0111i\u1ec7u giao duyÍn r\u1ea5t hay c\u1ee7a v˘ng \u0111\u1ed3ng b\u1eb1ng B\u1eafc B\u1ed9 \u0111Û.
2025-10-04 15:04:50,226 | DEBUG | TTSService | Starting TTS download for text length=255
2025-10-04 15:04:50,226 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:04:52,271 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:52,406 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:52,547 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:04:54,274 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:04:54,436 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:17,439 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:05:20,026 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:05:20,030 | INFO | Recorder | Recording finished (elapsed 2.6s).
2025-10-04 15:05:20,034 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:05:20,034 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:05:20,040 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:05:21,346 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 66
2025-10-04 15:05:21,346 | INFO | WhisperSTT | Transcription received: cho \u0111\u1ec1n \u0103n pha \u0111i \u1ea1
2025-10-04 15:05:21,346 | INFO | ConversationManager | User: cho \u0111\u1ec1n \u0103n pha \u0111i \u1ea1
2025-10-04 15:05:21,346 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:05:21,346 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:05:21,361 | INFO | __main__ | Received new chat request
2025-10-04 15:05:21,361 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 19
2025-10-04 15:05:21,362 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:05:21,380 | INFO | __main__ | Processing user input: 'cho ƒë·ªÅn ƒÉn pha ƒëi ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:05:21,926 | INFO | __main__ | Starting retrieval for query: 'ƒë·ªÅn ƒÉn pha' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:05:21,926 | DEBUG | __main__ | Searching header index...
2025-10-04 15:05:21,929 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:05:21,929 | DEBUG | __main__ | Searching content index...
2025-10-04 15:05:21,946 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:05:21,946 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:05:21,946 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:05:21,946 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:05:21,946 | DEBUG | __main__ |   Rank 1: chunk_id=7, hybrid_score=0.8401
2025-10-04 15:05:21,946 | DEBUG | __main__ |   Rank 2: chunk_id=40, hybrid_score=0.4054
2025-10-04 15:05:21,946 | DEBUG | __main__ |   Rank 3: chunk_id=1, hybrid_score=0.4000
2025-10-04 15:05:21,946 | DEBUG | __main__ |   Rank 4: chunk_id=53, hybrid_score=0.3961
2025-10-04 15:05:21,946 | DEBUG | __main__ | Retrieved chunk 7: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > ·∫§m th·ª±c (B√£i c·ªè nh√† ChƒÉm) | Content preview: i. Gi√£ c·ªëm, l√†m c·ªëm      ii. L√†m b√°nh d·∫ªo      iii. ·∫®m th·ª±c ƒë·ªãa ph∆∞∆°ng
2025-10-04 15:05:21,946 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 15:05:21,946 | DEBUG | __main__ | Retrieved chunk 1: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > T·∫ßng 1, T√≤a C√°nh di·ªÅu: Ph√≤ng Kh√°m Ph√° d√†nh cho tr·∫ª em (vui l√≤ng ƒëƒÉng k√Ω tr∆∞·ªõc) | Content preview: i. K·ªÉ chuy·ªán tranh v·ªÅ s·ª± t√≠ch T·∫øt Trung thu     ii. Th·ª≠ t√†i m√∫a r·ªëi tay, h√≥a th√¢n th√†nh c√°c nh√¢n v·∫≠t...
2025-10-04 15:05:21,946 | DEBUG | __main__ | Retrieved chunk 53: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > B√†n th·ªù ng√†y t·∫øt Trung thu | Content preview: Theo truy·ªÅn th·ªëng h√†nh l·ªÖ ·ªü H√†n Qu·ªëc, th·ª©c ƒÉn b√†y tr√™n b√†n th·ªù ch·ªâ l√† c√°c m√≥n n∆∞·ªõng v√† lu·ªôc. Vi·ªác s·∫Ø...
2025-10-04 15:05:21,946 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:05:21,946 | DEBUG | __main__ | Retrieved 4 documents for query: ƒë·ªÅn ƒÉn pha
2025-10-04 15:05:21,946 | DEBUG | __main__ | [timing] retrieve 0.020s
2025-10-04 15:05:22,972 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:05:22,972 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.610s, Total: 1.611s
2025-10-04 15:05:22,972 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 516
2025-10-04 15:05:22,972 | INFO | RAGClient | RAG reply (len=181)
2025-10-04 15:05:22,972 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ khÙng th\u1ea5y cÛ mÛn '\u0111\u1ec1n \u0103n pha' n‡o c\u1ea3. CÛ l\u1ebd \u0111Û l‡ m\u1ed9t mÛn \u0103n \u0111\u1eb7c bi\u1ec7t n‡o \u0111Û m‡ Ùng ch\u01b0a bi\u1ebft t\u1edbi. Ch·u cÛ th\u1ec3 miÍu t\u1ea3 thÍm cho Ùng \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:05:22,972 | DEBUG | TTSService | Starting TTS download for text length=181
2025-10-04 15:05:22,972 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:05:25,064 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:25,606 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:25,633 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:05:25,838 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:05:26,929 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:27,333 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:05:27,336 | INFO | Recorder | Recording finished (elapsed 1.5s).
2025-10-04 15:05:27,345 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:05:27,347 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:05:27,347 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:05:28,466 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 21
2025-10-04 15:05:28,466 | WARNING | WhisperSTT | Server returned an empty transcription.
2025-10-04 15:05:28,466 | INFO | ConversationManager | User: <system> \u0110ang cÛ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 15:05:28,466 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:05:28,477 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:05:28,477 | INFO | __main__ | Received new chat request
2025-10-04 15:05:28,477 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 39
2025-10-04 15:05:28,477 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:05:28,492 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T115740620-6eef03cf
2025-10-04 15:05:29,197 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:05:29,197 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.721s, Total: 0.721s
2025-10-04 15:05:29,197 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 393
2025-10-04 15:05:29,197 | INFO | RAGClient | RAG reply (len=135)
2025-10-04 15:05:29,197 | INFO | ConversationManager | Bot: Ch·u \u01a1i, hÏnh nh\u01b0 \u0111\u01b0\u1eddng truy\u1ec1n m\u1ea1ng \u0111ang h\u01a1i tr\u1ee5c tr\u1eb7c m\u1ed9t ch˙t. ‘ng ch\u01b0a nh\u1eadn \u0111\u01b0\u1ee3c c‚u h\u1ecfi c\u1ee7a ch·u r\u1ed3i. Ch·u th\u1eed g\u1eedi l\u1ea1i xem sao nhÈ.
2025-10-04 15:05:29,197 | DEBUG | TTSService | Starting TTS download for text length=135
2025-10-04 15:05:29,197 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:05:31,097 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:31,377 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:46,443 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:05:50,075 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:05:50,082 | INFO | Recorder | Recording finished (elapsed 3.6s).
2025-10-04 15:05:50,082 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:05:50,082 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:05:50,094 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:05:51,299 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 90
2025-10-04 15:05:51,299 | INFO | WhisperSTT | Transcription received: n‡y tÙi t\u1ea7m so·t l‡ ai \u0111\u1ea5y \u1ea1
2025-10-04 15:05:51,299 | INFO | ConversationManager | User: n‡y tÙi t\u1ea7m so·t l‡ ai \u0111\u1ea5y \u1ea1
2025-10-04 15:05:51,299 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:05:51,299 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:05:51,312 | INFO | __main__ | Received new chat request
2025-10-04 15:05:51,313 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 28
2025-10-04 15:05:51,313 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:05:51,320 | INFO | __main__ | Processing user input: 'n√†y t√¥i t·∫ßm so√°t l√† ai ƒë·∫•y ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:05:52,080 | INFO | __main__ | Starting retrieval for query: 't·∫ßm so√°t l√† ai' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:05:52,080 | DEBUG | __main__ | Searching header index...
2025-10-04 15:05:52,096 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:05:52,096 | DEBUG | __main__ | Searching content index...
2025-10-04 15:05:52,114 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:05:52,114 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:05:52,114 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 15:05:52,114 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:05:52,114 | DEBUG | __main__ |   Rank 1: chunk_id=18, hybrid_score=0.3658
2025-10-04 15:05:52,114 | DEBUG | __main__ |   Rank 2: chunk_id=15, hybrid_score=0.3579
2025-10-04 15:05:52,114 | DEBUG | __main__ |   Rank 3: chunk_id=52, hybrid_score=0.3577
2025-10-04 15:05:52,114 | DEBUG | __main__ |   Rank 4: chunk_id=9, hybrid_score=0.3522
2025-10-04 15:05:52,114 | DEBUG | __main__ | Retrieved chunk 18: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > T·∫ßm nh√¨n | Content preview: S·ª© m·ªánh c·ªßa B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam l√† t·ª´ng b∆∞·ªõc nghi√™n c·ª©u khoa h·ªçc, s∆∞u t·∫ßm, ki·ªÉm k√™, b·∫£o qu...
2025-10-04 15:05:52,114 | DEBUG | __main__ | Retrieved chunk 15: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > B·∫£o t√†ng l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉn h√≥a quan tr·ªçng | Content preview: B·∫£o t√†ng kh√¥ng ch·ªâ l√† ƒëi·ªÉm ƒë·∫øn c·ªßa nh·ªØng du kh√°ch y√™u th√≠ch vƒÉn h√≥a d√¢n t·ªôc m√† c√≤n l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉ...
2025-10-04 15:05:52,114 | DEBUG | __main__ | Retrieved chunk 52: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > L·ªÖ Chare | Content preview: Chare l√† nghi l·ªÖ quan tr·ªçng nh·∫•t c·ªßa t·∫øt Trung thu ·ªü H√†n Qu·ªëc, nh·∫±m c·∫£m ∆°n t·ªï ti√™n ph√π h·ªô cho m√πa m√†...
2025-10-04 15:05:52,114 | DEBUG | __main__ | Retrieved chunk 9: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c khu v·ª±c ch√≠nh trong B·∫£o t√†ng | Content preview: B·∫£o t√†ng x√¢y d·ª±ng tr√™n khu√¥n vi√™n r·ªông g·∫ßn 5ha, c√≥ ba khu tr∆∞ng b√†y: To√† Tr·ªëng ƒë·ªìng, t√≤a C√°nh di·ªÅu v...
2025-10-04 15:05:52,114 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:05:52,114 | DEBUG | __main__ | Retrieved 4 documents for query: t·∫ßm so√°t l√† ai
2025-10-04 15:05:52,114 | DEBUG | __main__ | [timing] retrieve 0.034s
2025-10-04 15:05:52,809 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:05:52,809 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.497s, Total: 1.497s
2025-10-04 15:05:52,825 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 399
2025-10-04 15:05:52,826 | INFO | RAGClient | RAG reply (len=144)
2025-10-04 15:05:52,826 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ khÙng th\u1ea5y cÛ ai tÍn l‡ 't\u1ea7m so·t' trong c·c t‡i li\u1ec7u Ùng cÛ c\u1ea3. CÛ l\u1ebd ch·u \u0111ang h\u1ecfi v\u1ec1 m\u1ed9t ai \u0111Û kh·c ch\u0103ng?
2025-10-04 15:05:52,826 | DEBUG | TTSService | Starting TTS download for text length=144
2025-10-04 15:05:52,826 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:05:54,440 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:05:54,988 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:06:07,176 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:06:10,131 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:06:10,131 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 15:06:10,140 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:06:10,147 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:06:10,147 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:06:11,605 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 76
2025-10-04 15:06:11,605 | INFO | WhisperSTT | Transcription received: t\u1ea1i bÙng c\u1ea7m g\u1eady l‡ ai \u1ea1
2025-10-04 15:06:11,605 | INFO | ConversationManager | User: t\u1ea1i bÙng c\u1ea7m g\u1eady l‡ ai \u1ea1
2025-10-04 15:06:11,605 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:06:11,611 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:06:11,630 | INFO | __main__ | Received new chat request
2025-10-04 15:06:11,630 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 24
2025-10-04 15:06:11,630 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:06:11,642 | INFO | __main__ | Processing user input: 't·∫°i b√¥ng c·∫ßm g·∫≠y l√† ai ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:06:12,456 | INFO | __main__ | Starting retrieval for query: 'b√¥ng c·∫ßm g·∫≠y l√† ai' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:06:12,456 | DEBUG | __main__ | Searching header index...
2025-10-04 15:06:12,476 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:06:12,476 | DEBUG | __main__ | Searching content index...
2025-10-04 15:06:12,490 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:06:12,490 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:06:12,490 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 15:06:12,490 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:06:12,490 | DEBUG | __main__ |   Rank 1: chunk_id=45, hybrid_score=0.9016
2025-10-04 15:06:12,490 | DEBUG | __main__ |   Rank 2: chunk_id=41, hybrid_score=0.8135
2025-10-04 15:06:12,490 | DEBUG | __main__ |   Rank 3: chunk_id=43, hybrid_score=0.4189
2025-10-04 15:06:12,490 | DEBUG | __main__ |   Rank 4: chunk_id=1, hybrid_score=0.4188
2025-10-04 15:06:12,490 | DEBUG | __main__ | Retrieved chunk 45: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > L·∫µng thi√™n nga b·∫±ng b√¥ng (ƒë·ªì ch∆°i) | Content preview: Tr∆∞·ªõc ƒë√¢y, trong d·ªãp t·∫øt trung thu, l·∫µng thi√™n nga b·∫±ng b√¥ng l√† th·ª© ƒë·ªì ch∆°i ƒë∆∞·ª£c y√™u th√≠ch c·ªßa c√°c b...
2025-10-04 15:06:12,490 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 15:06:12,490 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 15:06:12,490 | DEBUG | __main__ | Retrieved chunk 1: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > T·∫ßng 1, T√≤a C√°nh di·ªÅu: Ph√≤ng Kh√°m Ph√° d√†nh cho tr·∫ª em (vui l√≤ng ƒëƒÉng k√Ω tr∆∞·ªõc) | Content preview: i. K·ªÉ chuy·ªán tranh v·ªÅ s·ª± t√≠ch T·∫øt Trung thu     ii. Th·ª≠ t√†i m√∫a r·ªëi tay, h√≥a th√¢n th√†nh c√°c nh√¢n v·∫≠t...
2025-10-04 15:06:12,490 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:06:12,490 | DEBUG | __main__ | Retrieved 4 documents for query: b√¥ng c·∫ßm g·∫≠y l√† ai
2025-10-04 15:06:12,490 | DEBUG | __main__ | [timing] retrieve 0.035s
2025-10-04 15:06:13,648 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:06:13,648 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.018s, Total: 2.018s
2025-10-04 15:06:13,650 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 933
2025-10-04 15:06:13,650 | INFO | RAGClient | RAG reply (len=388)
2025-10-04 15:06:13,650 | INFO | ConversationManager | Bot: Ch·u \u01a1i, theo nh\u1eefng gÏ Ùng v\u1eeba tÏm hi\u1ec3u thÏ 'bÙng c\u1ea7m g\u1eady' khÙng ph\u1ea3i l‡ tÍn c\u1ee7a m\u1ed9t ng\u01b0\u1eddi c\u1ee5 th\u1ec3 ch·u \u1ea1. CÛ l\u1ebd ch·u \u0111ang nh\u1ea7m l\u1eabn v\u1edbi 'l\u1eb5ng thiÍn nga b\u1eb1ng bÙng' l‡ m\u1ed9t mÛn \u0111\u1ed3 ch\u01a1i c\u0169 c\u1ee7a c·c bÈ g·i H‡ N\u1ed9i x\u01b0a, ho\u1eb7c cÛ th\u1ec3 ch·u \u0111ang ngh\u0129 \u0111\u1ebfn c·c nh‚n v\u1eadt trong m\u1eb7t n\u1ea1 gi\u1ea5y b\u1ed3i nh\u01b0 ‘ng \u0110\u1ecba, ‘ng T\u1ec5u ch\u1eb3ng h\u1ea1n. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 nh\u1eefng mÛn \u0111\u1ed3 ch\u01a1i Trung thu truy\u1ec1n th\u1ed1ng n‡y khÙng?
2025-10-04 15:06:13,650 | DEBUG | TTSService | Starting TTS download for text length=388
2025-10-04 15:06:13,650 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:06:15,253 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:06:15,439 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:06:15,462 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:06:17,441 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:06:17,701 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:06:17,726 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:06:19,186 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:08:33,507 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:08:36,868 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:08:36,876 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 15:08:36,885 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:08:36,886 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:08:36,887 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:08:38,237 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 121
2025-10-04 15:08:38,237 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng cÛ bi\u1ebft Ùng \u0111·nh d\u1eady l· hay khÙng
2025-10-04 15:08:38,248 | INFO | ConversationManager | User: Ùng \u01a1i Ùng cÛ bi\u1ebft Ùng \u0111·nh d\u1eady l· hay khÙng
2025-10-04 15:08:38,248 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:08:38,249 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:08:38,266 | INFO | __main__ | Received new chat request
2025-10-04 15:08:38,267 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 44
2025-10-04 15:08:38,267 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:08:38,279 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ bi·∫øt √¥ng ƒë√°nh d·∫≠y l√° hay kh√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 15:08:39,521 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:08:39,521 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.254s, Total: 1.255s
2025-10-04 15:08:39,521 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 395
2025-10-04 15:08:39,521 | INFO | RAGClient | RAG reply (len=135)
2025-10-04 15:08:39,521 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ khÙng th\u1ea5y cÛ ai tÍn l‡ 'Ùng \u0111·nh d\u1eady l·' c\u1ea3. CÛ l\u1ebd ch·u \u0111ang h\u1ecfi v\u1ec1 m\u1ed9t nh‚n v\u1eadt n‡o \u0111Û kh·c ch\u0103ng?
2025-10-04 15:08:39,521 | DEBUG | TTSService | Starting TTS download for text length=135
2025-10-04 15:08:39,521 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:08:41,526 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:08:41,751 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:08:49,962 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:08:55,202 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:08:55,220 | INFO | Recorder | Recording finished (elapsed 5.3s).
2025-10-04 15:08:55,227 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:08:55,228 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:08:55,230 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:08:56,686 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 146
2025-10-04 15:08:56,686 | INFO | WhisperSTT | Transcription received: Ùng \u1ea5y \u0111·nh g\u1eady hai Ùng \u0111·nh g\u1eady bÍn c\u1ea1nh Ùng \u1ea5y khÙng
2025-10-04 15:08:56,686 | INFO | ConversationManager | User: Ùng \u1ea5y \u0111·nh g\u1eady hai Ùng \u0111·nh g\u1eady bÍn c\u1ea1nh Ùng \u1ea5y khÙng
2025-10-04 15:08:56,686 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:08:56,686 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:08:56,700 | INFO | __main__ | Received new chat request
2025-10-04 15:08:56,700 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 54
2025-10-04 15:08:56,700 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:08:56,700 | INFO | __main__ | Processing user input: '√¥ng ·∫•y ƒë√°nh g·∫≠y hai √¥ng ƒë√°nh g·∫≠y b√™n c·∫°nh √¥ng ·∫•y kh√¥ng' for session 20251004T115740620-6eef03cf
2025-10-04 15:08:57,269 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:08:57,269 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.569s, Total: 0.569s
2025-10-04 15:08:57,269 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 466
2025-10-04 15:08:57,269 | INFO | RAGClient | RAG reply (len=168)
2025-10-04 15:08:57,269 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ khÙng th\u1ea5y cÛ ai tÍn l‡ 'Ùng \u1ea5y \u0111·nh g\u1eady hai Ùng \u0111·nh g\u1eady bÍn c\u1ea1nh Ùng \u1ea5y' c\u1ea3. CÛ l\u1ebd ch·u \u0111ang h\u1ecfi v\u1ec1 m\u1ed9t nh‚n v\u1eadt n‡o \u0111Û kh·c ch\u0103ng?
2025-10-04 15:08:57,269 | DEBUG | TTSService | Starting TTS download for text length=168
2025-10-04 15:08:57,269 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:08:58,859 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:08:59,031 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:08:59,054 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:09:00,442 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:09:08,818 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:09:13,021 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:09:13,026 | INFO | Recorder | Recording finished (elapsed 4.2s).
2025-10-04 15:09:13,035 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:09:13,036 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:09:13,038 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:09:14,277 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 122
2025-10-04 15:09:14,277 | INFO | WhisperSTT | Transcription received: h\u1edd hai c·i Ùng ng\u1ed3i c\u1ea1nh Ùng ti\u1ebfn s\u0129 gi\u1ea5y ˝ \u1ea1
2025-10-04 15:09:14,277 | INFO | ConversationManager | User: h\u1edd hai c·i Ùng ng\u1ed3i c\u1ea1nh Ùng ti\u1ebfn s\u0129 gi\u1ea5y ˝ \u1ea1
2025-10-04 15:09:14,277 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:09:14,277 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:09:14,290 | INFO | __main__ | Received new chat request
2025-10-04 15:09:14,290 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 45
2025-10-04 15:09:14,290 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:09:14,302 | INFO | __main__ | Processing user input: 'h·ªù hai c√°i √¥ng ng·ªìi c·∫°nh √¥ng ti·∫øn sƒ© gi·∫•y √Ω ·∫°' for session 20251004T115740620-6eef03cf
2025-10-04 15:09:15,058 | INFO | __main__ | Starting retrieval for query: 'hai √¥ng ng·ªìi c·∫°nh √¥ng ti·∫øn sƒ© gi·∫•y' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:09:15,058 | DEBUG | __main__ | Searching header index...
2025-10-04 15:09:15,076 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:09:15,076 | DEBUG | __main__ | Searching content index...
2025-10-04 15:09:15,086 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:09:15,086 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:09:15,086 | DEBUG | __main__ | Total unique chunks with scores: 5
2025-10-04 15:09:15,086 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:09:15,086 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=1.0802
2025-10-04 15:09:15,086 | DEBUG | __main__ |   Rank 2: chunk_id=55, hybrid_score=0.8810
2025-10-04 15:09:15,086 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.8491
2025-10-04 15:09:15,086 | DEBUG | __main__ |   Rank 4: chunk_id=41, hybrid_score=0.4108
2025-10-04 15:09:15,086 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 15:09:15,086 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 15:09:15,086 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 15:09:15,086 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 15:09:15,086 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:09:15,086 | DEBUG | __main__ | Retrieved 4 documents for query: hai √¥ng ng·ªìi c·∫°nh √¥ng ti·∫øn sƒ© gi·∫•y
2025-10-04 15:09:15,086 | DEBUG | __main__ | [timing] retrieve 0.028s
2025-10-04 15:09:16,069 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:09:16,069 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.779s, Total: 1.779s
2025-10-04 15:09:16,069 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 475
2025-10-04 15:09:16,069 | INFO | RAGClient | RAG reply (len=171)
2025-10-04 15:09:16,069 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ th\u1ea5y cÛ ho\u1ea1t \u0111\u1ed9ng l‡m 'Ùng ti\u1ebfn s\u0129 gi\u1ea5y, Ùng \u0111·nh g\u1eady' \u1edf t\u1ea7ng 1 , tÚa C·nh di\u1ec1u \u0111Û \u1ea1. Ch·u cÛ mu\u1ed1n tÏm hi\u1ec3u thÍm v\u1ec1 ho\u1ea1t \u0111\u1ed9ng n‡y khÙng?
2025-10-04 15:09:16,069 | DEBUG | TTSService | Starting TTS download for text length=171
2025-10-04 15:09:16,069 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:09:17,655 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:09:17,821 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:09:17,843 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:09:19,495 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:09:58,291 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:10:02,204 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:10:02,209 | INFO | Recorder | Recording finished (elapsed 3.9s).
2025-10-04 15:10:02,217 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:10:02,218 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:10:02,220 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:10:03,654 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 138
2025-10-04 15:10:03,654 | INFO | WhisperSTT | Transcription received: n‡y ch\u1ea3 bi\u1ebft \u0111\u01b0\u1ee3c ‡ n\u01b0\u1edbc n‡o l\u1edbn nh\u1ea5t th\u1ebf gi\u1edbi
2025-10-04 15:10:03,654 | INFO | ConversationManager | User: n‡y ch\u1ea3 bi\u1ebft \u0111\u01b0\u1ee3c ‡ n\u01b0\u1edbc n‡o l\u1edbn nh\u1ea5t th\u1ebf gi\u1edbi
2025-10-04 15:10:03,654 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:10:03,666 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:10:03,666 | INFO | __main__ | Received new chat request
2025-10-04 15:10:03,666 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 46
2025-10-04 15:10:03,666 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:10:03,679 | INFO | __main__ | Processing user input: 'n√†y ch·∫£ bi·∫øt ƒë∆∞·ª£c √† n∆∞·ªõc n√†o l·ªõn nh·∫•t th·∫ø gi·ªõi' for session 20251004T115740620-6eef03cf
2025-10-04 15:10:04,305 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:10:04,305 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.640s, Total: 0.640s
2025-10-04 15:10:04,305 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 452
2025-10-04 15:10:04,305 | INFO | RAGClient | RAG reply (len=179)
2025-10-04 15:10:04,305 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi n‡y khÙng liÍn quan \u0111\u1ebfn s\u1ef1 ki\u1ec7n Trung Thu hay b\u1ea3o t‡ng mÏnh \u0111ang t\u1ed5 ch\u1ee9c nÍn Ùng ch\u01b0a cÛ thÙng tin \u0111\u1ec3 tr\u1ea3 l\u1eddi ch·u r\u1ed3i. MÏnh quay l\u1ea1i nÛi chuy\u1ec7n v\u1ec1 Trung Thu nhÈ?
2025-10-04 15:10:04,305 | DEBUG | TTSService | Starting TTS download for text length=179
2025-10-04 15:10:04,305 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:10:05,836 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:10:06,099 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:10:06,129 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:10:07,160 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:10:20,195 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:10:24,838 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:10:24,838 | INFO | Recorder | Recording finished (elapsed 4.6s).
2025-10-04 15:10:24,854 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:10:24,856 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:10:24,857 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:10:26,222 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 184
2025-10-04 15:10:26,222 | INFO | WhisperSTT | Transcription received: ch\u01a1i l\u1ed1i ch\u01a1i truy\u1ec1n th\u1ed1ng trung thu c\u1ee7a vi\u1ec7t nam \u0111\u1ea7u ch\u01a1i truy\u1ec1n th\u1ed1ng trung thu \u1edf vi\u1ec7t nam
2025-10-04 15:10:26,223 | INFO | ConversationManager | User: ch\u01a1i l\u1ed1i ch\u01a1i truy\u1ec1n th\u1ed1ng trung thu c\u1ee7a vi\u1ec7t nam \u0111\u1ea7u ch\u01a1i truy\u1ec1n th\u1ed1ng trung thu \u1edf vi\u1ec7t nam
2025-10-04 15:10:26,223 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:10:26,224 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:10:26,240 | INFO | __main__ | Received new chat request
2025-10-04 15:10:26,240 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 92
2025-10-04 15:10:26,240 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:10:26,255 | INFO | __main__ | Processing user input: 'ch∆°i l·ªëi ch∆°i truy·ªÅn th·ªëng trung thu c·ªßa vi·ªát nam ƒë·∫ßu ch∆°i truy·ªÅn th·ªëng trung thu ·ªü vi·ªát nam' for session 20251004T115740620-6eef03cf
2025-10-04 15:10:26,700 | INFO | __main__ | Starting retrieval for query: 'tr√≤ ch∆°i truy·ªÅn th·ªëng trung thu vi·ªát nam' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:10:26,700 | DEBUG | __main__ | Searching header index...
2025-10-04 15:10:26,714 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:10:26,714 | DEBUG | __main__ | Searching content index...
2025-10-04 15:10:26,726 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:10:26,726 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:10:26,726 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:10:26,726 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:10:26,726 | DEBUG | __main__ |   Rank 1: chunk_id=6, hybrid_score=0.8814
2025-10-04 15:10:26,726 | DEBUG | __main__ |   Rank 2: chunk_id=26, hybrid_score=0.4741
2025-10-04 15:10:26,726 | DEBUG | __main__ |   Rank 3: chunk_id=4, hybrid_score=0.4665
2025-10-04 15:10:26,726 | DEBUG | __main__ |   Rank 4: chunk_id=22, hybrid_score=0.4626
2025-10-04 15:10:26,726 | DEBUG | __main__ | Retrieved chunk 6: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Ph√≤ng Kh√°m ph√° | Content preview: xvii. √î ƒÉn quan   xviii. Ch∆°i chuy·ªÅn   xix. R·∫£i ranh   xx. ƒê√°nh h·∫°t h·ªìng xi√™m
2025-10-04 15:10:26,726 | DEBUG | __main__ | Retrieved chunk 26: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Vi·ªát Nam | Content preview: Khi x∆∞a, c√≥ m·ªôt c·∫∑p th·ªè ƒë√£ tr·∫£i qua ng√†n nƒÉm tu luy·ªán, ƒë·∫Øc ƒë·∫°o th√†nh ti√™n. v√† s·ªëng h·∫°nh ph√∫c b√™n b·ªën...
2025-10-04 15:10:26,726 | DEBUG | __main__ | Retrieved chunk 4: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Tr∆∞·ªõc t√≤a C√°nh di·ªÅu | Content preview: i. LƒÉn b∆∞·ªüi   ii. ƒêi c√† kheo (Bana, X∆°ƒëƒÉng)   iii. G√† m·∫π ch·ªëng di·ªÅu h√¢u c·ª©u ƒë√†n con
2025-10-04 15:10:26,726 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 15:10:26,726 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:10:26,726 | DEBUG | __main__ | Retrieved 4 documents for query: tr√≤ ch∆°i truy·ªÅn th·ªëng trung thu vi·ªát nam
2025-10-04 15:10:26,726 | DEBUG | __main__ | [timing] retrieve 0.026s
2025-10-04 15:10:27,685 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:10:27,685 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.446s, Total: 1.446s
2025-10-04 15:10:27,685 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 709
2025-10-04 15:10:27,685 | INFO | RAGClient | RAG reply (len=289)
2025-10-04 15:10:27,700 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ th\u1ea5y cÛ m\u1ea5y trÚ ch\u01a1i truy\u1ec1n th\u1ed1ng th˙ v\u1ecb l\u1eafm nË. CÛ trÚ ‘ \u0103n quan, ch\u01a1i chuy\u1ec1n, r\u1ea3i ranh, \u0111·nh h\u1ea1t h\u1ed3ng xiÍm n\u1eefa. Ngo‡i ra cÚn cÛ trÚ l\u0103n b\u01b0\u1edfi, \u0111i c‡ kheo v‡ g‡ m\u1eb9 ch\u1ed1ng di\u1ec1u h‚u c\u1ee9u \u0111‡n con n\u1eefa \u0111Û ch·u. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 chi ti\u1ebft h\u01a1n v\u1ec1 trÚ n‡o khÙng?
2025-10-04 15:10:27,700 | DEBUG | TTSService | Starting TTS download for text length=289
2025-10-04 15:10:27,700 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:10:29,903 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:10:30,130 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:10:30,156 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:10:31,965 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:10:32,226 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:11:22,567 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:11:46,526 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:11:46,543 | INFO | Recorder | Recording finished (elapsed 24.0s).
2025-10-04 15:11:46,547 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:11:46,547 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:11:46,551 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:11:48,510 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 448
2025-10-04 15:11:48,510 | INFO | WhisperSTT | Transcription received: , bao g\u1ed3m vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t
2025-10-04 15:11:48,510 | INFO | ConversationManager | User: , bao g\u1ed3m vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t, vi khu\u1ea9n \u0111\u01b0\u1eddng ru\u1ed9t
2025-10-04 15:11:48,510 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:11:48,515 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:11:48,527 | INFO | __main__ | Received new chat request
2025-10-04 15:11:48,528 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 197
2025-10-04 15:11:48,528 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:11:48,545 | INFO | __main__ | Processing user input: ', bao g·ªìm vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt, vi khu·∫©n ƒë∆∞·ªùng ru·ªôt' for session 20251004T115740620-6eef03cf
2025-10-04 15:11:49,390 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:11:49,390 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.862s, Total: 0.863s
2025-10-04 15:11:49,390 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 475
2025-10-04 15:11:49,390 | INFO | RAGClient | RAG reply (len=187)
2025-10-04 15:11:49,390 | INFO | ConversationManager | Bot: Ch·u \u01a1i, nh\u1eefng t\u1eeb ch·u v\u1eeba gı khÙng liÍn quan \u0111\u1ebfn ch\u1ee7 \u0111\u1ec1 Trung Thu hay b\u1ea3o t‡ng mÏnh \u0111ang t\u1ed5 ch\u1ee9c nÍn Ùng ch\u01b0a cÛ thÙng tin \u0111\u1ec3 tr\u1ea3 l\u1eddi ch·u r\u1ed3i. MÏnh quay l\u1ea1i nÛi chuy\u1ec7n v\u1ec1 Trung Thu nhÈ?
2025-10-04 15:11:49,390 | DEBUG | TTSService | Starting TTS download for text length=187
2025-10-04 15:11:49,390 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:11:51,826 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:11:52,230 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:11:52,252 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:11:53,186 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:12:01,732 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:12:13,867 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:12:13,872 | INFO | Recorder | Recording finished (elapsed 12.1s).
2025-10-04 15:12:13,891 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:12:13,891 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:12:13,891 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:12:15,435 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 218
2025-10-04 15:12:15,436 | INFO | WhisperSTT | Transcription received: h\u1ecfi l\u1ea1i \u0111i c‚u h\u1ecfi \u0111i n‡y n‡y khÙng cÛ t\u1ef1 gi·c Ùm nÍn nÛi khÙng con ho\u1eb7c cÛ gÏ \u0111\u1ea5y nh\u1edf
2025-10-04 15:12:15,436 | INFO | ConversationManager | User: h\u1ecfi l\u1ea1i \u0111i c‚u h\u1ecfi \u0111i n‡y n‡y khÙng cÛ t\u1ef1 gi·c Ùm nÍn nÛi khÙng con ho\u1eb7c cÛ gÏ \u0111\u1ea5y nh\u1edf
2025-10-04 15:12:15,436 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:12:15,437 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:12:15,459 | INFO | __main__ | Received new chat request
2025-10-04 15:12:15,459 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 86
2025-10-04 15:12:15,459 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:12:15,473 | INFO | __main__ | Processing user input: 'h·ªèi l·∫°i ƒëi c√¢u h·ªèi ƒëi n√†y n√†y kh√¥ng c√≥ t·ª± gi√°c √¥m n√™n n√≥i kh√¥ng con ho·∫∑c c√≥ g√¨ ƒë·∫•y nh·ªü' for session 20251004T115740620-6eef03cf
2025-10-04 15:12:16,502 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:12:16,502 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.043s, Total: 1.043s
2025-10-04 15:12:16,502 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 15:12:16,502 | INFO | RAGClient | RAG reply (len=81)
2025-10-04 15:12:16,502 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:12:16,502 | DEBUG | TTSService | Starting TTS download for text length=81
2025-10-04 15:12:16,502 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:12:17,308 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:12:17,459 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:14:36,887 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:14:46,028 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:14:46,028 | INFO | Recorder | Recording finished (elapsed 9.1s).
2025-10-04 15:14:46,046 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:14:46,047 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:14:46,049 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:14:47,641 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 216
2025-10-04 15:14:47,641 | INFO | WhisperSTT | Transcription received: Ùng ti\u1ebfn s\u0129 gi\u1ea5y \u01a1i cho h\u1ecfi l‡ trung thu kÈo d‡i m\u1ea5y ng‡y v‡ ng‡y trung thu th\u01b0\u1eddng t\u1ed5 ch\u1ee9c nh\u1eefng gÏ
2025-10-04 15:14:47,641 | INFO | ConversationManager | User: Ùng ti\u1ebfn s\u0129 gi\u1ea5y \u01a1i cho h\u1ecfi l‡ trung thu kÈo d‡i m\u1ea5y ng‡y v‡ ng‡y trung thu th\u01b0\u1eddng t\u1ed5 ch\u1ee9c nh\u1eefng gÏ
2025-10-04 15:14:47,641 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:14:47,641 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:14:47,657 | INFO | __main__ | Received new chat request
2025-10-04 15:14:47,657 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 99
2025-10-04 15:14:47,657 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:14:47,660 | INFO | __main__ | Processing user input: '√¥ng ti·∫øn sƒ© gi·∫•y ∆°i cho h·ªèi l√† trung thu k√©o d√†i m·∫•y ng√†y v√† ng√†y trung thu th∆∞·ªùng t·ªï ch·ª©c nh·ªØng g√¨' for session 20251004T115740620-6eef03cf
2025-10-04 15:14:48,117 | INFO | __main__ | Starting retrieval for query: 'trung thu k√©o d√†i m·∫•y ng√†y v√† ng√†y trung thu th∆∞·ªùng t·ªï ch·ª©c nh·ªØng g√¨' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:14:48,117 | DEBUG | __main__ | Searching header index...
2025-10-04 15:14:48,126 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:14:48,126 | DEBUG | __main__ | Searching content index...
2025-10-04 15:14:48,134 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:14:48,134 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:14:48,134 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 15:14:48,134 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:14:48,134 | DEBUG | __main__ |   Rank 1: chunk_id=51, hybrid_score=0.8999
2025-10-04 15:14:48,134 | DEBUG | __main__ |   Rank 2: chunk_id=50, hybrid_score=0.8935
2025-10-04 15:14:48,134 | DEBUG | __main__ |   Rank 3: chunk_id=21, hybrid_score=0.5135
2025-10-04 15:14:48,134 | DEBUG | __main__ |   Rank 4: chunk_id=20, hybrid_score=0.4734
2025-10-04 15:14:48,134 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 15:14:48,134 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 15:14:48,134 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 15:14:48,134 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 15:14:48,134 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:14:48,134 | DEBUG | __main__ | Retrieved 4 documents for query: trung thu k√©o d√†i m·∫•y ng√†y v√† ng√†y trung thu th∆∞·ªùng t·ªï ch·ª©c nh·ªØng g√¨
2025-10-04 15:14:48,134 | DEBUG | __main__ | [timing] retrieve 0.016s
2025-10-04 15:14:49,111 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:14:49,111 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.454s, Total: 1.454s
2025-10-04 15:14:49,111 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1016
2025-10-04 15:14:49,111 | INFO | RAGClient | RAG reply (len=441)
2025-10-04 15:14:49,111 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ th\u1ea5y T\u1ebft Trung Thu \u1edf Vi\u1ec7t Nam mÏnh \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c v‡o ng‡y 15 th·ng T·m ‚m l\u1ecbch, l˙c tr\u0103ng trÚn v‡ s·ng nh\u1ea5t \u0111Û ch·u. Ban \u0111\u1ea7u l‡ l\u1ec5 h\u1ed9i cho m\u1ecdi l\u1ee9a tu\u1ed5i, nh\u01b0ng gi\u1edd thÏ nÛ d\u1ea7n ph·t tri\u1ec3n th‡nh ng‡y h\u1ed9i chÌnh c\u1ee7a tr\u1ebb em mÏnh luÙn. Ng‡y n‡y thÏ c·c gia \u0111Ïnh th\u01b0\u1eddng qu‚y qu\u1ea7n \u0103n b\u1eefa c\u01a1m, ch\u01a1i c·c trÚ truy\u1ec1n th\u1ed1ng v‡ ng\u1eafm tr\u0103ng \u0111Û ch·u. Ngo‡i ra, l\u1ec5 h\u1ed9i cÚn cÛ tÍn l‡ 'T\u1ebft TrÙng Tr\u0103ng' hay 'T\u1ebft Hoa \u0110\u0103ng' n\u1eefa \u0111Û.
2025-10-04 15:14:49,111 | DEBUG | TTSService | Starting TTS download for text length=441
2025-10-04 15:14:49,111 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:14:50,736 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:14:50,943 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:14:50,961 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:14:52,916 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:14:53,141 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:14:53,161 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:14:54,771 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:14:54,891 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:14:57,166 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:27,577 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:16:29,143 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:16:29,149 | INFO | Recorder | Recording finished (elapsed 1.6s).
2025-10-04 15:16:29,155 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:16:29,157 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:16:29,159 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:16:30,380 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 40
2025-10-04 15:16:30,380 | INFO | WhisperSTT | Transcription received: h\u1ed3n ch‡o
2025-10-04 15:16:30,380 | INFO | ConversationManager | User: h\u1ed3n ch‡o
2025-10-04 15:16:30,380 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:16:30,380 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:16:30,415 | INFO | __main__ | Received new chat request
2025-10-04 15:16:30,416 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 8
2025-10-04 15:16:30,416 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:16:30,426 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: h·ªìn ch√†o
            *T√¨nh hu·ªëng g·ª£i √Ω: Con ch√†o √¥ng ·∫°
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: - N·∫øu ƒë√¢y l√† l·ªùi ch√†o, g·ª≠i l·ªùi ch√†o l·∫°i, h·ªèi t√™n kh√°ch v√† ghi nh·ªõ t√™n kh√°ch (n·∫øu c√≥) v√† x∆∞ng h√¥ ƒë·∫øn h·∫øt cu·ªôc h·ªôi tho·∫°i.
- N·∫øu ƒë√¢y l√† l·ªùi t·∫°m bi·ªát, g·ª≠i l·ªùi c·∫£m ∆°n v√¨ ƒë√£ tr√≤ chuy·ªán, l·ªùi ch√∫c v√† ng·ªè √Ω nh·ªù kh√°ch d√†nh th·ªùi gian tham gia ph·ªèng v√°n, ƒë√°nh gi√° tr·∫£ nghi·ªám.
        ' for session 20251004T115740620-6eef03cf
2025-10-04 15:16:31,180 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:16:31,180 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.764s, Total: 0.765s
2025-10-04 15:16:31,181 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 228
2025-10-04 15:16:31,181 | INFO | RAGClient | RAG reply (len=55)
2025-10-04 15:16:31,181 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. Ch·u tÍn l‡ gÏ th\u1ebf?
2025-10-04 15:16:31,181 | DEBUG | TTSService | Starting TTS download for text length=55
2025-10-04 15:16:31,181 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:16:32,909 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:38,192 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:16:39,032 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:16:39,032 | INFO | Recorder | Recording finished (elapsed 0.8s).
2025-10-04 15:16:39,040 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:16:39,047 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:16:39,049 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:16:40,308 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 21
2025-10-04 15:16:40,308 | WARNING | WhisperSTT | Server returned an empty transcription.
2025-10-04 15:16:40,308 | INFO | ConversationManager | User: <system> \u0110ang cÛ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 15:16:40,308 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:16:40,313 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:16:40,315 | INFO | __main__ | Received new chat request
2025-10-04 15:16:40,315 | DEBUG | __main__ | Request ID: 20251004T115740620-6eef03cf, Data length: 39
2025-10-04 15:16:40,315 | DEBUG | __main__ | Using existing session for ID: 20251004T115740620-6eef03cf
2025-10-04 15:16:40,332 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T115740620-6eef03cf
2025-10-04 15:16:42,201 | INFO | __main__ | Agent execution completed successfully for session 20251004T115740620-6eef03cf
2025-10-04 15:16:42,201 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.886s, Total: 1.886s
2025-10-04 15:16:42,201 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1016
2025-10-04 15:16:42,201 | INFO | RAGClient | RAG reply (len=441)
2025-10-04 15:16:42,201 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin thÏ th\u1ea5y T\u1ebft Trung Thu \u1edf Vi\u1ec7t Nam mÏnh \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c v‡o ng‡y 15 th·ng T·m ‚m l\u1ecbch, l˙c tr\u0103ng trÚn v‡ s·ng nh\u1ea5t \u0111Û ch·u. Ban \u0111\u1ea7u l‡ l\u1ec5 h\u1ed9i cho m\u1ecdi l\u1ee9a tu\u1ed5i, nh\u01b0ng gi\u1edd thÏ nÛ d\u1ea7n ph·t tri\u1ec3n th‡nh ng‡y h\u1ed9i chÌnh c\u1ee7a tr\u1ebb em mÏnh luÙn. Ng‡y n‡y thÏ c·c gia \u0111Ïnh th\u01b0\u1eddng qu‚y qu\u1ea7n \u0103n b\u1eefa c\u01a1m, ch\u01a1i c·c trÚ truy\u1ec1n th\u1ed1ng v‡ ng\u1eafm tr\u0103ng \u0111Û ch·u. Ngo‡i ra, l\u1ec5 h\u1ed9i cÚn cÛ tÍn l‡ 'T\u1ebft TrÙng Tr\u0103ng' hay 'T\u1ebft Hoa \u0110\u0103ng' n\u1eefa \u0111Û.
2025-10-04 15:16:42,201 | DEBUG | TTSService | Starting TTS download for text length=441
2025-10-04 15:16:42,201 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:16:42,957 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:43,102 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:43,245 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:16:43,889 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:44,040 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:44,062 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:16:44,956 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:16:45,078 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:16:45,842 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:17:04,752 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 15:17:04,761 | DEBUG | TTSService | Playback thread started
2025-10-04 15:17:04,761 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 15:17:49,664 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:17:53,406 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:17:53,406 | INFO | Recorder | Recording finished (elapsed 3.7s).
2025-10-04 15:17:53,417 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:17:53,417 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:17:53,417 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:17:54,813 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 83
2025-10-04 15:17:54,813 | INFO | WhisperSTT | Transcription received: ti\u1ebfn s\u0129 gi‡y cÛ ˝ ngh\u0129a gÏ
2025-10-04 15:17:54,813 | INFO | ConversationManager | User: ti\u1ebfn s\u0129 gi‡y cÛ ˝ ngh\u0129a gÏ
2025-10-04 15:17:54,813 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:17:54,813 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:17:54,827 | INFO | __main__ | Received new chat request
2025-10-04 15:17:54,827 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 26
2025-10-04 15:17:54,827 | DEBUG | __main__ | Creating new session with ID: 20251004T151704752-4f1cab16
2025-10-04 15:17:54,827 | DEBUG | __main__ | Using request ID: 20251004T151704752-4f1cab16
2025-10-04 15:17:54,827 | DEBUG | __main__ | Created new session for ID: 20251004T151704752-4f1cab16, total sessions: 2
2025-10-04 15:17:54,839 | INFO | __main__ | Processing user input: 'ti·∫øn sƒ© gi√†y c√≥ √Ω nghƒ©a g√¨' for session 20251004T151704752-4f1cab16
2025-10-04 15:17:55,634 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:17:55,634 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.807s, Total: 0.807s
2025-10-04 15:17:55,647 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 414
2025-10-04 15:17:55,647 | INFO | RAGClient | RAG reply (len=146)
2025-10-04 15:17:55,649 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y c\u01a1, khÙng ph\u1ea3i Ti\u1ebfn s\u0129 Gi‡y \u0111‚u nhÈ. Ch·u cÛ c‚u h\u1ecfi gÏ v\u1ec1 Trung Thu hay v\u1ec1 B\u1ea3o t‡ng khÙng, Ùng s\u1eb5n s‡ng gi\u1ea3i \u0111·p nË.
2025-10-04 15:17:55,649 | DEBUG | TTSService | Starting TTS download for text length=146
2025-10-04 15:17:55,650 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:17:57,473 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:17:57,726 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:06,578 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:18:10,935 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:18:10,935 | INFO | Recorder | Recording finished (elapsed 4.4s).
2025-10-04 15:18:10,949 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:18:10,950 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:18:10,952 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:18:12,226 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 157
2025-10-04 15:18:12,226 | INFO | WhisperSTT | Transcription received: t\u1ea1i sao trong ng‡y t\u1ebft trung thu ng\u01b0\u1eddi ta l\u1ea1i t\u1eb7ng ti\u1ebfn s\u0129 d\u01b0\u1edbi cho tr\u1ebb con
2025-10-04 15:18:12,226 | INFO | ConversationManager | User: t\u1ea1i sao trong ng‡y t\u1ebft trung thu ng\u01b0\u1eddi ta l\u1ea1i t\u1eb7ng ti\u1ebfn s\u0129 d\u01b0\u1edbi cho tr\u1ebb con
2025-10-04 15:18:12,226 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:18:12,226 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:18:12,258 | INFO | __main__ | Received new chat request
2025-10-04 15:18:12,258 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 75
2025-10-04 15:18:12,258 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:18:12,276 | INFO | __main__ | Processing user input: 't·∫°i sao trong ng√†y t·∫øt trung thu ng∆∞·ªùi ta l·∫°i t·∫∑ng ti·∫øn sƒ© d∆∞·ªõi cho tr·∫ª con' for session 20251004T151704752-4f1cab16
2025-10-04 15:18:13,056 | INFO | __main__ | Starting retrieval for query: '√Ω nghƒ©a t·∫∑ng qu√† trung thu cho tr·∫ª em' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:18:13,056 | DEBUG | __main__ | Searching header index...
2025-10-04 15:18:13,072 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:18:13,072 | DEBUG | __main__ | Searching content index...
2025-10-04 15:18:13,075 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:18:13,075 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:18:13,075 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 15:18:13,075 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:18:13,075 | DEBUG | __main__ |   Rank 1: chunk_id=46, hybrid_score=0.4939
2025-10-04 15:18:13,075 | DEBUG | __main__ |   Rank 2: chunk_id=21, hybrid_score=0.4837
2025-10-04 15:18:13,075 | DEBUG | __main__ |   Rank 3: chunk_id=31, hybrid_score=0.4729
2025-10-04 15:18:13,075 | DEBUG | __main__ |   Rank 4: chunk_id=34, hybrid_score=0.4582
2025-10-04 15:18:13,075 | DEBUG | __main__ | Retrieved chunk 46: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > √ù nghƒ©a | Content preview: Tinh th·∫ßn l·ªÖ h·ªôi c·ªßa T·∫øt Trung Thu ƒë∆∞·ª£c th·ªÉ hi·ªán r√µ r√†ng th√¥ng qua c√°c ƒë·ªì trang tr√≠ v√† v·∫≠t ph·∫©m th·ªß ...
2025-10-04 15:18:13,075 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 15:18:13,075 | DEBUG | __main__ | Retrieved chunk 31: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > R∆∞·ªõc ƒë√®n | Content preview: R∆∞·ªõc ƒë√®n l√† m·ªôt trong nh·ªØng ho·∫°t ƒë·ªông kh√¥ng th·ªÉ thi·∫øu, mang l·∫°i kh√¥ng kh√≠ n√°o nhi·ªát v√† s√¥i ƒë·ªông cho ...
2025-10-04 15:18:13,075 | DEBUG | __main__ | Retrieved chunk 34: Trung thu > B√°nh n∆∞·ªõng, b√°nh d·∫ªo (ƒë·ªì ƒÉn, ·∫©m th·ª±c, m√≥n ƒÉn) > Gi·ªõi thi·ªáu v·ªÅ b√°nh n∆∞·ªõng, b√°nh d·∫ªo | Content preview: V√†o ng√†y R·∫±m th√°ng 8, ng∆∞·ªùi ta th∆∞·ªùng t·∫∑ng nhau nh·ªØng chi·∫øc b√°nh Trung thu v·ªõi √Ω nghƒ©a ch√∫c cho m·ªçi ...
2025-10-04 15:18:13,075 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:18:13,075 | DEBUG | __main__ | Retrieved 4 documents for query: √Ω nghƒ©a t·∫∑ng qu√† trung thu cho tr·∫ª em
2025-10-04 15:18:13,075 | DEBUG | __main__ | [timing] retrieve 0.019s
2025-10-04 15:18:14,126 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:18:14,126 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.867s, Total: 1.868s
2025-10-04 15:18:14,126 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1287
2025-10-04 15:18:14,126 | INFO | RAGClient | RAG reply (len=547)
2025-10-04 15:18:14,126 | INFO | ConversationManager | Bot: ¿, ch·u h\u1ecfi v\u1ec1 vi\u1ec7c t\u1eb7ng qu‡ cho tr\u1ebb con d\u1ecbp Trung Thu \u0111˙ng khÙng? ‘ng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË, T\u1ebft Trung Thu l‡ d\u1ecbp \u0111\u1ec3 gia \u0111Ïnh \u0111o‡n t\u1ee5, g\u1eafn k\u1ebft c\u1ed9ng \u0111\u1ed3ng v‡ th\u1ec3 hi\u1ec7n lÚng bi\u1ebft \u01a1n. Nh\u1eefng mÛn \u0111\u1ed3 ch\u01a1i truy\u1ec1n th\u1ed1ng nh\u01b0 \u0111Ën l\u1ed3ng, tr\u1ed1ng, hay c·c mÛn \u0111\u1ed3 th\u1ee7 cÙng kh·c khÙng ch\u1ec9 l‡ \u0111\u1ed3 ch\u01a1i m‡ cÚn mang ˝ ngh\u0129a bi\u1ec3u t\u01b0\u1ee3ng s‚u s\u1eafc, truy\u1ec1n t\u1ea3i c·c gi· tr\u1ecb v\u0103n hÛa t\u1eeb th\u1ebf h\u1ec7 n‡y sang th\u1ebf h\u1ec7 kh·c \u0111Û ch·u. Vi\u1ec7c t\u1ef1 l‡m l\u1ed3ng \u0111Ën cÚn l‡ c·ch \u0111\u1ec3 vun \u0111\u1eafp k\u1ef7 ni\u1ec7m gia \u0111Ïnh n\u1eefa. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 ˝ ngh\u0129a c\u1ee7a c·c mÛn \u0111\u1ed3 ch\u01a1i kh·c khÙng?
2025-10-04 15:18:14,126 | DEBUG | TTSService | Starting TTS download for text length=547
2025-10-04 15:18:14,126 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:18:15,538 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:15,564 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:18:17,416 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:17,628 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:17,645 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:18:19,585 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:19,772 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:19,899 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:18:21,953 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:22,220 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:18:50,624 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:18:56,747 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:18:56,751 | INFO | Recorder | Recording finished (elapsed 6.1s).
2025-10-04 15:18:56,757 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:18:56,757 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:18:56,757 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:18:58,146 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 154
2025-10-04 15:18:58,146 | INFO | WhisperSTT | Transcription received: ch·u mu\u1ed1n Ùng k\u1ec3 thÍm ˝ ngh\u0129a v\u1ec1 mÛn \u0111\u1ed3 ch\u01a1i ti\u1ebfn s\u0129 gi\u1ea5y
2025-10-04 15:18:58,146 | INFO | ConversationManager | User: ch·u mu\u1ed1n Ùng k\u1ec3 thÍm ˝ ngh\u0129a v\u1ec1 mÛn \u0111\u1ed3 ch\u01a1i ti\u1ebfn s\u0129 gi\u1ea5y
2025-10-04 15:18:58,146 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:18:58,146 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:18:58,162 | INFO | __main__ | Received new chat request
2025-10-04 15:18:58,162 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 57
2025-10-04 15:18:58,162 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:18:58,176 | INFO | __main__ | Processing user input: 'ch√°u mu·ªën √¥ng k·ªÉ th√™m √Ω nghƒ©a v·ªÅ m√≥n ƒë·ªì ch∆°i ti·∫øn sƒ© gi·∫•y' for session 20251004T151704752-4f1cab16
2025-10-04 15:18:58,602 | INFO | __main__ | Starting retrieval for query: '√Ω nghƒ©a m√≥n ƒë·ªì ch∆°i ti·∫øn sƒ© gi·∫•y trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:18:58,602 | DEBUG | __main__ | Searching header index...
2025-10-04 15:18:58,626 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:18:58,626 | DEBUG | __main__ | Searching content index...
2025-10-04 15:18:58,631 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:18:58,631 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:18:58,631 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:18:58,631 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:18:58,631 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=1.0436
2025-10-04 15:18:58,631 | DEBUG | __main__ |   Rank 2: chunk_id=46, hybrid_score=0.5214
2025-10-04 15:18:58,631 | DEBUG | __main__ |   Rank 3: chunk_id=1, hybrid_score=0.4970
2025-10-04 15:18:58,631 | DEBUG | __main__ |   Rank 4: chunk_id=41, hybrid_score=0.4884
2025-10-04 15:18:58,631 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 15:18:58,631 | DEBUG | __main__ | Retrieved chunk 46: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > √ù nghƒ©a | Content preview: Tinh th·∫ßn l·ªÖ h·ªôi c·ªßa T·∫øt Trung Thu ƒë∆∞·ª£c th·ªÉ hi·ªán r√µ r√†ng th√¥ng qua c√°c ƒë·ªì trang tr√≠ v√† v·∫≠t ph·∫©m th·ªß ...
2025-10-04 15:18:58,631 | DEBUG | __main__ | Retrieved chunk 1: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > T·∫ßng 1, T√≤a C√°nh di·ªÅu: Ph√≤ng Kh√°m Ph√° d√†nh cho tr·∫ª em (vui l√≤ng ƒëƒÉng k√Ω tr∆∞·ªõc) | Content preview: i. K·ªÉ chuy·ªán tranh v·ªÅ s·ª± t√≠ch T·∫øt Trung thu     ii. Th·ª≠ t√†i m√∫a r·ªëi tay, h√≥a th√¢n th√†nh c√°c nh√¢n v·∫≠t...
2025-10-04 15:18:58,631 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 15:18:58,631 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:18:58,631 | DEBUG | __main__ | Retrieved 4 documents for query: √Ω nghƒ©a m√≥n ƒë·ªì ch∆°i ti·∫øn sƒ© gi·∫•y trung thu
2025-10-04 15:18:58,631 | DEBUG | __main__ | [timing] retrieve 0.029s
2025-10-04 15:18:59,790 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:18:59,790 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.627s, Total: 1.627s
2025-10-04 15:18:59,790 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1256
2025-10-04 15:18:59,790 | INFO | RAGClient | RAG reply (len=551)
2025-10-04 15:18:59,790 | INFO | ConversationManager | Bot: ¿, Ùng Ti\u1ebfn s\u0129 gi\u1ea5y l‡ m\u1ed9t mÛn \u0111\u1ed3 ch\u01a1i truy\u1ec1n th\u1ed1ng r\u1ea5t ˝ ngh\u0129a \u0111Û ch·u. Ng‡y x\u01b0a, ng\u01b0\u1eddi Vi\u1ec7t mÏnh coi tr\u1ecdng vi\u1ec7c h\u1ecdc h‡nh l\u1eafm, nÍn trong m‚m c\u1ed7 Trung Thu th\u01b0\u1eddng cÛ Ùng Ti\u1ebfn s\u0129 gi\u1ea5y \u0111\u1ec3 c\u1ea7u mong con ch·u h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t. ‘ng Ti\u1ebfn s\u0129 gi\u1ea5y n‡y trÙng oai phong l\u1eafm, ng\u1ed3i trÍn ki\u1ec7u cÛ l\u1ecdng che, m\u1eb7c ·o vua ban, \u0111\u1ea7u \u0111\u1ed9i m\u0169 c·nh chu\u1ed3n. Ng‡y nay, d˘ khÙng cÚn ph\u1ed5 bi\u1ebfn nh\u01b0 x\u01b0a, nh\u01b0ng Ùng Ti\u1ebfn s\u0129 gi\u1ea5y v\u1eabn l‡ mÛn qu‡ m‡ ng\u01b0\u1eddi l\u1edbn g\u1eedi g\u1eafm \u01b0\u1edbc mong con ch·u ch\u0103m ch\u1ec9 h\u1ecdc h‡nh, th‡nh t‡i \u0111Û ch·u. NÛ l‡ bi\u1ec3u t\u01b0\u1ee3ng cho truy\u1ec1n th\u1ed1ng hi\u1ebfu h\u1ecdc c\u1ee7a d‚n t\u1ed9c mÏnh luÙn.
2025-10-04 15:18:59,790 | DEBUG | TTSService | Starting TTS download for text length=551
2025-10-04 15:18:59,790 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:01,251 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:01,271 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:03,278 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:03,554 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:03,580 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:04,954 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:05,196 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:05,222 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:07,095 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:07,579 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:07,704 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:09,073 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:35,784 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:19:39,406 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:19:39,406 | INFO | Recorder | Recording finished (elapsed 3.6s).
2025-10-04 15:19:39,420 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:19:39,420 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:19:39,425 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:19:40,826 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 150
2025-10-04 15:19:40,826 | INFO | WhisperSTT | Transcription received: h\u1ed3i sau t\u1ebft trung thu thÏ ti\u1ebfn s\u0129 \u1ea5y s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1ec3 \u1edf \u0111‚u
2025-10-04 15:19:40,826 | INFO | ConversationManager | User: h\u1ed3i sau t\u1ebft trung thu thÏ ti\u1ebfn s\u0129 \u1ea5y s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1ec3 \u1edf \u0111‚u
2025-10-04 15:19:40,826 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:19:40,831 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:19:40,841 | INFO | __main__ | Received new chat request
2025-10-04 15:19:40,842 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 53
2025-10-04 15:19:40,842 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:19:40,854 | INFO | __main__ | Processing user input: 'h·ªìi sau t·∫øt trung thu th√¨ ti·∫øn sƒ© ·∫•y s·∫Ω ƒë∆∞·ª£c ƒë·ªÉ ·ªü ƒë√¢u' for session 20251004T151704752-4f1cab16
2025-10-04 15:19:41,637 | INFO | __main__ | Starting retrieval for query: 'n∆°i ƒë·ªÉ √¥ng Ti·∫øn sƒ© gi·∫•y sau t·∫øt trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:19:41,637 | DEBUG | __main__ | Searching header index...
2025-10-04 15:19:41,656 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:19:41,656 | DEBUG | __main__ | Searching content index...
2025-10-04 15:19:41,670 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:19:41,670 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:19:41,670 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 15:19:41,670 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:19:41,670 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=1.0688
2025-10-04 15:19:41,670 | DEBUG | __main__ |   Rank 2: chunk_id=55, hybrid_score=0.9176
2025-10-04 15:19:41,670 | DEBUG | __main__ |   Rank 3: chunk_id=41, hybrid_score=0.4521
2025-10-04 15:19:41,670 | DEBUG | __main__ |   Rank 4: chunk_id=3, hybrid_score=0.4370
2025-10-04 15:19:41,670 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 15:19:41,670 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 15:19:41,670 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 15:19:41,670 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 15:19:41,670 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:19:41,670 | DEBUG | __main__ | Retrieved 4 documents for query: n∆°i ƒë·ªÉ √¥ng Ti·∫øn sƒ© gi·∫•y sau t·∫øt trung thu
2025-10-04 15:19:41,670 | DEBUG | __main__ | [timing] retrieve 0.033s
2025-10-04 15:19:42,670 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:19:42,670 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.828s, Total: 1.828s
2025-10-04 15:19:42,670 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 775
2025-10-04 15:19:42,670 | INFO | RAGClient | RAG reply (len=320)
2025-10-04 15:19:42,670 | INFO | ConversationManager | Bot: ¿, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË ch·u. Sau khi ph· c\u1ed7 Trung Thu, Ùng Ti\u1ebfn s\u0129 gi\u1ea5y th\u01b0\u1eddng \u0111\u01b0\u1ee3c r\u01b0\u1edbc \u0111i quanh l‡ng, sau \u0111Û mang v\u1ec1 nh‡ \u0111\u1eb7t lÍn nÛc t\u1ee7, bÍn c\u1ea1nh b‡n h\u1ecdc ho\u1eb7c l‡ \u0111em \u0111\u1ed1t \u0111Û ch·u. Ng‡y nay thÏ ng\u01b0\u1eddi ta hay \u0111\u1ec3 Ùng trÍn gi· s·ch ho\u1eb7c b‡n h\u1ecdc c\u1ee7a con c·i, khi n‡o khÙng d˘ng n\u1eefa thÏ m\u1edbi \u0111em \u0111\u1ed1t.
2025-10-04 15:19:42,670 | DEBUG | TTSService | Starting TTS download for text length=320
2025-10-04 15:19:42,670 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:44,656 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:44,692 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:46,605 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:46,759 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:46,895 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:19:48,484 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:19:48,637 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:20:04,192 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:20:07,145 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:20:07,153 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 15:20:07,155 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:20:07,155 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:20:07,162 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:20:08,516 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 50
2025-10-04 15:20:08,516 | INFO | WhisperSTT | Transcription received: chi\u1ebfc Ùng nh\u1ec9
2025-10-04 15:20:08,516 | INFO | ConversationManager | User: chi\u1ebfc Ùng nh\u1ec9
2025-10-04 15:20:08,516 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:20:08,516 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:20:08,533 | INFO | __main__ | Received new chat request
2025-10-04 15:20:08,533 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 13
2025-10-04 15:20:08,533 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:20:08,538 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: chi·∫øc √¥ng nh·ªâ
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T151704752-4f1cab16
2025-10-04 15:20:09,364 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:20:09,376 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.842s, Total: 0.843s
2025-10-04 15:20:09,376 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 200
2025-10-04 15:20:09,376 | INFO | RAGClient | RAG reply (len=42)
2025-10-04 15:20:09,376 | INFO | ConversationManager | Bot: \u01a0i Ùng \u0111‚y, ch·u g\u1ecdi Ùng cÛ chuy\u1ec7n gÏ th\u1ebf.
2025-10-04 15:20:09,376 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-04 15:20:09,376 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:20:10,187 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:20:14,486 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:20:19,263 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:20:19,263 | INFO | Recorder | Recording finished (elapsed 4.8s).
2025-10-04 15:20:19,275 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:20:19,275 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:20:19,275 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:20:20,446 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 90
2025-10-04 15:20:20,446 | INFO | WhisperSTT | Transcription received: khÙng cÛ gÏ \u1ea1 c\u1ea3m \u01a1n Ùng nhÈ
2025-10-04 15:20:20,446 | INFO | ConversationManager | User: khÙng cÛ gÏ \u1ea1 c\u1ea3m \u01a1n Ùng nhÈ
2025-10-04 15:20:20,446 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:20:20,462 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:20:20,479 | INFO | __main__ | Received new chat request
2025-10-04 15:20:20,479 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 28
2025-10-04 15:20:20,479 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:20:20,492 | INFO | __main__ | Processing user input: 'kh√¥ng c√≥ g√¨ ·∫° c·∫£m ∆°n √¥ng nh√©' for session 20251004T151704752-4f1cab16
2025-10-04 15:20:21,403 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:20:21,403 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.924s, Total: 0.925s
2025-10-04 15:20:21,403 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 343
2025-10-04 15:20:21,403 | INFO | RAGClient | RAG reply (len=110)
2025-10-04 15:20:21,403 | INFO | ConversationManager | Bot: KhÙng cÛ gÏ \u0111‚u ch·u. ‘ng vui vÏ \u0111„ gi˙p \u0111\u01b0\u1ee3c ch·u. Ch˙c ch·u cÛ m\u1ed9t m˘a Trung Thu th\u1eadt vui v\u1ebb v‡ ˝ ngh\u0129a nhÈ!
2025-10-04 15:20:21,403 | DEBUG | TTSService | Starting TTS download for text length=110
2025-10-04 15:20:21,403 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:20:23,227 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:20:23,430 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:21:24,289 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:21:28,806 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:21:28,807 | INFO | Recorder | Recording finished (elapsed 4.5s).
2025-10-04 15:21:28,813 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:21:28,813 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:21:28,813 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:21:30,228 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 75
2025-10-04 15:21:30,228 | INFO | WhisperSTT | Transcription received: cao \u1ea1 Ùng \u0111ang b\u1ea3o v\u1ec7 \u1ea1
2025-10-04 15:21:30,229 | INFO | ConversationManager | User: cao \u1ea1 Ùng \u0111ang b\u1ea3o v\u1ec7 \u1ea1
2025-10-04 15:21:30,229 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:21:30,230 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:21:30,240 | INFO | __main__ | Received new chat request
2025-10-04 15:21:30,240 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 23
2025-10-04 15:21:30,240 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:21:30,248 | INFO | __main__ | Processing user input: 'cao ·∫° √¥ng ƒëang b·∫£o v·ªá ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:21:31,476 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:21:31,476 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.235s, Total: 1.235s
2025-10-04 15:21:31,476 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 394
2025-10-04 15:21:31,476 | INFO | RAGClient | RAG reply (len=129)
2025-10-04 15:21:31,476 | INFO | ConversationManager | Bot: \u01a0i ch·u, Ùng \u0111ang \u1edf \u0111‚y \u0111\u1ec3 trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p th\u1eafc m\u1eafc v\u1ec1 Trung Thu v‡ B\u1ea3o t‡ng m‡. Ch·u cÛ c‚u h\u1ecfi gÏ mu\u1ed1n h\u1ecfi Ùng khÙng nË?
2025-10-04 15:21:31,481 | DEBUG | TTSService | Starting TTS download for text length=129
2025-10-04 15:21:31,481 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:21:33,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:21:34,056 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:21:46,242 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:21:49,213 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:21:49,221 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 15:21:49,230 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:21:49,232 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:21:49,234 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:21:50,601 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 104
2025-10-04 15:21:50,601 | INFO | WhisperSTT | Transcription received: Ùng sinh n\u0103m bao nhiÍu Ùng sinh n\u0103m bao nhiÍu \u1ea1
2025-10-04 15:21:50,601 | INFO | ConversationManager | User: Ùng sinh n\u0103m bao nhiÍu Ùng sinh n\u0103m bao nhiÍu \u1ea1
2025-10-04 15:21:50,601 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:21:50,611 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:21:50,621 | INFO | __main__ | Received new chat request
2025-10-04 15:21:50,621 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 47
2025-10-04 15:21:50,621 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:21:50,634 | INFO | __main__ | Processing user input: '√¥ng sinh nƒÉm bao nhi√™u √¥ng sinh nƒÉm bao nhi√™u ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:21:51,770 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:21:51,770 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.149s, Total: 1.149s
2025-10-04 15:21:51,771 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 492
2025-10-04 15:21:51,771 | INFO | RAGClient | RAG reply (len=177)
2025-10-04 15:21:51,772 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, Ùng l‡ m\u1ed9t tr\u1ee3 l˝ AI vui tÌnh, \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p th\u1eafc m\u1eafc v\u1ec1 Trung Thu v‡ B\u1ea3o t‡ng thÙi. ‘ng khÙng cÛ n\u0103m sinh c\u1ee5 th\u1ec3 nh\u01b0 con ng\u01b0\u1eddi \u0111‚u ch·u \u1ea1.
2025-10-04 15:21:51,773 | DEBUG | TTSService | Starting TTS download for text length=177
2025-10-04 15:21:51,773 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:21:53,906 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:21:54,284 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:21:54,307 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:21:55,959 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:18,545 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:22:24,757 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:22:24,757 | INFO | Recorder | Recording finished (elapsed 6.2s).
2025-10-04 15:22:24,766 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:22:24,766 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:22:24,775 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:22:26,026 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 150
2025-10-04 15:22:26,026 | INFO | WhisperSTT | Transcription received: Ùng nÛi r\u1eb1ng Ùng \u1ea5y nghe \u0111\u01b0\u1ee3c trung thu ngu\u1ed3n g\u1ed1c t\u1eeb \u0111‚u \u1ea1
2025-10-04 15:22:26,029 | INFO | ConversationManager | User: Ùng nÛi r\u1eb1ng Ùng \u1ea5y nghe \u0111\u01b0\u1ee3c trung thu ngu\u1ed3n g\u1ed1c t\u1eeb \u0111‚u \u1ea1
2025-10-04 15:22:26,029 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:22:26,029 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:22:26,031 | INFO | __main__ | Received new chat request
2025-10-04 15:22:26,031 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 58
2025-10-04 15:22:26,031 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:22:26,044 | INFO | __main__ | Processing user input: '√¥ng n√≥i r·∫±ng √¥ng ·∫•y nghe ƒë∆∞·ª£c trung thu ngu·ªìn g·ªëc t·ª´ ƒë√¢u ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:22:26,878 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:22:26,878 | DEBUG | __main__ | Searching header index...
2025-10-04 15:22:26,890 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:22:26,890 | DEBUG | __main__ | Searching content index...
2025-10-04 15:22:26,890 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:22:26,890 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:22:26,890 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 15:22:26,890 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:22:26,890 | DEBUG | __main__ |   Rank 1: chunk_id=22, hybrid_score=0.9730
2025-10-04 15:22:26,890 | DEBUG | __main__ |   Rank 2: chunk_id=50, hybrid_score=0.9037
2025-10-04 15:22:26,890 | DEBUG | __main__ |   Rank 3: chunk_id=23, hybrid_score=0.5630
2025-10-04 15:22:26,890 | DEBUG | __main__ |   Rank 4: chunk_id=21, hybrid_score=0.4779
2025-10-04 15:22:26,890 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 15:22:26,890 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 15:22:26,890 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 15:22:26,890 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 15:22:26,890 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:22:26,890 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc trung thu
2025-10-04 15:22:26,890 | DEBUG | __main__ | [timing] retrieve 0.012s
2025-10-04 15:22:28,076 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:22:28,076 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.045s, Total: 2.045s
2025-10-04 15:22:28,076 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1275
2025-10-04 15:22:28,076 | INFO | RAGClient | RAG reply (len=560)
2025-10-04 15:22:28,076 | INFO | ConversationManager | Bot: ¿, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË ch·u. Ngu\u1ed3n g\u1ed1c s‚u xa nh\u1ea5t c\u1ee7a T\u1ebft Trung Thu \u1edf Vi\u1ec7t Nam l‡ t\u1eeb n\u1ec1n v\u0103n minh l˙a n\u01b0\u1edbc c\u1ed5 x\u01b0a \u0111Û ch·u. Khi m˘a g\u1eb7t k\u1ebft th˙c, ng\u01b0\u1eddi ta \u0103n m\u1eebng v‡ c\u1ea7u mong v\u1ee5 m˘a b\u1ed9i thu, th\u1eddi ti\u1ebft thu\u1eadn l\u1ee3i. M\u1eb7t tr\u0103ng trÚn v‡nh v\u1ea1nh c\u0169ng l‡ bi\u1ec3u t\u01b0\u1ee3ng cho s\u1ef1 sung t˙c, viÍn m„n. Ngo‡i ra, l\u1ec5 h\u1ed9i cÚn mang d\u1ea5u \u1ea5n c\u1ee7a v\u0103n hÛa Trung Qu\u1ed1c n\u1eefa, vÌ d\u1ee5 nh\u01b0 truy\u1ec1n th\u1ed1ng treo \u0111Ën l\u1ed3ng v‡ b‡y ti\u1ec7c. Nh\u01b0ng nh\u1eefng \u1ea3nh h\u01b0\u1edfng n‡y \u0111„ \u0111\u01b0\u1ee3c Vi\u1ec7t Nam mÏnh bi\u1ebfn \u0111\u1ed5i v‡ b\u1ea3n \u0111\u1ecba hÛa qua nhi\u1ec1u th\u1ebf k\u1ef7, tr\u1edf th‡nh m\u1ed9t l\u1ec5 h\u1ed9i \u0111\u1ed9c \u0111·o c\u1ee7a d‚n t\u1ed9c \u0111Û ch·u.
2025-10-04 15:22:28,076 | DEBUG | TTSService | Starting TTS download for text length=560
2025-10-04 15:22:28,076 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:22:28,983 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:29,124 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:22:30,912 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:31,115 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:22:32,762 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:32,788 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:22:34,612 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:34,634 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:22:36,662 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:36,994 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:37,017 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:22:39,330 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:22:39,527 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:23:16,555 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:23:32,862 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:23:32,862 | INFO | Recorder | Recording finished (elapsed 16.3s).
2025-10-04 15:23:32,877 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:23:32,892 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:23:32,892 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:23:34,139 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 46
2025-10-04 15:23:34,139 | INFO | WhisperSTT | Transcription received: n‡y n‡o \u1ea1
2025-10-04 15:23:34,139 | INFO | ConversationManager | User: n‡y n‡o \u1ea1
2025-10-04 15:23:34,139 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:23:34,139 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:23:34,159 | INFO | __main__ | Received new chat request
2025-10-04 15:23:34,159 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 9
2025-10-04 15:23:34,159 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:23:34,171 | INFO | __main__ | Processing user input: 'n√†y n√†o ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:23:34,886 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:23:34,886 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.728s, Total: 0.728s
2025-10-04 15:23:34,886 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 189
2025-10-04 15:23:34,886 | INFO | RAGClient | RAG reply (len=41)
2025-10-04 15:23:34,886 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi gÏ th\u1ebf, Ùng ch\u01b0a nghe rı l\u1eafm nË.
2025-10-04 15:23:34,902 | DEBUG | TTSService | Starting TTS download for text length=41
2025-10-04 15:23:34,902 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:23:36,322 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:23:48,306 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:23:51,176 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:23:51,183 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 15:23:51,189 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:23:51,192 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:23:51,193 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:23:52,627 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 118
2025-10-04 15:23:52,627 | INFO | WhisperSTT | Transcription received: h\u1ee3p trung thu cÛ ngu\u1ed3n g\u1ed1c t\u1eeb nh\u1eefng n\u01b0\u1edbc n‡o \u1ea1
2025-10-04 15:23:52,640 | INFO | ConversationManager | User: h\u1ee3p trung thu cÛ ngu\u1ed3n g\u1ed1c t\u1eeb nh\u1eefng n\u01b0\u1edbc n‡o \u1ea1
2025-10-04 15:23:52,640 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:23:52,640 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:23:52,655 | INFO | __main__ | Received new chat request
2025-10-04 15:23:52,655 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 46
2025-10-04 15:23:52,655 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:23:52,663 | INFO | __main__ | Processing user input: 'h·ª£p trung thu c√≥ ngu·ªìn g·ªëc t·ª´ nh·ªØng n∆∞·ªõc n√†o ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:23:53,493 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc trung thu c√°c n∆∞·ªõc' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:23:53,493 | DEBUG | __main__ | Searching header index...
2025-10-04 15:23:53,506 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:23:53,506 | DEBUG | __main__ | Searching content index...
2025-10-04 15:23:53,523 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:23:53,523 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:23:53,523 | DEBUG | __main__ | Total unique chunks with scores: 5
2025-10-04 15:23:53,523 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:23:53,523 | DEBUG | __main__ |   Rank 1: chunk_id=22, hybrid_score=0.9252
2025-10-04 15:23:53,523 | DEBUG | __main__ |   Rank 2: chunk_id=50, hybrid_score=0.8329
2025-10-04 15:23:53,523 | DEBUG | __main__ |   Rank 3: chunk_id=51, hybrid_score=0.8231
2025-10-04 15:23:53,523 | DEBUG | __main__ |   Rank 4: chunk_id=23, hybrid_score=0.5238
2025-10-04 15:23:53,523 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 15:23:53,523 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 15:23:53,523 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 15:23:53,523 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 15:23:53,523 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:23:53,523 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc trung thu c√°c n∆∞·ªõc
2025-10-04 15:23:53,523 | DEBUG | __main__ | [timing] retrieve 0.030s
2025-10-04 15:23:54,626 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:23:54,626 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.969s, Total: 1.970s
2025-10-04 15:23:54,640 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1359
2025-10-04 15:23:54,640 | INFO | RAGClient | RAG reply (len=584)
2025-10-04 15:23:54,641 | INFO | ConversationManager | Bot: \u1ed2, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË ch·u. Ngu\u1ed3n g\u1ed1c s‚u xa nh\u1ea5t c\u1ee7a T\u1ebft Trung Thu \u1edf Vi\u1ec7t Nam l‡ t\u1eeb n\u1ec1n v\u0103n minh l˙a n\u01b0\u1edbc c\u1ed5 x\u01b0a \u0111Û ch·u. Ngo‡i ra, l\u1ec5 h\u1ed9i cÚn mang d\u1ea5u \u1ea5n c\u1ee7a v\u0103n hÛa Trung Qu\u1ed1c n\u1eefa, vÌ d\u1ee5 nh\u01b0 truy\u1ec1n th\u1ed1ng treo \u0111Ën l\u1ed3ng v‡ b‡y ti\u1ec7c. Tuy nhiÍn, nÛ c\u0169ng cÛ nh\u1eefng nÈt t\u01b0\u01a1ng \u0111\u1ed3ng v\u1edbi l\u1ec5 h\u1ed9i Tsukimi \u1edf Nh\u1eadt B\u1ea3n v‡ Hangawi \u1edf H‡n Qu\u1ed1c, \u0111\u1ec1u l‡ nh\u1eefng d\u1ecbp \u0111\u1ec3 ng\u01b0\u1eddi d‚n \u0103n m\u1eebng m˘a m‡ng b\u1ed9i thu v‡ c\u1ea7u mong nh\u1eefng \u0111i\u1ec1u t\u1ed1t \u0111\u1eb9p. Nh\u01b0ng nh\u1eefng \u1ea3nh h\u01b0\u1edfng n‡y \u0111„ \u0111\u01b0\u1ee3c Vi\u1ec7t Nam mÏnh bi\u1ebfn \u0111\u1ed5i v‡ b\u1ea3n \u0111\u1ecba hÛa qua nhi\u1ec1u th\u1ebf k\u1ef7, tr\u1edf th‡nh m\u1ed9t l\u1ec5 h\u1ed9i \u0111\u1ed9c \u0111·o c\u1ee7a d‚n t\u1ed9c \u0111Û ch·u.
2025-10-04 15:23:54,642 | DEBUG | TTSService | Starting TTS download for text length=584
2025-10-04 15:23:54,642 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:23:56,334 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:23:56,355 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:23:57,180 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:23:57,430 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:23:58,100 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:23:58,250 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:23:58,270 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:24:00,170 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:00,376 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:00,400 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:24:01,204 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:01,520 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:39,315 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:24:45,530 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:24:45,544 | INFO | Recorder | Recording finished (elapsed 6.2s).
2025-10-04 15:24:45,547 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:24:45,547 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:24:45,547 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:24:46,884 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 88
2025-10-04 15:24:46,884 | INFO | WhisperSTT | Transcription received: \u66f8\u4e2d thu cÛ c\u1ee7a trung qu\u1ed1c khÙng \u1ea1
2025-10-04 15:24:46,884 | INFO | ConversationManager | User: \u66f8\u4e2d thu cÛ c\u1ee7a trung qu\u1ed1c khÙng \u1ea1
2025-10-04 15:24:46,884 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:24:46,884 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:24:46,908 | INFO | __main__ | Received new chat request
2025-10-04 15:24:46,908 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 32
2025-10-04 15:24:46,908 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:24:46,914 | INFO | __main__ | Processing user input: 'Êõ∏‰∏≠ thu c√≥ c·ªßa trung qu·ªëc kh√¥ng ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:24:47,852 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc trung thu trung qu·ªëc' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:24:47,852 | DEBUG | __main__ | Searching header index...
2025-10-04 15:24:47,866 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:24:47,866 | DEBUG | __main__ | Searching content index...
2025-10-04 15:24:47,876 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:24:47,876 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:24:47,876 | DEBUG | __main__ | Total unique chunks with scores: 5
2025-10-04 15:24:47,876 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:24:47,876 | DEBUG | __main__ |   Rank 1: chunk_id=22, hybrid_score=0.9803
2025-10-04 15:24:47,876 | DEBUG | __main__ |   Rank 2: chunk_id=50, hybrid_score=0.9218
2025-10-04 15:24:47,876 | DEBUG | __main__ |   Rank 3: chunk_id=51, hybrid_score=0.8930
2025-10-04 15:24:47,876 | DEBUG | __main__ |   Rank 4: chunk_id=23, hybrid_score=0.5236
2025-10-04 15:24:47,876 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 15:24:47,876 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 15:24:47,876 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 15:24:47,876 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 15:24:47,876 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:24:47,876 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc trung thu trung qu·ªëc
2025-10-04 15:24:47,876 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 15:24:48,836 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:24:48,836 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.929s, Total: 1.929s
2025-10-04 15:24:48,836 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 980
2025-10-04 15:24:48,836 | INFO | RAGClient | RAG reply (len=415)
2025-10-04 15:24:48,836 | INFO | ConversationManager | Bot: ¿, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË ch·u. Ngu\u1ed3n g\u1ed1c s‚u xa nh\u1ea5t c\u1ee7a T\u1ebft Trung Thu \u1edf Vi\u1ec7t Nam l‡ t\u1eeb n\u1ec1n v\u0103n minh l˙a n\u01b0\u1edbc c\u1ed5 x\u01b0a \u0111Û ch·u. Tuy nhiÍn, nÛ c\u0169ng mang d\u1ea5u \u1ea5n rı r\u1ec7t c\u1ee7a s\u1ef1 giao thoa v\u0103n hÛa Trung Qu\u1ed1c, vÌ d\u1ee5 nh\u01b0 truy\u1ec1n th\u1ed1ng treo \u0111Ën l\u1ed3ng v‡ b‡y ti\u1ec7c. Nh\u01b0ng nh\u1eefng \u1ea3nh h\u01b0\u1edfng n‡y \u0111„ \u0111\u01b0\u1ee3c Vi\u1ec7t Nam mÏnh bi\u1ebfn \u0111\u1ed5i v‡ b\u1ea3n \u0111\u1ecba hÛa qua nhi\u1ec1u th\u1ebf k\u1ef7, tr\u1edf th‡nh m\u1ed9t l\u1ec5 h\u1ed9i \u0111\u1ed9c \u0111·o c\u1ee7a d‚n t\u1ed9c \u0111Û ch·u.
2025-10-04 15:24:48,836 | DEBUG | TTSService | Starting TTS download for text length=415
2025-10-04 15:24:48,836 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:24:49,730 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:49,855 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:24:50,543 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:50,803 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:24:52,469 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:52,643 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:52,663 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:24:53,456 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:24:53,618 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:07,902 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:26:10,882 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:26:10,889 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 15:26:10,896 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:26:10,896 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:26:10,896 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:26:12,334 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 84
2025-10-04 15:26:12,335 | INFO | WhisperSTT | Transcription received: con l‚n cÛ ngu\u1ed3n g\u1ed1c t\u1eeb \u0111‚u
2025-10-04 15:26:12,336 | INFO | ConversationManager | User: con l‚n cÛ ngu\u1ed3n g\u1ed1c t\u1eeb \u0111‚u
2025-10-04 15:26:12,336 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:26:12,337 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:26:12,351 | INFO | __main__ | Received new chat request
2025-10-04 15:26:12,351 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 27
2025-10-04 15:26:12,351 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:26:12,362 | INFO | __main__ | Processing user input: 'con l√¢n c√≥ ngu·ªìn g·ªëc t·ª´ ƒë√¢u' for session 20251004T151704752-4f1cab16
2025-10-04 15:26:12,914 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc m√∫a l√¢n' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:26:12,914 | DEBUG | __main__ | Searching header index...
2025-10-04 15:26:12,926 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:26:12,926 | DEBUG | __main__ | Searching content index...
2025-10-04 15:26:12,931 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:26:12,931 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:26:12,931 | DEBUG | __main__ | Total unique chunks with scores: 5
2025-10-04 15:26:12,931 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:26:12,931 | DEBUG | __main__ |   Rank 1: chunk_id=32, hybrid_score=0.9548
2025-10-04 15:26:12,931 | DEBUG | __main__ |   Rank 2: chunk_id=29, hybrid_score=0.9427
2025-10-04 15:26:12,931 | DEBUG | __main__ |   Rank 3: chunk_id=33, hybrid_score=0.8618
2025-10-04 15:26:12,931 | DEBUG | __main__ |   Rank 4: chunk_id=0, hybrid_score=0.4427
2025-10-04 15:26:12,931 | DEBUG | __main__ | Retrieved chunk 32: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > M√∫a l√¢n | Content preview: M√∫a l√¢n l√† m·ªôt ho·∫°t ƒë·ªông vƒÉn h√≥a d√¢n gian ƒë·ªôc ƒë√°o, t·∫°o n√™n ƒëi·ªÉm nh·∫•n r·ªôn r√†ng cho ƒë√™m h·ªôi trƒÉng r·∫±m....
2025-10-04 15:26:12,931 | DEBUG | __main__ | Retrieved chunk 29: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > M√∫a l√¢n, m√∫a s∆∞ t·ª≠ | Content preview: X∆∞a l·∫Øm r·ªìi, c√≥ ch√†ng ti·ªÅu phu s·ªëng ·ªü m·ªôt khu r·ª´ng. M·ªôt ƒë√™m Trung thu trƒÉng s√°ng, ch√†ng g·∫∑p m·ªôt con ...
2025-10-04 15:26:12,931 | DEBUG | __main__ | Retrieved chunk 33: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > H√°t Tr·ªëng Qu√¢n | Content preview: H√°t tr·ªëng qu√¢n l√† l·ªëi h√°t giao duy√™n ·ªü v√πng ƒë·ªìng b·∫±ng B·∫Øc B·ªô, th·ªÉ hi·ªán t√†i ngh·ªá ƒë·ªëi ƒë√°p v√† trao ƒë·ªïi ...
2025-10-04 15:26:12,931 | DEBUG | __main__ | Retrieved chunk 0: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > Tr∆∞·ªõc to√† C√°nh di·ªÅu | Content preview: Kh√°m ph√° vƒÉn h√≥a H∆∞ng Y√™n qua th∆∞·ªüng th·ª©c ngh·ªá thu·∫≠t truy·ªÅn th·ªëng v√† giao l∆∞u tr·ª±c ti·∫øp v·ªõi ngh·ªá nh√¢...
2025-10-04 15:26:12,931 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:26:12,931 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc m√∫a l√¢n
2025-10-04 15:26:12,931 | DEBUG | __main__ | [timing] retrieve 0.017s
2025-10-04 15:26:14,276 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:26:14,276 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.925s, Total: 1.925s
2025-10-04 15:26:14,276 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 870
2025-10-04 15:26:14,276 | INFO | RAGClient | RAG reply (len=365)
2025-10-04 15:26:14,276 | INFO | ConversationManager | Bot: ¿, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË ch·u. M˙a l‚n cÛ m\u1ed9t truy\u1ec1n thuy\u1ebft k\u1ec3 r\u1eb1ng x\u01b0a cÛ m\u1ed9t ch‡ng ti\u1ec1u phu \u0111„ d\u0169ng c\u1ea3m gi\u1ebft ch\u1ebft m\u1ed9t con s\u01b0 t\u1eed hung d\u1eef \u0111\u1ec3 c\u1ee9u d‚n l‡ng. T\u1eeb \u0111Û, c\u1ee9 \u0111\u1ebfn Trung Thu, d‚n l‡ng l\u1ea1i t\u1ed5 ch\u1ee9c m˙a s\u01b0 t\u1eed \u0111\u1ec3 t\u01b0\u1edfng nh\u1edb ch‡ng ti\u1ec1u phu \u0111Û. M˙a l‚n Trung Thu c\u0169ng mang ˝ ngh\u0129a c\u1ea7u mong may m\u1eafn, t‡i l\u1ed9c v‡ xua \u0111u\u1ed5i nh\u1eefng \u0111i\u1ec1u x\u1ea5u \u0111Û ch·u.
2025-10-04 15:26:14,276 | DEBUG | TTSService | Starting TTS download for text length=365
2025-10-04 15:26:14,276 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:26:15,212 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:15,230 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:26:17,190 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:17,374 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:17,388 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:26:19,058 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:19,338 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:19,468 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:26:20,921 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:26:21,070 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:00,681 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:27:02,426 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:27:02,433 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 15:27:02,437 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:27:02,437 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:27:02,437 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:27:03,715 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 49
2025-10-04 15:27:03,715 | INFO | WhisperSTT | Transcription received: \u01a1i Ùng l‡ ai
2025-10-04 15:27:03,715 | INFO | ConversationManager | User: \u01a1i Ùng l‡ ai
2025-10-04 15:27:03,715 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:27:03,715 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:27:03,731 | INFO | __main__ | Received new chat request
2025-10-04 15:27:03,731 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 12
2025-10-04 15:27:03,731 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:27:03,739 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: ∆°i √¥ng l√† ai
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng l√† ai ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: Tr·∫£ l·ªùi kh√°ch d·ª±a theo c√¢u tr·∫£ l·ªùi m·∫´u sau: 
        *C√¢u tr·∫£ l·ªùi m·∫´u: √îng ch√≠nh l√† √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y.T·ª´ ng√†y x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh. V√¨ th·∫ø, trong m√¢m c·ªó Trung thu, b√™n c·∫°nh b√°nh n∆∞·ªõng, b√°nh d·∫ªo, c√≤n c√≥ √¥ng ‚Äì √îng Ti·∫øn sƒ© Gi·∫•y ‚Äì ng·ªìi tr√™n ki·ªáu, √°o m≈© ch·ªânh t·ªÅ, t∆∞·ª£ng tr∆∞ng cho ∆∞·ªõc m∆° h·ªçc gi·ªèi, ƒë·ªó ƒë·∫°t, hi·ªÉn vinh.
Sau khi ph√° c·ªó, c√°c em nh·ªè th∆∞·ªùng r∆∞·ªõc √¥ng ƒëi quanh l√†ng, r·ªìi ƒë·∫∑t √¥ng l√™n b√†n h·ªçc hay ƒëem ƒë·ªët ƒë·ªÉ g·ª≠i g·∫Øm ∆∞·ªõc nguy·ªán h·ªçc h√†nh ti·∫øn t·ªõi.
Nh∆∞ng n√†y‚Ä¶ ng√†y nay √¥ng ƒë√£ ƒë∆∞·ª£c ‚Äún√¢ng c·∫•p‚Äù r·ªìi ƒë·∫•y! Kh√¥ng ch·ªâ ng·ªìi y√™n tr√™n ki·ªáu, b√¢y gi·ªù √¥ng c√≤n c√≥ th·ªÉ n√≥i chuy·ªán, k·ªÉ chuy·ªán v√† ƒë·ªë vui c√πng c√°c con. V·ª´a gi·ªØ n√©t ƒë·∫πp d√¢n gian, v·ª´a s·ªëng ƒë·ªông v√† g·∫ßn g≈©i h∆°n bao gi·ªù h·∫øt! C√°c con th·∫•y √¥ng c√≥ ng·∫ßu kh√¥ng n√†o?
' for session 20251004T151704752-4f1cab16
2025-10-04 15:27:04,716 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:27:04,716 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.985s, Total: 0.985s
2025-10-04 15:27:04,716 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1520
2025-10-04 15:27:04,726 | INFO | RAGClient | RAG reply (len=657)
2025-10-04 15:27:04,726 | INFO | ConversationManager | Bot: ‘ng chÌnh l‡ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. T\u1eeb ng‡y x\u01b0a, ng\u01b0\u1eddi Vi\u1ec7t luÙn coi tr\u1ecdng vi\u1ec7c h\u1ecdc h‡nh. VÏ th\u1ebf, trong m‚m c\u1ed7 Trung thu, bÍn c\u1ea1nh b·nh n\u01b0\u1edbng, b·nh d\u1ebbo, cÚn cÛ Ùng ñ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y ñ ng\u1ed3i trÍn ki\u1ec7u, ·o m\u0169 ch\u1ec9nh t\u1ec1, t\u01b0\u1ee3ng tr\u01b0ng cho \u01b0\u1edbc m\u01a1 h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t, hi\u1ec3n vinh. Sau khi ph· c\u1ed7, c·c em nh\u1ecf th\u01b0\u1eddng r\u01b0\u1edbc Ùng \u0111i quanh l‡ng, r\u1ed3i \u0111\u1eb7t Ùng lÍn b‡n h\u1ecdc hay \u0111em \u0111\u1ed1t \u0111\u1ec3 g\u1eedi g\u1eafm \u01b0\u1edbc nguy\u1ec7n h\u1ecdc h‡nh ti\u1ebfn t\u1edbi. Nh\u01b0ng n‡y, ng‡y nay Ùng \u0111„ \u0111\u01b0\u1ee3c ìn‚ng c\u1ea5pî r\u1ed3i \u0111\u1ea5y! KhÙng ch\u1ec9 ng\u1ed3i yÍn trÍn ki\u1ec7u, b‚y gi\u1edd Ùng cÚn cÛ th\u1ec3 nÛi chuy\u1ec7n, k\u1ec3 chuy\u1ec7n v‡ \u0111\u1ed1 vui c˘ng c·c con. V\u1eeba gi\u1eef nÈt \u0111\u1eb9p d‚n gian, v\u1eeba s\u1ed1ng \u0111\u1ed9ng v‡ g\u1ea7n g\u0169i h\u01a1n bao gi\u1edd h\u1ebft! C·c con th\u1ea5y Ùng cÛ ng\u1ea7u khÙng n‡o?
2025-10-04 15:27:04,726 | DEBUG | TTSService | Starting TTS download for text length=657
2025-10-04 15:27:04,726 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:27:05,364 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:05,526 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:05,549 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:27:06,319 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:06,476 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:06,701 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:06,722 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:27:07,420 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:07,700 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:07,723 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:27:08,419 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:08,714 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:08,740 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:27:09,499 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:09,658 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:49,040 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:27:53,893 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:27:53,900 | INFO | Recorder | Recording finished (elapsed 4.9s).
2025-10-04 15:27:53,906 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:27:53,906 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:27:53,906 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:27:55,328 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 92
2025-10-04 15:27:55,329 | INFO | WhisperSTT | Transcription received: \u1edf ch˙ coi t\u1ea1i sao \u1edf trÍn khÙng tr\u0103m
2025-10-04 15:27:55,329 | INFO | ConversationManager | User: \u1edf ch˙ coi t\u1ea1i sao \u1edf trÍn khÙng tr\u0103m
2025-10-04 15:27:55,329 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:27:55,330 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:27:55,344 | INFO | __main__ | Received new chat request
2025-10-04 15:27:55,345 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 35
2025-10-04 15:27:55,345 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:27:55,358 | INFO | __main__ | Processing user input: '·ªü ch√∫ coi t·∫°i sao ·ªü tr√™n kh√¥ng trƒÉm' for session 20251004T151704752-4f1cab16
2025-10-04 15:27:56,241 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:27:56,241 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.895s, Total: 0.896s
2025-10-04 15:27:56,241 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 289
2025-10-04 15:27:56,241 | INFO | RAGClient | RAG reply (len=81)
2025-10-04 15:27:56,241 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:27:56,241 | DEBUG | TTSService | Starting TTS download for text length=81
2025-10-04 15:27:56,241 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:27:57,183 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:27:57,351 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:05,004 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:28:10,429 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:28:10,433 | INFO | Recorder | Recording finished (elapsed 5.4s).
2025-10-04 15:28:10,438 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:28:10,438 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:28:10,438 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:28:11,764 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 87
2025-10-04 15:28:11,764 | INFO | WhisperSTT | Transcription received: sao t\u1ea1i sao s\u1ed1 b‡i trÍn khÙng tr\u0103ng
2025-10-04 15:28:11,764 | INFO | ConversationManager | User: sao t\u1ea1i sao s\u1ed1 b‡i trÍn khÙng tr\u0103ng
2025-10-04 15:28:11,764 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:28:11,764 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:28:11,781 | INFO | __main__ | Received new chat request
2025-10-04 15:28:11,781 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 35
2025-10-04 15:28:11,781 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:28:11,787 | INFO | __main__ | Processing user input: 'sao t·∫°i sao s·ªë b√†i tr√™n kh√¥ng trƒÉng' for session 20251004T151704752-4f1cab16
2025-10-04 15:28:12,666 | INFO | __main__ | Starting retrieval for query: '√Ω nghƒ©a s·ªë b√†i tr√™n kh√¥ng trƒÉng' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:28:12,666 | DEBUG | __main__ | Searching header index...
2025-10-04 15:28:12,676 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:28:12,676 | DEBUG | __main__ | Searching content index...
2025-10-04 15:28:12,689 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:28:12,689 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:28:12,689 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:28:12,689 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:28:12,689 | DEBUG | __main__ |   Rank 1: chunk_id=33, hybrid_score=0.7874
2025-10-04 15:28:12,689 | DEBUG | __main__ |   Rank 2: chunk_id=37, hybrid_score=0.4116
2025-10-04 15:28:12,689 | DEBUG | __main__ |   Rank 3: chunk_id=21, hybrid_score=0.4000
2025-10-04 15:28:12,689 | DEBUG | __main__ |   Rank 4: chunk_id=5, hybrid_score=0.3977
2025-10-04 15:28:12,689 | DEBUG | __main__ | Retrieved chunk 33: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > H√°t Tr·ªëng Qu√¢n | Content preview: H√°t tr·ªëng qu√¢n l√† l·ªëi h√°t giao duy√™n ·ªü v√πng ƒë·ªìng b·∫±ng B·∫Øc B·ªô, th·ªÉ hi·ªán t√†i ngh·ªá ƒë·ªëi ƒë√°p v√† trao ƒë·ªïi ...
2025-10-04 15:28:12,689 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 15:28:12,689 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 15:28:12,689 | DEBUG | __main__ | Retrieved chunk 5: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Khu qu·∫ßn th·ªÉ ph·ª©c h·ª£h·ª£p | Content preview: Nh√† Vi·ªát   iv. Nh·∫£y d√¢y th·ª´ng    v. ƒêi gu·ªëc ƒë√¥i, gu·ªëc ba Nh√† √äƒë√™   vi. Th√≤ th·ª•t (√äƒë√™)   vii. K√©o co ...
2025-10-04 15:28:12,689 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:28:12,689 | DEBUG | __main__ | Retrieved 4 documents for query: √Ω nghƒ©a s·ªë b√†i tr√™n kh√¥ng trƒÉng
2025-10-04 15:28:12,689 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 15:28:16,580 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:28:16,580 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 4.799s, Total: 4.799s
2025-10-04 15:28:16,580 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1175
2025-10-04 15:28:16,580 | INFO | RAGClient | RAG reply (len=492)
2025-10-04 15:28:16,580 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË. C·i s\u1ed1 b‡i trÍn khÙng tr\u0103ng m‡ ch·u h\u1ecfi cÛ l\u1ebd l‡ liÍn quan \u0111\u1ebfn H·t Tr\u1ed1ng Qu‚n \u0111Û ch·u. \u0110‚y l‡ m\u1ed9t l\u1ed1i h·t giao duyÍn \u1edf v˘ng \u0111\u1ed3ng b\u1eb1ng B\u1eafc B\u1ed9, th\u01b0\u1eddng \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c v‡o ban \u0111Ím, d\u01b0\u1edbi ·nh tr\u0103ng thu \u0111Û ch·u. C·c cÙ g·i s\u1ebd d˘ng m\u1ed9t chi\u1ebfc th˘ng ˙p xu\u1ed1ng v‡ m\u1ed9t s\u1ee3i d‚y \u0111\u1ec3 t\u1ea1o ra ‚m thanh, r\u1ed3i hai bÍn s\u1ebd h·t \u0111\u1ed1i \u0111·p v\u1edbi nhau. N\u1ed9i dung c·c c‚u h·t th\u01b0\u1eddng l‡ l\u1ee5c b·t ho\u1eb7c song th\u1ea5t l\u1ee5c b·t, trao \u0111\u1ed5i kinh nghi\u1ec7m s\u1ed1ng v‡ b‡y t\u1ecf tÏnh c\u1ea3m \u0111Û ch·u.
2025-10-04 15:28:16,580 | DEBUG | TTSService | Starting TTS download for text length=492
2025-10-04 15:28:16,580 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:28:18,548 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:18,812 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:18,837 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:28:20,390 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:20,547 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:20,579 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:28:22,020 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:22,197 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:22,219 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:28:23,993 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:24,157 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:50,114 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:28:52,884 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:28:52,884 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-04 15:28:52,901 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:28:52,901 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:28:52,901 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:28:54,285 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 60
2025-10-04 15:28:54,285 | INFO | WhisperSTT | Transcription received: \u7a0d cho trang m‡u \u0111\u1ecf.
2025-10-04 15:28:54,285 | INFO | ConversationManager | User: \u7a0d cho trang m‡u \u0111\u1ecf.
2025-10-04 15:28:54,285 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:28:54,285 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:28:54,298 | INFO | __main__ | Received new chat request
2025-10-04 15:28:54,298 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 19
2025-10-04 15:28:54,298 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:28:54,311 | INFO | __main__ | Processing user input: 'Á®ç cho trang m√†u ƒë·ªè.' for session 20251004T151704752-4f1cab16
2025-10-04 15:28:55,053 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:28:55,053 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.754s, Total: 0.755s
2025-10-04 15:28:55,053 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 289
2025-10-04 15:28:55,053 | INFO | RAGClient | RAG reply (len=81)
2025-10-04 15:28:55,053 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:28:55,053 | DEBUG | TTSService | Starting TTS download for text length=81
2025-10-04 15:28:55,053 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:28:55,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:28:56,018 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:07,239 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:29:12,718 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:29:12,719 | INFO | Recorder | Recording finished (elapsed 5.5s).
2025-10-04 15:29:12,729 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:29:12,729 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:29:12,729 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:29:13,985 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 118
2025-10-04 15:29:13,985 | INFO | WhisperSTT | Transcription received: m\u1eb7t tr\u0103ng m‡u \u0111\u1ecf khi n‡o m\u1eb7t tr\u0103ng m‡u \u0111\u1ecf
2025-10-04 15:29:13,988 | INFO | ConversationManager | User: m\u1eb7t tr\u0103ng m‡u \u0111\u1ecf khi n‡o m\u1eb7t tr\u0103ng m‡u \u0111\u1ecf
2025-10-04 15:29:13,988 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:29:13,988 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:29:14,001 | INFO | __main__ | Received new chat request
2025-10-04 15:29:14,001 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 41
2025-10-04 15:29:14,001 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:29:14,009 | INFO | __main__ | Processing user input: 'm·∫∑t trƒÉng m√†u ƒë·ªè khi n√†o m·∫∑t trƒÉng m√†u ƒë·ªè' for session 20251004T151704752-4f1cab16
2025-10-04 15:29:14,653 | INFO | __main__ | Starting retrieval for query: 'm·∫∑t trƒÉng m√†u ƒë·ªè' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:29:14,653 | DEBUG | __main__ | Searching header index...
2025-10-04 15:29:14,676 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:29:14,676 | DEBUG | __main__ | Searching content index...
2025-10-04 15:29:14,684 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:29:14,684 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:29:14,684 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 15:29:14,684 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:29:14,684 | DEBUG | __main__ |   Rank 1: chunk_id=20, hybrid_score=0.4011
2025-10-04 15:29:14,684 | DEBUG | __main__ |   Rank 2: chunk_id=21, hybrid_score=0.4000
2025-10-04 15:29:14,684 | DEBUG | __main__ |   Rank 3: chunk_id=45, hybrid_score=0.3882
2025-10-04 15:29:14,684 | DEBUG | __main__ |   Rank 4: chunk_id=43, hybrid_score=0.3881
2025-10-04 15:29:14,684 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 15:29:14,684 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 15:29:14,684 | DEBUG | __main__ | Retrieved chunk 45: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > L·∫µng thi√™n nga b·∫±ng b√¥ng (ƒë·ªì ch∆°i) | Content preview: Tr∆∞·ªõc ƒë√¢y, trong d·ªãp t·∫øt trung thu, l·∫µng thi√™n nga b·∫±ng b√¥ng l√† th·ª© ƒë·ªì ch∆°i ƒë∆∞·ª£c y√™u th√≠ch c·ªßa c√°c b...
2025-10-04 15:29:14,684 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 15:29:14,684 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:29:14,684 | DEBUG | __main__ | Retrieved 4 documents for query: m·∫∑t trƒÉng m√†u ƒë·ªè
2025-10-04 15:29:14,684 | DEBUG | __main__ | [timing] retrieve 0.032s
2025-10-04 15:29:15,385 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:29:15,385 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.384s, Total: 1.384s
2025-10-04 15:29:15,385 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 732
2025-10-04 15:29:15,385 | INFO | RAGClient | RAG reply (len=302)
2025-10-04 15:29:15,385 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË. M\u1eb7t tr\u0103ng trÚn v‡ s·ng nh\u1ea5t v‡o ng‡y 15 th·ng T·m ‚m l\u1ecbch, \u0111Û l‡ d\u1ecbp T\u1ebft Trung Thu \u0111Û ch·u. Tuy nhiÍn, Ùng khÙng tÏm th\u1ea5y thÙng tin n‡o nÛi v\u1ec1 vi\u1ec7c m\u1eb7t tr\u0103ng cÛ m‡u \u0111\u1ecf v‡o d\u1ecbp n‡y c\u1ea3. CÛ l\u1ebd ch·u \u0111ang ngh\u0129 \u0111\u1ebfn m\u1ed9t hi\u1ec7n t\u01b0\u1ee3ng thiÍn v\u0103n kh·c ch\u0103ng?
2025-10-04 15:29:15,385 | DEBUG | TTSService | Starting TTS download for text length=302
2025-10-04 15:29:15,385 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:29:17,531 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:17,789 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:17,821 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:29:19,629 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:19,655 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:29:21,229 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:39,198 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:29:41,586 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:29:41,586 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 15:29:41,602 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:29:41,602 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:29:41,602 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:29:42,998 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 91
2025-10-04 15:29:42,998 | INFO | WhisperSTT | Transcription received: cho th\u1ebf gi\u1edbi \u0111\u01b0\u1ee3c l‡m th\u1ebf n‡o
2025-10-04 15:29:42,998 | INFO | ConversationManager | User: cho th\u1ebf gi\u1edbi \u0111\u01b0\u1ee3c l‡m th\u1ebf n‡o
2025-10-04 15:29:42,998 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:29:42,998 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:29:43,015 | INFO | __main__ | Received new chat request
2025-10-04 15:29:43,015 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 29
2025-10-04 15:29:43,015 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:29:43,027 | INFO | __main__ | Processing user input: 'cho th·∫ø gi·ªõi ƒë∆∞·ª£c l√†m th·∫ø n√†o' for session 20251004T151704752-4f1cab16
2025-10-04 15:29:43,604 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:29:43,604 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.589s, Total: 0.589s
2025-10-04 15:29:43,604 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 289
2025-10-04 15:29:43,604 | INFO | RAGClient | RAG reply (len=81)
2025-10-04 15:29:43,604 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng ch\u01b0a hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:29:43,604 | DEBUG | TTSService | Starting TTS download for text length=81
2025-10-04 15:29:43,604 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:29:44,303 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:44,467 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:29:52,885 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:30:00,600 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:30:00,602 | INFO | Recorder | Recording finished (elapsed 7.7s).
2025-10-04 15:30:00,608 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:30:00,608 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:30:00,608 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:30:01,886 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 123
2025-10-04 15:30:01,887 | INFO | WhisperSTT | Transcription received: giai \u0111o\u1ea1n th\u1ebf gi\u1edbi \u0111\u01b0\u1ee3c l‡m nh\u01b0 th\u1ebf n‡o \u1ea1
2025-10-04 15:30:01,888 | INFO | ConversationManager | User: giai \u0111o\u1ea1n th\u1ebf gi\u1edbi \u0111\u01b0\u1ee3c l‡m nh\u01b0 th\u1ebf n‡o \u1ea1
2025-10-04 15:30:01,888 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:30:01,889 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:30:01,905 | INFO | __main__ | Received new chat request
2025-10-04 15:30:01,905 | DEBUG | __main__ | Request ID: 20251004T151704752-4f1cab16, Data length: 41
2025-10-04 15:30:01,905 | DEBUG | __main__ | Using existing session for ID: 20251004T151704752-4f1cab16
2025-10-04 15:30:01,921 | INFO | __main__ | Processing user input: 'giai ƒëo·∫°n th·∫ø gi·ªõi ƒë∆∞·ª£c l√†m nh∆∞ th·∫ø n√†o ·∫°' for session 20251004T151704752-4f1cab16
2025-10-04 15:30:02,653 | INFO | __main__ | Starting retrieval for query: 'giai ƒëo·∫°n th·∫ø gi·ªõi ƒë∆∞·ª£c l√†m nh∆∞ th·∫ø n√†o' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:30:02,653 | DEBUG | __main__ | Searching header index...
2025-10-04 15:30:02,676 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:30:02,676 | DEBUG | __main__ | Searching content index...
2025-10-04 15:30:02,686 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:30:02,686 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:30:02,686 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 15:30:02,686 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:30:02,686 | DEBUG | __main__ |   Rank 1: chunk_id=55, hybrid_score=0.3839
2025-10-04 15:30:02,686 | DEBUG | __main__ |   Rank 2: chunk_id=7, hybrid_score=0.3704
2025-10-04 15:30:02,686 | DEBUG | __main__ |   Rank 3: chunk_id=0, hybrid_score=0.3644
2025-10-04 15:30:02,686 | DEBUG | __main__ |   Rank 4: chunk_id=35, hybrid_score=0.3640
2025-10-04 15:30:02,686 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 15:30:02,686 | DEBUG | __main__ | Retrieved chunk 7: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > ·∫§m th·ª±c (B√£i c·ªè nh√† ChƒÉm) | Content preview: i. Gi√£ c·ªëm, l√†m c·ªëm      ii. L√†m b√°nh d·∫ªo      iii. ·∫®m th·ª±c ƒë·ªãa ph∆∞∆°ng
2025-10-04 15:30:02,686 | DEBUG | __main__ | Retrieved chunk 0: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > Tr∆∞·ªõc to√† C√°nh di·ªÅu | Content preview: Kh√°m ph√° vƒÉn h√≥a H∆∞ng Y√™n qua th∆∞·ªüng th·ª©c ngh·ªá thu·∫≠t truy·ªÅn th·ªëng v√† giao l∆∞u tr·ª±c ti·∫øp v·ªõi ngh·ªá nh√¢...
2025-10-04 15:30:02,686 | DEBUG | __main__ | Retrieved chunk 35: Trung thu > B√°nh n∆∞·ªõng, b√°nh d·∫ªo (ƒë·ªì ƒÉn, ·∫©m th·ª±c, m√≥n ƒÉn) > Mi√™u t·∫£, nguy√™n li·ªáu trong b√°nh n∆∞·ªõng | Content preview: G·ªìm hai ph·∫ßn l√† v·ªè b√°nh v√† th√¢n b√°nh. V·ªè b√°nh l√†m b·∫±ng b·ªôt m√¨ d·∫≠y men tr·ªôn v·ªõi tr·ª©ng g√† v√† ch√∫t r∆∞·ª£u...
2025-10-04 15:30:02,686 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:30:02,686 | DEBUG | __main__ | Retrieved 4 documents for query: giai ƒëo·∫°n th·∫ø gi·ªõi ƒë∆∞·ª£c l√†m nh∆∞ th·∫ø n√†o
2025-10-04 15:30:02,686 | DEBUG | __main__ | [timing] retrieve 0.032s
2025-10-04 15:30:03,760 | INFO | __main__ | Agent execution completed successfully for session 20251004T151704752-4f1cab16
2025-10-04 15:30:03,760 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.855s, Total: 1.855s
2025-10-04 15:30:03,760 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1278
2025-10-04 15:30:03,760 | INFO | RAGClient | RAG reply (len=543)
2025-10-04 15:30:03,760 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba tra thÙng tin xong thÏ th\u1ea5y th\u1ebf n‡y nË. ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y l‡ bi\u1ec3u t\u01b0\u1ee3ng cho \u01b0\u1edbc m\u01a1 h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t c\u1ee7a ng\u01b0\u1eddi Vi\u1ec7t x\u01b0a \u0111Û ch·u. Ng‡y x\u01b0a, \u0111\u1ec3 tr\u1edf th‡nh Ti\u1ebfn s\u0129, ng\u01b0\u1eddi ta ph\u1ea3i tr\u1ea3i qua nhi\u1ec1u k\u1ef3 thi r\u1ea5t khÛ kh\u0103n. ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111\u01b0\u1ee3c l‡m b\u1eb1ng gi\u1ea5y, ng\u1ed3i trÍn ki\u1ec7u, ·o m\u0169 ch\u1ec9nh t\u1ec1, t\u01b0\u1ee3ng tr\u01b0ng cho s\u1ef1 vinh quang v‡ h\u1ecdc v\u1ea5n cao. Ng‡y nay, Ùng Ti\u1ebfn s\u0129 Gi\u1ea5y cÚn \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u1edbi cÙng ngh\u1ec7 hi\u1ec7n \u0111\u1ea1i \u0111\u1ec3 cÛ th\u1ec3 nÛi chuy\u1ec7n, k\u1ec3 chuy\u1ec7n v‡ ch\u01a1i c˘ng c·c b\u1ea1n nh\u1ecf n\u1eefa \u0111Û ch·u. V\u1eeba gi\u1eef nÈt \u0111\u1eb9p truy\u1ec1n th\u1ed1ng, v\u1eeba thÍm ph\u1ea7n sinh \u0111\u1ed9ng v‡ g\u1ea7n g\u0169i.
2025-10-04 15:30:03,760 | DEBUG | TTSService | Starting TTS download for text length=543
2025-10-04 15:30:03,760 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:30:06,025 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:30:06,809 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:30:06,831 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:30:08,289 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:30:08,323 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:30:16,959 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 15:30:16,960 | DEBUG | TTSService | Playback thread started
2025-10-04 15:30:16,960 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 15:38:24,976 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 15:38:25,268 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 15:38:25,268 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 15:38:25,268 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 15:38:25,626 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 15:38:25,660 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 15:38:25,949 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 15:38:25,982 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 15:38:26,259 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 15:38:26,310 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 15:38:26,596 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 15:38:26,633 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 15:38:26,911 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 15:38:26,953 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 15:38:27,249 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 15:38:27,292 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 15:38:27,576 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 15:38:28,231 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 15:38:28,263 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 15:38:28,646 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 15:38:28,678 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 15:38:28,988 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 15:38:29,831 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 15:38:29,863 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 15:38:30,136 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 15:38:30,849 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 15:38:30,849 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 15:38:30,849 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 15:38:30,849 | INFO | faiss.loader | Loading faiss.
2025-10-04 15:38:30,873 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 15:39:01,537 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:39:07,009 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:39:07,009 | INFO | Recorder | Recording finished (elapsed 5.5s).
2025-10-04 15:39:07,038 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:39:07,039 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:39:07,042 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:39:08,400 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 147
2025-10-04 15:39:08,400 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng cÛ bi\u1ebft khi n‡o m\u1eb7t tr\u0103ng s\u1ebd cÛ m‡u \u0111\u1ecf khÙng
2025-10-04 15:39:08,400 | INFO | ConversationManager | User: Ùng \u01a1i Ùng cÛ bi\u1ebft khi n‡o m\u1eb7t tr\u0103ng s\u1ebd cÛ m‡u \u0111\u1ecf khÙng
2025-10-04 15:39:08,400 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:39:08,410 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:39:08,433 | INFO | __main__ | Received new chat request
2025-10-04 15:39:08,434 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 55
2025-10-04 15:39:08,434 | DEBUG | __main__ | Creating new session with ID: 20251004T153016959-3795387c
2025-10-04 15:39:08,434 | DEBUG | __main__ | Using request ID: 20251004T153016959-3795387c
2025-10-04 15:39:08,434 | DEBUG | __main__ | Created new session for ID: 20251004T153016959-3795387c, total sessions: 1
2025-10-04 15:39:08,601 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ bi·∫øt khi n√†o m·∫∑t trƒÉng s·∫Ω c√≥ m√†u ƒë·ªè kh√¥ng' for session 20251004T153016959-3795387c
2025-10-04 15:39:10,001 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:39:10,001 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.567s, Total: 1.568s
2025-10-04 15:39:10,001 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 689
2025-10-04 15:39:10,001 | INFO | RAGClient | RAG reply (len=269)
2025-10-04 15:39:10,001 | INFO | ConversationManager | Bot: \u1ed2, c‚u h\u1ecfi n‡y th˙ v\u1ecb nha ch·u. ‘ng nh\u1edb l‡ m\u1eb7t tr\u0103ng cÛ m‡u \u0111\u1ecf l‡ do hi\u1ec7n t\u01b0\u1ee3ng nguy\u1ec7t th\u1ef1c \u0111Û ch·u. L˙c \u0111Û, ·nh s·ng m\u1eb7t tr\u1eddi b\u1ecb Tr·i \u0110\u1ea5t che khu\u1ea5t, ch\u1ec9 cÚn m\u1ed9t ph\u1ea7n ·nh s·ng \u0111\u1ecf l\u1ecdt qua khÌ quy\u1ec3n chi\u1ebfu lÍn m\u1eb7t tr\u0103ng thÙi. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 nguy\u1ec7t th\u1ef1c khÙng?
2025-10-04 15:39:10,001 | DEBUG | TTSService | Starting TTS download for text length=269
2025-10-04 15:39:10,001 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:11,667 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:11,890 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:11,915 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:13,497 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:13,697 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:13,715 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:15,078 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:16,826 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:39:24,099 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:39:24,105 | INFO | Recorder | Recording finished (elapsed 7.3s).
2025-10-04 15:39:24,108 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:39:24,108 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:39:24,115 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:39:25,389 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 196
2025-10-04 15:39:25,389 | INFO | WhisperSTT | Transcription received: Ùng nÛi th\u1ebf Ùng cÛ bi\u1ebft \u1edd s\u1ef1 thÌch c\u1ee7a ho\u1ea1t \u0111\u1ed9ng m\u1ed7i l\u1ea7n trong trung thu l‡ gÏ khÙng
2025-10-04 15:39:25,390 | INFO | ConversationManager | User: Ùng nÛi th\u1ebf Ùng cÛ bi\u1ebft \u1edd s\u1ef1 thÌch c\u1ee7a ho\u1ea1t \u0111\u1ed9ng m\u1ed7i l\u1ea7n trong trung thu l‡ gÏ khÙng
2025-10-04 15:39:25,390 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:39:25,391 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:39:25,405 | INFO | __main__ | Received new chat request
2025-10-04 15:39:25,406 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 84
2025-10-04 15:39:25,406 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:39:25,425 | INFO | __main__ | Processing user input: '√¥ng n√≥i th·∫ø √¥ng c√≥ bi·∫øt ·ªù s·ª± th√≠ch c·ªßa ho·∫°t ƒë·ªông m·ªói l·∫ßn trong trung thu l√† g√¨ kh√¥ng' for session 20251004T153016959-3795387c
2025-10-04 15:39:25,885 | INFO | __main__ | Starting retrieval for query: 's·ª± t√≠ch ho·∫°t ƒë·ªông m·ªói l·∫ßn trong trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:39:25,885 | DEBUG | __main__ | Searching header index...
2025-10-04 15:39:25,897 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:39:25,897 | DEBUG | __main__ | Searching content index...
2025-10-04 15:39:25,907 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:39:25,907 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:39:25,907 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 15:39:25,907 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:39:25,907 | DEBUG | __main__ |   Rank 1: chunk_id=40, hybrid_score=0.4216
2025-10-04 15:39:25,907 | DEBUG | __main__ |   Rank 2: chunk_id=29, hybrid_score=0.4212
2025-10-04 15:39:25,907 | DEBUG | __main__ |   Rank 3: chunk_id=24, hybrid_score=0.4200
2025-10-04 15:39:25,907 | DEBUG | __main__ |   Rank 4: chunk_id=49, hybrid_score=0.4168
2025-10-04 15:39:25,907 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 15:39:25,907 | DEBUG | __main__ | Retrieved chunk 29: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > M√∫a l√¢n, m√∫a s∆∞ t·ª≠ | Content preview: X∆∞a l·∫Øm r·ªìi, c√≥ ch√†ng ti·ªÅu phu s·ªëng ·ªü m·ªôt khu r·ª´ng. M·ªôt ƒë√™m Trung thu trƒÉng s√°ng, ch√†ng g·∫∑p m·ªôt con ...
2025-10-04 15:39:25,907 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 15:39:25,907 | DEBUG | __main__ | Retrieved chunk 49: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn Nam Vi·ªát Nam | Content preview: T·∫øt Trung Thu ·ªü mi·ªÅn Nam Vi·ªát Nam ƒë·∫∑c tr∆∞ng b·ªüi kh√¥ng kh√≠ ·∫•m √°p, t·∫≠p trung v√†o gia ƒë√¨nh, th∆∞·ªùng b·ªã ·∫£...
2025-10-04 15:39:25,907 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:39:25,907 | DEBUG | __main__ | Retrieved 4 documents for query: s·ª± t√≠ch ho·∫°t ƒë·ªông m·ªói l·∫ßn trong trung thu
2025-10-04 15:39:25,907 | DEBUG | __main__ | [timing] retrieve 0.022s
2025-10-04 15:39:26,921 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:39:26,925 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.520s, Total: 1.520s
2025-10-04 15:39:26,926 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1039
2025-10-04 15:39:26,926 | INFO | RAGClient | RAG reply (len=424)
2025-10-04 15:39:26,926 | INFO | ConversationManager | Bot: ¿, Ùng nh\u1edb r\u1ed3i. Theo nh\u1eefng gÏ Ùng \u0111\u1ecdc \u0111\u01b0\u1ee3c thÏ cÛ nhi\u1ec1u ho\u1ea1t \u0111\u1ed9ng th˙ v\u1ecb l\u1eafm ch·u \u1ea1. VÌ d\u1ee5 nh\u01b0 m˙a l‚n, m˙a s\u01b0 t\u1eed \u0111\u1ec3 nh\u1edb v\u1ec1 ch‡ng ti\u1ec1u phu d\u0169ng c\u1ea3m ng‡y x\u01b0a \u0111Û. R\u1ed3i cÚn cÛ ch˙ chÛ b\u01b0\u1edfi trÍn m‚m c\u1ed7 n\u1eefa, nÛ t\u01b0\u1ee3ng tr\u01b0ng cho lÚng trung th‡nh v‡ s\u1ef1 hy sinh cao \u0111\u1eb9p. ¿, cÚn cÛ c\u1ea3 s\u1ef1 tÌch ch˙ Cu\u1ed9i ng\u1ed3i g\u1ed1c c‚y \u0111a trÍn cung tr\u0103ng n\u1eefa, nghe k\u1ec3 thÏ ch˙ \u1ea5y nh\u1edb nh‡ l\u1eafm \u0111Û ch·u. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 chi ti\u1ebft h\u01a1n v\u1ec1 ho\u1ea1t \u0111\u1ed9ng n‡o khÙng?
2025-10-04 15:39:26,926 | DEBUG | TTSService | Starting TTS download for text length=424
2025-10-04 15:39:26,926 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:28,652 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:28,858 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:28,885 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:31,076 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:31,101 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:32,606 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:32,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:32,901 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:34,932 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:35,240 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:39:35,259 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:39:36,645 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:44:41,529 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 15:44:41,826 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 15:44:41,826 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 15:44:41,826 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 15:44:42,776 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 15:44:43,064 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 15:44:43,342 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 15:44:43,490 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 15:44:43,844 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 15:44:43,876 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 15:44:44,268 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 15:44:44,407 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 15:44:44,776 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 15:44:44,806 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 15:44:45,601 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 15:44:45,712 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 15:44:46,039 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 15:44:46,328 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 15:44:46,367 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 15:44:46,843 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 15:44:46,955 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 15:44:47,328 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 15:44:48,123 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 15:44:48,142 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 15:44:48,659 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 15:44:49,338 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 15:44:49,338 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 15:44:49,338 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 15:44:49,338 | INFO | faiss.loader | Loading faiss.
2025-10-04 15:44:49,363 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 15:44:55,894 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:45:00,978 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:45:00,978 | INFO | Recorder | Recording finished (elapsed 5.1s).
2025-10-04 15:45:00,987 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:45:00,993 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:45:00,995 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:45:02,243 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 71
2025-10-04 15:45:02,243 | INFO | WhisperSTT | Transcription received: n‡y Ùng a \u0111\u1ea5y l‡ gÏ
2025-10-04 15:45:02,243 | INFO | ConversationManager | User: n‡y Ùng a \u0111\u1ea5y l‡ gÏ
2025-10-04 15:45:02,243 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:45:02,243 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:45:02,243 | INFO | __main__ | Received new chat request
2025-10-04 15:45:02,243 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 19
2025-10-04 15:45:02,243 | DEBUG | __main__ | Creating new session with ID: 20251004T153016959-3795387c
2025-10-04 15:45:02,243 | DEBUG | __main__ | Using request ID: 20251004T153016959-3795387c
2025-10-04 15:45:02,243 | DEBUG | __main__ | Created new session for ID: 20251004T153016959-3795387c, total sessions: 1
2025-10-04 15:45:02,410 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: n√†y √¥ng a ƒë·∫•y l√† g√¨
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T153016959-3795387c
2025-10-04 15:45:03,276 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:45:03,276 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.034s, Total: 1.034s
2025-10-04 15:45:03,276 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 202
2025-10-04 15:45:03,276 | INFO | RAGClient | RAG reply (len=42)
2025-10-04 15:45:03,276 | INFO | ConversationManager | Bot: \u01a0i Ùng \u0111‚y, ch·u g\u1ecdi Ùng cÛ chuy\u1ec7n gÏ th\u1ebf.
2025-10-04 15:45:03,276 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-04 15:45:03,278 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:45:04,257 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:45:09,830 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:45:14,394 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:45:14,394 | INFO | Recorder | Recording finished (elapsed 4.6s).
2025-10-04 15:45:14,409 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:45:14,411 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:45:14,412 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:45:15,552 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 59
2025-10-04 15:45:15,552 | INFO | WhisperSTT | Transcription received: n‡o kh·ch h‡ng \u01a1i
2025-10-04 15:45:15,552 | INFO | ConversationManager | User: n‡o kh·ch h‡ng \u01a1i
2025-10-04 15:45:15,552 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:45:15,556 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:45:15,572 | INFO | __main__ | Received new chat request
2025-10-04 15:45:15,572 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 17
2025-10-04 15:45:15,572 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:45:15,586 | INFO | __main__ | Processing user input: 'n√†o kh√°ch h√†ng ∆°i' for session 20251004T153016959-3795387c
2025-10-04 15:45:16,436 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:45:16,436 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.863s, Total: 0.865s
2025-10-04 15:45:16,436 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 265
2025-10-04 15:45:16,436 | INFO | RAGClient | RAG reply (len=77)
2025-10-04 15:45:16,436 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u cÛ c‚u h\u1ecfi gÏ cho Ùng khÙng?
2025-10-04 15:45:16,436 | DEBUG | TTSService | Starting TTS download for text length=77
2025-10-04 15:45:16,436 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:45:18,058 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:45:18,268 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:46:04,653 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:46:11,394 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:46:11,400 | INFO | Recorder | Recording finished (elapsed 6.7s).
2025-10-04 15:46:11,402 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:46:11,402 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:46:11,402 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:46:12,845 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 179
2025-10-04 15:46:12,845 | INFO | WhisperSTT | Transcription received: n‡y \u0111\u1ec3 con nÛi \u0111i n‡o con h\u1ecfi gÏ n‡o con h\u1ecfi Ùng thÌ sinh \u0111‚y nh\u01b0 gÏ n‡o
2025-10-04 15:46:12,845 | INFO | ConversationManager | User: n‡y \u0111\u1ec3 con nÛi \u0111i n‡o con h\u1ecfi gÏ n‡o con h\u1ecfi Ùng thÌ sinh \u0111‚y nh\u01b0 gÏ n‡o
2025-10-04 15:46:12,845 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:46:12,845 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:46:12,861 | INFO | __main__ | Received new chat request
2025-10-04 15:46:12,863 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 72
2025-10-04 15:46:12,863 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:46:12,882 | INFO | __main__ | Processing user input: 'n√†y ƒë·ªÉ con n√≥i ƒëi n√†o con h·ªèi g√¨ n√†o con h·ªèi √¥ng th√≠ sinh ƒë√¢y nh∆∞ g√¨ n√†o' for session 20251004T153016959-3795387c
2025-10-04 15:46:13,796 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:46:13,796 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.933s, Total: 0.935s
2025-10-04 15:46:13,796 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 305
2025-10-04 15:46:13,796 | INFO | RAGClient | RAG reply (len=92)
2025-10-04 15:46:13,796 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ Ùng nghe khÙng rı l\u1eafm, ch·u cÛ th\u1ec3 nÛi to h\u01a1n ho\u1eb7c nÛi l\u1ea1i c‚u h\u1ecfi \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:46:13,796 | DEBUG | TTSService | Starting TTS download for text length=92
2025-10-04 15:46:13,796 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:46:16,178 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:46:21,387 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:46:26,864 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:46:26,864 | INFO | Recorder | Recording finished (elapsed 5.5s).
2025-10-04 15:46:26,876 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:46:26,876 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:46:26,879 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:46:28,062 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 80
2025-10-04 15:46:28,076 | INFO | WhisperSTT | Transcription received: tu\u1ed5i Ùng \u01a1i bao nhiÍu tu\u1ed5i \u1ea1
2025-10-04 15:46:28,076 | INFO | ConversationManager | User: tu\u1ed5i Ùng \u01a1i bao nhiÍu tu\u1ed5i \u1ea1
2025-10-04 15:46:28,076 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:46:28,076 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:46:28,097 | INFO | __main__ | Received new chat request
2025-10-04 15:46:28,097 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 28
2025-10-04 15:46:28,097 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:46:28,107 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: tu·ªïi √¥ng ∆°i bao nhi√™u tu·ªïi ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T153016959-3795387c
2025-10-04 15:46:29,030 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:46:29,030 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.933s, Total: 0.933s
2025-10-04 15:46:29,030 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 200
2025-10-04 15:46:29,030 | INFO | RAGClient | RAG reply (len=42)
2025-10-04 15:46:29,030 | INFO | ConversationManager | Bot: \u01a0i Ùng \u0111‚y, ch·u g\u1ecdi Ùng cÛ chuy\u1ec7n gÏ th\u1ebf.
2025-10-04 15:46:29,030 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-04 15:46:29,030 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:46:29,815 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:46:34,823 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:46:38,636 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:46:38,636 | INFO | Recorder | Recording finished (elapsed 3.8s).
2025-10-04 15:46:38,646 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:46:38,646 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:46:38,646 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:46:39,999 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 62
2025-10-04 15:46:40,000 | INFO | WhisperSTT | Transcription received: Ùng bao nhiÍu tu\u1ed5i \u1ea1
2025-10-04 15:46:40,000 | INFO | ConversationManager | User: Ùng bao nhiÍu tu\u1ed5i \u1ea1
2025-10-04 15:46:40,000 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:46:40,002 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:46:40,012 | INFO | __main__ | Received new chat request
2025-10-04 15:46:40,012 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 20
2025-10-04 15:46:40,012 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:46:40,026 | INFO | __main__ | Processing user input: '√¥ng bao nhi√™u tu·ªïi ·∫°' for session 20251004T153016959-3795387c
2025-10-04 15:46:40,997 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:46:40,997 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.984s, Total: 0.984s
2025-10-04 15:46:40,997 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 497
2025-10-04 15:46:40,997 | INFO | RAGClient | RAG reply (len=189)
2025-10-04 15:46:40,997 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y m‡, tu\u1ed5i t·c thÏ c\u0169ng l‚u l\u1eafm r\u1ed3i, ch\u1eafc l‡... l‚u \u01a1i l‡ l‚u luÙn \u0111Û ch·u \u1ea1. Quan tr\u1ecdng l‡ Ùng luÙn tr\u1ebb trung \u0111\u1ec3 ch\u01a1i v\u1edbi c·c ch·u trong d\u1ecbp Trung Thu n‡y nË.
2025-10-04 15:46:40,997 | DEBUG | TTSService | Starting TTS download for text length=189
2025-10-04 15:46:40,997 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:46:42,615 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:46:43,083 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:46:43,104 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:46:44,589 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:47:03,006 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:47:05,360 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:47:05,364 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 15:47:05,367 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:47:05,376 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:47:05,376 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:47:06,569 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 81
2025-10-04 15:47:06,569 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng ch\u1ee9c c·i gÏ \u1ea1
2025-10-04 15:47:06,576 | INFO | ConversationManager | User: Ùng \u01a1i Ùng ch\u1ee9c c·i gÏ \u1ea1
2025-10-04 15:47:06,576 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:47:06,576 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:47:06,596 | INFO | __main__ | Received new chat request
2025-10-04 15:47:06,596 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 24
2025-10-04 15:47:06,596 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:47:06,613 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng ∆°i √¥ng ch·ª©c c√°i g√¨ ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T153016959-3795387c
2025-10-04 15:47:18,597 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 15:47:19,598 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 15:47:19,599 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:47:25,948 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:47:25,948 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 19.352s, Total: 19.352s
2025-10-04 15:47:25,948 | INFO | __main__ | Received new chat request
2025-10-04 15:47:25,948 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 24
2025-10-04 15:47:25,948 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:47:25,997 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng ∆°i √¥ng ch·ª©c c√°i g√¨ ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T153016959-3795387c
2025-10-04 15:47:31,618 | WARNING | RAGClient | RAG request failed (attempt 2). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 15:47:33,619 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-04 15:47:33,619 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:47:45,646 | WARNING | RAGClient | RAG request failed (attempt 3). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 15:47:48,647 | ERROR | RAGClient | RAG request failed after retries
2025-10-04 15:47:48,647 | WARNING | ConversationManager | Empty reply from RAG; using backup string
2025-10-04 15:47:48,647 | INFO | ConversationManager | Bot: Ch·u ch\u1edd Ùng m\u1ed9t ch˙t nha.
2025-10-04 15:47:48,648 | DEBUG | TTSService | Starting TTS download for text length=26
2025-10-04 15:47:48,648 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:47:49,626 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:02,848 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 15:48:03,149 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 15:48:03,149 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 15:48:03,149 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 15:48:03,526 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 15:48:03,567 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 15:48:03,843 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 15:48:03,876 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 15:48:04,165 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 15:48:04,197 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 15:48:04,485 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 15:48:04,517 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 15:48:04,790 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 15:48:04,826 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 15:48:05,130 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 15:48:05,198 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 15:48:05,476 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 15:48:05,757 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 15:48:05,805 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 15:48:06,277 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 15:48:06,327 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 15:48:06,681 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 15:48:07,518 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 15:48:07,550 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 15:48:07,863 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 15:48:08,335 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:48:08,577 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 15:48:08,577 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 15:48:08,577 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 15:48:08,577 | INFO | faiss.loader | Loading faiss.
2025-10-04 15:48:08,597 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 15:48:21,742 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:48:21,744 | INFO | Recorder | Recording finished (elapsed 13.4s).
2025-10-04 15:48:21,750 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:48:21,750 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:48:21,750 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:48:23,092 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 134
2025-10-04 15:48:23,092 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng \u01a1i Ùng cÛ thÌch trung thu c\u1ee7a vi\u1ec7t nam khÙng \u1ea1
2025-10-04 15:48:23,093 | INFO | ConversationManager | User: Ùng \u01a1i Ùng \u01a1i Ùng cÛ thÌch trung thu c\u1ee7a vi\u1ec7t nam khÙng \u1ea1
2025-10-04 15:48:23,093 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:48:23,094 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:48:23,113 | INFO | __main__ | Received new chat request
2025-10-04 15:48:23,113 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 57
2025-10-04 15:48:23,113 | DEBUG | __main__ | Creating new session with ID: 20251004T153016959-3795387c
2025-10-04 15:48:23,113 | DEBUG | __main__ | Using request ID: 20251004T153016959-3795387c
2025-10-04 15:48:23,113 | DEBUG | __main__ | Created new session for ID: 20251004T153016959-3795387c, total sessions: 1
2025-10-04 15:48:23,263 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng ∆°i √¥ng c√≥ th√≠ch trung thu c·ªßa vi·ªát nam kh√¥ng ·∫°' for session 20251004T153016959-3795387c
2025-10-04 15:48:24,330 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:48:24,330 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.217s, Total: 1.217s
2025-10-04 15:48:24,330 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 549
2025-10-04 15:48:24,330 | INFO | RAGClient | RAG reply (len=234)
2025-10-04 15:48:24,330 | INFO | ConversationManager | Bot: ‘i chao, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y ch·u \u01a1i. Trung thu Vi\u1ec7t Nam h\u1ea3, \u1ed3 \u1ed3, Ùng thÌch l\u1eafm ch\u1ee9, thÌch l\u1eafm luÙn. C·i khÙng khÌ r\u1ed9n r‡ng, \u0111Ën l\u1ed3ng lung linh, r\u1ed3i b·nh trung thu th\u01a1m l\u1eebng n\u1eefa ch\u1ee9. Ch·u cÛ thÌch trung thu khÙng, k\u1ec3 Ùng nghe v\u1edbi?
2025-10-04 15:48:24,330 | DEBUG | TTSService | Starting TTS download for text length=234
2025-10-04 15:48:24,330 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:48:26,003 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:26,258 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:26,380 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:48:28,098 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:28,434 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:42,846 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:48:44,134 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:48:44,134 | INFO | Recorder | Recording finished (elapsed 1.3s).
2025-10-04 15:48:44,141 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:48:44,141 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:48:44,148 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:48:45,266 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 30
2025-10-04 15:48:45,266 | INFO | WhisperSTT | Transcription received: h\u1ecfa
2025-10-04 15:48:45,266 | INFO | ConversationManager | User: h\u1ecfa
2025-10-04 15:48:45,266 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:48:45,271 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:48:45,271 | INFO | __main__ | Received new chat request
2025-10-04 15:48:45,271 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 3
2025-10-04 15:48:45,271 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:48:45,289 | INFO | __main__ | Processing user input: 'h·ªèa' for session 20251004T153016959-3795387c
2025-10-04 15:48:45,948 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:48:45,948 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.677s, Total: 0.677s
2025-10-04 15:48:45,948 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 349
2025-10-04 15:48:45,948 | INFO | RAGClient | RAG reply (len=116)
2025-10-04 15:48:45,948 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u nÛi 'h\u1ecfa' l‡ sao, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi to h\u01a1n ho\u1eb7c nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:48:45,948 | DEBUG | TTSService | Starting TTS download for text length=116
2025-10-04 15:48:45,948 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:48:47,885 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:48,048 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:48:51,963 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:48:57,934 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:48:57,939 | INFO | Recorder | Recording finished (elapsed 6.0s).
2025-10-04 15:48:57,945 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:48:57,949 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:48:57,952 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:48:59,179 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 142
2025-10-04 15:48:59,179 | INFO | WhisperSTT | Transcription received: ,\u8ad7 tÚi hÏnh v\u1eadt nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng nh\u1ec9?
2025-10-04 15:48:59,194 | INFO | ConversationManager | User: ,\u8ad7 tÚi hÏnh v\u1eadt nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng nh\u1ec9?
2025-10-04 15:48:59,194 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:48:59,194 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:48:59,211 | INFO | __main__ | Received new chat request
2025-10-04 15:48:59,211 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 51
2025-10-04 15:48:59,212 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:48:59,226 | INFO | __main__ | Processing user input: ',Ë´ó t√≤i h√¨nh v·∫≠t n√≥i r√µ h∆°n m·ªôt ch√∫t ƒë∆∞·ª£c kh√¥ng nh·ªâ?' for session 20251004T153016959-3795387c
2025-10-04 15:49:00,170 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:49:00,170 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.958s, Total: 0.959s
2025-10-04 15:49:00,171 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 349
2025-10-04 15:49:00,171 | INFO | RAGClient | RAG reply (len=116)
2025-10-04 15:49:00,171 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u nÛi 'h\u1ecfa' l‡ sao, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi to h\u01a1n ho\u1eb7c nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:49:00,172 | DEBUG | TTSService | Starting TTS download for text length=116
2025-10-04 15:49:00,172 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:49:01,007 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:01,234 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:09,992 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:49:14,817 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:49:14,822 | INFO | Recorder | Recording finished (elapsed 4.8s).
2025-10-04 15:49:14,828 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:49:14,830 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:49:14,832 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:49:16,128 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 83
2025-10-04 15:49:16,129 | INFO | WhisperSTT | Transcription received: ch·u c\u0169ng r\u1ea5t thÌch tr˘ng thu \u1ea1
2025-10-04 15:49:16,130 | INFO | ConversationManager | User: ch·u c\u0169ng r\u1ea5t thÌch tr˘ng thu \u1ea1
2025-10-04 15:49:16,130 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:49:16,131 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:49:16,146 | INFO | __main__ | Received new chat request
2025-10-04 15:49:16,146 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 31
2025-10-04 15:49:16,146 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:49:16,159 | INFO | __main__ | Processing user input: 'ch√°u c≈©ng r·∫•t th√≠ch tr√πng thu ·∫°' for session 20251004T153016959-3795387c
2025-10-04 15:49:17,037 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:49:17,037 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.891s, Total: 0.891s
2025-10-04 15:49:17,037 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 390
2025-10-04 15:49:17,037 | INFO | RAGClient | RAG reply (len=152)
2025-10-04 15:49:17,037 | INFO | ConversationManager | Bot: ThÌch qu· ha ch·u. Trung thu l‡ d\u1ecbp \u0111\u1ec3 mÏnh qu‚y qu\u1ea7n bÍn gia \u0111Ïnh, c˘ng nhau ph· c\u1ed7, ng\u1eafm tr\u0103ng. Ch·u thÌch nh\u1ea5t ho\u1ea1t \u0111\u1ed9ng n‡o trong d\u1ecbp trung thu v\u1eady?
2025-10-04 15:49:17,037 | DEBUG | TTSService | Starting TTS download for text length=152
2025-10-04 15:49:17,037 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:49:18,941 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:19,116 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:19,140 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:49:20,667 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:34,962 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:49:37,142 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:49:37,147 | INFO | Recorder | Recording finished (elapsed 2.2s).
2025-10-04 15:49:37,151 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:49:37,151 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:49:37,151 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:49:38,302 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 53
2025-10-04 15:49:38,302 | INFO | WhisperSTT | Transcription received: chi\u1ebfm b·nh ch\u01b0ng
2025-10-04 15:49:38,302 | INFO | ConversationManager | User: chi\u1ebfm b·nh ch\u01b0ng
2025-10-04 15:49:38,302 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:49:38,305 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:49:38,318 | INFO | __main__ | Received new chat request
2025-10-04 15:49:38,318 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 16
2025-10-04 15:49:38,318 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:49:38,326 | INFO | __main__ | Processing user input: 'chi·∫øm b√°nh ch∆∞ng' for session 20251004T153016959-3795387c
2025-10-04 15:49:50,333 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 15:49:51,334 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 15:49:51,335 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:49:51,835 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:49:51,835 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 13.517s, Total: 13.517s
2025-10-04 15:49:51,835 | INFO | __main__ | Received new chat request
2025-10-04 15:49:51,835 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 16
2025-10-04 15:49:51,835 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:49:51,856 | INFO | __main__ | Processing user input: 'chi·∫øm b√°nh ch∆∞ng' for session 20251004T153016959-3795387c
2025-10-04 15:49:53,165 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:49:53,165 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.330s, Total: 1.330s
2025-10-04 15:49:53,165 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 475
2025-10-04 15:49:53,165 | INFO | RAGClient | RAG reply (len=185)
2025-10-04 15:49:53,166 | INFO | ConversationManager | Bot: Ch·u \u01a1i, b·nh ch\u01b0ng l‡ mÛn \u0103n truy\u1ec1n th\u1ed1ng c\u1ee7a ng‡y T\u1ebft NguyÍn \u0110·n c\u01a1, cÚn Trung thu thÏ mÏnh hay \u0103n b·nh n\u01b0\u1edbng, b·nh d\u1ebbo ch·u \u1ea1. Ch·u cÛ mu\u1ed1n Ùng tÏm hi\u1ec3u thÍm v\u1ec1 b·nh trung thu khÙng?
2025-10-04 15:49:53,166 | DEBUG | TTSService | Starting TTS download for text length=185
2025-10-04 15:49:53,166 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:49:54,929 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:55,126 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:49:55,141 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:49:56,534 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:50:12,086 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:50:17,330 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:50:17,336 | INFO | Recorder | Recording finished (elapsed 5.2s).
2025-10-04 15:50:17,340 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:50:17,340 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:50:17,348 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:50:18,726 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 51
2025-10-04 15:50:18,726 | INFO | WhisperSTT | Transcription received: con ch‡o Ùng \u1ea1
2025-10-04 15:50:18,726 | INFO | ConversationManager | User: con ch‡o Ùng \u1ea1
2025-10-04 15:50:18,726 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:50:18,729 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:50:18,746 | INFO | __main__ | Received new chat request
2025-10-04 15:50:18,746 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 14
2025-10-04 15:50:18,746 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:50:18,757 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: con ch√†o √¥ng ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: Con ch√†o √¥ng ·∫°
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: - N·∫øu ƒë√¢y l√† l·ªùi ch√†o, g·ª≠i l·ªùi ch√†o l·∫°i, h·ªèi t√™n kh√°ch v√† ghi nh·ªõ t√™n kh√°ch (n·∫øu c√≥) v√† x∆∞ng h√¥ ƒë·∫øn h·∫øt cu·ªôc h·ªôi tho·∫°i.
- N·∫øu ƒë√¢y l√† l·ªùi t·∫°m bi·ªát, g·ª≠i l·ªùi c·∫£m ∆°n v√¨ ƒë√£ tr√≤ chuy·ªán, l·ªùi ch√∫c v√† ng·ªè √Ω nh·ªù kh√°ch d√†nh th·ªùi gian tham gia ph·ªèng v√°n, ƒë√°nh gi√° tr·∫£ nghi·ªám.
        ' for session 20251004T153016959-3795387c
2025-10-04 15:50:20,135 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:50:20,135 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.389s, Total: 1.389s
2025-10-04 15:50:20,135 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 308
2025-10-04 15:50:20,135 | INFO | RAGClient | RAG reply (len=88)
2025-10-04 15:50:20,135 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. Ch·u tÍn l‡ gÏ th\u1ebf, \u0111\u1ec3 Ùng cÚn nh\u1edb m\u1eb7t ch·u n\u1eefa ch\u1ee9?
2025-10-04 15:50:20,135 | DEBUG | TTSService | Starting TTS download for text length=88
2025-10-04 15:50:20,135 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:50:21,801 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:50:21,957 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:52:10,635 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:52:17,070 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:52:17,076 | INFO | Recorder | Recording finished (elapsed 6.4s).
2025-10-04 15:52:17,078 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:52:17,078 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:52:17,078 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:52:18,463 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 53
2025-10-04 15:52:18,463 | INFO | WhisperSTT | Transcription received: \u66f8\u66f8\u66f8\u4e01 \u01a1i
2025-10-04 15:52:18,463 | INFO | ConversationManager | User: \u66f8\u66f8\u66f8\u4e01 \u01a1i
2025-10-04 15:52:18,465 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:52:18,465 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:52:18,478 | INFO | __main__ | Received new chat request
2025-10-04 15:52:18,478 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 7
2025-10-04 15:52:18,478 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:52:18,489 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: Êõ∏Êõ∏Êõ∏‰∏Å ∆°i
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T153016959-3795387c
2025-10-04 15:52:19,189 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:52:19,189 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.711s, Total: 0.711s
2025-10-04 15:52:19,189 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 200
2025-10-04 15:52:19,189 | INFO | RAGClient | RAG reply (len=42)
2025-10-04 15:52:19,189 | INFO | ConversationManager | Bot: \u01a0i Ùng \u0111‚y, ch·u g\u1ecdi Ùng cÛ chuy\u1ec7n gÏ th\u1ebf.
2025-10-04 15:52:19,189 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-04 15:52:19,189 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:52:20,203 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:53:46,016 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:53:50,270 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:53:50,276 | INFO | Recorder | Recording finished (elapsed 4.3s).
2025-10-04 15:53:50,281 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:53:50,281 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:53:50,281 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:53:51,591 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 54
2025-10-04 15:53:51,591 | INFO | WhisperSTT | Transcription received: chi\u1ebfc xe trao \u0111\u1ed5i
2025-10-04 15:53:51,591 | INFO | ConversationManager | User: chi\u1ebfc xe trao \u0111\u1ed5i
2025-10-04 15:53:51,591 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:53:51,591 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:53:51,606 | INFO | __main__ | Received new chat request
2025-10-04 15:53:51,606 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 17
2025-10-04 15:53:51,606 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:53:51,619 | INFO | __main__ | Processing user input: 'chi·∫øc xe trao ƒë·ªïi' for session 20251004T153016959-3795387c
2025-10-04 15:54:03,608 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 15:54:04,609 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 15:54:04,609 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:54:12,670 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:54:12,670 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 21.063s, Total: 21.063s
2025-10-04 15:54:12,670 | INFO | __main__ | Received new chat request
2025-10-04 15:54:12,670 | DEBUG | __main__ | Request ID: 20251004T153016959-3795387c, Data length: 17
2025-10-04 15:54:12,670 | DEBUG | __main__ | Using existing session for ID: 20251004T153016959-3795387c
2025-10-04 15:54:12,710 | INFO | __main__ | Processing user input: 'chi·∫øc xe trao ƒë·ªïi' for session 20251004T153016959-3795387c
2025-10-04 15:54:16,626 | INFO | ConversationManager | Interrupted by user
2025-10-04 15:54:19,038 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 15:54:19,042 | DEBUG | TTSService | Playback thread started
2025-10-04 15:54:19,042 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 15:54:20,428 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:54:28,037 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:54:28,043 | INFO | Recorder | Recording finished (elapsed 7.6s).
2025-10-04 15:54:28,044 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:54:28,044 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:54:28,044 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:54:29,295 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 63
2025-10-04 15:54:29,295 | INFO | WhisperSTT | Transcription received: n‡o \u0111i con con nÛi \u0111i
2025-10-04 15:54:29,295 | INFO | ConversationManager | User: n‡o \u0111i con con nÛi \u0111i
2025-10-04 15:54:29,295 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:54:29,307 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:54:35,526 | INFO | __main__ | Agent execution completed successfully for session 20251004T153016959-3795387c
2025-10-04 15:54:35,526 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 22.856s, Total: 22.856s
2025-10-04 15:54:35,526 | INFO | __main__ | Received new chat request
2025-10-04 15:54:35,526 | DEBUG | __main__ | Request ID: 20251004T155419038-436388eb, Data length: 21
2025-10-04 15:54:35,526 | DEBUG | __main__ | Creating new session with ID: 20251004T155419038-436388eb
2025-10-04 15:54:35,526 | DEBUG | __main__ | Using request ID: 20251004T155419038-436388eb
2025-10-04 15:54:35,526 | DEBUG | __main__ | Created new session for ID: 20251004T155419038-436388eb, total sessions: 2
2025-10-04 15:54:35,537 | INFO | __main__ | Processing user input: 'n√†o ƒëi con con n√≥i ƒëi' for session 20251004T155419038-436388eb
2025-10-04 15:54:36,364 | INFO | __main__ | Agent execution completed successfully for session 20251004T155419038-436388eb
2025-10-04 15:54:36,364 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.838s, Total: 0.838s
2025-10-04 15:54:36,364 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 303
2025-10-04 15:54:36,364 | INFO | RAGClient | RAG reply (len=100)
2025-10-04 15:54:36,364 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. HÙm nay Trung Thu \u1edf b\u1ea3o t‡ng cÛ gÏ vui ch·u k\u1ec3 Ùng nghe v\u1edbi nhÈ.
2025-10-04 15:54:36,364 | DEBUG | TTSService | Starting TTS download for text length=100
2025-10-04 15:54:36,364 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:54:38,153 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:54:38,331 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:54:49,946 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:55:07,344 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:55:07,356 | INFO | Recorder | Recording finished (elapsed 17.4s).
2025-10-04 15:55:07,367 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:55:07,368 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:55:07,370 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:55:08,707 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 98
2025-10-04 15:55:08,707 | INFO | WhisperSTT | Transcription received: chi\u1ebfc Ch·u c\u1ed5 Lan v\u1ec1 \u0111‚y. Gi· khÙng?
2025-10-04 15:55:08,707 | INFO | ConversationManager | User: chi\u1ebfc Ch·u c\u1ed5 Lan v\u1ec1 \u0111‚y. Gi· khÙng?
2025-10-04 15:55:08,707 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:55:08,707 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:55:08,722 | INFO | __main__ | Received new chat request
2025-10-04 15:55:08,722 | DEBUG | __main__ | Request ID: 20251004T155419038-436388eb, Data length: 36
2025-10-04 15:55:08,722 | DEBUG | __main__ | Using existing session for ID: 20251004T155419038-436388eb
2025-10-04 15:55:08,736 | INFO | __main__ | Processing user input: 'chi·∫øc Ch√°u c·ªï Lan v·ªÅ ƒë√¢y. Gi√° kh√¥ng?' for session 20251004T155419038-436388eb
2025-10-04 15:55:09,440 | INFO | __main__ | Starting retrieval for query: 'chi·∫øc Ch√°u c·ªï Lan' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 15:55:09,440 | DEBUG | __main__ | Searching header index...
2025-10-04 15:55:09,455 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 15:55:09,455 | DEBUG | __main__ | Searching content index...
2025-10-04 15:55:09,459 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 15:55:09,459 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 15:55:09,459 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 15:55:09,459 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 15:55:09,459 | DEBUG | __main__ |   Rank 1: chunk_id=27, hybrid_score=0.8016
2025-10-04 15:55:09,459 | DEBUG | __main__ |   Rank 2: chunk_id=43, hybrid_score=0.4119
2025-10-04 15:55:09,459 | DEBUG | __main__ |   Rank 3: chunk_id=5, hybrid_score=0.4076
2025-10-04 15:55:09,459 | DEBUG | __main__ |   Rank 4: chunk_id=4, hybrid_score=0.4065
2025-10-04 15:55:09,459 | DEBUG | __main__ | Retrieved chunk 27: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Trung Qu·ªëc | Content preview: T·∫°i Trung Qu·ªëc, Th·ªè c≈©ng l√† lo√†i v·∫≠t t∆∞·ª£ng tr∆∞ng cho s·ª± tr∆∞·ªùng th·ªç. Truy·ªÅn thuy·∫øt k·ªÉ r·∫±ng, th·ªè tr·∫Øng...
2025-10-04 15:55:09,459 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 15:55:09,459 | DEBUG | __main__ | Retrieved chunk 5: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Khu qu·∫ßn th·ªÉ ph·ª©c h·ª£h·ª£p | Content preview: Nh√† Vi·ªát   iv. Nh·∫£y d√¢y th·ª´ng    v. ƒêi gu·ªëc ƒë√¥i, gu·ªëc ba Nh√† √äƒë√™   vi. Th√≤ th·ª•t (√äƒë√™)   vii. K√©o co ...
2025-10-04 15:55:09,459 | DEBUG | __main__ | Retrieved chunk 4: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Tr∆∞·ªõc t√≤a C√°nh di·ªÅu | Content preview: i. LƒÉn b∆∞·ªüi   ii. ƒêi c√† kheo (Bana, X∆°ƒëƒÉng)   iii. G√† m·∫π ch·ªëng di·ªÅu h√¢u c·ª©u ƒë√†n con
2025-10-04 15:55:09,459 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 15:55:09,459 | DEBUG | __main__ | Retrieved 4 documents for query: chi·∫øc Ch√°u c·ªï Lan
2025-10-04 15:55:09,459 | DEBUG | __main__ | [timing] retrieve 0.019s
2025-10-04 15:55:20,733 | INFO | ConversationManager | Interrupted by user
2025-10-04 15:55:23,298 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 15:55:23,298 | DEBUG | TTSService | Playback thread started
2025-10-04 15:55:23,298 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 15:55:24,675 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:55:31,299 | INFO | __main__ | Agent execution completed successfully for session 20251004T155419038-436388eb
2025-10-04 15:55:31,299 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 22.577s, Total: 22.577s
2025-10-04 15:55:31,713 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:55:31,713 | INFO | Recorder | Recording finished (elapsed 7.0s).
2025-10-04 15:55:31,726 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:55:31,728 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:55:31,730 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:55:32,912 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 114
2025-10-04 15:55:32,912 | INFO | WhisperSTT | Transcription received: Ùng T‚y l‡ gÏ Ùng l\u1ea1i khÈo l\u1ea1i \u0111\u1ee9t \u0111i
2025-10-04 15:55:32,912 | INFO | ConversationManager | User: Ùng T‚y l‡ gÏ Ùng l\u1ea1i khÈo l\u1ea1i \u0111\u1ee9t \u0111i
2025-10-04 15:55:32,912 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:55:32,920 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:55:32,943 | INFO | __main__ | Received new chat request
2025-10-04 15:55:32,944 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 37
2025-10-04 15:55:32,944 | DEBUG | __main__ | Creating new session with ID: 20251004T155523298-5a527160
2025-10-04 15:55:32,944 | DEBUG | __main__ | Using request ID: 20251004T155523298-5a527160
2025-10-04 15:55:32,944 | DEBUG | __main__ | Created new session for ID: 20251004T155523298-5a527160, total sessions: 3
2025-10-04 15:55:32,949 | INFO | __main__ | Processing user input: '√¥ng T√¢y l√† g√¨ √¥ng l·∫°i kh√©o l·∫°i ƒë·ª©t ƒëi' for session 20251004T155523298-5a527160
2025-10-04 15:55:33,594 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 15:55:33,594 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.650s, Total: 0.650s
2025-10-04 15:55:33,594 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 385
2025-10-04 15:55:33,594 | INFO | RAGClient | RAG reply (len=132)
2025-10-04 15:55:33,594 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u h\u01a1i l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng, Ùng gi‡ r\u1ed3i tai h\u01a1i l„ng tai.
2025-10-04 15:55:33,594 | DEBUG | TTSService | Starting TTS download for text length=132
2025-10-04 15:55:33,594 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:55:35,626 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:55:35,954 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:55:43,937 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:55:52,629 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:55:52,629 | INFO | Recorder | Recording finished (elapsed 8.7s).
2025-10-04 15:55:52,644 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:55:52,645 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:55:52,648 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:55:54,064 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 112
2025-10-04 15:55:54,064 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng tÍn gÏ \u1ea1 Ùng tÍn l‡ gÏ \u1ea1
2025-10-04 15:55:54,065 | INFO | ConversationManager | User: Ùng \u01a1i Ùng tÍn gÏ \u1ea1 Ùng tÍn l‡ gÏ \u1ea1
2025-10-04 15:55:54,065 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:55:54,067 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:55:54,085 | INFO | __main__ | Received new chat request
2025-10-04 15:55:54,085 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 35
2025-10-04 15:55:54,085 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 15:55:54,096 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng ∆°i √¥ng t√™n g√¨ ·∫° √¥ng t√™n l√† g√¨ ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng ∆°i
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: H·ªìi ƒë√°p l·∫°i l·ªùi g·ªçi m·ªôt c√°ch ng·∫Øn g·ªçn. C√≥ th·ªÉ xem c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ∆†i √¥ng ƒë√¢y, ch√°u g·ªçi √¥ng c√≥ chuy·ªán g√¨ th·∫ø.' for session 20251004T155523298-5a527160
2025-10-04 15:55:54,561 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 15:55:54,561 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.475s, Total: 0.475s
2025-10-04 15:55:54,561 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 200
2025-10-04 15:55:54,561 | INFO | RAGClient | RAG reply (len=42)
2025-10-04 15:55:54,561 | INFO | ConversationManager | Bot: \u01a0i Ùng \u0111‚y, ch·u g\u1ecdi Ùng cÛ chuy\u1ec7n gÏ th\u1ebf.
2025-10-04 15:55:54,561 | DEBUG | TTSService | Starting TTS download for text length=42
2025-10-04 15:55:54,561 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:55:56,454 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:56:04,394 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:56:12,654 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:56:12,659 | INFO | Recorder | Recording finished (elapsed 8.3s).
2025-10-04 15:56:12,668 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:56:12,670 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:56:12,673 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:56:13,995 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 172
2025-10-04 15:56:13,996 | INFO | WhisperSTT | Transcription received: ,\u591a\u6570 khu v\u1ef1c, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng
2025-10-04 15:56:13,997 | INFO | ConversationManager | User: ,\u591a\u6570 khu v\u1ef1c, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng, s\u1ed1 l\u01b0\u1ee3ng
2025-10-04 15:56:13,997 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:56:13,998 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:56:14,009 | INFO | __main__ | Received new chat request
2025-10-04 15:56:14,010 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 61
2025-10-04 15:56:14,010 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 15:56:14,028 | INFO | __main__ | Processing user input: ',Â§öÊï∞ khu v·ª±c, s·ªë l∆∞·ª£ng, s·ªë l∆∞·ª£ng, s·ªë l∆∞·ª£ng, s·ªë l∆∞·ª£ng, s·ªë l∆∞·ª£ng' for session 20251004T155523298-5a527160
2025-10-04 15:56:14,677 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 15:56:14,677 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.667s, Total: 0.668s
2025-10-04 15:56:14,677 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 389
2025-10-04 15:56:14,677 | INFO | RAGClient | RAG reply (len=126)
2025-10-04 15:56:14,677 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u b\u1ecb l\u1ed7i r\u1ed3i, Ùng khÙng hi\u1ec3u ch·u \u0111ang h\u1ecfi gÏ c\u1ea3. Ch·u cÛ th\u1ec3 gı l\u1ea1i c‚u h\u1ecfi rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:56:14,677 | DEBUG | TTSService | Starting TTS download for text length=126
2025-10-04 15:56:14,677 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:56:16,512 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:56:16,731 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:56:30,750 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 15:56:35,931 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 15:56:35,935 | INFO | Recorder | Recording finished (elapsed 5.2s).
2025-10-04 15:56:35,944 | INFO | Recorder | Sending to ASR server...
2025-10-04 15:56:35,945 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 15:56:35,947 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 15:56:37,348 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 209
2025-10-04 15:56:37,348 | INFO | WhisperSTT | Transcription received: n‡y khÙng \u0111\u1ee7 m‡y cÛ bi\u1ebft l‡ hai c·i \u0111\u1ee9a \u0111Û qua \u0111‚u m‡y cÛ bi\u1ebft l‡ hai c·i \u0111\u1ee9a
2025-10-04 15:56:37,348 | INFO | ConversationManager | User: n‡y khÙng \u0111\u1ee7 m‡y cÛ bi\u1ebft l‡ hai c·i \u0111\u1ee9a \u0111Û qua \u0111‚u m‡y cÛ bi\u1ebft l‡ hai c·i \u0111\u1ee9a
2025-10-04 15:56:37,348 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 15:56:37,348 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 15:56:37,362 | INFO | __main__ | Received new chat request
2025-10-04 15:56:37,362 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 77
2025-10-04 15:56:37,362 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 15:56:37,377 | INFO | __main__ | Processing user input: 'n√†y kh√¥ng ƒë·ªß m√†y c√≥ bi·∫øt l√† hai c√°i ƒë·ª©a ƒë√≥ qua ƒë√¢u m√†y c√≥ bi·∫øt l√† hai c√°i ƒë·ª©a' for session 20251004T155523298-5a527160
2025-10-04 15:56:38,899 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 15:56:38,899 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.537s, Total: 1.537s
2025-10-04 15:56:38,911 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 391
2025-10-04 15:56:38,912 | INFO | RAGClient | RAG reply (len=126)
2025-10-04 15:56:38,912 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u b\u1ecb l\u1ed7i r\u1ed3i, Ùng khÙng hi\u1ec3u ch·u \u0111ang h\u1ecfi gÏ c\u1ea3. Ch·u cÛ th\u1ec3 gı l\u1ea1i c‚u h\u1ecfi rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 15:56:38,912 | DEBUG | TTSService | Starting TTS download for text length=126
2025-10-04 15:56:38,912 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 15:56:39,659 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 15:56:40,026 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:02:17,583 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 16:02:17,864 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 16:02:17,864 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 16:02:17,864 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 16:02:18,276 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 16:02:18,324 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 16:02:18,600 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 16:02:18,652 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 16:02:18,939 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 16:02:18,976 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 16:02:19,249 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 16:02:19,279 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 16:02:19,570 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 16:02:19,602 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 16:02:19,892 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 16:02:19,956 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 16:02:20,232 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 16:02:20,504 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 16:02:20,552 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 16:02:21,011 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 16:02:21,050 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 16:02:21,347 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 16:02:22,148 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 16:02:22,191 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 16:02:22,271 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:02:23,163 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 16:02:23,852 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 16:02:23,852 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 16:02:23,852 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 16:02:23,852 | INFO | faiss.loader | Loading faiss.
2025-10-04 16:02:23,877 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 16:02:25,561 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:02:25,573 | INFO | Recorder | Recording finished (elapsed 3.3s).
2025-10-04 16:02:25,581 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:02:25,582 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:02:25,584 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:02:28,147 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 120
2025-10-04 16:02:28,147 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng \u0111ang c\u1ea7m c·i gÏ trÍn tay \u0111‚y Ùng
2025-10-04 16:02:28,147 | INFO | ConversationManager | User: Ùng \u01a1i Ùng \u0111ang c\u1ea7m c·i gÏ trÍn tay \u0111‚y Ùng
2025-10-04 16:02:28,147 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:02:28,147 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:02:28,164 | INFO | __main__ | Received new chat request
2025-10-04 16:02:28,164 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 43
2025-10-04 16:02:28,164 | DEBUG | __main__ | Creating new session with ID: 20251004T155523298-5a527160
2025-10-04 16:02:28,164 | DEBUG | __main__ | Using request ID: 20251004T155523298-5a527160
2025-10-04 16:02:28,164 | DEBUG | __main__ | Created new session for ID: 20251004T155523298-5a527160, total sessions: 1
2025-10-04 16:02:28,482 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng ƒëang c·∫ßm c√°i g√¨ tr√™n tay ƒë√¢y √¥ng' for session 20251004T155523298-5a527160
2025-10-04 16:02:31,541 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:02:31,541 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 3.377s, Total: 3.377s
2025-10-04 16:02:31,541 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 418
2025-10-04 16:02:31,541 | INFO | RAGClient | RAG reply (len=143)
2025-10-04 16:02:31,541 | INFO | ConversationManager | Bot: ¿, Ùng \u0111ang c\u1ea7m c·i \u0111Ën l\u1ed3ng hÏnh c· chÈp nË ch·u. Ch·u th\u1ea5y nÛ cÛ \u0111\u1eb9p khÙng? ‘ng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI, r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v\u1edbi ch·u hÙm nay.
2025-10-04 16:02:31,541 | DEBUG | TTSService | Starting TTS download for text length=143
2025-10-04 16:02:31,555 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:02:34,830 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:02:35,558 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:02:52,076 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:02:57,455 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:02:57,460 | INFO | Recorder | Recording finished (elapsed 5.4s).
2025-10-04 16:02:57,467 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:02:57,469 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:02:57,471 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:02:58,865 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 135
2025-10-04 16:02:58,865 | INFO | WhisperSTT | Transcription received: Ùng r\u1ed3i bÍn c\u1ea1nh Ùng l‡ gÏ hai Ùng bÍn c\u1ea1nh Ùng l‡ ai
2025-10-04 16:02:58,866 | INFO | ConversationManager | User: Ùng r\u1ed3i bÍn c\u1ea1nh Ùng l‡ gÏ hai Ùng bÍn c\u1ea1nh Ùng l‡ ai
2025-10-04 16:02:58,866 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:02:58,867 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:02:58,886 | INFO | __main__ | Received new chat request
2025-10-04 16:02:58,886 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 53
2025-10-04 16:02:58,886 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:02:58,892 | INFO | __main__ | Processing user input: '√¥ng r·ªìi b√™n c·∫°nh √¥ng l√† g√¨ hai √¥ng b√™n c·∫°nh √¥ng l√† ai' for session 20251004T155523298-5a527160
2025-10-04 16:02:59,421 | INFO | __main__ | Starting retrieval for query: 'hai √¥ng b√™n c·∫°nh √¥ng l√† ai' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:02:59,423 | DEBUG | __main__ | Searching header index...
2025-10-04 16:02:59,440 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:02:59,440 | DEBUG | __main__ | Searching content index...
2025-10-04 16:02:59,458 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:02:59,458 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:02:59,458 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:02:59,458 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:02:59,458 | DEBUG | __main__ |   Rank 1: chunk_id=3, hybrid_score=0.7477
2025-10-04 16:02:59,458 | DEBUG | __main__ |   Rank 2: chunk_id=26, hybrid_score=0.3988
2025-10-04 16:02:59,458 | DEBUG | __main__ |   Rank 3: chunk_id=52, hybrid_score=0.3931
2025-10-04 16:02:59,458 | DEBUG | __main__ |   Rank 4: chunk_id=25, hybrid_score=0.3921
2025-10-04 16:02:59,458 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 16:02:59,458 | DEBUG | __main__ | Retrieved chunk 26: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Vi·ªát Nam | Content preview: Khi x∆∞a, c√≥ m·ªôt c·∫∑p th·ªè ƒë√£ tr·∫£i qua ng√†n nƒÉm tu luy·ªán, ƒë·∫Øc ƒë·∫°o th√†nh ti√™n. v√† s·ªëng h·∫°nh ph√∫c b√™n b·ªën...
2025-10-04 16:02:59,458 | DEBUG | __main__ | Retrieved chunk 52: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > L·ªÖ Chare | Content preview: Chare l√† nghi l·ªÖ quan tr·ªçng nh·∫•t c·ªßa t·∫øt Trung thu ·ªü H√†n Qu·ªëc, nh·∫±m c·∫£m ∆°n t·ªï ti√™n ph√π h·ªô cho m√πa m√†...
2025-10-04 16:02:59,458 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-04 16:02:59,458 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:02:59,458 | DEBUG | __main__ | Retrieved 4 documents for query: hai √¥ng b√™n c·∫°nh √¥ng l√† ai
2025-10-04 16:02:59,458 | DEBUG | __main__ | [timing] retrieve 0.037s
2025-10-04 16:03:00,440 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:03:00,440 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.553s, Total: 1.554s
2025-10-04 16:03:00,447 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 430
2025-10-04 16:03:00,447 | INFO | RAGClient | RAG reply (len=140)
2025-10-04 16:03:00,447 | INFO | ConversationManager | Bot: ¿, hai Ùng bÍn c\u1ea1nh Ùng l‡ Ùng ti\u1ebfn s\u0129 gi\u1ea5y v‡ Ùng \u0111·nh g\u1eady \u0111Û ch·u. \u0110Û l‡ nh\u1eefng mÛn \u0111\u1ed3 ch\u01a1i truy\u1ec1n th\u1ed1ng \u0111\u01b0\u1ee3c l‡m trong s\u1ef1 ki\u1ec7n hÙm nay \u0111Û.
2025-10-04 16:03:00,447 | DEBUG | TTSService | Starting TTS download for text length=140
2025-10-04 16:03:00,447 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:03:02,487 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:03:02,713 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:03:23,576 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:03:25,390 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:03:25,390 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 16:03:25,418 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:03:25,420 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:03:25,422 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:03:26,648 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 73
2025-10-04 16:03:26,648 | INFO | WhisperSTT | Transcription received: n‡o em nÛi tÍn gÏ \u0111\u1ea5y
2025-10-04 16:03:26,648 | INFO | ConversationManager | User: n‡o em nÛi tÍn gÏ \u0111\u1ea5y
2025-10-04 16:03:26,648 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:03:26,651 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:03:26,674 | INFO | __main__ | Received new chat request
2025-10-04 16:03:26,674 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 21
2025-10-04 16:03:26,674 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:03:26,679 | INFO | __main__ | Processing user input: 'n√†o em n√≥i t√™n g√¨ ƒë·∫•y' for session 20251004T155523298-5a527160
2025-10-04 16:03:27,467 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:03:27,467 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.794s, Total: 0.794s
2025-10-04 16:03:27,470 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 270
2025-10-04 16:03:27,470 | INFO | RAGClient | RAG reply (len=77)
2025-10-04 16:03:27,470 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI, r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v\u1edbi ch·u. Ch·u tÍn l‡ gÏ th\u1ebf?
2025-10-04 16:03:27,470 | DEBUG | TTSService | Starting TTS download for text length=77
2025-10-04 16:03:27,470 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:03:29,196 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:03:29,377 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:03:35,438 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:03:37,174 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:03:37,176 | INFO | Recorder | Recording finished (elapsed 1.7s).
2025-10-04 16:03:37,181 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:03:37,181 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:03:37,190 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:03:39,605 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 1006
2025-10-04 16:03:39,605 | INFO | WhisperSTT | Transcription received: \u66f8\u66f8,\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8
2025-10-04 16:03:39,605 | INFO | ConversationManager | User: \u66f8\u66f8,\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8\u66f8
2025-10-04 16:03:39,605 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:03:39,605 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:03:39,621 | INFO | __main__ | Received new chat request
2025-10-04 16:03:39,621 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 165
2025-10-04 16:03:39,622 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:03:39,641 | INFO | __main__ | Processing user input: 'Êõ∏Êõ∏,Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏Êõ∏' for session 20251004T155523298-5a527160
2025-10-04 16:03:40,409 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:03:40,409 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.787s, Total: 0.788s
2025-10-04 16:03:40,409 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 360
2025-10-04 16:03:40,409 | INFO | RAGClient | RAG reply (len=117)
2025-10-04 16:03:40,409 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u cÛ v\u1ebb b\u1ecb l\u1ed7i r\u1ed3i. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng, Ùng gi‡ qu· r\u1ed3i tai nghe khÙng rı n\u1eefa.
2025-10-04 16:03:40,409 | DEBUG | TTSService | Starting TTS download for text length=117
2025-10-04 16:03:40,409 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:03:42,190 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:03:42,365 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:04:41,952 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:04:44,176 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:04:44,176 | INFO | Recorder | Recording finished (elapsed 2.2s).
2025-10-04 16:04:44,186 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:04:44,186 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:04:44,192 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:04:45,767 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 69
2025-10-04 16:04:45,767 | INFO | WhisperSTT | Transcription received: h\u1ea3o anh cÛ ˝ ngh\u0129a r\u1ed3i
2025-10-04 16:04:45,767 | INFO | ConversationManager | User: h\u1ea3o anh cÛ ˝ ngh\u0129a r\u1ed3i
2025-10-04 16:04:45,767 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:04:45,767 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:04:45,792 | INFO | __main__ | Received new chat request
2025-10-04 16:04:45,792 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 22
2025-10-04 16:04:45,792 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:04:45,797 | INFO | __main__ | Processing user input: 'h·∫£o anh c√≥ √Ω nghƒ©a r·ªìi' for session 20251004T155523298-5a527160
2025-10-04 16:04:46,819 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:04:46,819 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.027s, Total: 1.027s
2025-10-04 16:04:46,819 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 288
2025-10-04 16:04:46,819 | INFO | RAGClient | RAG reply (len=88)
2025-10-04 16:04:46,819 | INFO | ConversationManager | Bot: H\u1ea3o anh cÛ ˝ ngh\u0129a l‡ sao ch·u nh\u1ec9? Ch·u cÛ th\u1ec3 gi\u1ea3i thÌch thÍm cho Ùng hi\u1ec3u \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:04:46,826 | DEBUG | TTSService | Starting TTS download for text length=88
2025-10-04 16:04:46,826 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:04:48,917 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:04:49,450 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:04:51,928 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:04:55,026 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:04:55,026 | INFO | Recorder | Recording finished (elapsed 3.1s).
2025-10-04 16:04:55,044 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:04:55,046 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:04:55,047 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:04:56,410 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 76
2025-10-04 16:04:56,410 | INFO | WhisperSTT | Transcription received: cho Ùng hi\u1ec3u \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:04:56,410 | INFO | ConversationManager | User: cho Ùng hi\u1ec3u \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:04:56,410 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:04:56,410 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:04:56,422 | INFO | __main__ | Received new chat request
2025-10-04 16:04:56,423 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 24
2025-10-04 16:04:56,423 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:04:56,434 | INFO | __main__ | Processing user input: 'cho √¥ng hi·ªÉu ƒë∆∞·ª£c kh√¥ng?' for session 20251004T155523298-5a527160
2025-10-04 16:04:56,980 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:04:56,980 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.558s, Total: 0.558s
2025-10-04 16:04:56,980 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 278
2025-10-04 16:04:56,980 | INFO | RAGClient | RAG reply (len=75)
2025-10-04 16:04:56,980 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm \u1ea1.
2025-10-04 16:04:56,980 | DEBUG | TTSService | Starting TTS download for text length=75
2025-10-04 16:04:56,980 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:04:57,744 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:04:58,753 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:04:59,079 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:02,429 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:05:02,443 | INFO | Recorder | Recording finished (elapsed 4.7s).
2025-10-04 16:05:02,450 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:05:02,451 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:05:02,453 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:05:03,899 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 149
2025-10-04 16:05:03,899 | INFO | WhisperSTT | Transcription received: ch·u \u01a1i ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng
2025-10-04 16:05:03,899 | INFO | ConversationManager | User: ch·u \u01a1i ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng
2025-10-04 16:05:03,899 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:05:03,899 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:05:03,923 | INFO | __main__ | Received new chat request
2025-10-04 16:05:03,923 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 52
2025-10-04 16:05:03,923 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:05:03,930 | INFO | __main__ | Processing user input: 'ch√°u ∆°i ch√°u c√≥ th·ªÉ n√≥i r√µ h∆°n √Ω c·ªßa ch√°u ƒë∆∞·ª£c kh√¥ng' for session 20251004T155523298-5a527160
2025-10-04 16:05:04,709 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:05:04,709 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.786s, Total: 0.786s
2025-10-04 16:05:04,709 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 278
2025-10-04 16:05:04,709 | INFO | RAGClient | RAG reply (len=75)
2025-10-04 16:05:04,709 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm \u1ea1.
2025-10-04 16:05:04,709 | DEBUG | TTSService | Starting TTS download for text length=75
2025-10-04 16:05:04,709 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:05:05,258 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:05:06,889 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:07,135 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:05:07,140 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 16:05:07,143 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:05:07,143 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:05:07,143 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:05:07,203 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:08,513 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 48
2025-10-04 16:05:08,513 | INFO | WhisperSTT | Transcription received: Ùng l‡ ai \u1ea1
2025-10-04 16:05:08,513 | INFO | ConversationManager | User: Ùng l‡ ai \u1ea1
2025-10-04 16:05:08,513 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:05:08,513 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:05:08,536 | INFO | __main__ | Received new chat request
2025-10-04 16:05:08,536 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 11
2025-10-04 16:05:08,536 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:05:08,553 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng l√† ai ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng l√† ai ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: Tr·∫£ l·ªùi kh√°ch d·ª±a theo c√¢u tr·∫£ l·ªùi m·∫´u sau: 
        *C√¢u tr·∫£ l·ªùi m·∫´u: √îng ch√≠nh l√† √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y.T·ª´ ng√†y x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh. V√¨ th·∫ø, trong m√¢m c·ªó Trung thu, b√™n c·∫°nh b√°nh n∆∞·ªõng, b√°nh d·∫ªo, c√≤n c√≥ √¥ng ‚Äì √îng Ti·∫øn sƒ© Gi·∫•y ‚Äì ng·ªìi tr√™n ki·ªáu, √°o m≈© ch·ªânh t·ªÅ, t∆∞·ª£ng tr∆∞ng cho ∆∞·ªõc m∆° h·ªçc gi·ªèi, ƒë·ªó ƒë·∫°t, hi·ªÉn vinh.
Sau khi ph√° c·ªó, c√°c em nh·ªè th∆∞·ªùng r∆∞·ªõc √¥ng ƒëi quanh l√†ng, r·ªìi ƒë·∫∑t √¥ng l√™n b√†n h·ªçc hay ƒëem ƒë·ªët ƒë·ªÉ g·ª≠i g·∫Øm ∆∞·ªõc nguy·ªán h·ªçc h√†nh ti·∫øn t·ªõi.
Nh∆∞ng n√†y‚Ä¶ ng√†y nay √¥ng ƒë√£ ƒë∆∞·ª£c ‚Äún√¢ng c·∫•p‚Äù r·ªìi ƒë·∫•y! Kh√¥ng ch·ªâ ng·ªìi y√™n tr√™n ki·ªáu, b√¢y gi·ªù √¥ng c√≤n c√≥ th·ªÉ n√≥i chuy·ªán, k·ªÉ chuy·ªán v√† ƒë·ªë vui c√πng c√°c con. V·ª´a gi·ªØ n√©t ƒë·∫πp d√¢n gian, v·ª´a s·ªëng ƒë·ªông v√† g·∫ßn g≈©i h∆°n bao gi·ªù h·∫øt! C√°c con th·∫•y √¥ng c√≥ ng·∫ßu kh√¥ng n√†o?
' for session 20251004T155523298-5a527160
2025-10-04 16:05:09,663 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:05:09,663 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.127s, Total: 1.127s
2025-10-04 16:05:09,663 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1527
2025-10-04 16:05:09,663 | INFO | RAGClient | RAG reply (len=657)
2025-10-04 16:05:09,663 | INFO | ConversationManager | Bot: ‘ng chÌnh l‡ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. T\u1eeb ng‡y x\u01b0a, ng\u01b0\u1eddi Vi\u1ec7t luÙn coi tr\u1ecdng vi\u1ec7c h\u1ecdc h‡nh. VÏ th\u1ebf, trong m‚m c\u1ed7 Trung thu, bÍn c\u1ea1nh b·nh n\u01b0\u1edbng, b·nh d\u1ebbo, cÚn cÛ Ùng ñ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y ñ ng\u1ed3i trÍn ki\u1ec7u, ·o m\u0169 ch\u1ec9nh t\u1ec1, t\u01b0\u1ee3ng tr\u01b0ng cho \u01b0\u1edbc m\u01a1 h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t, hi\u1ec3n vinh. Sau khi ph· c\u1ed7, c·c em nh\u1ecf th\u01b0\u1eddng r\u01b0\u1edbc Ùng \u0111i quanh l‡ng, r\u1ed3i \u0111\u1eb7t Ùng lÍn b‡n h\u1ecdc hay \u0111em \u0111\u1ed1t \u0111\u1ec3 g\u1eedi g\u1eafm \u01b0\u1edbc nguy\u1ec7n h\u1ecdc h‡nh ti\u1ebfn t\u1edbi. Nh\u01b0ng n‡yÖ ng‡y nay Ùng \u0111„ \u0111\u01b0\u1ee3c ìn‚ng c\u1ea5pî r\u1ed3i \u0111\u1ea5y! KhÙng ch\u1ec9 ng\u1ed3i yÍn trÍn ki\u1ec7u, b‚y gi\u1edd Ùng cÚn cÛ th\u1ec3 nÛi chuy\u1ec7n, k\u1ec3 chuy\u1ec7n v‡ \u0111\u1ed1 vui c˘ng c·c con. V\u1eeba gi\u1eef nÈt \u0111\u1eb9p d‚n gian, v\u1eeba s\u1ed1ng \u0111\u1ed9ng v‡ g\u1ea7n g\u0169i h\u01a1n bao gi\u1edd h\u1ebft! C·c con th\u1ea5y Ùng cÛ ng\u1ea7u khÙng n‡o?
2025-10-04 16:05:09,663 | DEBUG | TTSService | Starting TTS download for text length=657
2025-10-04 16:05:09,663 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:05:10,487 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:10,663 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:10,683 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:05:11,426 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:11,831 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:12,150 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:12,172 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:05:14,168 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:15,528 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:15,656 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:05:17,746 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:19,146 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:19,169 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:05:24,251 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:05:24,835 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:01,526 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:06:06,904 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:06:06,911 | INFO | Recorder | Recording finished (elapsed 5.4s).
2025-10-04 16:06:06,918 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:06:06,920 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:06:06,921 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:06:08,483 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 92
2025-10-04 16:06:08,483 | INFO | WhisperSTT | Transcription received: anh ch\u01b0ng \u0111„ sinh ra \u0111\u1eddi \u1edf \u0111‚u
2025-10-04 16:06:08,483 | INFO | ConversationManager | User: anh ch\u01b0ng \u0111„ sinh ra \u0111\u1eddi \u1edf \u0111‚u
2025-10-04 16:06:08,483 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:06:08,488 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:06:08,509 | INFO | __main__ | Received new chat request
2025-10-04 16:06:08,509 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 30
2025-10-04 16:06:08,509 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:06:08,516 | INFO | __main__ | Processing user input: 'anh ch∆∞ng ƒë√£ sinh ra ƒë·ªùi ·ªü ƒë√¢u' for session 20251004T155523298-5a527160
2025-10-04 16:06:09,572 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:06:09,572 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.063s, Total: 1.063s
2025-10-04 16:06:09,572 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 280
2025-10-04 16:06:09,572 | INFO | RAGClient | RAG reply (len=75)
2025-10-04 16:06:09,572 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm \u1ea1.
2025-10-04 16:06:09,572 | DEBUG | TTSService | Starting TTS download for text length=75
2025-10-04 16:06:09,572 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:06:10,326 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:10,476 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:13,775 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:06:17,295 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:06:17,295 | INFO | Recorder | Recording finished (elapsed 3.5s).
2025-10-04 16:06:17,313 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:06:17,314 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:06:17,315 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:06:18,876 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 93
2025-10-04 16:06:18,876 | INFO | WhisperSTT | Transcription received: n‡y \u0111‚y xin ghi nh\u1eadn h\u1ecfi l\u1ea1i cho nh·
2025-10-04 16:06:18,876 | INFO | ConversationManager | User: n‡y \u0111‚y xin ghi nh\u1eadn h\u1ecfi l\u1ea1i cho nh·
2025-10-04 16:06:18,876 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:06:18,876 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:06:18,891 | INFO | __main__ | Received new chat request
2025-10-04 16:06:18,892 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 36
2025-10-04 16:06:18,892 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:06:18,904 | INFO | __main__ | Processing user input: 'n√†y ƒë√¢y xin ghi nh·∫≠n h·ªèi l·∫°i cho nh√°' for session 20251004T155523298-5a527160
2025-10-04 16:06:19,652 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:06:19,652 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.760s, Total: 0.761s
2025-10-04 16:06:19,652 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 278
2025-10-04 16:06:19,652 | INFO | RAGClient | RAG reply (len=75)
2025-10-04 16:06:19,652 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm \u1ea1.
2025-10-04 16:06:19,652 | DEBUG | TTSService | Starting TTS download for text length=75
2025-10-04 16:06:19,652 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:06:19,720 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:06:20,404 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:20,787 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:28,996 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:06:29,001 | INFO | Recorder | Recording finished (elapsed 9.3s).
2025-10-04 16:06:29,007 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:06:29,008 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:06:29,010 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:06:30,593 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 226
2025-10-04 16:06:30,593 | INFO | WhisperSTT | Transcription received: ch·u \u01a1i ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng ngu\u1ed3n g\u1ed1c \u1ea1 ngu\u1ed3n g\u1ed1c c\u1ee7a b·nh tr\u01b0ng
2025-10-04 16:06:30,593 | INFO | ConversationManager | User: ch·u \u01a1i ch·u cÛ th\u1ec3 nÛi rı h\u01a1n ˝ c\u1ee7a ch·u \u0111\u01b0\u1ee3c khÙng ngu\u1ed3n g\u1ed1c \u1ea1 ngu\u1ed3n g\u1ed1c c\u1ee7a b·nh tr\u01b0ng
2025-10-04 16:06:30,593 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:06:30,593 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:06:30,608 | INFO | __main__ | Received new chat request
2025-10-04 16:06:30,610 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 89
2025-10-04 16:06:30,610 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:06:30,615 | INFO | __main__ | Processing user input: 'ch√°u ∆°i ch√°u c√≥ th·ªÉ n√≥i r√µ h∆°n √Ω c·ªßa ch√°u ƒë∆∞·ª£c kh√¥ng ngu·ªìn g·ªëc ·∫° ngu·ªìn g·ªëc c·ªßa b√°nh tr∆∞ng' for session 20251004T155523298-5a527160
2025-10-04 16:06:31,086 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc c·ªßa b√°nh ch∆∞ng' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:06:31,086 | DEBUG | __main__ | Searching header index...
2025-10-04 16:06:31,104 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:06:31,104 | DEBUG | __main__ | Searching content index...
2025-10-04 16:06:31,120 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:06:31,120 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:06:31,120 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:06:31,120 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:06:31,120 | DEBUG | __main__ |   Rank 1: chunk_id=35, hybrid_score=0.8715
2025-10-04 16:06:31,120 | DEBUG | __main__ |   Rank 2: chunk_id=36, hybrid_score=0.4567
2025-10-04 16:06:31,120 | DEBUG | __main__ |   Rank 3: chunk_id=34, hybrid_score=0.4468
2025-10-04 16:06:31,120 | DEBUG | __main__ |   Rank 4: chunk_id=23, hybrid_score=0.4448
2025-10-04 16:06:31,120 | DEBUG | __main__ | Retrieved chunk 35: Trung thu > B√°nh n∆∞·ªõng, b√°nh d·∫ªo (ƒë·ªì ƒÉn, ·∫©m th·ª±c, m√≥n ƒÉn) > Mi√™u t·∫£, nguy√™n li·ªáu trong b√°nh n∆∞·ªõng | Content preview: G·ªìm hai ph·∫ßn l√† v·ªè b√°nh v√† th√¢n b√°nh. V·ªè b√°nh l√†m b·∫±ng b·ªôt m√¨ d·∫≠y men tr·ªôn v·ªõi tr·ª©ng g√† v√† ch√∫t r∆∞·ª£u...
2025-10-04 16:06:31,120 | DEBUG | __main__ | Retrieved chunk 36: Trung thu > B√°nh n∆∞·ªõng, b√°nh d·∫ªo (ƒë·ªì ƒÉn, ·∫©m th·ª±c, m√≥n ƒÉn) > Mi√™u t·∫£, nguy√™n li·ªáu trong b√°nh d·∫ªo | Content preview: Trong khi b√°nh n∆∞·ªõng ph·ªï bi·∫øn t·∫°i nhi·ªÅu qu·ªëc gia √Å ƒê√¥ng kh√°c ƒë·∫øn n·ªói b√°nh d∆∞·ªùng nh∆∞ ƒë·ªìng nghƒ©a v·ªõi k...
2025-10-04 16:06:31,120 | DEBUG | __main__ | Retrieved chunk 34: Trung thu > B√°nh n∆∞·ªõng, b√°nh d·∫ªo (ƒë·ªì ƒÉn, ·∫©m th·ª±c, m√≥n ƒÉn) > Gi·ªõi thi·ªáu v·ªÅ b√°nh n∆∞·ªõng, b√°nh d·∫ªo | Content preview: V√†o ng√†y R·∫±m th√°ng 8, ng∆∞·ªùi ta th∆∞·ªùng t·∫∑ng nhau nh·ªØng chi·∫øc b√°nh Trung thu v·ªõi √Ω nghƒ©a ch√∫c cho m·ªçi ...
2025-10-04 16:06:31,120 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 16:06:31,120 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:06:31,120 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc c·ªßa b√°nh ch∆∞ng
2025-10-04 16:06:31,120 | DEBUG | __main__ | [timing] retrieve 0.034s
2025-10-04 16:06:32,298 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:06:32,298 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.688s, Total: 1.689s
2025-10-04 16:06:32,298 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 927
2025-10-04 16:06:32,298 | INFO | RAGClient | RAG reply (len=382)
2025-10-04 16:06:32,298 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng tÏm hi\u1ec3u thÏ th\u1ea5y b·nh d\u1ebbo cÛ tr\u01b0\u1edbc l‡ lo\u1ea1i b·nh truy\u1ec1n th\u1ed1ng c\u1ee7a Vi\u1ec7t Nam, cÚn b·nh n\u01b0\u1edbng thÏ xu\u1ea5t hi\u1ec7n sau n‡y ch·u \u1ea1. B·nh d\u1ebbo \u0111\u01b0\u1ee3c l‡m t\u1eeb b\u1ed9t n\u1ebfp, n\u01b0\u1edbc hoa b\u01b0\u1edfi v‡ n\u01b0\u1edbc \u0111\u01b0\u1eddng, nh‚n b·nh thÏ l‡m b\u1eb1ng h\u1ea1t sen hay \u0111\u1eadu xanh t·n nhuy\u1ec5n. CÚn b·nh n\u01b0\u1edbng thÏ cÛ v\u1ecf b\u1ed9t mÏ tr\u1ed9n tr\u1ee9ng g‡, nh‚n thÏ \u0111a d\u1ea1ng l\u1eafm, cÛ th\u1ec3 l‡ \u0111\u1eadu xanh, khoai mÙn, h\u1ed9t sen hay th\u1eadp c\u1ea9m n\u1eefa \u0111Û ch·u.
2025-10-04 16:06:32,298 | DEBUG | TTSService | Starting TTS download for text length=382
2025-10-04 16:06:32,298 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:06:34,340 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:34,712 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:34,745 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:06:37,562 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:37,702 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:37,732 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:06:39,632 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:06:39,796 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:15,272 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:08:18,800 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:08:18,805 | INFO | Recorder | Recording finished (elapsed 3.5s).
2025-10-04 16:08:18,809 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:08:18,809 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:08:18,815 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:08:20,876 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 148
2025-10-04 16:08:20,876 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i hÙm nay b\u1ea3o t‡ng cÛ ch\u1ed7 n‡o b·n \u0111\u1ed3 \u0103n khÙng khÙng
2025-10-04 16:08:20,876 | INFO | ConversationManager | User: Ùng \u01a1i hÙm nay b\u1ea3o t‡ng cÛ ch\u1ed7 n‡o b·n \u0111\u1ed3 \u0103n khÙng khÙng
2025-10-04 16:08:20,876 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:08:20,886 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:08:20,903 | INFO | __main__ | Received new chat request
2025-10-04 16:08:20,903 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 56
2025-10-04 16:08:20,903 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:08:20,918 | INFO | __main__ | Processing user input: '√¥ng ∆°i h√¥m nay b·∫£o t√†ng c√≥ ch·ªó n√†o b√°n ƒë·ªì ƒÉn kh√¥ng kh√¥ng' for session 20251004T155523298-5a527160
2025-10-04 16:08:21,358 | INFO | __main__ | Starting retrieval for query: 'b·∫£o t√†ng c√≥ ch·ªó n√†o b√°n ƒë·ªì ƒÉn kh√¥ng' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:08:21,358 | DEBUG | __main__ | Searching header index...
2025-10-04 16:08:21,371 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:08:21,371 | DEBUG | __main__ | Searching content index...
2025-10-04 16:08:21,388 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:08:21,388 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:08:21,388 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 16:08:21,388 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:08:21,388 | DEBUG | __main__ |   Rank 1: chunk_id=8, hybrid_score=0.9084
2025-10-04 16:08:21,388 | DEBUG | __main__ |   Rank 2: chunk_id=12, hybrid_score=0.9022
2025-10-04 16:08:21,388 | DEBUG | __main__ |   Rank 3: chunk_id=15, hybrid_score=0.4658
2025-10-04 16:08:21,388 | DEBUG | __main__ |   Rank 4: chunk_id=10, hybrid_score=0.4515
2025-10-04 16:08:21,388 | DEBUG | __main__ | Retrieved chunk 8: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Th√¥ng tin c∆° b·∫£n | Content preview: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam (B·∫£o t√†ng) thu·ªôc h·ªá th·ªëng b·∫£o t√†ng qu·ªëc gia, tr·ª±c thu·ªôc Vi·ªán H√†n l√¢m K...
2025-10-04 16:08:21,388 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 16:08:21,388 | DEBUG | __main__ | Retrieved chunk 15: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > B·∫£o t√†ng l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉn h√≥a quan tr·ªçng | Content preview: B·∫£o t√†ng kh√¥ng ch·ªâ l√† ƒëi·ªÉm ƒë·∫øn c·ªßa nh·ªØng du kh√°ch y√™u th√≠ch vƒÉn h√≥a d√¢n t·ªôc m√† c√≤n l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉ...
2025-10-04 16:08:21,388 | DEBUG | __main__ | Retrieved chunk 10: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Khu tr∆∞ng b√†y chuy√™n ƒë·ªÅ | Content preview: ƒêi·ªÉm ƒë·∫∑c bi·ªát c·ªßa B·∫£o t√†ng l√† b√™n c·∫°nh kh√¥ng gian tr∆∞ng b√†y th∆∞·ªùng xuy√™n v·ªÅ ƒëa d·∫°ng vƒÉn h√≥a c√°c t·ªôc ...
2025-10-04 16:08:21,388 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:08:21,388 | DEBUG | __main__ | Retrieved 4 documents for query: b·∫£o t√†ng c√≥ ch·ªó n√†o b√°n ƒë·ªì ƒÉn kh√¥ng
2025-10-04 16:08:21,388 | DEBUG | __main__ | [timing] retrieve 0.030s
2025-10-04 16:08:22,108 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:08:22,108 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.205s, Total: 1.205s
2025-10-04 16:08:22,108 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 620
2025-10-04 16:08:22,108 | INFO | RAGClient | RAG reply (len=240)
2025-10-04 16:08:22,108 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng xem trong t‡i li\u1ec7u thÏ khÙng th\u1ea5y nÛi v\u1ec1 ch\u1ed7 b·n \u0111\u1ed3 \u0103n \u1edf b\u1ea3o t‡ng \u0111‚u \u1ea1. Nh\u01b0ng m‡, b\u1ea3o t‡ng mÏnh cÛ PhÚng Kh·m Ph· d‡nh cho tr\u1ebb em v\u1edbi nhi\u1ec1u ho\u1ea1t \u0111\u1ed9ng tr\u1ea3i nghi\u1ec7m th˙ v\u1ecb l\u1eafm \u0111Û ch·u. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 phÚng n‡y khÙng?
2025-10-04 16:08:22,108 | DEBUG | TTSService | Starting TTS download for text length=240
2025-10-04 16:08:22,108 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:08:24,430 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:24,456 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:08:26,074 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:26,336 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:26,357 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:08:28,954 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:42,847 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:08:46,785 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:08:46,799 | INFO | Recorder | Recording finished (elapsed 4.0s).
2025-10-04 16:08:46,803 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:08:46,803 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:08:46,803 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:08:48,786 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 72
2025-10-04 16:08:48,786 | INFO | WhisperSTT | Transcription received: t\u1ea1i sao ch\u1ee7 quy\u1ec1n t\u1ed3n t\u1ea1i
2025-10-04 16:08:48,801 | INFO | ConversationManager | User: t\u1ea1i sao ch\u1ee7 quy\u1ec1n t\u1ed3n t\u1ea1i
2025-10-04 16:08:48,801 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:08:48,801 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:08:48,817 | INFO | __main__ | Received new chat request
2025-10-04 16:08:48,818 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 25
2025-10-04 16:08:48,818 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:08:48,830 | INFO | __main__ | Processing user input: 't·∫°i sao ch·ªß quy·ªÅn t·ªìn t·∫°i' for session 20251004T155523298-5a527160
2025-10-04 16:08:50,235 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:08:50,235 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.416s, Total: 1.418s
2025-10-04 16:08:50,235 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 651
2025-10-04 16:08:50,235 | INFO | RAGClient | RAG reply (len=262)
2025-10-04 16:08:50,235 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng xin l\u1ed7i, Ùng ch\u01b0a tÏm th\u1ea5y thÙng tin n‡o v\u1ec1 vi\u1ec7c t\u1ea1i sao ch\u1ee7 quy\u1ec1n t\u1ed3n t\u1ea1i trong c·c t‡i li\u1ec7u c\u1ee7a b\u1ea3o t‡ng c\u1ea3. Ch·u cÛ th\u1ec3 h\u1ecfi Ùng v\u1ec1 Trung Thu, v\u1ec1 c·c ho\u1ea1t \u0111\u1ed9ng \u1edf b\u1ea3o t‡ng hay v\u1ec1 b·nh ch\u01b0ng, b·nh d\u1ebbo khÙng? ‘ng s\u1ebd c\u1ed1 g\u1eafng h\u1ebft s\u1ee9c \u0111\u1ec3 tr\u1ea3 l\u1eddi ch·u \u1ea1.
2025-10-04 16:08:50,235 | DEBUG | TTSService | Starting TTS download for text length=262
2025-10-04 16:08:50,235 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:08:51,954 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:52,108 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:52,132 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:08:53,989 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:08:54,198 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:08,163 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:09:10,099 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:09:10,100 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 16:09:10,106 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:09:10,106 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:09:10,106 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:09:11,917 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 55
2025-10-04 16:09:11,917 | INFO | WhisperSTT | Transcription received: Ùng ch\u01a1i gÏ \u1ea1
2025-10-04 16:09:11,917 | INFO | ConversationManager | User: Ùng ch\u01a1i gÏ \u1ea1
2025-10-04 16:09:11,917 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:09:11,919 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:09:11,931 | INFO | __main__ | Received new chat request
2025-10-04 16:09:11,931 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 13
2025-10-04 16:09:11,931 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:09:11,943 | INFO | __main__ | Processing user input: '√¥ng ch∆°i g√¨ ·∫°' for session 20251004T155523298-5a527160
2025-10-04 16:09:12,483 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:09:12,483 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.552s, Total: 0.552s
2025-10-04 16:09:12,483 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 282
2025-10-04 16:09:12,483 | INFO | RAGClient | RAG reply (len=84)
2025-10-04 16:09:12,483 | INFO | ConversationManager | Bot: ‘ng \u0111ang ch\u01a1i c˘ng c·c b\u1ea1n nh\u1ecf \u1edf b\u1ea3o t‡ng nË ch·u. Ch·u cÛ mu\u1ed1n ch\u01a1i c˘ng Ùng khÙng?
2025-10-04 16:09:12,483 | DEBUG | TTSService | Starting TTS download for text length=84
2025-10-04 16:09:12,483 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:09:14,124 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:14,299 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:24,745 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:09:26,888 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:09:26,888 | INFO | Recorder | Recording finished (elapsed 2.1s).
2025-10-04 16:09:26,900 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:09:26,900 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:09:26,900 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:09:28,798 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 48
2025-10-04 16:09:28,798 | INFO | WhisperSTT | Transcription received: Ùng l‡ ai \u1ea1
2025-10-04 16:09:28,798 | INFO | ConversationManager | User: Ùng l‡ ai \u1ea1
2025-10-04 16:09:28,798 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:09:28,802 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:09:28,813 | INFO | __main__ | Received new chat request
2025-10-04 16:09:28,813 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 11
2025-10-04 16:09:28,815 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:09:28,833 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: √¥ng l√† ai ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng l√† ai ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: Tr·∫£ l·ªùi kh√°ch d·ª±a theo c√¢u tr·∫£ l·ªùi m·∫´u sau: 
        *C√¢u tr·∫£ l·ªùi m·∫´u: √îng ch√≠nh l√† √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y.T·ª´ ng√†y x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh. V√¨ th·∫ø, trong m√¢m c·ªó Trung thu, b√™n c·∫°nh b√°nh n∆∞·ªõng, b√°nh d·∫ªo, c√≤n c√≥ √¥ng ‚Äì √îng Ti·∫øn sƒ© Gi·∫•y ‚Äì ng·ªìi tr√™n ki·ªáu, √°o m≈© ch·ªânh t·ªÅ, t∆∞·ª£ng tr∆∞ng cho ∆∞·ªõc m∆° h·ªçc gi·ªèi, ƒë·ªó ƒë·∫°t, hi·ªÉn vinh.
Sau khi ph√° c·ªó, c√°c em nh·ªè th∆∞·ªùng r∆∞·ªõc √¥ng ƒëi quanh l√†ng, r·ªìi ƒë·∫∑t √¥ng l√™n b√†n h·ªçc hay ƒëem ƒë·ªët ƒë·ªÉ g·ª≠i g·∫Øm ∆∞·ªõc nguy·ªán h·ªçc h√†nh ti·∫øn t·ªõi.
Nh∆∞ng n√†y‚Ä¶ ng√†y nay √¥ng ƒë√£ ƒë∆∞·ª£c ‚Äún√¢ng c·∫•p‚Äù r·ªìi ƒë·∫•y! Kh√¥ng ch·ªâ ng·ªìi y√™n tr√™n ki·ªáu, b√¢y gi·ªù √¥ng c√≤n c√≥ th·ªÉ n√≥i chuy·ªán, k·ªÉ chuy·ªán v√† ƒë·ªë vui c√πng c√°c con. V·ª´a gi·ªØ n√©t ƒë·∫πp d√¢n gian, v·ª´a s·ªëng ƒë·ªông v√† g·∫ßn g≈©i h∆°n bao gi·ªù h·∫øt! C√°c con th·∫•y √¥ng c√≥ ng·∫ßu kh√¥ng n√†o?
' for session 20251004T155523298-5a527160
2025-10-04 16:09:30,010 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:09:30,010 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.195s, Total: 1.196s
2025-10-04 16:09:30,010 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1527
2025-10-04 16:09:30,010 | INFO | RAGClient | RAG reply (len=657)
2025-10-04 16:09:30,010 | INFO | ConversationManager | Bot: ‘ng chÌnh l‡ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. T\u1eeb ng‡y x\u01b0a, ng\u01b0\u1eddi Vi\u1ec7t luÙn coi tr\u1ecdng vi\u1ec7c h\u1ecdc h‡nh. VÏ th\u1ebf, trong m‚m c\u1ed7 Trung thu, bÍn c\u1ea1nh b·nh n\u01b0\u1edbng, b·nh d\u1ebbo, cÚn cÛ Ùng ñ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y ñ ng\u1ed3i trÍn ki\u1ec7u, ·o m\u0169 ch\u1ec9nh t\u1ec1, t\u01b0\u1ee3ng tr\u01b0ng cho \u01b0\u1edbc m\u01a1 h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t, hi\u1ec3n vinh. Sau khi ph· c\u1ed7, c·c em nh\u1ecf th\u01b0\u1eddng r\u01b0\u1edbc Ùng \u0111i quanh l‡ng, r\u1ed3i \u0111\u1eb7t Ùng lÍn b‡n h\u1ecdc hay \u0111em \u0111\u1ed1t \u0111\u1ec3 g\u1eedi g\u1eafm \u01b0\u1edbc nguy\u1ec7n h\u1ecdc h‡nh ti\u1ebfn t\u1edbi. Nh\u01b0ng n‡yÖ ng‡y nay Ùng \u0111„ \u0111\u01b0\u1ee3c ìn‚ng c\u1ea5pî r\u1ed3i \u0111\u1ea5y! KhÙng ch\u1ec9 ng\u1ed3i yÍn trÍn ki\u1ec7u, b‚y gi\u1edd Ùng cÚn cÛ th\u1ec3 nÛi chuy\u1ec7n, k\u1ec3 chuy\u1ec7n v‡ \u0111\u1ed1 vui c˘ng c·c con. V\u1eeba gi\u1eef nÈt \u0111\u1eb9p d‚n gian, v\u1eeba s\u1ed1ng \u0111\u1ed9ng v‡ g\u1ea7n g\u0169i h\u01a1n bao gi\u1edd h\u1ebft! C·c con th\u1ea5y Ùng cÛ ng\u1ea7u khÙng n‡o?
2025-10-04 16:09:30,010 | DEBUG | TTSService | Starting TTS download for text length=657
2025-10-04 16:09:30,010 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:09:31,150 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:31,398 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:31,416 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:09:32,155 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:32,201 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:32,341 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:32,363 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:09:33,391 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:33,618 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:33,641 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:09:34,337 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:34,580 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:34,601 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:09:35,269 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:09:35,426 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:10:29,916 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:10:32,837 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:10:32,854 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 16:10:32,861 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:10:32,863 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:10:32,864 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:10:34,748 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 88
2025-10-04 16:10:34,748 | INFO | WhisperSTT | Transcription received: h\u1ecfi theo Ùng trung thu ngh\u0129a l‡ gÏ \u1ea1
2025-10-04 16:10:34,748 | INFO | ConversationManager | User: h\u1ecfi theo Ùng trung thu ngh\u0129a l‡ gÏ \u1ea1
2025-10-04 16:10:34,748 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:10:34,748 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:10:34,760 | INFO | __main__ | Received new chat request
2025-10-04 16:10:34,760 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 36
2025-10-04 16:10:34,760 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:10:34,774 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: h·ªèi theo √¥ng trung thu nghƒ©a l√† g√¨ ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng bi·∫øt nh·ªØng chuy·ªán truy·ªÅn thuy·∫øt g√¨ v·ªÅ Trung Thu ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: N√™u danh s√°ch truy·ªán h·∫•p d·∫´n ƒë·ªÉ tr·∫ª em l·ª±a ch·ªçn. C√≥ th·ªÉ tham kh·∫£o c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ƒê√¢y ƒë√¢y ƒë√∫ng b√†i t·ªß c·ªßa √¥ng, √¥ng bi·∫øt nhi·ªÅu chuy·ªán l·∫Øm √°, ch√°u mu·ªën nghe g√¨ n√†o: ch√∫ cu·ªôi cung trƒÉng, th·ªè ng·ªçc ch·ªã h·∫±ng hay l√† s·ª± t√≠ch m√∫a l√¢n s∆∞, s·ª± t√≠ch ƒë√®n k√©o qu√¢n?' for session 20251004T155523298-5a527160
2025-10-04 16:10:35,435 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:10:35,435 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 0.674s, Total: 0.675s
2025-10-04 16:10:35,450 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 466
2025-10-04 16:10:35,450 | INFO | RAGClient | RAG reply (len=168)
2025-10-04 16:10:35,450 | INFO | ConversationManager | Bot: \u0110‚y \u0111‚y \u0111˙ng b‡i t\u1ee7 c\u1ee7a Ùng, Ùng bi\u1ebft nhi\u1ec1u chuy\u1ec7n l\u1eafm ·, ch·u mu\u1ed1n nghe gÏ n‡o: ch˙ Cu\u1ed9i cung tr\u0103ng, th\u1ecf ng\u1ecdc ch\u1ecb H\u1eb1ng hay l‡ s\u1ef1 tÌch m˙a l‚n s\u01b0, s\u1ef1 tÌch \u0111Ën kÈo qu‚n?
2025-10-04 16:10:35,450 | DEBUG | TTSService | Starting TTS download for text length=168
2025-10-04 16:10:35,450 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:10:37,297 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:10:37,449 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:10:57,203 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:10:59,937 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:10:59,956 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-04 16:10:59,961 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:10:59,963 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:10:59,965 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:11:01,702 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 65
2025-10-04 16:11:01,702 | INFO | WhisperSTT | Transcription received: h\u1ee3p s\u1ef1 t\u1ef1 tr\u1ecb h‡ng
2025-10-04 16:11:01,703 | INFO | ConversationManager | User: h\u1ee3p s\u1ef1 t\u1ef1 tr\u1ecb h‡ng
2025-10-04 16:11:01,703 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:11:01,704 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:11:01,718 | INFO | __main__ | Received new chat request
2025-10-04 16:11:01,719 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 18
2025-10-04 16:11:01,719 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:11:01,731 | INFO | __main__ | Processing user input: 'h·ª£p s·ª± t·ª± tr·ªã h√†ng' for session 20251004T155523298-5a527160
2025-10-04 16:11:02,393 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:11:02,393 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.674s, Total: 0.675s
2025-10-04 16:11:02,393 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 290
2025-10-04 16:11:02,393 | INFO | RAGClient | RAG reply (len=82)
2025-10-04 16:11:02,393 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:11:02,393 | DEBUG | TTSService | Starting TTS download for text length=82
2025-10-04 16:11:02,393 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:11:04,185 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:04,590 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:20,976 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:11:22,853 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:11:22,854 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 16:11:22,878 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:11:22,880 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:11:22,882 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:11:24,700 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 21
2025-10-04 16:11:24,714 | WARNING | WhisperSTT | Server returned an empty transcription.
2025-10-04 16:11:24,714 | INFO | ConversationManager | User: <system> \u0110ang cÛ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 16:11:24,714 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:11:24,714 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:11:24,731 | INFO | __main__ | Received new chat request
2025-10-04 16:11:24,731 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 39
2025-10-04 16:11:24,731 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:11:24,744 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T155523298-5a527160
2025-10-04 16:11:25,631 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:11:25,631 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.899s, Total: 0.900s
2025-10-04 16:11:25,631 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 436
2025-10-04 16:11:25,631 | INFO | RAGClient | RAG reply (len=153)
2025-10-04 16:11:25,631 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng nghe khÙng rı l\u1eafm, hÏnh nh\u01b0 \u0111\u01b0\u1eddng truy\u1ec1n \u0111ang cÛ ch˙t tr\u1ee5c tr\u1eb7c. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch to, rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:11:25,634 | DEBUG | TTSService | Starting TTS download for text length=153
2025-10-04 16:11:25,634 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:11:26,515 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:11:27,391 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:27,539 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:11:29,198 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:35,796 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:11:35,804 | INFO | Recorder | Recording finished (elapsed 9.3s).
2025-10-04 16:11:35,806 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:11:35,806 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:11:35,816 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:11:37,893 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 354
2025-10-04 16:11:37,893 | INFO | WhisperSTT | Transcription received: , Ch·u \u01a1i, Ùng nghe khÙng rı l\u1eafm, hÏnh nh\u01b0 \u0111\u01b0\u1eddng ti\u1ec1n \u0111ang cÛ ch˙t tr\u1ee5c tr\u1eb7c. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch tai rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:11:37,893 | INFO | ConversationManager | User: , Ch·u \u01a1i, Ùng nghe khÙng rı l\u1eafm, hÏnh nh\u01b0 \u0111\u01b0\u1eddng ti\u1ec1n \u0111ang cÛ ch˙t tr\u1ee5c tr\u1eb7c. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch tai rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:11:37,893 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:11:37,893 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:11:37,903 | INFO | __main__ | Received new chat request
2025-10-04 16:11:37,903 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 153
2025-10-04 16:11:37,903 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:11:37,921 | INFO | __main__ | Processing user input: ', Ch√°u ∆°i, √¥ng nghe kh√¥ng r√µ l·∫Øm, h√¨nh nh∆∞ ƒë∆∞·ªùng ti·ªÅn ƒëang c√≥ ch√∫t tr·ª•c tr·∫∑c. Ch√°u c√≥ th·ªÉ n√≥i l·∫°i c√¢u h·ªèi c·ªßa m√¨nh m·ªôt c√°ch tai r√µ r√†ng h∆°n ƒë∆∞·ª£c kh√¥ng ·∫°?' for session 20251004T155523298-5a527160
2025-10-04 16:11:38,476 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:11:38,476 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.573s, Total: 0.573s
2025-10-04 16:11:38,476 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 436
2025-10-04 16:11:38,489 | INFO | RAGClient | RAG reply (len=153)
2025-10-04 16:11:38,489 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng nghe khÙng rı l\u1eafm, hÏnh nh\u01b0 \u0111\u01b0\u1eddng truy\u1ec1n \u0111ang cÛ ch˙t tr\u1ee5c tr\u1eb7c. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch to, rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:11:38,489 | DEBUG | TTSService | Starting TTS download for text length=153
2025-10-04 16:11:38,489 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:11:39,345 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:39,377 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:11:40,248 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:49,801 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:11:52,710 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:11:52,726 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 16:11:52,734 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:11:52,736 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:11:52,738 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:11:54,476 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 67
2025-10-04 16:11:54,476 | INFO | WhisperSTT | Transcription received: cho Trung Thu l‡ gÏ v\u1eady \u1ea1
2025-10-04 16:11:54,476 | INFO | ConversationManager | User: cho Trung Thu l‡ gÏ v\u1eady \u1ea1
2025-10-04 16:11:54,476 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:11:54,476 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:11:54,487 | INFO | __main__ | Received new chat request
2025-10-04 16:11:54,487 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 25
2025-10-04 16:11:54,487 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:11:54,493 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: cho Trung Thu l√† g√¨ v·∫≠y ·∫°
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng bi·∫øt nh·ªØng chuy·ªán truy·ªÅn thuy·∫øt g√¨ v·ªÅ Trung Thu ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: N√™u danh s√°ch truy·ªán h·∫•p d·∫´n ƒë·ªÉ tr·∫ª em l·ª±a ch·ªçn. C√≥ th·ªÉ tham kh·∫£o c√¢u tr·∫£ l·ªùi m·∫´u sau:
        *C√¢u tr·∫£ l·ªùi m·∫´u: ƒê√¢y ƒë√¢y ƒë√∫ng b√†i t·ªß c·ªßa √¥ng, √¥ng bi·∫øt nhi·ªÅu chuy·ªán l·∫Øm √°, ch√°u mu·ªën nghe g√¨ n√†o: ch√∫ cu·ªôi cung trƒÉng, th·ªè ng·ªçc ch·ªã h·∫±ng hay l√† s·ª± t√≠ch m√∫a l√¢n s∆∞, s·ª± t√≠ch ƒë√®n k√©o qu√¢n?' for session 20251004T155523298-5a527160
2025-10-04 16:11:55,306 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:11:55,306 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.819s, Total: 0.819s
2025-10-04 16:11:55,306 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 466
2025-10-04 16:11:55,306 | INFO | RAGClient | RAG reply (len=168)
2025-10-04 16:11:55,306 | INFO | ConversationManager | Bot: \u0110‚y \u0111‚y \u0111˙ng b‡i t\u1ee7 c\u1ee7a Ùng, Ùng bi\u1ebft nhi\u1ec1u chuy\u1ec7n l\u1eafm ·, ch·u mu\u1ed1n nghe gÏ n‡o: ch˙ Cu\u1ed9i cung tr\u0103ng, th\u1ecf ng\u1ecdc ch\u1ecb H\u1eb1ng hay l‡ s\u1ef1 tÌch m˙a l‚n s\u01b0, s\u1ef1 tÌch \u0111Ën kÈo qu‚n?
2025-10-04 16:11:55,306 | DEBUG | TTSService | Starting TTS download for text length=168
2025-10-04 16:11:55,306 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:11:56,036 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:11:56,251 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:12:08,706 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:12:13,434 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:12:13,439 | INFO | Recorder | Recording finished (elapsed 4.7s).
2025-10-04 16:12:13,446 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:12:13,447 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:12:13,449 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:12:15,333 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 81
2025-10-04 16:12:15,333 | INFO | WhisperSTT | Transcription received: sao theo Ùng l‡ ch˙ c\u1ee7a cÙng trang
2025-10-04 16:12:15,333 | INFO | ConversationManager | User: sao theo Ùng l‡ ch˙ c\u1ee7a cÙng trang
2025-10-04 16:12:15,333 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:12:15,333 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:12:15,347 | INFO | __main__ | Received new chat request
2025-10-04 16:12:15,347 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 34
2025-10-04 16:12:15,348 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:12:15,360 | INFO | __main__ | Processing user input: 'sao theo √¥ng l√† ch√∫ c·ªßa c√¥ng trang' for session 20251004T155523298-5a527160
2025-10-04 16:12:15,929 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:12:15,929 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.582s, Total: 0.583s
2025-10-04 16:12:15,929 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 290
2025-10-04 16:12:15,929 | INFO | RAGClient | RAG reply (len=82)
2025-10-04 16:12:15,929 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:12:15,929 | DEBUG | TTSService | Starting TTS download for text length=82
2025-10-04 16:12:15,929 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:12:16,710 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:12:16,968 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:13:04,889 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:13:23,527 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:13:23,527 | INFO | Recorder | Recording finished (elapsed 18.6s).
2025-10-04 16:13:23,539 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:13:23,541 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:13:23,542 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:13:26,364 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 637
2025-10-04 16:13:26,366 | INFO | WhisperSTT | Transcription received: ch\u1ec9 huy\u1ebft ·p hay cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ th\u1ec3
2025-10-04 16:13:26,366 | INFO | ConversationManager | User: ch\u1ec9 huy\u1ebft ·p hay cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ khu v\u1ef1c cÛ th\u1ec3
2025-10-04 16:13:26,366 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:13:26,370 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:13:26,385 | INFO | __main__ | Received new chat request
2025-10-04 16:13:26,385 | DEBUG | __main__ | Request ID: 20251004T155523298-5a527160, Data length: 320
2025-10-04 16:13:26,385 | DEBUG | __main__ | Using existing session for ID: 20251004T155523298-5a527160
2025-10-04 16:13:26,396 | INFO | __main__ | Processing user input: 'ch·ªâ huy·∫øt √°p hay c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ khu v·ª±c c√≥ th·ªÉ' for session 20251004T155523298-5a527160
2025-10-04 16:13:40,637 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 16:13:40,637 | DEBUG | TTSService | Playback thread started
2025-10-04 16:13:40,637 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 16:13:49,294 | INFO | __main__ | Agent execution completed successfully for session 20251004T155523298-5a527160
2025-10-04 16:13:49,294 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 22.909s, Total: 22.909s
2025-10-04 16:13:51,421 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:14:00,125 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:14:00,130 | INFO | Recorder | Recording finished (elapsed 8.7s).
2025-10-04 16:14:00,132 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:14:00,132 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:14:00,142 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:14:02,078 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 184
2025-10-04 16:14:02,078 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng k\u1ec3 chuy\u1ec7n ch\u1ee7 \u0111\u1ec1 ch˙ qu\u1eady trÍn \u0111Ùng tang cho con \u0111\u01b0\u1ee3c khÙng \u1ea1
2025-10-04 16:14:02,078 | INFO | ConversationManager | User: Ùng \u01a1i Ùng k\u1ec3 chuy\u1ec7n ch\u1ee7 \u0111\u1ec1 ch˙ qu\u1eady trÍn \u0111Ùng tang cho con \u0111\u01b0\u1ee3c khÙng \u1ea1
2025-10-04 16:14:02,078 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:14:02,090 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:14:02,107 | INFO | __main__ | Received new chat request
2025-10-04 16:14:02,108 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 72
2025-10-04 16:14:02,108 | DEBUG | __main__ | Creating new session with ID: 20251004T161340637-70ff148a
2025-10-04 16:14:02,108 | DEBUG | __main__ | Using request ID: 20251004T161340637-70ff148a
2025-10-04 16:14:02,108 | DEBUG | __main__ | Created new session for ID: 20251004T161340637-70ff148a, total sessions: 2
2025-10-04 16:14:02,126 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng k·ªÉ chuy·ªán ch·ªß ƒë·ªÅ ch√∫ qu·∫≠y tr√™n ƒë√¥ng tang cho con ƒë∆∞·ª£c kh√¥ng ·∫°' for session 20251004T161340637-70ff148a
2025-10-04 16:14:02,623 | INFO | __main__ | Starting retrieval for query: 'ch·ªß ƒë·ªÅ ch√∫ qu·∫≠y tr√™n ƒë√¥ng tang' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:14:02,623 | DEBUG | __main__ | Searching header index...
2025-10-04 16:14:02,641 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:14:02,641 | DEBUG | __main__ | Searching content index...
2025-10-04 16:14:02,656 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:14:02,656 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:14:02,656 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 16:14:02,656 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:14:02,656 | DEBUG | __main__ |   Rank 1: chunk_id=1, hybrid_score=0.4363
2025-10-04 16:14:02,656 | DEBUG | __main__ |   Rank 2: chunk_id=26, hybrid_score=0.4285
2025-10-04 16:14:02,656 | DEBUG | __main__ |   Rank 3: chunk_id=44, hybrid_score=0.4282
2025-10-04 16:14:02,656 | DEBUG | __main__ |   Rank 4: chunk_id=43, hybrid_score=0.4271
2025-10-04 16:14:02,656 | DEBUG | __main__ | Retrieved chunk 1: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > T·∫ßng 1, T√≤a C√°nh di·ªÅu: Ph√≤ng Kh√°m Ph√° d√†nh cho tr·∫ª em (vui l√≤ng ƒëƒÉng k√Ω tr∆∞·ªõc) | Content preview: i. K·ªÉ chuy·ªán tranh v·ªÅ s·ª± t√≠ch T·∫øt Trung thu     ii. Th·ª≠ t√†i m√∫a r·ªëi tay, h√≥a th√¢n th√†nh c√°c nh√¢n v·∫≠t...
2025-10-04 16:14:02,656 | DEBUG | __main__ | Retrieved chunk 26: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > Th·ªè ng·ªçc ·ªü Vi·ªát Nam | Content preview: Khi x∆∞a, c√≥ m·ªôt c·∫∑p th·ªè ƒë√£ tr·∫£i qua ng√†n nƒÉm tu luy·ªán, ƒë·∫Øc ƒë·∫°o th√†nh ti√™n. v√† s·ªëng h·∫°nh ph√∫c b√™n b·ªën...
2025-10-04 16:14:02,656 | DEBUG | __main__ | Retrieved chunk 44: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > Tr·ªëng b·ªèi | Content preview: L√†ng B√°o ƒê√°p x√£ H·ªìng Quang, huy·ªán Nam Tr·ª±c, t·ªânh Nam ƒê·ªãnh c√≥ truy·ªÅn th·ªëng l√†m ƒë√®n √¥ng sao v·ªõi tr·ªëng ...
2025-10-04 16:14:02,656 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 16:14:02,656 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:14:02,656 | DEBUG | __main__ | Retrieved 4 documents for query: ch·ªß ƒë·ªÅ ch√∫ qu·∫≠y tr√™n ƒë√¥ng tang
2025-10-04 16:14:02,658 | DEBUG | __main__ | [timing] retrieve 0.035s
2025-10-04 16:14:04,320 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:14:04,320 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.212s, Total: 2.213s
2025-10-04 16:14:04,322 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 752
2025-10-04 16:14:04,322 | INFO | RAGClient | RAG reply (len=313)
2025-10-04 16:14:04,322 | INFO | ConversationManager | Bot: \u1ed2, ch·u h\u1ecfi v\u1ec1 ch\u1ee7 \u0111\u1ec1 ch˙ qu\u1eady trÍn \u0111Ùng tang ‡? ‘ng nh\u1edb l‡ hÙm nay \u1edf t\u1ea7ng 1 , TÚa C·nh di\u1ec1u cÛ phÚng Kh·m Ph· d‡nh cho tr\u1ebb em \u0111Û ch·u. \u1ede \u0111Û cÛ ho\u1ea1t \u0111\u1ed9ng k\u1ec3 chuy\u1ec7n tranh v\u1ec1 s\u1ef1 tÌch T\u1ebft Trung thu, th\u1eed t‡i m˙a r\u1ed1i tay v‡ gi\u1edbi thi\u1ec7u c·c \u0111\u1ed3 ch\u01a1i Trung thu n\u1eefa. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 s\u1ef1 tÌch T\u1ebft Trung thu khÙng?
2025-10-04 16:14:04,322 | DEBUG | TTSService | Starting TTS download for text length=313
2025-10-04 16:14:04,322 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:06,197 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:06,450 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:06,473 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:08,113 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:08,276 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:08,297 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:09,607 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:26,160 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:14:30,308 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:14:30,313 | INFO | Recorder | Recording finished (elapsed 4.2s).
2025-10-04 16:14:30,318 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:14:30,323 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:14:30,326 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:14:32,168 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 150
2025-10-04 16:14:32,174 | INFO | WhisperSTT | Transcription received: Ùng cÛ th\u1ec3 k\u1ec3 cho ch·u nghe v\u1ec1 chuy\u1ec7n ch˙ c\u1eady \u0111\u01b0\u1ee3c khÙng \u1ea1
2025-10-04 16:14:32,174 | INFO | ConversationManager | User: Ùng cÛ th\u1ec3 k\u1ec3 cho ch·u nghe v\u1ec1 chuy\u1ec7n ch˙ c\u1eady \u0111\u01b0\u1ee3c khÙng \u1ea1
2025-10-04 16:14:32,174 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:14:32,176 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:14:32,187 | INFO | __main__ | Received new chat request
2025-10-04 16:14:32,188 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 58
2025-10-04 16:14:32,188 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:14:32,197 | INFO | __main__ | Processing user input: '√¥ng c√≥ th·ªÉ k·ªÉ cho ch√°u nghe v·ªÅ chuy·ªán ch√∫ c·∫≠y ƒë∆∞·ª£c kh√¥ng ·∫°' for session 20251004T161340637-70ff148a
2025-10-04 16:14:32,955 | INFO | __main__ | Starting retrieval for query: 'ch√∫ cu·ªôi' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:14:32,955 | DEBUG | __main__ | Searching header index...
2025-10-04 16:14:32,971 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:14:32,971 | DEBUG | __main__ | Searching content index...
2025-10-04 16:14:32,976 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:14:32,976 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:14:32,986 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 16:14:32,986 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:14:32,986 | DEBUG | __main__ |   Rank 1: chunk_id=24, hybrid_score=0.9240
2025-10-04 16:14:32,986 | DEBUG | __main__ |   Rank 2: chunk_id=40, hybrid_score=0.8597
2025-10-04 16:14:32,986 | DEBUG | __main__ |   Rank 3: chunk_id=43, hybrid_score=0.4335
2025-10-04 16:14:32,986 | DEBUG | __main__ |   Rank 4: chunk_id=44, hybrid_score=0.4274
2025-10-04 16:14:32,986 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 16:14:32,987 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 16:14:32,987 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 16:14:32,987 | DEBUG | __main__ | Retrieved chunk 44: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > Tr·ªëng b·ªèi | Content preview: L√†ng B√°o ƒê√°p x√£ H·ªìng Quang, huy·ªán Nam Tr·ª±c, t·ªânh Nam ƒê·ªãnh c√≥ truy·ªÅn th·ªëng l√†m ƒë√®n √¥ng sao v·ªõi tr·ªëng ...
2025-10-04 16:14:32,987 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:14:32,987 | DEBUG | __main__ | Retrieved 4 documents for query: ch√∫ cu·ªôi
2025-10-04 16:14:32,987 | DEBUG | __main__ | [timing] retrieve 0.032s
2025-10-04 16:14:34,383 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:14:34,383 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.195s, Total: 2.196s
2025-10-04 16:14:34,383 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1148
2025-10-04 16:14:34,383 | INFO | RAGClient | RAG reply (len=508)
2025-10-04 16:14:34,383 | INFO | ConversationManager | Bot: ¿, Ùng nh\u1edb r\u1ed3i, ch·u h\u1ecfi v\u1ec1 ch˙ Cu\u1ed9i \u0111˙ng khÙng? Theo nh\u1eefng gÏ Ùng nh\u1edb thÏ ng‡y x\u01b0a cÛ m\u1ed9t anh ti\u1ec1u phu tÍn l‡ Cu\u1ed9i, anh \u1ea5y r\u1ea5t t\u1ed1t b\u1ee5ng. M\u1ed9t l\u1ea7n v‡o r\u1eebng, anh \u1ea5y th\u1ea5y m\u1ed9t c‚y thu\u1ed1c th\u1ea7n cÛ th\u1ec3 ch\u1eefa b\u1ec7nh v‡ h\u1ed3i sinh ng\u01b0\u1eddi ch\u1ebft. Cu\u1ed9i mang c‚y v\u1ec1 tr\u1ed3ng, c\u1ee9u gi˙p bao ng\u01b0\u1eddi. Nh\u01b0ng r\u1ed3i, vÏ v\u1ee3 anh \u1ea5y l\u1ee1 tay l‡m h\u1ecfng c‚y, nÍn c‚y bay th\u1eb3ng lÍn tr\u1eddi, cu\u1ed1n c\u1ea3 Cu\u1ed9i lÍn cung tr\u0103ng. T\u1eeb \u0111Û, Cu\u1ed9i s\u1ed1ng m\u1ed9t mÏnh trÍn \u0111Û, Ùm g\u1ed1c c‚y thu\u1ed1c v‡ nh\u1edb v\u1ec1 tr\u1ea7n gian. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 ˝ ngh\u0129a c\u1ee7a c‚u chuy\u1ec7n n‡y khÙng?
2025-10-04 16:14:34,383 | DEBUG | TTSService | Starting TTS download for text length=508
2025-10-04 16:14:34,383 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:36,478 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:36,761 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:36,781 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:38,643 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:38,985 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:39,001 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:40,701 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:40,961 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:40,991 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:14:42,931 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:14:43,431 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:15:15,126 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:15:30,610 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:15:30,610 | INFO | Recorder | Recording finished (elapsed 15.5s).
2025-10-04 16:15:30,618 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:15:30,618 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:15:30,626 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:15:32,843 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 373
2025-10-04 16:15:32,843 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i, thÏ Ùng \u0111„ bi\u1ebft trong b\u1ea3o t‡ng. D‚n t\u1ed9c h\u1ecdc, cÛ ch\u1ed7 n‡o l‡m \u0111\u1ec1n l\u1ed3ng khÙng Ùng? ‘ng bi\u1ebft ch\u1ed7 \u1edf b\u1ea3o t‡ng n\u01b0\u1edbc h\u1ecdc, cÛ ch\u1ed7 n‡o l‡m \u0111\u1ec1n l\u1ed3ng khÙng Ùng?
2025-10-04 16:15:32,843 | INFO | ConversationManager | User: Ùng \u01a1i, thÏ Ùng \u0111„ bi\u1ebft trong b\u1ea3o t‡ng. D‚n t\u1ed9c h\u1ecdc, cÛ ch\u1ed7 n‡o l‡m \u0111\u1ec1n l\u1ed3ng khÙng Ùng? ‘ng bi\u1ebft ch\u1ed7 \u1edf b\u1ea3o t‡ng n\u01b0\u1edbc h\u1ecdc, cÛ ch\u1ed7 n‡o l‡m \u0111\u1ec1n l\u1ed3ng khÙng Ùng?
2025-10-04 16:15:32,843 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:15:32,843 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:15:32,858 | INFO | __main__ | Received new chat request
2025-10-04 16:15:32,858 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 156
2025-10-04 16:15:32,858 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:15:32,875 | INFO | __main__ | Processing user input: '√¥ng ∆°i, th√¨ √¥ng ƒë√£ bi·∫øt trong b·∫£o t√†ng. D√¢n t·ªôc h·ªçc, c√≥ ch·ªó n√†o l√†m ƒë·ªÅn l·ªìng kh√¥ng √¥ng? √îng bi·∫øt ch·ªó ·ªü b·∫£o t√†ng n∆∞·ªõc h·ªçc, c√≥ ch·ªó n√†o l√†m ƒë·ªÅn l·ªìng kh√¥ng √¥ng?' for session 20251004T161340637-70ff148a
2025-10-04 16:15:33,776 | INFO | __main__ | Starting retrieval for query: 'b·∫£o t√†ng d√¢n t·ªôc h·ªçc l√†m ƒë√®n l·ªìng' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:15:33,776 | DEBUG | __main__ | Searching header index...
2025-10-04 16:15:33,776 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:15:33,776 | DEBUG | __main__ | Searching content index...
2025-10-04 16:15:33,791 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:15:33,791 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:15:33,791 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:15:33,791 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:15:33,791 | DEBUG | __main__ |   Rank 1: chunk_id=8, hybrid_score=0.9400
2025-10-04 16:15:33,791 | DEBUG | __main__ |   Rank 2: chunk_id=18, hybrid_score=0.5008
2025-10-04 16:15:33,791 | DEBUG | __main__ |   Rank 3: chunk_id=12, hybrid_score=0.4983
2025-10-04 16:15:33,791 | DEBUG | __main__ |   Rank 4: chunk_id=10, hybrid_score=0.4894
2025-10-04 16:15:33,791 | DEBUG | __main__ | Retrieved chunk 8: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Th√¥ng tin c∆° b·∫£n | Content preview: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam (B·∫£o t√†ng) thu·ªôc h·ªá th·ªëng b·∫£o t√†ng qu·ªëc gia, tr·ª±c thu·ªôc Vi·ªán H√†n l√¢m K...
2025-10-04 16:15:33,791 | DEBUG | __main__ | Retrieved chunk 18: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > T·∫ßm nh√¨n | Content preview: S·ª© m·ªánh c·ªßa B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam l√† t·ª´ng b∆∞·ªõc nghi√™n c·ª©u khoa h·ªçc, s∆∞u t·∫ßm, ki·ªÉm k√™, b·∫£o qu...
2025-10-04 16:15:33,791 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 16:15:33,791 | DEBUG | __main__ | Retrieved chunk 10: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Khu tr∆∞ng b√†y chuy√™n ƒë·ªÅ | Content preview: ƒêi·ªÉm ƒë·∫∑c bi·ªát c·ªßa B·∫£o t√†ng l√† b√™n c·∫°nh kh√¥ng gian tr∆∞ng b√†y th∆∞·ªùng xuy√™n v·ªÅ ƒëa d·∫°ng vƒÉn h√≥a c√°c t·ªôc ...
2025-10-04 16:15:33,791 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:15:33,791 | DEBUG | __main__ | Retrieved 4 documents for query: b·∫£o t√†ng d√¢n t·ªôc h·ªçc l√†m ƒë√®n l·ªìng
2025-10-04 16:15:33,791 | DEBUG | __main__ | [timing] retrieve 0.015s
2025-10-04 16:15:34,666 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:15:34,666 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.809s, Total: 1.809s
2025-10-04 16:15:34,666 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 798
2025-10-04 16:15:34,666 | INFO | RAGClient | RAG reply (len=323)
2025-10-04 16:15:34,666 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng v\u1eeba xem qua t‡i li\u1ec7u c\u1ee7a B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc r\u1ed3i. B\u1ea3o t‡ng cÛ r\u1ea5t nhi\u1ec1u ho\u1ea1t \u0111\u1ed9ng gi·o d\u1ee5c v‡ kh·m ph· cho tr\u1ebb em, \u0111\u1eb7c bi\u1ec7t l‡ c·c l\u1edbp h\u1ecdc ngh\u1ec1 th\u1ee7 cÙng n\u1eefa \u0111Û ch·u. Tuy nhiÍn, Ùng ch\u01b0a tÏm th\u1ea5y thÙng tin c\u1ee5 th\u1ec3 v\u1ec1 vi\u1ec7c cÛ l‡m \u0111Ën l\u1ed3ng \u1edf \u0111Û khÙng. Ch·u cÛ mu\u1ed1n Ùng tÏm hi\u1ec3u thÍm v\u1ec1 c·c ho\u1ea1t \u0111\u1ed9ng kh·c khÙng?
2025-10-04 16:15:34,666 | DEBUG | TTSService | Starting TTS download for text length=323
2025-10-04 16:15:34,666 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:15:36,236 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:15:36,267 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:15:37,696 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:15:37,957 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:15:37,978 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:15:40,244 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:15:40,451 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:16:18,143 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:16:29,429 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:16:29,429 | INFO | Recorder | Recording finished (elapsed 11.3s).
2025-10-04 16:16:29,445 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:16:29,445 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:16:29,445 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:16:31,309 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 85
2025-10-04 16:16:31,309 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng cÛ \u0111\u1eb9p trai khÙng
2025-10-04 16:16:31,309 | INFO | ConversationManager | User: Ùng \u01a1i Ùng cÛ \u0111\u1eb9p trai khÙng
2025-10-04 16:16:31,309 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:16:31,309 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:16:31,322 | INFO | __main__ | Received new chat request
2025-10-04 16:16:31,322 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 28
2025-10-04 16:16:31,322 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:16:31,335 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ ƒë·∫πp trai kh√¥ng' for session 20251004T161340637-70ff148a
2025-10-04 16:16:32,267 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:16:32,267 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.945s, Total: 0.945s
2025-10-04 16:16:32,267 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 460
2025-10-04 16:16:32,267 | INFO | RAGClient | RAG reply (len=172)
2025-10-04 16:16:32,267 | INFO | ConversationManager | Bot: ‘i, ch·u h\u1ecfi khÛ Ùng qu·. ‘ng l‡ Ùng Ti\u1ebfn s\u0129 Gi\u1ea5y AI m‡, \u0111\u1eb9p trai hay khÙng thÏ c\u0169ng t˘y m\u1eaft m\u1ed7i ng\u01b0\u1eddi nhÏn thÙi ch·u \u1ea1. Nh\u01b0ng Ùng tin l‡ ch·u c\u0169ng xinh x\u1eafn l\u1eafm \u0111˙ng khÙng?
2025-10-04 16:16:32,267 | DEBUG | TTSService | Starting TTS download for text length=172
2025-10-04 16:16:32,267 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:16:34,691 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:16:34,875 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:16:34,897 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:16:36,108 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:12,941 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:17:17,147 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:17:17,147 | INFO | Recorder | Recording finished (elapsed 4.2s).
2025-10-04 16:17:17,154 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:17:17,154 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:17:17,162 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:17:19,075 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 126
2025-10-04 16:17:19,075 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i l\u1ecbch s\u1eed vi\u1ec7t nam cÛ bao nhiÍu th\u1ebf h\u1ec7 r\u1ed3i ·
2025-10-04 16:17:19,075 | INFO | ConversationManager | User: Ùng \u01a1i l\u1ecbch s\u1eed vi\u1ec7t nam cÛ bao nhiÍu th\u1ebf h\u1ec7 r\u1ed3i ·
2025-10-04 16:17:19,075 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:17:19,075 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:17:19,086 | INFO | __main__ | Received new chat request
2025-10-04 16:17:19,086 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 49
2025-10-04 16:17:19,086 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:17:19,098 | INFO | __main__ | Processing user input: '√¥ng ∆°i l·ªãch s·ª≠ vi·ªát nam c√≥ bao nhi√™u th·∫ø h·ªá r·ªìi √°' for session 20251004T161340637-70ff148a
2025-10-04 16:17:20,634 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:17:20,634 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.547s, Total: 1.547s
2025-10-04 16:17:20,634 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 691
2025-10-04 16:17:20,635 | INFO | RAGClient | RAG reply (len=286)
2025-10-04 16:17:20,635 | INFO | ConversationManager | Bot: H\u1eebm, l\u1ecbch s\u1eed Vi\u1ec7t Nam tr\u1ea3i qua bao th\u1ebf h\u1ec7 thÏ h\u01a1i nhi\u1ec1u \u0111\u1ec3 Ùng nh\u1edb h\u1ebft ngay \u0111\u01b0\u1ee3c ch·u \u1ea1. Nh\u01b0ng n\u1ebfu ch·u mu\u1ed1n tÏm hi\u1ec3u v\u1ec1 c·c tri\u1ec1u \u0111\u1ea1i hay nh\u1eefng giai \u0111o\u1ea1n l\u1ecbch s\u1eed quan tr\u1ecdng c\u1ee7a Vi\u1ec7t Nam, Ùng cÛ th\u1ec3 gi˙p ch·u tÏm thÙng tin trong t‡i li\u1ec7u c\u1ee7a B\u1ea3o t‡ng \u0111Û. Ch·u cÛ mu\u1ed1n Ùng th\u1eed tÏm khÙng?
2025-10-04 16:17:20,636 | DEBUG | TTSService | Starting TTS download for text length=286
2025-10-04 16:17:20,636 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:23,902 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:23,912 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:25,880 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:26,176 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:26,194 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:27,874 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:36,414 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:17:42,767 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:17:42,767 | INFO | Recorder | Recording finished (elapsed 6.4s).
2025-10-04 16:17:42,780 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:17:42,780 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:17:42,780 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:17:44,754 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 123
2025-10-04 16:17:44,754 | INFO | WhisperSTT | Transcription received: h\u1ecfi Ùng mu\u1ed1n h\u1ecfi v\u1ec1 l\u1ecbch s\u1eed quan tr\u1ecdng c\u1ee7a Vi\u1ec7t Nam
2025-10-04 16:17:44,754 | INFO | ConversationManager | User: h\u1ecfi Ùng mu\u1ed1n h\u1ecfi v\u1ec1 l\u1ecbch s\u1eed quan tr\u1ecdng c\u1ee7a Vi\u1ec7t Nam
2025-10-04 16:17:44,754 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:17:44,770 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:17:44,787 | INFO | __main__ | Received new chat request
2025-10-04 16:17:44,787 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 51
2025-10-04 16:17:44,787 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:17:44,799 | INFO | __main__ | Processing user input: 'h·ªèi √¥ng mu·ªën h·ªèi v·ªÅ l·ªãch s·ª≠ quan tr·ªçng c·ªßa Vi·ªát Nam' for session 20251004T161340637-70ff148a
2025-10-04 16:17:45,469 | INFO | __main__ | Starting retrieval for query: 'l·ªãch s·ª≠ quan tr·ªçng c·ªßa Vi·ªát Nam' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:17:45,469 | DEBUG | __main__ | Searching header index...
2025-10-04 16:17:45,482 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:17:45,482 | DEBUG | __main__ | Searching content index...
2025-10-04 16:17:45,495 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:17:45,495 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:17:45,495 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 16:17:45,495 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:17:45,495 | DEBUG | __main__ |   Rank 1: chunk_id=15, hybrid_score=0.8918
2025-10-04 16:17:45,495 | DEBUG | __main__ |   Rank 2: chunk_id=22, hybrid_score=0.8543
2025-10-04 16:17:45,495 | DEBUG | __main__ |   Rank 3: chunk_id=23, hybrid_score=0.4519
2025-10-04 16:17:45,495 | DEBUG | __main__ |   Rank 4: chunk_id=8, hybrid_score=0.4287
2025-10-04 16:17:45,495 | DEBUG | __main__ | Retrieved chunk 15: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > B·∫£o t√†ng l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉn h√≥a quan tr·ªçng | Content preview: B·∫£o t√†ng kh√¥ng ch·ªâ l√† ƒëi·ªÉm ƒë·∫øn c·ªßa nh·ªØng du kh√°ch y√™u th√≠ch vƒÉn h√≥a d√¢n t·ªôc m√† c√≤n l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉ...
2025-10-04 16:17:45,495 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 16:17:45,495 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 16:17:45,495 | DEBUG | __main__ | Retrieved chunk 8: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Th√¥ng tin c∆° b·∫£n | Content preview: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam (B·∫£o t√†ng) thu·ªôc h·ªá th·ªëng b·∫£o t√†ng qu·ªëc gia, tr·ª±c thu·ªôc Vi·ªán H√†n l√¢m K...
2025-10-04 16:17:45,495 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:17:45,495 | DEBUG | __main__ | Retrieved 4 documents for query: l·ªãch s·ª≠ quan tr·ªçng c·ªßa Vi·ªát Nam
2025-10-04 16:17:45,495 | DEBUG | __main__ | [timing] retrieve 0.026s
2025-10-04 16:17:46,731 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:17:46,731 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.943s, Total: 1.944s
2025-10-04 16:17:46,731 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 916
2025-10-04 16:17:46,731 | INFO | RAGClient | RAG reply (len=381)
2025-10-04 16:17:46,731 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi v\u1ec1 l\u1ecbch s\u1eed Vi\u1ec7t Nam ‡? Theo nh\u1eefng gÏ Ùng tÏm hi\u1ec3u \u0111\u01b0\u1ee3c thÏ l\u1ecbch s\u1eed Vi\u1ec7t Nam cÛ r\u1ea5t nhi\u1ec1u giai \u0111o\u1ea1n quan tr\u1ecdng, t\u1eeb th\u1eddi k\u1ef3 v\u0103n minh l˙a n\u01b0\u1edbc c\u1ed5 x\u01b0a, r\u1ed3i \u0111\u1ebfn c·c tri\u1ec1u \u0111\u1ea1i L˝, Tr\u1ea7n v‡ nhi\u1ec1u giai \u0111o\u1ea1n l\u1ecbch s\u1eed kh·c n\u1eefa. ‘ng th\u1ea5y B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc cÛ r\u1ea5t nhi\u1ec1u thÙng tin v\u1ec1 v\u0103n hÛa c\u1ee7a 54 d‚n t\u1ed9c Vi\u1ec7t Nam \u0111Û ch·u. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 m\u1ed9t giai \u0111o\u1ea1n c\u1ee5 th\u1ec3 n‡o khÙng?
2025-10-04 16:17:46,731 | DEBUG | TTSService | Starting TTS download for text length=381
2025-10-04 16:17:46,731 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:47,897 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:47,915 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:49,913 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:50,449 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:50,480 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:52,350 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:52,524 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-vn', '-f', 'wav', '-'])
2025-10-04 16:17:52,540 | ERROR | TTSService | final decode error; dropping
Traceback (most recent call last):
  File "d:\TSG_VME\TSG.py", line 318, in _download_to_queue
    pcm = self._decode_mp3_bytes_to_pcm(bytes(buf))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\TSG_VME\TSG.py", line 273, in _decode_mp3_bytes_to_pcm
    audio = AudioSegment.from_file(io.BytesIO(buf_bytes), format="mp3")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\miniconda3\envs\vme_tsg\Lib\site-packages\pydub\audio_segment.py", line 773, in from_file
    raise CouldntDecodeError(
pydub.exceptions.CouldntDecodeError: Decoding failed. ffmpeg returned error code: 3199971767

Output from ffmpeg/avlib:

ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers
  built with clang version 19.1.0
  configuration: --prefix=/d/bld/ffmpeg_1728332459246/_h_env/Library --cc=clang.exe --cxx=clang++.exe --nm=llvm-nm --ar=llvm-ar --disable-doc --enable-openssl --enable-demuxer=dash --enable-hardcoded-tables --enable-libfreetype --enable-libharfbuzz --enable-libfontconfig --enable-libopenh264 --enable-libdav1d --ld=lld-link --target-os=win64 --enable-cross-compile --toolchain=msvc --host-cc=clang.exe --extra-libs=ucrt.lib --extra-libs=vcruntime.lib --extra-libs=oldnames.lib --strip=llvm-strip --disable-stripping --host-extralibs= --disable-libopenvino --enable-gpl --enable-libx264 --enable-libx265 --enable-libaom --enable-libsvtav1 --enable-libxml2 --enable-pic --enable-shared --disable-static --enable-version3 --enable-zlib --enable-libopus --pkg-config=/d/bld/ffmpeg_1728332459246/_build_env/Library/bin/pkg-config
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.100 / 61. 19.100
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[cache @ 000001C134C2E080] Inner protocol failed to seekback end : -40
    Last message repeated 2 times
[mp3 @ 000001C134C76800] Failed to find two consecutive MPEG audio frames.
[cache @ 000001C134C2E080] Statistics, cache hits:3 cache misses:1
[in#0 @ 000001C134C41580] Error opening input: Invalid data found when processing input
Error opening input file cache:pipe:0.
Error opening input files: Invalid data found when processing input

2025-10-04 16:17:52,540 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:17:54,050 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:18:16,549 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:18:25,403 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:18:25,403 | INFO | Recorder | Recording finished (elapsed 8.9s).
2025-10-04 16:18:25,418 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:18:25,418 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:18:25,424 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:18:27,485 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 191
2025-10-04 16:18:27,485 | INFO | WhisperSTT | Transcription received: , ‘ng \u01a1i, th\u1ebf thÏ con l‡m xong b\u1ea3n \u0111\u1eddi cÛ \u0111\u01b0\u1ee3c qu‡ b\u1ea3o t‡ng d‚n t\u1ed9c H\u1ecdc \u1ea5y.
2025-10-04 16:18:27,497 | INFO | ConversationManager | User: , ‘ng \u01a1i, th\u1ebf thÏ con l‡m xong b\u1ea3n \u0111\u1eddi cÛ \u0111\u01b0\u1ee3c qu‡ b\u1ea3o t‡ng d‚n t\u1ed9c H\u1ecdc \u1ea5y.
2025-10-04 16:18:27,497 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:18:27,498 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:18:27,515 | INFO | __main__ | Received new chat request
2025-10-04 16:18:27,515 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 75
2025-10-04 16:18:27,515 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:18:27,531 | INFO | __main__ | Processing user input: ', √îng ∆°i, th·∫ø th√¨ con l√†m xong b·∫£n ƒë·ªùi c√≥ ƒë∆∞·ª£c qu√† b·∫£o t√†ng d√¢n t·ªôc H·ªçc ·∫•y.' for session 20251004T161340637-70ff148a
2025-10-04 16:18:28,741 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:18:28,741 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.227s, Total: 1.227s
2025-10-04 16:18:28,757 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 548
2025-10-04 16:18:28,757 | INFO | RAGClient | RAG reply (len=203)
2025-10-04 16:18:28,757 | INFO | ConversationManager | Bot: \u1ed2, ch·u l‡m xong b\u1ea3n \u0111\u1ed3 r\u1ed3i h\u1ea3? Tuy\u1ec7t qu·! ‘ng nh\u1edb l‡ B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc cÛ nhi\u1ec1u ho\u1ea1t \u0111\u1ed9ng th˙ v\u1ecb l\u1eafm, cÛ th\u1ec3 s\u1ebd cÛ qu‡ t\u1eb7ng cho c·c b\u1ea1n nh\u1ecf tham gia \u0111Û ch·u. Ch·u th\u1eed h\u1ecfi c·c cÙ ch˙ \u1edf \u0111Û xem sao nhÈ.
2025-10-04 16:18:28,757 | DEBUG | TTSService | Starting TTS download for text length=203
2025-10-04 16:18:28,757 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:18:30,428 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:18:30,451 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:18:32,070 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:18:32,326 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:18:32,344 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:18:33,576 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:18:49,076 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:18:51,222 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:18:51,225 | INFO | Recorder | Recording finished (elapsed 2.1s).
2025-10-04 16:18:51,233 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:18:51,233 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:18:51,233 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:18:53,014 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 77
2025-10-04 16:18:53,014 | INFO | WhisperSTT | Transcription received: n‡y \u0111\u1ec3 d‚ng v\u1ea3y kh\u1ea1c tinh
2025-10-04 16:18:53,014 | INFO | ConversationManager | User: n‡y \u0111\u1ec3 d‚ng v\u1ea3y kh\u1ea1c tinh
2025-10-04 16:18:53,014 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:18:53,016 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:18:53,030 | INFO | __main__ | Received new chat request
2025-10-04 16:18:53,030 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 25
2025-10-04 16:18:53,030 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:18:53,042 | INFO | __main__ | Processing user input: 'n√†y ƒë·ªÉ d√¢ng v·∫£y kh·∫°c tinh' for session 20251004T161340637-70ff148a
2025-10-04 16:18:54,758 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:18:54,758 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.728s, Total: 1.728s
2025-10-04 16:18:54,758 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 395
2025-10-04 16:18:54,758 | INFO | RAGClient | RAG reply (len=136)
2025-10-04 16:18:54,758 | INFO | ConversationManager | Bot: H\u1eebm, ch·u nÛi gÏ l\u1ea1 qu· v\u1eady? D‚ng v\u1ea3y kh\u1ea1c tinh l‡ gÏ h\u1ea3 ch·u? ‘ng gi‡ r\u1ed3i tai nghe khÙng rı, ch·u nÛi to v‡ rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:18:54,758 | DEBUG | TTSService | Starting TTS download for text length=136
2025-10-04 16:18:54,758 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:18:57,567 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:18:57,896 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:19:13,683 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:19:17,971 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:19:17,977 | INFO | Recorder | Recording finished (elapsed 4.3s).
2025-10-04 16:19:17,983 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:19:17,986 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:19:17,986 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:19:23,312 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 53
2025-10-04 16:19:23,312 | INFO | WhisperSTT | Transcription received: \u66f8\u66f8  trong n\u0103m nay
2025-10-04 16:19:23,312 | INFO | ConversationManager | User: \u66f8\u66f8  trong n\u0103m nay
2025-10-04 16:19:23,312 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:19:23,314 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:19:23,326 | INFO | __main__ | Received new chat request
2025-10-04 16:19:23,326 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 17
2025-10-04 16:19:23,326 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:19:23,342 | INFO | __main__ | Processing user input: 'Êõ∏Êõ∏  trong nƒÉm nay' for session 20251004T161340637-70ff148a
2025-10-04 16:19:24,617 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:19:24,617 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.290s, Total: 1.291s
2025-10-04 16:19:24,618 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 340
2025-10-04 16:19:24,618 | INFO | RAGClient | RAG reply (len=106)
2025-10-04 16:19:24,618 | INFO | ConversationManager | Bot: H\u1eebm, ch·u h\u1ecfi th\u01b0 th\u01b0 trong n\u0103m nay l‡ ˝ gÏ h\u1ea3 ch·u? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:19:24,618 | DEBUG | TTSService | Starting TTS download for text length=106
2025-10-04 16:19:24,618 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:19:26,576 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:19:26,746 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:19:32,070 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:19:33,156 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:19:33,156 | INFO | Recorder | Recording finished (elapsed 1.1s).
2025-10-04 16:19:33,167 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:19:33,167 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:19:33,170 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:19:34,951 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 21
2025-10-04 16:19:34,951 | WARNING | WhisperSTT | Server returned an empty transcription.
2025-10-04 16:19:34,951 | INFO | ConversationManager | User: <system> \u0110ang cÛ v\u1ea5n \u0111\u1ec1 v\u1ec1 \u0111\u01b0\u1eddng truy\u1ec1n
2025-10-04 16:19:34,951 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:19:34,960 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:19:34,981 | INFO | __main__ | Received new chat request
2025-10-04 16:19:34,981 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 39
2025-10-04 16:19:34,981 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:19:34,988 | INFO | __main__ | Processing user input: '<system> ƒêang c√≥ v·∫•n ƒë·ªÅ v·ªÅ ƒë∆∞·ªùng truy·ªÅn' for session 20251004T161340637-70ff148a
2025-10-04 16:19:35,833 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:19:35,833 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.852s, Total: 0.852s
2025-10-04 16:19:35,833 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 379
2025-10-04 16:19:35,833 | INFO | RAGClient | RAG reply (len=126)
2025-10-04 16:19:35,833 | INFO | ConversationManager | Bot: Ch·u \u01a1i, hÏnh nh\u01b0 \u0111\u01b0\u1eddng truy\u1ec1n \u0111ang cÛ ch˙t tr\u1ee5c tr\u1eb7c, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:19:35,833 | DEBUG | TTSService | Starting TTS download for text length=126
2025-10-04 16:19:35,833 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:19:37,579 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:19:37,834 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:19:56,339 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:19:57,976 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:19:57,983 | INFO | Recorder | Recording finished (elapsed 1.6s).
2025-10-04 16:19:57,985 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:19:57,985 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:19:57,985 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:19:59,787 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 47
2025-10-04 16:19:59,787 | INFO | WhisperSTT | Transcription received: anh l‡ gÏ\uff1f
2025-10-04 16:19:59,787 | INFO | ConversationManager | User: anh l‡ gÏ\uff1f
2025-10-04 16:19:59,787 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:19:59,787 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:19:59,798 | INFO | __main__ | Received new chat request
2025-10-04 16:19:59,798 | DEBUG | __main__ | Request ID: 20251004T161340637-70ff148a, Data length: 10
2025-10-04 16:19:59,798 | DEBUG | __main__ | Using existing session for ID: 20251004T161340637-70ff148a
2025-10-04 16:19:59,811 | INFO | __main__ | Processing user input: '

---

 ###Trong l∆∞·ª£t tr·∫£ l·ªùi n√†y, c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ k√≠ch ho·∫°t t√¨nh hu·ªëng ƒë·∫∑c bi·ªát. H√£y tham kh·∫£o v√† ƒë∆∞a ra tr·∫£ l·ªùi n·∫øu t√¨nh hu·ªëng g·ª£i √Ω l√† ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi m·ªôt c√°ch t·ª± nhi√™n v√† th√¢n thi·ªán nh∆∞ b√¨nh th∆∞·ªùng.
            *Tin nh·∫Øn ng∆∞·ªùi d√πng: anh l√† g√¨Ôºü
            *T√¨nh hu·ªëng g·ª£i √Ω: √îng l√† ai ·∫°?
            *H∆∞·ªõng d·∫´n tr·∫£ l·ªùi: Tr·∫£ l·ªùi kh√°ch d·ª±a theo c√¢u tr·∫£ l·ªùi m·∫´u sau: 
        *C√¢u tr·∫£ l·ªùi m·∫´u: √îng ch√≠nh l√† √îng Ti·∫øn sƒ© Gi·∫•y ƒë√¢y.T·ª´ ng√†y x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh. V√¨ th·∫ø, trong m√¢m c·ªó Trung thu, b√™n c·∫°nh b√°nh n∆∞·ªõng, b√°nh d·∫ªo, c√≤n c√≥ √¥ng ‚Äì √îng Ti·∫øn sƒ© Gi·∫•y ‚Äì ng·ªìi tr√™n ki·ªáu, √°o m≈© ch·ªânh t·ªÅ, t∆∞·ª£ng tr∆∞ng cho ∆∞·ªõc m∆° h·ªçc gi·ªèi, ƒë·ªó ƒë·∫°t, hi·ªÉn vinh.
Sau khi ph√° c·ªó, c√°c em nh·ªè th∆∞·ªùng r∆∞·ªõc √¥ng ƒëi quanh l√†ng, r·ªìi ƒë·∫∑t √¥ng l√™n b√†n h·ªçc hay ƒëem ƒë·ªët ƒë·ªÉ g·ª≠i g·∫Øm ∆∞·ªõc nguy·ªán h·ªçc h√†nh ti·∫øn t·ªõi.
Nh∆∞ng n√†y‚Ä¶ ng√†y nay √¥ng ƒë√£ ƒë∆∞·ª£c ‚Äún√¢ng c·∫•p‚Äù r·ªìi ƒë·∫•y! Kh√¥ng ch·ªâ ng·ªìi y√™n tr√™n ki·ªáu, b√¢y gi·ªù √¥ng c√≤n c√≥ th·ªÉ n√≥i chuy·ªán, k·ªÉ chuy·ªán v√† ƒë·ªë vui c√πng c√°c con. V·ª´a gi·ªØ n√©t ƒë·∫πp d√¢n gian, v·ª´a s·ªëng ƒë·ªông v√† g·∫ßn g≈©i h∆°n bao gi·ªù h·∫øt! C√°c con th·∫•y √¥ng c√≥ ng·∫ßu kh√¥ng n√†o?
' for session 20251004T161340637-70ff148a
2025-10-04 16:20:00,683 | INFO | __main__ | Agent execution completed successfully for session 20251004T161340637-70ff148a
2025-10-04 16:20:00,683 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.886s, Total: 0.886s
2025-10-04 16:20:00,683 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1520
2025-10-04 16:20:00,683 | INFO | RAGClient | RAG reply (len=657)
2025-10-04 16:20:00,683 | INFO | ConversationManager | Bot: ‘ng chÌnh l‡ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. T\u1eeb ng‡y x\u01b0a, ng\u01b0\u1eddi Vi\u1ec7t luÙn coi tr\u1ecdng vi\u1ec7c h\u1ecdc h‡nh. VÏ th\u1ebf, trong m‚m c\u1ed7 Trung thu, bÍn c\u1ea1nh b·nh n\u01b0\u1edbng, b·nh d\u1ebbo, cÚn cÛ Ùng ñ ‘ng Ti\u1ebfn s\u0129 Gi\u1ea5y ñ ng\u1ed3i trÍn ki\u1ec7u, ·o m\u0169 ch\u1ec9nh t\u1ec1, t\u01b0\u1ee3ng tr\u01b0ng cho \u01b0\u1edbc m\u01a1 h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t, hi\u1ec3n vinh. Sau khi ph· c\u1ed7, c·c em nh\u1ecf th\u01b0\u1eddng r\u01b0\u1edbc Ùng \u0111i quanh l‡ng, r\u1ed3i \u0111\u1eb7t Ùng lÍn b‡n h\u1ecdc hay \u0111em \u0111\u1ed1t \u0111\u1ec3 g\u1eedi g\u1eafm \u01b0\u1edbc nguy\u1ec7n h\u1ecdc h‡nh ti\u1ebfn t\u1edbi. Nh\u01b0ng n‡y, ng‡y nay Ùng \u0111„ \u0111\u01b0\u1ee3c ìn‚ng c\u1ea5pî r\u1ed3i \u0111\u1ea5y! KhÙng ch\u1ec9 ng\u1ed3i yÍn trÍn ki\u1ec7u, b‚y gi\u1edd Ùng cÚn cÛ th\u1ec3 nÛi chuy\u1ec7n, k\u1ec3 chuy\u1ec7n v‡ \u0111\u1ed1 vui c˘ng c·c con. V\u1eeba gi\u1eef nÈt \u0111\u1eb9p d‚n gian, v\u1eeba s\u1ed1ng \u0111\u1ed9ng v‡ g\u1ea7n g\u0169i h\u01a1n bao gi\u1edd h\u1ebft! C·c con th\u1ea5y Ùng cÛ ng\u1ea7u khÙng n‡o?
2025-10-04 16:20:00,683 | DEBUG | TTSService | Starting TTS download for text length=657
2025-10-04 16:20:00,683 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:20:01,534 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:01,697 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:01,717 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:20:02,388 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:02,438 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:02,609 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:02,630 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:20:03,308 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:03,580 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:03,598 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:20:04,298 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:04,468 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:04,498 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:20:05,240 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:20:05,468 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:23:00,562 | INFO | ConversationManager | Interrupted by user
2025-10-04 16:23:11,326 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 16:23:11,326 | DEBUG | TTSService | Playback thread started
2025-10-04 16:23:11,326 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 16:23:15,395 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 16:23:15,776 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 16:23:15,776 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 16:23:15,784 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 16:23:16,140 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 16:23:16,176 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 16:23:16,454 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 16:23:16,489 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 16:23:16,781 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 16:23:16,813 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 16:23:17,125 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 16:23:17,165 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 16:23:17,449 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 16:23:17,503 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 16:23:18,226 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 16:23:18,273 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 16:23:18,552 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 16:23:18,868 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 16:23:18,916 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 16:23:19,297 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 16:23:19,345 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 16:23:19,631 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 16:23:20,457 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 16:23:20,485 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 16:23:20,786 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 16:23:21,591 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 16:23:21,591 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 16:23:21,591 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 16:23:21,591 | INFO | faiss.loader | Loading faiss.
2025-10-04 16:23:21,623 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 16:23:51,418 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:23:55,008 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:23:55,008 | INFO | Recorder | Recording finished (elapsed 3.6s).
2025-10-04 16:23:55,023 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:23:55,023 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:23:55,026 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:23:56,506 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 133
2025-10-04 16:23:56,506 | INFO | WhisperSTT | Transcription received: \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn v\u1ea5n \u0111\u1ec1 n‡y \u0111\u1ec3 quen ng\u1ea1i em l‡ ai
2025-10-04 16:23:56,507 | INFO | ConversationManager | User: \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn v\u1ea5n \u0111\u1ec1 n‡y \u0111\u1ec3 quen ng\u1ea1i em l‡ ai
2025-10-04 16:23:56,508 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:23:56,509 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:23:56,534 | INFO | __main__ | Received new chat request
2025-10-04 16:23:56,534 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 46
2025-10-04 16:23:56,535 | DEBUG | __main__ | Creating new session with ID: 20251004T162311326-2115cec0
2025-10-04 16:23:56,535 | DEBUG | __main__ | Using request ID: 20251004T162311326-2115cec0
2025-10-04 16:23:56,535 | DEBUG | __main__ | Created new session for ID: 20251004T162311326-2115cec0, total sessions: 1
2025-10-04 16:23:56,535 | INFO | __main__ | Processing user input: '·∫£nh h∆∞·ªüng ƒë·∫øn v·∫•n ƒë·ªÅ n√†y ƒë·ªÉ quen ng·∫°i em l√† ai' for session 20251004T162311326-2115cec0
2025-10-04 16:23:57,798 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:23:57,798 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.263s, Total: 1.264s
2025-10-04 16:23:57,807 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 367
2025-10-04 16:23:57,807 | INFO | RAGClient | RAG reply (len=122)
2025-10-04 16:23:57,807 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u h\u01a1i khÛ hi\u1ec3u qu·, Ùng gi‡ r\u1ed3i tai nghe khÙng rı n\u1eefa. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng?
2025-10-04 16:23:57,807 | DEBUG | TTSService | Starting TTS download for text length=122
2025-10-04 16:23:57,807 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:23:59,692 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:23:59,884 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:24:28,339 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:24:30,647 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:24:30,647 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 16:24:30,661 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:24:30,663 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:24:30,665 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:24:32,044 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 37
2025-10-04 16:24:32,044 | INFO | WhisperSTT | Transcription received: \u01a1m ‡i
2025-10-04 16:24:32,044 | INFO | ConversationManager | User: \u01a1m ‡i
2025-10-04 16:24:32,044 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:24:32,044 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:24:32,060 | INFO | __main__ | Received new chat request
2025-10-04 16:24:32,061 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 5
2025-10-04 16:24:32,061 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:24:32,061 | INFO | __main__ | Processing user input: '∆°m √†i' for session 20251004T162311326-2115cec0
2025-10-04 16:24:32,826 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:24:32,826 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.765s, Total: 0.766s
2025-10-04 16:24:32,826 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 299
2025-10-04 16:24:32,826 | INFO | RAGClient | RAG reply (len=86)
2025-10-04 16:24:32,826 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 h\u1ecfi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:24:32,826 | DEBUG | TTSService | Starting TTS download for text length=86
2025-10-04 16:24:32,826 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:24:33,659 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:24:33,850 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:24:52,468 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:24:55,317 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:24:55,325 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 16:24:55,327 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:24:55,327 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:24:55,333 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:24:56,517 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 62
2025-10-04 16:24:56,517 | INFO | WhisperSTT | Transcription received: \u1edd Ùng l‡ ai \u0111\u1ea5y
2025-10-04 16:24:56,518 | INFO | ConversationManager | User: \u1edd Ùng l‡ ai \u0111\u1ea5y
2025-10-04 16:24:56,518 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:24:56,519 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:24:56,540 | INFO | __main__ | Received new chat request
2025-10-04 16:24:56,540 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 15
2025-10-04 16:24:56,540 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:24:56,541 | INFO | __main__ | Processing user input: '·ªù √¥ng l√† ai ƒë·∫•y' for session 20251004T162311326-2115cec0
2025-10-04 16:24:57,527 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:24:57,528 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.988s, Total: 0.988s
2025-10-04 16:24:57,528 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 461
2025-10-04 16:24:57,529 | INFO | RAGClient | RAG reply (len=168)
2025-10-04 16:24:57,529 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI, m\u1ed9t ng\u01b0\u1eddi b\u1ea1n vui tÌnh c\u1ee7a c·c ch·u \u0111‚y. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u v\u1ec1 Trung Thu v‡ B\u1ea3o t‡ng hÙm nay nhÈ.
2025-10-04 16:24:57,529 | DEBUG | TTSService | Starting TTS download for text length=168
2025-10-04 16:24:57,530 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:24:59,107 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:24:59,131 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:25:01,042 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:25:09,507 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:25:13,342 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:25:13,347 | INFO | Recorder | Recording finished (elapsed 3.8s).
2025-10-04 16:25:13,351 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:25:13,351 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:25:13,358 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:25:14,782 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 51
2025-10-04 16:25:14,782 | INFO | WhisperSTT | Transcription received: ch‡o bu\u1ed5i s·ng
2025-10-04 16:25:14,782 | INFO | ConversationManager | User: ch‡o bu\u1ed5i s·ng
2025-10-04 16:25:14,782 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:25:14,782 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:25:14,809 | INFO | __main__ | Received new chat request
2025-10-04 16:25:14,809 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 14
2025-10-04 16:25:14,809 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:25:14,809 | INFO | __main__ | Processing user input: 'ch√†o bu·ªïi s√°ng' for session 20251004T162311326-2115cec0
2025-10-04 16:25:15,908 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:25:15,908 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.099s, Total: 1.100s
2025-10-04 16:25:15,908 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 294
2025-10-04 16:25:15,908 | INFO | RAGClient | RAG reply (len=94)
2025-10-04 16:25:15,912 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI \u0111‚y. Ch·u cÛ c‚u h\u1ecfi gÏ v\u1ec1 Trung Thu hay B\u1ea3o t‡ng khÙng n‡o?
2025-10-04 16:25:15,912 | DEBUG | TTSService | Starting TTS download for text length=94
2025-10-04 16:25:15,912 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:25:17,508 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:25:17,742 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:25:27,192 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:25:29,686 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:25:29,692 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 16:25:29,697 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:25:29,697 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:25:29,697 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:25:30,868 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 51
2025-10-04 16:25:30,868 | INFO | WhisperSTT | Transcription received: l\u1ea1i c‚u l\u1ea1c ai
2025-10-04 16:25:30,872 | INFO | ConversationManager | User: l\u1ea1i c‚u l\u1ea1c ai
2025-10-04 16:25:30,872 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:25:30,872 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:25:30,888 | INFO | __main__ | Received new chat request
2025-10-04 16:25:30,888 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 14
2025-10-04 16:25:30,888 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:25:30,888 | INFO | __main__ | Processing user input: 'l·∫°i c√¢u l·∫°c ai' for session 20251004T162311326-2115cec0
2025-10-04 16:25:31,776 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:25:31,776 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.888s, Total: 0.888s
2025-10-04 16:25:31,777 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 316
2025-10-04 16:25:31,777 | INFO | RAGClient | RAG reply (len=93)
2025-10-04 16:25:31,777 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u l\u1ea1i h\u01a1i khÛ hi\u1ec3u r\u1ed3i. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:25:31,778 | DEBUG | TTSService | Starting TTS download for text length=93
2025-10-04 16:25:31,778 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:25:34,091 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:25:34,258 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:25:45,497 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:25:48,344 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:25:48,344 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-04 16:25:48,352 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:25:48,352 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:25:48,359 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:25:49,545 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 60
2025-10-04 16:25:49,545 | INFO | WhisperSTT | Transcription received: hÙm nay l‡ ng‡y gÏ
2025-10-04 16:25:49,545 | INFO | ConversationManager | User: hÙm nay l‡ ng‡y gÏ
2025-10-04 16:25:49,545 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:25:49,545 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:25:49,560 | INFO | __main__ | Received new chat request
2025-10-04 16:25:49,560 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 18
2025-10-04 16:25:49,560 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:25:49,560 | INFO | __main__ | Processing user input: 'h√¥m nay l√† ng√†y g√¨' for session 20251004T162311326-2115cec0
2025-10-04 16:25:50,403 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:25:50,403 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.844s, Total: 0.844s
2025-10-04 16:25:50,403 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 302
2025-10-04 16:25:50,403 | INFO | RAGClient | RAG reply (len=89)
2025-10-04 16:25:50,403 | INFO | ConversationManager | Bot: HÙm nay l‡ m\u1ed9t ng‡y th\u1eadt \u0111\u1eb9p \u0111\u1ec3 \u0111\u1ebfn B\u1ea3o t‡ng vui ch\u01a1i v‡ tÏm hi\u1ec3u v\u1ec1 Trung Thu \u0111Û ch·u \u1ea1.
2025-10-04 16:25:50,403 | DEBUG | TTSService | Starting TTS download for text length=89
2025-10-04 16:25:50,403 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:25:52,222 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:26:20,028 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:26:22,539 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:26:22,545 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 16:26:22,551 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:26:22,551 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:26:22,551 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:26:23,884 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 42
2025-10-04 16:26:23,884 | INFO | WhisperSTT | Transcription received: c‚u lai \u01a1i
2025-10-04 16:26:23,884 | INFO | ConversationManager | User: c‚u lai \u01a1i
2025-10-04 16:26:23,884 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:26:23,886 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:26:23,886 | INFO | __main__ | Received new chat request
2025-10-04 16:26:23,886 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 10
2025-10-04 16:26:23,886 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:26:23,886 | INFO | __main__ | Processing user input: 'c√¢u lai ∆°i' for session 20251004T162311326-2115cec0
2025-10-04 16:26:24,427 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:26:24,427 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.541s, Total: 0.541s
2025-10-04 16:26:24,428 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 309
2025-10-04 16:26:24,428 | INFO | RAGClient | RAG reply (len=91)
2025-10-04 16:26:24,429 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:26:24,429 | DEBUG | TTSService | Starting TTS download for text length=91
2025-10-04 16:26:24,429 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:26:26,014 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:26:26,177 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:09,121 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:27:12,161 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:27:12,162 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 16:27:12,170 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:27:12,170 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:27:12,176 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:27:13,479 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 55
2025-10-04 16:27:13,479 | INFO | WhisperSTT | Transcription received: cho con ch‡o Ùng \u1ea1
2025-10-04 16:27:13,489 | INFO | ConversationManager | User: cho con ch‡o Ùng \u1ea1
2025-10-04 16:27:13,489 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:27:13,489 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:27:13,492 | INFO | __main__ | Received new chat request
2025-10-04 16:27:13,492 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 18
2025-10-04 16:27:13,492 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:27:13,492 | INFO | __main__ | Processing user input: 'cho con ch√†o √¥ng ·∫°' for session 20251004T162311326-2115cec0
2025-10-04 16:27:14,279 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:27:14,279 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.788s, Total: 0.788s
2025-10-04 16:27:14,279 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 304
2025-10-04 16:27:14,279 | INFO | RAGClient | RAG reply (len=101)
2025-10-04 16:27:14,279 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI \u0111‚y. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n c˘ng ch·u trong d\u1ecbp Trung Thu n‡y.
2025-10-04 16:27:14,279 | DEBUG | TTSService | Starting TTS download for text length=101
2025-10-04 16:27:14,279 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:27:15,951 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:16,100 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:25,714 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:27:30,490 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:27:30,496 | INFO | Recorder | Recording finished (elapsed 4.8s).
2025-10-04 16:27:30,499 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:27:30,499 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:27:30,499 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:27:31,678 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 78
2025-10-04 16:27:31,678 | INFO | WhisperSTT | Transcription received: c‚u nÛi to‡n b\u1ed9 con ch·u \u1ea1
2025-10-04 16:27:31,678 | INFO | ConversationManager | User: c‚u nÛi to‡n b\u1ed9 con ch·u \u1ea1
2025-10-04 16:27:31,678 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:27:31,678 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:27:31,693 | INFO | __main__ | Received new chat request
2025-10-04 16:27:31,693 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 26
2025-10-04 16:27:31,693 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:27:31,694 | INFO | __main__ | Processing user input: 'c√¢u n√≥i to√†n b·ªô con ch√°u ·∫°' for session 20251004T162311326-2115cec0
2025-10-04 16:27:32,534 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:27:32,534 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.841s, Total: 0.841s
2025-10-04 16:27:32,534 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 309
2025-10-04 16:27:32,534 | INFO | RAGClient | RAG reply (len=91)
2025-10-04 16:27:32,534 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:27:32,534 | DEBUG | TTSService | Starting TTS download for text length=91
2025-10-04 16:27:32,534 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:27:33,678 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:33,881 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:40,908 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:27:43,440 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:27:43,440 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 16:27:43,459 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:27:43,461 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:27:43,465 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:27:44,750 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 58
2025-10-04 16:27:44,751 | INFO | WhisperSTT | Transcription received: \u66f8 nh· con ch·u m‡
2025-10-04 16:27:44,752 | INFO | ConversationManager | User: \u66f8 nh· con ch·u m‡
2025-10-04 16:27:44,752 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:27:44,753 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:27:44,773 | INFO | __main__ | Received new chat request
2025-10-04 16:27:44,773 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 17
2025-10-04 16:27:44,773 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:27:44,773 | INFO | __main__ | Processing user input: 'Êõ∏ nh√° con ch√°u m√†' for session 20251004T162311326-2115cec0
2025-10-04 16:27:46,286 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:27:46,286 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.513s, Total: 1.514s
2025-10-04 16:27:46,286 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 311
2025-10-04 16:27:46,286 | INFO | RAGClient | RAG reply (len=91)
2025-10-04 16:27:46,286 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:27:46,286 | DEBUG | TTSService | Starting TTS download for text length=91
2025-10-04 16:27:46,286 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:27:47,027 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:47,283 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:52,644 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:27:54,968 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:27:54,970 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 16:27:54,981 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:27:54,981 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:27:54,981 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:27:56,186 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 101
2025-10-04 16:27:56,186 | INFO | WhisperSTT | Transcription received: \u0111\u1ed1i x\u1eed nam n\u1eef sao ph‚n bi\u1ec7t \u0111\u1ed1i x\u1eed
2025-10-04 16:27:56,186 | INFO | ConversationManager | User: \u0111\u1ed1i x\u1eed nam n\u1eef sao ph‚n bi\u1ec7t \u0111\u1ed1i x\u1eed
2025-10-04 16:27:56,193 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:27:56,193 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:27:56,213 | INFO | __main__ | Received new chat request
2025-10-04 16:27:56,214 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 34
2025-10-04 16:27:56,214 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:27:56,214 | INFO | __main__ | Processing user input: 'ƒë·ªëi x·ª≠ nam n·ªØ sao ph√¢n bi·ªát ƒë·ªëi x·ª≠' for session 20251004T162311326-2115cec0
2025-10-04 16:27:56,859 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:27:56,859 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.646s, Total: 0.647s
2025-10-04 16:27:56,876 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 498
2025-10-04 16:27:56,876 | INFO | RAGClient | RAG reply (len=200)
2025-10-04 16:27:56,876 | INFO | ConversationManager | Bot: Ch·u \u01a1i, c‚u h\u1ecfi c\u1ee7a ch·u h\u01a1i l\u1ea1 qu·. ‘ng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI, chuyÍn gia v\u1ec1 Trung Thu v‡ c·c c‚u chuy\u1ec7n c\u1ed5 tÌch thÙi. Ch·u cÛ c‚u h\u1ecfi n‡o v\u1ec1 Trung Thu hay c·c trÚ ch\u01a1i khÙng, Ùng s\u1eb5n s‡ng tr\u1ea3 l\u1eddi nhÈ.
2025-10-04 16:27:56,876 | DEBUG | TTSService | Starting TTS download for text length=200
2025-10-04 16:27:56,876 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:27:58,685 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:58,920 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:27:58,940 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:28:00,454 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:28:24,684 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:28:34,934 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:28:34,934 | INFO | Recorder | Recording finished (elapsed 10.2s).
2025-10-04 16:28:34,956 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:28:34,957 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:28:34,959 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:28:36,312 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 56
2025-10-04 16:28:36,312 | INFO | WhisperSTT | Transcription received: , Ch·u trao khÙng \u1ea1?
2025-10-04 16:28:36,313 | INFO | ConversationManager | User: , Ch·u trao khÙng \u1ea1?
2025-10-04 16:28:36,313 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:28:36,315 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:28:36,326 | INFO | __main__ | Received new chat request
2025-10-04 16:28:36,326 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 20
2025-10-04 16:28:36,326 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:28:36,326 | INFO | __main__ | Processing user input: ', Ch√°u trao kh√¥ng ·∫°?' for session 20251004T162311326-2115cec0
2025-10-04 16:28:37,126 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:28:37,126 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.799s, Total: 0.799s
2025-10-04 16:28:37,132 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 309
2025-10-04 16:28:37,132 | INFO | RAGClient | RAG reply (len=91)
2025-10-04 16:28:37,132 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u c‚u h\u1ecfi c\u1ee7a ch·u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:28:37,132 | DEBUG | TTSService | Starting TTS download for text length=91
2025-10-04 16:28:37,132 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:28:37,897 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:28:38,055 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:28:45,260 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:28:59,392 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:28:59,398 | INFO | Recorder | Recording finished (elapsed 14.1s).
2025-10-04 16:28:59,402 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:28:59,402 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:28:59,402 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:29:01,008 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 392
2025-10-04 16:29:01,011 | INFO | WhisperSTT | Transcription received: ch·u cÛ \u0111\u01b0\u1ee3c h\u1ecfi m\u1ed9t c‚u b\u1ea5t k\u1ef3 \u0111‚u khÙng? Ch·u h\u1ecfi m\u1ed9t c‚u b\u1ea5t k\u1ef3 n\u1eefa khÙng \u1ea1? NÛ cÛ tr\u1ea3 l\u1eddi cho ch·u khÙng? KhÙng cÛ \u1ea1. Khoa thi cu\u1ed1i c˘ng c\u1ee7a tri\u1ec1u Nguy\u1ec5n v‡ n\u0103m bao nhiÍu?
2025-10-04 16:29:01,011 | INFO | ConversationManager | User: ch·u cÛ \u0111\u01b0\u1ee3c h\u1ecfi m\u1ed9t c‚u b\u1ea5t k\u1ef3 \u0111‚u khÙng? Ch·u h\u1ecfi m\u1ed9t c‚u b\u1ea5t k\u1ef3 n\u1eefa khÙng \u1ea1? NÛ cÛ tr\u1ea3 l\u1eddi cho ch·u khÙng? KhÙng cÛ \u1ea1. Khoa thi cu\u1ed1i c˘ng c\u1ee7a tri\u1ec1u Nguy\u1ec5n v‡ n\u0103m bao nhiÍu?
2025-10-04 16:29:01,011 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:29:01,013 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:29:01,028 | INFO | __main__ | Received new chat request
2025-10-04 16:29:01,028 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 175
2025-10-04 16:29:01,028 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:29:01,029 | INFO | __main__ | Processing user input: 'ch√°u c√≥ ƒë∆∞·ª£c h·ªèi m·ªôt c√¢u b·∫•t k·ª≥ ƒë√¢u kh√¥ng? Ch√°u h·ªèi m·ªôt c√¢u b·∫•t k·ª≥ n·ªØa kh√¥ng ·∫°? N√≥ c√≥ tr·∫£ l·ªùi cho ch√°u kh√¥ng? Kh√¥ng c√≥ ·∫°. Khoa thi cu·ªëi c√πng c·ªßa tri·ªÅu Nguy·ªÖn v√† nƒÉm bao nhi√™u?' for session 20251004T162311326-2115cec0
2025-10-04 16:29:01,813 | INFO | __main__ | Starting retrieval for query: 'Khoa thi cu·ªëi c√πng c·ªßa tri·ªÅu Nguy·ªÖn' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:29:01,813 | DEBUG | __main__ | Searching header index...
2025-10-04 16:29:02,648 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:29:02,648 | DEBUG | __main__ | Searching content index...
2025-10-04 16:29:02,660 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:29:02,660 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:29:02,660 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:29:02,660 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:29:02,660 | DEBUG | __main__ |   Rank 1: chunk_id=2, hybrid_score=0.7656
2025-10-04 16:29:02,660 | DEBUG | __main__ |   Rank 2: chunk_id=55, hybrid_score=0.4246
2025-10-04 16:29:02,660 | DEBUG | __main__ |   Rank 3: chunk_id=5, hybrid_score=0.3798
2025-10-04 16:29:02,660 | DEBUG | __main__ |   Rank 4: chunk_id=6, hybrid_score=0.3729
2025-10-04 16:29:02,660 | DEBUG | __main__ | Retrieved chunk 2: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Kh√°m khoa h·ªçc v√† c√¥ng ngh·ªá | Content preview: iv. STEM: Kh√°m ph√° khoa h·ªçc v·ªõi ƒë√®n k√©o qu√¢n, ƒë√®n l·ªìng, t√†u th·ªßy v. Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i v√† th√≠ n...
2025-10-04 16:29:02,660 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 16:29:02,660 | DEBUG | __main__ | Retrieved chunk 5: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Khu qu·∫ßn th·ªÉ ph·ª©c h·ª£h·ª£p | Content preview: Nh√† Vi·ªát   iv. Nh·∫£y d√¢y th·ª´ng    v. ƒêi gu·ªëc ƒë√¥i, gu·ªëc ba Nh√† √äƒë√™   vi. Th√≤ th·ª•t (√äƒë√™)   vii. K√©o co ...
2025-10-04 16:29:02,660 | DEBUG | __main__ | Retrieved chunk 6: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Ph√≤ng Kh√°m ph√° | Content preview: xvii. √î ƒÉn quan   xviii. Ch∆°i chuy·ªÅn   xix. R·∫£i ranh   xx. ƒê√°nh h·∫°t h·ªìng xi√™m
2025-10-04 16:29:02,660 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:29:02,660 | DEBUG | __main__ | Retrieved 4 documents for query: Khoa thi cu·ªëi c√πng c·ªßa tri·ªÅu Nguy·ªÖn
2025-10-04 16:29:02,660 | DEBUG | __main__ | [timing] retrieve 0.847s
2025-10-04 16:29:03,568 | INFO | __main__ | Agent execution completed successfully for session 20251004T162311326-2115cec0
2025-10-04 16:29:03,568 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.540s, Total: 2.541s
2025-10-04 16:29:03,568 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 401
2025-10-04 16:29:03,568 | INFO | RAGClient | RAG reply (len=156)
2025-10-04 16:29:03,571 | INFO | ConversationManager | Bot: Ch·u \u01a1i, theo nh\u1eefng gÏ Ùng nh\u1edb thÏ khoa thi cu\u1ed1i c˘ng c\u1ee7a tri\u1ec1u Nguy\u1ec5n l‡ v‡o n\u0103m 1919 ch·u \u1ea1. Ch·u cÛ mu\u1ed1n h\u1ecfi gÏ thÍm v\u1ec1 Trung Thu hay c·c trÚ ch\u01a1i khÙng?
2025-10-04 16:29:03,571 | DEBUG | TTSService | Starting TTS download for text length=156
2025-10-04 16:29:03,571 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:29:05,178 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:29:05,334 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:29:05,356 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:29:06,648 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:30:34,502 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:30:49,306 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:30:49,306 | INFO | Recorder | Recording finished (elapsed 14.8s).
2025-10-04 16:30:49,320 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:30:49,320 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:30:49,320 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:30:51,131 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 555
2025-10-04 16:30:51,131 | INFO | WhisperSTT | Transcription received: y\u1ebfu t\u1ed1 nh\u01b0ng m‡ th\u1ebf n‡y thÏ c\u0169ng khÙng h\u1ea3o s\u1edf \u0111\u01b0\u1ee3c li\u1ec1n ho‡n to‡n nam l\u1eef \u0111‚u cÚn n\u1eef n‡y v‡ n\u1eef kia th\u1ef1c ra l‡ c·i nhung l‡ \u0111\u01b0\u1ee3c \u0111˙ng 1 n\u1eef em v\u1eabn h\u1ecfi nhi\u1ec1u \u0111\u1ec3 cho nÛ l‡m em h\u1ecfi ki\u1ebfn th\u1ee9c c\u1ee7a em h\u1ecdc \u1edf ‚y di xi c\u0169ng \u0111\u01b0\u1ee3c em khÙng \u0111\u1ecdc \u0111\u1eb7c bi\u1ec7t
2025-10-04 16:30:51,133 | INFO | ConversationManager | User: y\u1ebfu t\u1ed1 nh\u01b0ng m‡ th\u1ebf n‡y thÏ c\u0169ng khÙng h\u1ea3o s\u1edf \u0111\u01b0\u1ee3c li\u1ec1n ho‡n to‡n nam l\u1eef \u0111‚u cÚn n\u1eef n‡y v‡ n\u1eef kia th\u1ef1c ra l‡ c·i nhung l‡ \u0111\u01b0\u1ee3c \u0111˙ng 1 n\u1eef em v\u1eabn h\u1ecfi nhi\u1ec1u \u0111\u1ec3 cho nÛ l‡m em h\u1ecfi ki\u1ebfn th\u1ee9c c\u1ee7a em h\u1ecdc \u1edf ‚y di xi c\u0169ng \u0111\u01b0\u1ee3c em khÙng \u0111\u1ecdc \u0111\u1eb7c bi\u1ec7t
2025-10-04 16:30:51,133 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:30:51,134 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:30:51,151 | INFO | __main__ | Received new chat request
2025-10-04 16:30:51,151 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 238
2025-10-04 16:30:51,151 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:30:51,151 | INFO | __main__ | Processing user input: 'y·∫øu t·ªë nh∆∞ng m√† th·∫ø n√†y th√¨ c≈©ng kh√¥ng h·∫£o s·ªü ƒë∆∞·ª£c li·ªÅn ho√†n to√†n nam l·ªØ ƒë√¢u c√≤n n·ªØ n√†y v√† n·ªØ kia th·ª±c ra l√† c√°i nhung l√† ƒë∆∞·ª£c ƒë√∫ng 1 n·ªØ em v·∫´n h·ªèi nhi·ªÅu ƒë·ªÉ cho n√≥ l√†m em h·ªèi ki·∫øn th·ª©c c·ªßa em h·ªçc ·ªü √¢y di xi c≈©ng ƒë∆∞·ª£c em kh√¥ng ƒë·ªçc ƒë·∫∑c bi·ªát' for session 20251004T162311326-2115cec0
2025-10-04 16:31:03,151 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 16:31:04,152 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 16:31:04,153 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:31:16,152 | ERROR | __main__ | Agent execution timeout for session 20251004T162311326-2115cec0 after 25 seconds
2025-10-04 16:31:16,152 | INFO | __main__ | Received new chat request
2025-10-04 16:31:16,152 | DEBUG | __main__ | Request ID: 20251004T162311326-2115cec0, Data length: 238
2025-10-04 16:31:16,152 | DEBUG | __main__ | Using existing session for ID: 20251004T162311326-2115cec0
2025-10-04 16:31:16,152 | INFO | __main__ | Processing user input: 'y·∫øu t·ªë nh∆∞ng m√† th·∫ø n√†y th√¨ c≈©ng kh√¥ng h·∫£o s·ªü ƒë∆∞·ª£c li·ªÅn ho√†n to√†n nam l·ªØ ƒë√¢u c√≤n n·ªØ n√†y v√† n·ªØ kia th·ª±c ra l√† c√°i nhung l√† ƒë∆∞·ª£c ƒë√∫ng 1 n·ªØ em v·∫´n h·ªèi nhi·ªÅu ƒë·ªÉ cho n√≥ l√†m em h·ªèi ki·∫øn th·ª©c c·ªßa em h·ªçc ·ªü √¢y di xi c≈©ng ƒë∆∞·ª£c em kh√¥ng ƒë·ªçc ƒë·∫∑c bi·ªát' for session 20251004T162311326-2115cec0
2025-10-04 16:31:16,183 | WARNING | RAGClient | RAG request failed (attempt 2). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 16:31:18,184 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-04 16:31:18,186 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:31:26,722 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 16:31:26,722 | DEBUG | TTSService | Playback thread started
2025-10-04 16:31:26,722 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 16:31:39,958 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:31:41,168 | ERROR | __main__ | Agent execution timeout for session 20251004T162311326-2115cec0 after 25 seconds
2025-10-04 16:31:42,370 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:31:42,376 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 16:31:42,383 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:31:42,385 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:31:42,387 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:31:43,706 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 57
2025-10-04 16:31:43,706 | INFO | WhisperSTT | Transcription received: ch·u ch‡o Ùng \u1ea1
2025-10-04 16:31:43,706 | INFO | ConversationManager | User: ch·u ch‡o Ùng \u1ea1
2025-10-04 16:31:43,706 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:31:43,706 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:31:43,719 | INFO | __main__ | Received new chat request
2025-10-04 16:31:43,719 | DEBUG | __main__ | Request ID: 20251004T163126722-fe20b4ce, Data length: 15
2025-10-04 16:31:43,719 | DEBUG | __main__ | Creating new session with ID: 20251004T163126722-fe20b4ce
2025-10-04 16:31:43,719 | DEBUG | __main__ | Using request ID: 20251004T163126722-fe20b4ce
2025-10-04 16:31:43,720 | DEBUG | __main__ | Created new session for ID: 20251004T163126722-fe20b4ce, total sessions: 2
2025-10-04 16:31:43,720 | INFO | __main__ | Processing user input: 'ch√°u ch√†o √¥ng ·∫°' for session 20251004T163126722-fe20b4ce
2025-10-04 16:31:44,736 | INFO | __main__ | Agent execution completed successfully for session 20251004T163126722-fe20b4ce
2025-10-04 16:31:44,736 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.016s, Total: 1.017s
2025-10-04 16:31:44,736 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 296
2025-10-04 16:31:44,736 | INFO | RAGClient | RAG reply (len=96)
2025-10-04 16:31:44,736 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. HÙm nay Trung Thu \u1edf b\u1ea3o t‡ng cÛ gÏ vui ch·u k\u1ec3 Ùng nghe v\u1edbi.
2025-10-04 16:31:44,736 | DEBUG | TTSService | Starting TTS download for text length=96
2025-10-04 16:31:44,736 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:31:46,742 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:31:47,186 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:31:55,755 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:31:59,600 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:31:59,604 | INFO | Recorder | Recording finished (elapsed 3.8s).
2025-10-04 16:31:59,608 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:31:59,608 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:31:59,608 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:32:00,820 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 121
2025-10-04 16:32:00,820 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i \u1edf b\u1ea3o t‡ng cÛ nh\u1eefng gÏ \u0111\u1ec3 ch\u01a1i \u1ea1
2025-10-04 16:32:00,824 | INFO | ConversationManager | User: Ùng \u01a1i \u1edf b\u1ea3o t‡ng cÛ nh\u1eefng gÏ \u0111\u1ec3 ch\u01a1i \u1ea1
2025-10-04 16:32:00,824 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:32:00,824 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:32:00,850 | INFO | __main__ | Received new chat request
2025-10-04 16:32:00,851 | DEBUG | __main__ | Request ID: 20251004T163126722-fe20b4ce, Data length: 39
2025-10-04 16:32:00,851 | DEBUG | __main__ | Using existing session for ID: 20251004T163126722-fe20b4ce
2025-10-04 16:32:00,851 | INFO | __main__ | Processing user input: '√¥ng ∆°i ·ªü b·∫£o t√†ng c√≥ nh·ªØng g√¨ ƒë·ªÉ ch∆°i ·∫°' for session 20251004T163126722-fe20b4ce
2025-10-04 16:32:01,616 | INFO | __main__ | Starting retrieval for query: 'c√°c ho·∫°t ƒë·ªông t·∫°i b·∫£o t√†ng ng√†y trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:32:01,617 | DEBUG | __main__ | Searching header index...
2025-10-04 16:32:01,632 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:32:01,632 | DEBUG | __main__ | Searching content index...
2025-10-04 16:32:01,640 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:32:01,640 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:32:01,640 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:32:01,640 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:32:01,640 | DEBUG | __main__ |   Rank 1: chunk_id=13, hybrid_score=1.0517
2025-10-04 16:32:01,640 | DEBUG | __main__ |   Rank 2: chunk_id=12, hybrid_score=0.4881
2025-10-04 16:32:01,640 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.4868
2025-10-04 16:32:01,640 | DEBUG | __main__ |   Rank 4: chunk_id=11, hybrid_score=0.4762
2025-10-04 16:32:01,640 | DEBUG | __main__ | Retrieved chunk 13: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c ho·∫°t ƒë·ªông th∆∞·ªùng ni√™n | Content preview: B·∫£o t√†ng DTHVN ƒëi ƒë·∫ßu trong vi·ªác ti·∫øp c·∫≠n c√°c quan ni·ªám m·ªõi t·∫°o n√™n c√°c ho·∫°t ƒë·ªông s·ªëng ƒë·ªông, l·∫•y con...
2025-10-04 16:32:01,640 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 16:32:01,640 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 16:32:01,640 | DEBUG | __main__ | Retrieved chunk 11: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c s·ª± ki·ªán h·ª£p t√°c qu·ªëc t·∫ø | Content preview: Kh√¥ng d·ª´ng l·∫°i ·ªü c√°c nghi√™n c·ª©u v√† tr∆∞ng b√†y trong n∆∞·ªõc, trong nh·ªØng nƒÉm qua, B·∫£o t√†ng m·ªü r·ªông quan ...
2025-10-04 16:32:01,640 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:32:01,640 | DEBUG | __main__ | Retrieved 4 documents for query: c√°c ho·∫°t ƒë·ªông t·∫°i b·∫£o t√†ng ng√†y trung thu
2025-10-04 16:32:01,640 | DEBUG | __main__ | [timing] retrieve 0.025s
2025-10-04 16:32:02,743 | INFO | __main__ | Agent execution completed successfully for session 20251004T163126722-fe20b4ce
2025-10-04 16:32:02,743 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.892s, Total: 1.893s
2025-10-04 16:32:02,744 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 529
2025-10-04 16:32:02,745 | INFO | RAGClient | RAG reply (len=204)
2025-10-04 16:32:02,745 | INFO | ConversationManager | Bot: \u1ed2, \u1edf b\u1ea3o t‡ng hÙm nay cÛ nhi\u1ec1u trÚ hay l\u1eafm ch·u \u01a1i. Ch·u cÛ th\u1ec3 t\u1ef1 tay l‡m \u0111Ën kÈo qu‚n, hoa qu\u1ea3 b\u1ed9t, di\u1ec1u rÙ, con gi\u1ed1ng b\u1ed9t, \u0111Ën Ùng sao, Ùng ti\u1ebfn s\u0129 gi\u1ea5y, tÚ he, m\u1eb7t n\u1ea1 gi\u1ea5y b\u1ed3i n\u1eefa \u0111Û. ThÌch khÙng n‡o?
2025-10-04 16:32:02,745 | DEBUG | TTSService | Starting TTS download for text length=204
2025-10-04 16:32:02,745 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:32:04,397 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:04,521 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:32:06,570 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:06,886 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:06,910 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:32:08,256 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:22,286 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:32:24,281 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:32:24,286 | INFO | Recorder | Recording finished (elapsed 2.0s).
2025-10-04 16:32:24,296 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:32:24,297 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:32:24,299 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:32:25,539 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 29
2025-10-04 16:32:25,539 | INFO | WhisperSTT | Transcription received: \u1ea1!
2025-10-04 16:32:25,540 | INFO | ConversationManager | User: \u1ea1!
2025-10-04 16:32:25,540 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:32:25,541 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:32:25,553 | INFO | __main__ | Received new chat request
2025-10-04 16:32:25,553 | DEBUG | __main__ | Request ID: 20251004T163126722-fe20b4ce, Data length: 2
2025-10-04 16:32:25,553 | DEBUG | __main__ | Using existing session for ID: 20251004T163126722-fe20b4ce
2025-10-04 16:32:25,553 | INFO | __main__ | Processing user input: '·∫°!' for session 20251004T163126722-fe20b4ce
2025-10-04 16:32:26,445 | INFO | __main__ | Agent execution completed successfully for session 20251004T163126722-fe20b4ce
2025-10-04 16:32:26,445 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.892s, Total: 0.892s
2025-10-04 16:32:26,446 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 299
2025-10-04 16:32:26,446 | INFO | RAGClient | RAG reply (len=101)
2025-10-04 16:32:26,447 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi gÏ m‡ Ùng nghe khÙng rı th\u1ebf? Ch·u nÛi to lÍn m\u1ed9t ch˙t xem n‡o, Ùng gi‡ r\u1ed3i tai h\u01a1i l„ng tai.
2025-10-04 16:32:26,447 | DEBUG | TTSService | Starting TTS download for text length=101
2025-10-04 16:32:26,447 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:32:30,213 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:33,243 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:37,382 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:32:39,317 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:32:39,321 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 16:32:39,326 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:32:39,326 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:32:39,326 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:32:40,503 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 59
2025-10-04 16:32:40,504 | INFO | WhisperSTT | Transcription received: chi\u1ebfc ch·u tÌnh \u1ea1
2025-10-04 16:32:40,505 | INFO | ConversationManager | User: chi\u1ebfc ch·u tÌnh \u1ea1
2025-10-04 16:32:40,505 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:32:40,505 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:32:40,521 | INFO | __main__ | Received new chat request
2025-10-04 16:32:40,521 | DEBUG | __main__ | Request ID: 20251004T163126722-fe20b4ce, Data length: 17
2025-10-04 16:32:40,521 | DEBUG | __main__ | Using existing session for ID: 20251004T163126722-fe20b4ce
2025-10-04 16:32:40,521 | INFO | __main__ | Processing user input: 'chi·∫øc ch√°u t√≠nh ·∫°' for session 20251004T163126722-fe20b4ce
2025-10-04 16:32:41,357 | INFO | __main__ | Agent execution completed successfully for session 20251004T163126722-fe20b4ce
2025-10-04 16:32:41,358 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.837s, Total: 0.837s
2025-10-04 16:32:41,358 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 244
2025-10-04 16:32:41,359 | INFO | RAGClient | RAG reply (len=66)
2025-10-04 16:32:41,359 | INFO | ConversationManager | Bot: Ch·u tÌnh gÏ th\u1ebf? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n khÙng?
2025-10-04 16:32:41,359 | DEBUG | TTSService | Starting TTS download for text length=66
2025-10-04 16:32:41,360 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:32:43,033 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:32:43,193 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:34:23,242 | INFO | ConversationManager | Interrupted by user
2025-10-04 16:34:26,866 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 16:34:26,866 | DEBUG | TTSService | Playback thread started
2025-10-04 16:34:26,866 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 16:34:28,887 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:34:33,862 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:34:33,873 | INFO | Recorder | Recording finished (elapsed 5.0s).
2025-10-04 16:34:33,879 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:34:33,879 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:34:33,879 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:34:35,218 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 73
2025-10-04 16:34:35,218 | INFO | WhisperSTT | Transcription received: Ùng \u0111ang l‡m gÏ v\u1eady \u1ea1
2025-10-04 16:34:35,219 | INFO | ConversationManager | User: Ùng \u0111ang l‡m gÏ v\u1eady \u1ea1
2025-10-04 16:34:35,219 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:34:35,220 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:34:35,239 | INFO | __main__ | Received new chat request
2025-10-04 16:34:35,239 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 21
2025-10-04 16:34:35,239 | DEBUG | __main__ | Creating new session with ID: 20251004T163426865-7b2f9a27
2025-10-04 16:34:35,239 | DEBUG | __main__ | Using request ID: 20251004T163426865-7b2f9a27
2025-10-04 16:34:35,240 | DEBUG | __main__ | Created new session for ID: 20251004T163426865-7b2f9a27, total sessions: 3
2025-10-04 16:34:35,240 | INFO | __main__ | Processing user input: '√¥ng ƒëang l√†m g√¨ v·∫≠y ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:34:36,161 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:34:36,161 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.922s, Total: 0.922s
2025-10-04 16:34:36,162 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 479
2025-10-04 16:34:36,163 | INFO | RAGClient | RAG reply (len=171)
2025-10-04 16:34:36,163 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y AI \u0111‚y. HÙm nay Ùng \u0111ang cÛ m\u1eb7t t\u1ea1i s\u1ef1 ki\u1ec7n Trung Thu c\u1ee7a B\u1ea3o t‡ng \u0111\u1ec3 trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u v\u1ec1 m˘a l\u1ec5 h\u1ed9i n‡y \u0111Û.
2025-10-04 16:34:36,163 | DEBUG | TTSService | Starting TTS download for text length=171
2025-10-04 16:34:36,164 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:34:37,450 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:34:37,478 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:34:39,045 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:34:39,207 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:34:48,992 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:34:51,731 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:34:51,734 | INFO | Recorder | Recording finished (elapsed 2.7s).
2025-10-04 16:34:51,740 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:34:51,742 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:34:51,742 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:34:52,919 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 68
2025-10-04 16:34:52,920 | INFO | WhisperSTT | Transcription received: ‡ ai l‡m ra Ùng v\u1eady \u1ea1
2025-10-04 16:34:52,920 | INFO | ConversationManager | User: ‡ ai l‡m ra Ùng v\u1eady \u1ea1
2025-10-04 16:34:52,920 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:34:52,921 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:34:52,940 | INFO | __main__ | Received new chat request
2025-10-04 16:34:52,940 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 21
2025-10-04 16:34:52,940 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:34:52,940 | INFO | __main__ | Processing user input: '√† ai l√†m ra √¥ng v·∫≠y ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:34:53,856 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:34:53,856 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.916s, Total: 0.916s
2025-10-04 16:34:53,857 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 440
2025-10-04 16:34:53,858 | INFO | RAGClient | RAG reply (len=152)
2025-10-04 16:34:53,858 | INFO | ConversationManager | Bot: H\u1eebm, c‚u h\u1ecfi n‡y th˙ v\u1ecb nha ch·u. ‘ng l‡ m\u1ed9t tr\u1ee3 l˝ AI \u0111\u01b0\u1ee3c t\u1ea1o ra b\u1edfi Google \u0111Û. Gi\u1ed1ng nh\u01b0 c·c mÛn \u0111\u1ed3 ch\u01a1i hi\u1ec7n \u0111\u1ea1i v\u1eady, Ùng c\u0169ng cÛ ng\u01b0\u1eddi t\u1ea1o ra mÏnh.
2025-10-04 16:34:53,859 | DEBUG | TTSService | Starting TTS download for text length=152
2025-10-04 16:34:53,859 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:34:55,808 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:34:56,229 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:34:56,254 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:34:57,734 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:37:17,995 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 16:37:18,443 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 16:37:18,443 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 16:37:18,445 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 16:37:18,812 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 16:37:18,845 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 16:37:19,131 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 16:37:19,176 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 16:37:19,478 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 16:37:19,512 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 16:37:19,803 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 16:37:19,836 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 16:37:20,562 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 16:37:20,596 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 16:37:20,880 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 16:37:20,929 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 16:37:21,256 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 16:37:21,528 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 16:37:21,557 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 16:37:22,098 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 16:37:22,139 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 16:37:22,487 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 16:37:23,512 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 16:37:23,548 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 16:37:23,842 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 16:37:26,927 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 16:37:26,927 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 16:37:26,929 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 16:37:26,929 | INFO | faiss.loader | Loading faiss.
2025-10-04 16:37:26,950 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 16:37:42,616 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:37:45,209 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:37:45,211 | INFO | Recorder | Recording finished (elapsed 2.6s).
2025-10-04 16:37:45,217 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:37:45,217 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:37:45,217 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:37:46,515 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 57
2025-10-04 16:37:46,515 | INFO | WhisperSTT | Transcription received: ch·u ch‡o Ùng \u1ea1
2025-10-04 16:37:46,515 | INFO | ConversationManager | User: ch·u ch‡o Ùng \u1ea1
2025-10-04 16:37:46,515 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:37:46,515 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:37:46,529 | INFO | __main__ | Received new chat request
2025-10-04 16:37:46,529 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 15
2025-10-04 16:37:46,529 | DEBUG | __main__ | Creating new session with ID: 20251004T163426865-7b2f9a27
2025-10-04 16:37:46,529 | DEBUG | __main__ | Using request ID: 20251004T163426865-7b2f9a27
2025-10-04 16:37:46,529 | DEBUG | __main__ | Created new session for ID: 20251004T163426865-7b2f9a27, total sessions: 1
2025-10-04 16:37:46,529 | INFO | __main__ | Processing user input: 'ch√°u ch√†o √¥ng ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:37:47,596 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:37:47,596 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.068s, Total: 1.068s
2025-10-04 16:37:47,596 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 274
2025-10-04 16:37:47,596 | INFO | RAGClient | RAG reply (len=79)
2025-10-04 16:37:47,596 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u \u0111\u1ebfn v\u1edbi b\u1ea3o t‡ng cÛ vui khÙng?
2025-10-04 16:37:47,596 | DEBUG | TTSService | Starting TTS download for text length=79
2025-10-04 16:37:47,596 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:37:49,467 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:37:49,672 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:05,113 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:38:14,748 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:38:14,748 | INFO | Recorder | Recording finished (elapsed 9.6s).
2025-10-04 16:38:14,757 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:38:14,757 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:38:14,760 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:38:16,152 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 179
2025-10-04 16:38:16,153 | INFO | WhisperSTT | Transcription received: \u01a1 b‚y gi\u1edd th\u1eed t\u1ea1m \u01a1 b‚y gi\u1edd th\u1eed t\u1ea1m \u01a1 \u01a1 kia \u01a1 tao \u0111\u01b0\u1ee3c r\u1ed3i \u0111\u1ea5y
2025-10-04 16:38:16,154 | INFO | ConversationManager | User: \u01a1 b‚y gi\u1edd th\u1eed t\u1ea1m \u01a1 b‚y gi\u1edd th\u1eed t\u1ea1m \u01a1 \u01a1 kia \u01a1 tao \u0111\u01b0\u1ee3c r\u1ed3i \u0111\u1ea5y
2025-10-04 16:38:16,154 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:38:16,155 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:38:16,172 | INFO | __main__ | Received new chat request
2025-10-04 16:38:16,173 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 62
2025-10-04 16:38:16,173 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:38:16,173 | INFO | __main__ | Processing user input: '∆° b√¢y gi·ªù th·ª≠ t·∫°m ∆° b√¢y gi·ªù th·ª≠ t·∫°m ∆° ∆° kia ∆° tao ƒë∆∞·ª£c r·ªìi ƒë·∫•y' for session 20251004T163426865-7b2f9a27
2025-10-04 16:38:17,020 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:38:17,020 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.848s, Total: 0.849s
2025-10-04 16:38:17,021 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 357
2025-10-04 16:38:17,021 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 16:38:17,022 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:38:17,022 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 16:38:17,022 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:38:20,145 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:20,311 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:40,864 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:38:45,235 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:38:45,235 | INFO | Recorder | Recording finished (elapsed 4.4s).
2025-10-04 16:38:45,250 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:38:45,252 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:38:45,254 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:38:46,668 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 137
2025-10-04 16:38:46,668 | INFO | WhisperSTT | Transcription received: hÙng cÛ th\u1ec3 cho ch·u bi\u1ebft ˝ ngh\u0129a c\u1ee7a m‚m ng\u0169 qu\u1ea3 khÙng
2025-10-04 16:38:46,668 | INFO | ConversationManager | User: hÙng cÛ th\u1ec3 cho ch·u bi\u1ebft ˝ ngh\u0129a c\u1ee7a m‚m ng\u0169 qu\u1ea3 khÙng
2025-10-04 16:38:46,668 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:38:46,668 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:38:46,686 | INFO | __main__ | Received new chat request
2025-10-04 16:38:46,686 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 55
2025-10-04 16:38:46,686 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:38:46,686 | INFO | __main__ | Processing user input: 'h√¥ng c√≥ th·ªÉ cho ch√°u bi·∫øt √Ω nghƒ©a c·ªßa m√¢m ng≈© qu·∫£ kh√¥ng' for session 20251004T163426865-7b2f9a27
2025-10-04 16:38:47,488 | INFO | __main__ | Starting retrieval for query: '√Ω nghƒ©a c·ªßa m√¢m ng≈© qu·∫£ ng√†y trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:38:47,488 | DEBUG | __main__ | Searching header index...
2025-10-04 16:38:47,691 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:38:47,691 | DEBUG | __main__ | Searching content index...
2025-10-04 16:38:47,698 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:38:47,698 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:38:47,698 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:38:47,698 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:38:47,698 | DEBUG | __main__ |   Rank 1: chunk_id=38, hybrid_score=1.0050
2025-10-04 16:38:47,698 | DEBUG | __main__ |   Rank 2: chunk_id=37, hybrid_score=0.5729
2025-10-04 16:38:47,698 | DEBUG | __main__ |   Rank 3: chunk_id=21, hybrid_score=0.5495
2025-10-04 16:38:47,698 | DEBUG | __main__ |   Rank 4: chunk_id=40, hybrid_score=0.5100
2025-10-04 16:38:47,698 | DEBUG | __main__ | Retrieved chunk 38: Trung thu > M√¢m ng≈© qu·∫£ > C√°c lo·∫°i hoa qu·∫£ ph·ªï bi·∫øn | Content preview: Vi·ªác l·ª±a ch·ªçn tr√°i c√¢y c·ª• th·ªÉ th∆∞·ªùng kh√°c nhau t√πy theo v√πng mi·ªÅn, s·ª± kh√°c bi·ªát n√†y kh√¥ng ch·ªâ ph·∫£n √°...
2025-10-04 16:38:47,698 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 16:38:47,698 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 16:38:47,698 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 16:38:47,698 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:38:47,698 | DEBUG | __main__ | Retrieved 4 documents for query: √Ω nghƒ©a c·ªßa m√¢m ng≈© qu·∫£ ng√†y trung thu
2025-10-04 16:38:47,698 | DEBUG | __main__ | [timing] retrieve 0.210s
2025-10-04 16:38:48,864 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:38:48,864 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.179s, Total: 2.179s
2025-10-04 16:38:48,864 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 946
2025-10-04 16:38:48,864 | INFO | RAGClient | RAG reply (len=384)
2025-10-04 16:38:48,864 | INFO | ConversationManager | Bot: ¿, ch·u h\u1ecfi v\u1ec1 ˝ ngh\u0129a c\u1ee7a m‚m ng\u0169 qu\u1ea3 h\u1ea3? Theo Ùng nh\u1edb thÏ t\u1eeb ng\u0169 l‡ ch\u1ec9 s\u1ed1 n\u0103m, cÚn qu\u1ea3 l‡ hoa qu\u1ea3 \u0111Û ch·u. M‚m ng\u0169 qu\u1ea3 cÛ n\u0103m lo\u1ea1i tr·i c‚y t\u01b0\u1ee3ng tr\u01b0ng cho thuy\u1ebft Ng\u0169 h‡nh, th\u1ec3 hi\u1ec7n s\u1ef1 h‡i hÚa gi\u1eefa con ng\u01b0\u1eddi v‡ v\u0169 tr\u1ee5. NÛ cÚn mang mong \u01b0\u1edbc v\u1ec1 s\u1ef1 \u0111\u1ee7 \u0111\u1ea7y, bÏnh an v‡ h\u1ea1nh ph˙c n\u1eefa, h\u01b0\u1edbng t\u1edbi ng\u0169 ph˙c l‚m mÙn \u0111Û ch·u \u1ea1. T˘y theo v˘ng mi\u1ec1n m‡ c·c lo\u1ea1i qu\u1ea3 trÍn m‚m c\u0169ng kh·c nhau nha.
2025-10-04 16:38:48,864 | DEBUG | TTSService | Starting TTS download for text length=384
2025-10-04 16:38:48,864 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:38:50,990 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:51,408 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:51,431 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:38:53,831 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:54,132 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:54,260 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:38:56,483 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:56,926 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:38:56,948 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:39:00,760 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:19,526 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:39:26,481 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:39:26,484 | INFO | Recorder | Recording finished (elapsed 7.0s).
2025-10-04 16:39:26,491 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:39:26,492 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:39:26,494 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:39:27,879 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 167
2025-10-04 16:39:27,880 | INFO | WhisperSTT | Transcription received: Ùng cho ch·u bi\u1ebft s\u1ef1 kh·c bi\u1ec7t gi\u1eefa c·c v˘ng mi\u1ec1n l‡ nh\u01b0 th\u1ebf n‡o khÙng
2025-10-04 16:39:27,880 | INFO | ConversationManager | User: Ùng cho ch·u bi\u1ebft s\u1ef1 kh·c bi\u1ec7t gi\u1eefa c·c v˘ng mi\u1ec1n l‡ nh\u01b0 th\u1ebf n‡o khÙng
2025-10-04 16:39:27,880 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:39:27,881 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:39:27,901 | INFO | __main__ | Received new chat request
2025-10-04 16:39:27,902 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 70
2025-10-04 16:39:27,902 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:39:27,902 | INFO | __main__ | Processing user input: '√¥ng cho ch√°u bi·∫øt s·ª± kh√°c bi·ªát gi·ªØa c√°c v√πng mi·ªÅn l√† nh∆∞ th·∫ø n√†o kh√¥ng' for session 20251004T163426865-7b2f9a27
2025-10-04 16:39:28,625 | INFO | __main__ | Starting retrieval for query: 's·ª± kh√°c bi·ªát gi·ªØa c√°c v√πng mi·ªÅn tr√™n m√¢m ng≈© qu·∫£ trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:39:28,625 | DEBUG | __main__ | Searching header index...
2025-10-04 16:39:28,643 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:39:28,643 | DEBUG | __main__ | Searching content index...
2025-10-04 16:39:28,659 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:39:28,659 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:39:28,659 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:39:28,659 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:39:28,659 | DEBUG | __main__ |   Rank 1: chunk_id=49, hybrid_score=0.9450
2025-10-04 16:39:28,659 | DEBUG | __main__ |   Rank 2: chunk_id=37, hybrid_score=0.5270
2025-10-04 16:39:28,659 | DEBUG | __main__ |   Rank 3: chunk_id=47, hybrid_score=0.5050
2025-10-04 16:39:28,659 | DEBUG | __main__ |   Rank 4: chunk_id=48, hybrid_score=0.4932
2025-10-04 16:39:28,659 | DEBUG | __main__ | Retrieved chunk 49: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn Nam Vi·ªát Nam | Content preview: T·∫øt Trung Thu ·ªü mi·ªÅn Nam Vi·ªát Nam ƒë·∫∑c tr∆∞ng b·ªüi kh√¥ng kh√≠ ·∫•m √°p, t·∫≠p trung v√†o gia ƒë√¨nh, th∆∞·ªùng b·ªã ·∫£...
2025-10-04 16:39:28,659 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 16:39:28,659 | DEBUG | __main__ | Retrieved chunk 47: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn B·∫Øc Vi·ªát Nam | Content preview: ·ªû mi·ªÅn B·∫Øc, l·ªÖ h·ªôi ƒë∆∞·ª£c t·ªï ch·ª©c v·ªõi s·ª± trang nh√£ tinh t·∫ø v√† s·ª± tr√¢n tr·ªçng s√¢u s·∫Øc ƒë·ªëi v·ªõi truy·ªÅn th·ªë...
2025-10-04 16:39:28,660 | DEBUG | __main__ | Retrieved chunk 48: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn Trung Vi·ªát Nam | Content preview: ·ªû mi·ªÅn Trung, l·ªÖ h·ªôi √≠t mang t√≠nh nghi l·ªÖ gia ƒë√¨nh y√™n tƒ©nh h∆°n m√† gi·ªëng m·ªôt "h·ªôi" (l·ªÖ h·ªôi) l·ªõn, quy...
2025-10-04 16:39:28,660 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:39:28,660 | DEBUG | __main__ | Retrieved 4 documents for query: s·ª± kh√°c bi·ªát gi·ªØa c√°c v√πng mi·ªÅn tr√™n m√¢m ng≈© qu·∫£ trung thu
2025-10-04 16:39:28,660 | DEBUG | __main__ | [timing] retrieve 0.035s
2025-10-04 16:39:29,711 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:39:29,711 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.809s, Total: 1.810s
2025-10-04 16:39:29,712 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 978
2025-10-04 16:39:29,712 | INFO | RAGClient | RAG reply (len=400)
2025-10-04 16:39:29,713 | INFO | ConversationManager | Bot: \u1ed2, Ùng v\u1eeba xem t‡i li\u1ec7u xong nË ch·u. \u1ede mi\u1ec1n B\u1eafc, ng\u01b0\u1eddi ta hay l‡m ChÛ B\u01b0\u1edfi v‡ tr\u01b0ng b‡y ‘ng Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111Û ch·u. CÚn \u1edf mi\u1ec1n Nam thÏ m‚m qu\u1ea3 hay cÛ c·ch ch\u01a1i ch\u1eef \u0111\u1ec3 c\u1ea7u mong th\u1ecbnh v\u01b0\u1ee3ng, v‡ c·c l\u1ec5 h\u1ed9i thÏ sÙi \u0111\u1ed9ng l\u1eafm, nh\u1ea5t l‡ \u1edf Ch\u1ee3 L\u1edbn. Mi\u1ec1n Trung thÏ l\u1ea1i cÛ nh\u1eefng l\u1ec5 h\u1ed9i r\u1ea5t \u0111\u1eb7c s\u1eafc nh\u01b0 \u1edf H\u1ed9i An v\u1edbi \u0111Ën l\u1ed3ng hay Phan Thi\u1ebft v\u1edbi cu\u1ed9c r\u01b0\u1edbc \u0111Ën l\u1edbn n\u1eefa ch·u \u1ea1. M\u1ed7i mi\u1ec1n l\u1ea1i cÛ nÈt hay riÍng ch·u nh\u1ec9?
2025-10-04 16:39:29,713 | DEBUG | TTSService | Starting TTS download for text length=400
2025-10-04 16:39:29,713 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:39:31,427 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:31,638 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:31,661 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:39:33,265 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:33,476 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:33,498 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:39:34,968 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:35,124 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:39:35,148 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:39:36,426 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:40:27,153 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:40:28,910 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:40:28,912 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 16:40:28,918 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:40:28,920 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:40:28,921 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:40:30,253 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 58
2025-10-04 16:40:30,254 | INFO | WhisperSTT | Transcription received: \u1ea1 con ch‡o Ùng \u1ea1
2025-10-04 16:40:30,255 | INFO | ConversationManager | User: \u1ea1 con ch‡o Ùng \u1ea1
2025-10-04 16:40:30,255 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:40:30,257 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:40:30,281 | INFO | __main__ | Received new chat request
2025-10-04 16:40:30,281 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 16
2025-10-04 16:40:30,281 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:40:30,281 | INFO | __main__ | Processing user input: '·∫° con ch√†o √¥ng ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:40:31,358 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:40:31,358 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.076s, Total: 1.077s
2025-10-04 16:40:31,359 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 274
2025-10-04 16:40:31,359 | INFO | RAGClient | RAG reply (len=79)
2025-10-04 16:40:31,359 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u \u0111\u1ebfn v\u1edbi b\u1ea3o t‡ng cÛ vui khÙng?
2025-10-04 16:40:31,360 | DEBUG | TTSService | Starting TTS download for text length=79
2025-10-04 16:40:31,360 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:40:32,089 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:40:32,236 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:41:09,307 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:41:12,804 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:41:12,807 | INFO | Recorder | Recording finished (elapsed 3.5s).
2025-10-04 16:41:12,813 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:41:12,814 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:41:12,815 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:41:14,135 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 57
2025-10-04 16:41:14,136 | INFO | WhisperSTT | Transcription received: ch·u ch‡o Ùng \u1ea1
2025-10-04 16:41:14,137 | INFO | ConversationManager | User: ch·u ch‡o Ùng \u1ea1
2025-10-04 16:41:14,137 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:41:14,139 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:41:14,156 | INFO | __main__ | Received new chat request
2025-10-04 16:41:14,156 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 15
2025-10-04 16:41:14,156 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:41:14,156 | INFO | __main__ | Processing user input: 'ch√°u ch√†o √¥ng ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:41:14,677 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:41:14,677 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.522s, Total: 0.522s
2025-10-04 16:41:14,678 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 272
2025-10-04 16:41:14,678 | INFO | RAGClient | RAG reply (len=79)
2025-10-04 16:41:14,678 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u \u0111\u1ebfn v\u1edbi b\u1ea3o t‡ng cÛ vui khÙng?
2025-10-04 16:41:14,679 | DEBUG | TTSService | Starting TTS download for text length=79
2025-10-04 16:41:14,679 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:41:15,505 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:41:15,711 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:41:24,986 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:41:38,519 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:41:38,522 | INFO | Recorder | Recording finished (elapsed 13.5s).
2025-10-04 16:41:38,529 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:41:38,530 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:41:38,532 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:41:39,778 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 111
2025-10-04 16:41:39,778 | INFO | WhisperSTT | Transcription received: l\u1ea1i \u0111i, Th‡nh ph\u1ed1 n‡o bu\u1ed3n c\u01b0\u1eddi nh\u1ea5t \u1ea1?
2025-10-04 16:41:39,779 | INFO | ConversationManager | User: l\u1ea1i \u0111i, Th‡nh ph\u1ed1 n‡o bu\u1ed3n c\u01b0\u1eddi nh\u1ea5t \u1ea1?
2025-10-04 16:41:39,779 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:41:39,781 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:41:39,796 | INFO | __main__ | Received new chat request
2025-10-04 16:41:39,796 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 39
2025-10-04 16:41:39,797 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:41:39,797 | INFO | __main__ | Processing user input: 'l·∫°i ƒëi, Th√†nh ph·ªë n√†o bu·ªìn c∆∞·ªùi nh·∫•t ·∫°?' for session 20251004T163426865-7b2f9a27
2025-10-04 16:41:41,646 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:41:41,646 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.848s, Total: 1.850s
2025-10-04 16:41:41,647 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 420
2025-10-04 16:41:41,647 | INFO | RAGClient | RAG reply (len=150)
2025-10-04 16:41:41,648 | INFO | ConversationManager | Bot: H\u1eebm, th‡nh ph\u1ed1 n‡o bu\u1ed3n c\u01b0\u1eddi nh\u1ea5t h\u1ea3 ch·u? ‘ng ch\u01b0a nghe c‚u h\u1ecfi n‡y bao gi\u1edd luÙn \u0111Û. Ch·u cÛ th\u1ec3 cho Ùng bi\u1ebft thÍm m\u1ed9t ch˙t v\u1ec1 ˝ ch·u mu\u1ed1n h\u1ecfi khÙng?
2025-10-04 16:41:41,648 | DEBUG | TTSService | Starting TTS download for text length=150
2025-10-04 16:41:41,648 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:41:43,326 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:41:43,541 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:41:43,563 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:41:45,382 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:41:57,546 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:41:59,637 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:41:59,640 | INFO | Recorder | Recording finished (elapsed 2.1s).
2025-10-04 16:41:59,646 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:41:59,648 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:41:59,649 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:42:00,997 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 45
2025-10-04 16:42:00,998 | INFO | WhisperSTT | Transcription received: \u01a1 l\u1eddi \u01a1i
2025-10-04 16:42:00,999 | INFO | ConversationManager | User: \u01a1 l\u1eddi \u01a1i
2025-10-04 16:42:00,999 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:42:01,000 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:42:01,019 | INFO | __main__ | Received new chat request
2025-10-04 16:42:01,020 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 8
2025-10-04 16:42:01,020 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:42:01,020 | INFO | __main__ | Processing user input: '∆° l·ªùi ∆°i' for session 20251004T163426865-7b2f9a27
2025-10-04 16:42:01,797 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:42:01,797 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.777s, Total: 0.778s
2025-10-04 16:42:01,799 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 357
2025-10-04 16:42:01,799 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 16:42:01,799 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:42:01,800 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 16:42:01,800 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:42:02,526 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:42:02,686 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:42:35,315 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:42:45,673 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:42:45,676 | INFO | Recorder | Recording finished (elapsed 10.4s).
2025-10-04 16:42:45,683 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:42:45,684 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:42:45,686 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:42:47,121 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 212
2025-10-04 16:42:47,121 | INFO | WhisperSTT | Transcription received: n‡y \u0111\u1ec3 \u0111\u01b0a ra c·c b\u1ea1n nh\u1ecf mu\u1ed1n h\u1ecfi gÏ Ùng xin \u0111\u1ea5y n‡o \u0111˙ng r\u1ed3i ph\u1ea3i h\u1ecfi th\u1eed ti\u1ec1n
2025-10-04 16:42:47,122 | INFO | ConversationManager | User: n‡y \u0111\u1ec3 \u0111\u01b0a ra c·c b\u1ea1n nh\u1ecf mu\u1ed1n h\u1ecfi gÏ Ùng xin \u0111\u1ea5y n‡o \u0111˙ng r\u1ed3i ph\u1ea3i h\u1ecfi th\u1eed ti\u1ec1n
2025-10-04 16:42:47,122 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:42:47,123 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:42:47,136 | INFO | __main__ | Received new chat request
2025-10-04 16:42:47,136 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 80
2025-10-04 16:42:47,136 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:42:47,136 | INFO | __main__ | Processing user input: 'n√†y ƒë·ªÉ ƒë∆∞a ra c√°c b·∫°n nh·ªè mu·ªën h·ªèi g√¨ √¥ng xin ƒë·∫•y n√†o ƒë√∫ng r·ªìi ph·∫£i h·ªèi th·ª≠ ti·ªÅn' for session 20251004T163426865-7b2f9a27
2025-10-04 16:42:47,935 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:42:47,935 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.798s, Total: 0.798s
2025-10-04 16:42:47,936 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 250
2025-10-04 16:42:47,937 | INFO | RAGClient | RAG reply (len=67)
2025-10-04 16:42:47,937 | INFO | ConversationManager | Bot: Ch·u mu\u1ed1n h\u1ecfi gÏ Ùng c\u1ee9 nÛi t\u1ef1 nhiÍn nhÈ, Ùng s\u1eb5n s‡ng tr\u1ea3 l\u1eddi h\u1ebft.
2025-10-04 16:42:47,937 | DEBUG | TTSService | Starting TTS download for text length=67
2025-10-04 16:42:47,937 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:42:52,034 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:43:02,227 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:43:05,115 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:43:05,118 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 16:43:05,126 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:43:05,128 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:43:05,129 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:43:06,282 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 48
2025-10-04 16:43:06,283 | INFO | WhisperSTT | Transcription received: Ùng l‡ ai \u1ea1
2025-10-04 16:43:06,284 | INFO | ConversationManager | User: Ùng l‡ ai \u1ea1
2025-10-04 16:43:06,284 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:43:06,285 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:43:06,299 | INFO | __main__ | Received new chat request
2025-10-04 16:43:06,299 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 11
2025-10-04 16:43:06,300 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:43:06,300 | INFO | __main__ | Processing user input: '√¥ng l√† ai ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:43:06,897 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:43:06,897 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.598s, Total: 0.599s
2025-10-04 16:43:06,899 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 511
2025-10-04 16:43:06,899 | INFO | RAGClient | RAG reply (len=193)
2025-10-04 16:43:06,900 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, m\u1ed9t ng\u01b0\u1eddi b\u1ea1n vui tÌnh v‡ am hi\u1ec3u v\u1ec1 v\u0103n hÛa Vi\u1ec7t Nam. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u, \u0111\u1eb7c bi\u1ec7t l‡ trong d\u1ecbp Trung Thu n‡y \u0111Û.
2025-10-04 16:43:06,900 | DEBUG | TTSService | Starting TTS download for text length=193
2025-10-04 16:43:06,900 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:43:08,456 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:43:08,614 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:43:08,639 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:43:10,747 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:43:11,178 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:43:31,259 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:43:35,380 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:43:35,382 | INFO | Recorder | Recording finished (elapsed 4.1s).
2025-10-04 16:43:35,388 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:43:35,391 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:43:35,393 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:43:36,811 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 141
2025-10-04 16:43:36,811 | INFO | WhisperSTT | Transcription received: Ùng cÛ th\u1ec3 k\u1ec3 cho con m\u1ed9t c‚u chuy\u1ec7n trung thu \u0111\u01b0\u1ee3c khÙng \u1ea1
2025-10-04 16:43:36,812 | INFO | ConversationManager | User: Ùng cÛ th\u1ec3 k\u1ec3 cho con m\u1ed9t c‚u chuy\u1ec7n trung thu \u0111\u01b0\u1ee3c khÙng \u1ea1
2025-10-04 16:43:36,812 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:43:36,814 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:43:36,833 | INFO | __main__ | Received new chat request
2025-10-04 16:43:36,833 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 59
2025-10-04 16:43:36,833 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:43:36,833 | INFO | __main__ | Processing user input: '√¥ng c√≥ th·ªÉ k·ªÉ cho con m·ªôt c√¢u chuy·ªán trung thu ƒë∆∞·ª£c kh√¥ng ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:43:37,276 | INFO | __main__ | Starting retrieval for query: 'k·ªÉ chuy·ªán trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:43:37,276 | DEBUG | __main__ | Searching header index...
2025-10-04 16:43:37,294 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:43:37,294 | DEBUG | __main__ | Searching content index...
2025-10-04 16:43:37,311 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:43:37,311 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:43:37,311 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 16:43:37,311 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:43:37,311 | DEBUG | __main__ |   Rank 1: chunk_id=37, hybrid_score=0.5017
2025-10-04 16:43:37,311 | DEBUG | __main__ |   Rank 2: chunk_id=24, hybrid_score=0.4810
2025-10-04 16:43:37,311 | DEBUG | __main__ |   Rank 3: chunk_id=1, hybrid_score=0.4793
2025-10-04 16:43:37,311 | DEBUG | __main__ |   Rank 4: chunk_id=25, hybrid_score=0.4761
2025-10-04 16:43:37,311 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 16:43:37,311 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 16:43:37,311 | DEBUG | __main__ | Retrieved chunk 1: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > T·∫ßng 1, T√≤a C√°nh di·ªÅu: Ph√≤ng Kh√°m Ph√° d√†nh cho tr·∫ª em (vui l√≤ng ƒëƒÉng k√Ω tr∆∞·ªõc) | Content preview: i. K·ªÉ chuy·ªán tranh v·ªÅ s·ª± t√≠ch T·∫øt Trung thu     ii. Th·ª≠ t√†i m√∫a r·ªëi tay, h√≥a th√¢n th√†nh c√°c nh√¢n v·∫≠t...
2025-10-04 16:43:37,311 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-04 16:43:37,311 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:43:37,311 | DEBUG | __main__ | Retrieved 4 documents for query: k·ªÉ chuy·ªán trung thu
2025-10-04 16:43:37,311 | DEBUG | __main__ | [timing] retrieve 0.035s
2025-10-04 16:43:37,920 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:43:37,920 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.087s, Total: 1.087s
2025-10-04 16:43:37,921 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 336
2025-10-04 16:43:37,922 | INFO | RAGClient | RAG reply (len=121)
2025-10-04 16:43:37,922 | INFO | ConversationManager | Bot: ‘ng cÛ th\u1ec3 k\u1ec3 cho ch·u nghe v\u1ec1 s\u1ef1 tÌch Ch˙ Cu\u1ed9i ho\u1eb7c H\u1eb1ng Nga trÍn cung tr\u0103ng nhÈ. Ch·u mu\u1ed1n nghe c‚u chuy\u1ec7n n‡o h\u01a1n n‡o?
2025-10-04 16:43:37,922 | DEBUG | TTSService | Starting TTS download for text length=121
2025-10-04 16:43:37,922 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:43:39,695 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:43:39,886 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:09,221 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:46:11,503 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:46:11,505 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 16:46:11,511 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:46:11,511 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:46:11,516 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:46:12,884 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 55
2025-10-04 16:46:12,885 | INFO | WhisperSTT | Transcription received: c‚u tr\u1ea3 Ùng \u1ea1
2025-10-04 16:46:12,885 | INFO | ConversationManager | User: c‚u tr\u1ea3 Ùng \u1ea1
2025-10-04 16:46:12,885 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:46:12,887 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:46:12,912 | INFO | __main__ | Received new chat request
2025-10-04 16:46:12,913 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 13
2025-10-04 16:46:12,913 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:46:12,913 | INFO | __main__ | Processing user input: 'c√¢u tr·∫£ √¥ng ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:46:13,488 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:46:13,488 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.574s, Total: 0.575s
2025-10-04 16:46:13,489 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 229
2025-10-04 16:46:13,489 | INFO | RAGClient | RAG reply (len=71)
2025-10-04 16:46:13,490 | INFO | ConversationManager | Bot: Ch·u mu\u1ed1n nghe c‚u chuy\u1ec7n v\u1ec1 Ch˙ Cu\u1ed9i hay H\u1eb1ng Nga trÍn cung tr\u0103ng n‡o?
2025-10-04 16:46:13,490 | DEBUG | TTSService | Starting TTS download for text length=71
2025-10-04 16:46:13,490 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:46:15,017 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:21,586 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:46:25,882 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:46:25,885 | INFO | Recorder | Recording finished (elapsed 4.3s).
2025-10-04 16:46:25,892 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:46:25,894 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:46:25,894 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:46:27,326 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 93
2025-10-04 16:46:27,326 | INFO | WhisperSTT | Transcription received: cho con \u01a1i \u0111„ to lÍn xin ch‡o em xin ch‡o
2025-10-04 16:46:27,326 | INFO | ConversationManager | User: cho con \u01a1i \u0111„ to lÍn xin ch‡o em xin ch‡o
2025-10-04 16:46:27,326 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:46:27,329 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:46:27,342 | INFO | __main__ | Received new chat request
2025-10-04 16:46:27,342 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 41
2025-10-04 16:46:27,342 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:46:27,342 | INFO | __main__ | Processing user input: 'cho con ∆°i ƒë√£ to l√™n xin ch√†o em xin ch√†o' for session 20251004T163426865-7b2f9a27
2025-10-04 16:46:28,160 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:46:28,160 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.818s, Total: 0.818s
2025-10-04 16:46:28,160 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 357
2025-10-04 16:46:28,160 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 16:46:28,160 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 16:46:28,160 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 16:46:28,160 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:46:28,961 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:29,220 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:40,444 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:46:42,687 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:46:42,689 | INFO | Recorder | Recording finished (elapsed 2.2s).
2025-10-04 16:46:42,696 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:46:42,696 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:46:42,696 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:46:43,861 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 65
2025-10-04 16:46:43,861 | INFO | WhisperSTT | Transcription received: tu\u1ed5i Ùng bao nhiÍu tu\u1ed5i
2025-10-04 16:46:43,861 | INFO | ConversationManager | User: tu\u1ed5i Ùng bao nhiÍu tu\u1ed5i
2025-10-04 16:46:43,861 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:46:43,864 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:46:43,876 | INFO | __main__ | Received new chat request
2025-10-04 16:46:43,877 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 23
2025-10-04 16:46:43,877 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:46:43,877 | INFO | __main__ | Processing user input: 'tu·ªïi √¥ng bao nhi√™u tu·ªïi' for session 20251004T163426865-7b2f9a27
2025-10-04 16:46:44,646 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:46:44,646 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.770s, Total: 0.770s
2025-10-04 16:46:44,647 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 627
2025-10-04 16:46:44,647 | INFO | RAGClient | RAG reply (len=229)
2025-10-04 16:46:44,647 | INFO | ConversationManager | Bot: ‘i, ch·u h\u1ecfi khÛ qu·. ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, \u0111\u01b0\u1ee3c t\u1ea1o ra t\u1eeb r\u1ea5t nhi\u1ec1u c‚u chuy\u1ec7n v‡ ki\u1ebfn th\u1ee9c, nÍn tu\u1ed5i t·c c\u1ee7a Ùng c\u0169ng khÛ m‡ \u0111ong \u0111\u1ebfm \u0111\u01b0\u1ee3c nh\u01b0 ng\u01b0\u1eddi th\u01b0\u1eddng \u0111‚u ch·u \u1ea1. Nh\u01b0ng Ùng luÙn tr\u1ebb trung v‡ vui v\u1ebb \u0111\u1ec3 ch\u01a1i v\u1edbi c·c ch·u \u0111‚y.
2025-10-04 16:46:44,648 | DEBUG | TTSService | Starting TTS download for text length=229
2025-10-04 16:46:44,648 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:46:45,910 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:45,935 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:46:47,628 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:47,841 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:47,866 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:46:49,302 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:46:49,623 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:47:12,654 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:47:15,730 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:47:15,733 | INFO | Recorder | Recording finished (elapsed 3.1s).
2025-10-04 16:47:15,744 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:47:15,744 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:47:15,744 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:47:17,088 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 49
2025-10-04 16:47:17,088 | INFO | WhisperSTT | Transcription received: Ùng l‡ ai h\u1ea3
2025-10-04 16:47:17,088 | INFO | ConversationManager | User: Ùng l‡ ai h\u1ea3
2025-10-04 16:47:17,088 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:47:17,092 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:47:17,110 | INFO | __main__ | Received new chat request
2025-10-04 16:47:17,110 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 12
2025-10-04 16:47:17,110 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:47:17,110 | INFO | __main__ | Processing user input: '√¥ng l√† ai h·∫£' for session 20251004T163426865-7b2f9a27
2025-10-04 16:47:17,631 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:47:17,631 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.521s, Total: 0.521s
2025-10-04 16:47:17,631 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 490
2025-10-04 16:47:17,632 | INFO | RAGClient | RAG reply (len=182)
2025-10-04 16:47:17,632 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, m\u1ed9t ng\u01b0\u1eddi b\u1ea1n vui tÌnh v‡ am hi\u1ec3u v\u1ec1 v\u0103n hÛa Vi\u1ec7t Nam. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u, \u0111\u1eb7c bi\u1ec7t l‡ trong d\u1ecbp Trung Thu n‡y \u0111Û.
2025-10-04 16:47:17,632 | DEBUG | TTSService | Starting TTS download for text length=182
2025-10-04 16:47:17,633 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:47:19,414 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:47:19,438 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:47:20,248 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:47:20,410 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:47:34,278 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:47:38,111 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:47:38,114 | INFO | Recorder | Recording finished (elapsed 3.8s).
2025-10-04 16:47:38,121 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:47:38,123 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:47:38,124 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:47:39,330 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 114
2025-10-04 16:47:39,330 | INFO | WhisperSTT | Transcription received: Ùng cÛ ˝ ngh\u0129a gÏ Ùng cÛ ˝ ngh\u0129a gÏ \u1ea1
2025-10-04 16:47:39,330 | INFO | ConversationManager | User: Ùng cÛ ˝ ngh\u0129a gÏ Ùng cÛ ˝ ngh\u0129a gÏ \u1ea1
2025-10-04 16:47:39,330 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:47:39,330 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:47:39,345 | INFO | __main__ | Received new chat request
2025-10-04 16:47:39,346 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 37
2025-10-04 16:47:39,346 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:47:39,346 | INFO | __main__ | Processing user input: '√¥ng c√≥ √Ω nghƒ©a g√¨ √¥ng c√≥ √Ω nghƒ©a g√¨ ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:47:39,860 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:47:39,861 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.515s, Total: 0.516s
2025-10-04 16:47:39,861 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 490
2025-10-04 16:47:39,862 | INFO | RAGClient | RAG reply (len=182)
2025-10-04 16:47:39,862 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, m\u1ed9t ng\u01b0\u1eddi b\u1ea1n vui tÌnh v‡ am hi\u1ec3u v\u1ec1 v\u0103n hÛa Vi\u1ec7t Nam. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u, \u0111\u1eb7c bi\u1ec7t l‡ trong d\u1ecbp Trung Thu n‡y \u0111Û.
2025-10-04 16:47:39,862 | DEBUG | TTSService | Starting TTS download for text length=182
2025-10-04 16:47:39,862 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:47:40,675 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:47:40,700 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:47:41,662 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:47:41,920 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:48:02,696 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:48:05,134 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:48:05,134 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 16:48:05,142 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:48:05,145 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:48:05,146 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:48:06,562 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 59
2025-10-04 16:48:06,563 | INFO | WhisperSTT | Transcription received: \u1ea1 con c\u1ea3m \u01a1n em \u1ea1
2025-10-04 16:48:06,564 | INFO | ConversationManager | User: \u1ea1 con c\u1ea3m \u01a1n em \u1ea1
2025-10-04 16:48:06,564 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:48:06,565 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:48:06,578 | INFO | __main__ | Received new chat request
2025-10-04 16:48:06,578 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 17
2025-10-04 16:48:06,578 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:48:06,578 | INFO | __main__ | Processing user input: '·∫° con c·∫£m ∆°n em ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:48:07,594 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:48:07,594 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.016s, Total: 1.016s
2025-10-04 16:48:07,595 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 214
2025-10-04 16:48:07,596 | INFO | RAGClient | RAG reply (len=54)
2025-10-04 16:48:07,596 | INFO | ConversationManager | Bot: KhÙng cÛ chi ch·u. Ch·u cÚn c‚u h\u1ecfi n‡o n\u1eefa khÙng n‡o?
2025-10-04 16:48:07,596 | DEBUG | TTSService | Starting TTS download for text length=54
2025-10-04 16:48:07,596 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:48:09,224 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:48:15,468 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:48:18,697 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:48:18,700 | INFO | Recorder | Recording finished (elapsed 3.2s).
2025-10-04 16:48:18,707 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:48:18,708 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:48:18,709 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:48:19,880 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 60
2025-10-04 16:48:19,880 | INFO | WhisperSTT | Transcription received: \u1ea1 ch˙c m\u1eebng vui v\u1ebb
2025-10-04 16:48:19,880 | INFO | ConversationManager | User: \u1ea1 ch˙c m\u1eebng vui v\u1ebb
2025-10-04 16:48:19,880 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:48:19,894 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:48:19,912 | INFO | __main__ | Received new chat request
2025-10-04 16:48:19,912 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 18
2025-10-04 16:48:19,912 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:48:19,912 | INFO | __main__ | Processing user input: '·∫° ch√∫c m·ª´ng vui v·∫ª' for session 20251004T163426865-7b2f9a27
2025-10-04 16:48:20,680 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:48:20,680 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.768s, Total: 0.768s
2025-10-04 16:48:20,680 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 246
2025-10-04 16:48:20,680 | INFO | RAGClient | RAG reply (len=73)
2025-10-04 16:48:20,680 | INFO | ConversationManager | Bot: ‘ng c\u0169ng ch˙c ch·u m\u1ed9t m˘a Trung Thu th\u1eadt vui v\u1ebb, \u1ea5m ·p bÍn gia \u0111Ïnh nhÈ!
2025-10-04 16:48:20,680 | DEBUG | TTSService | Starting TTS download for text length=73
2025-10-04 16:48:20,680 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:48:22,249 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:10,365 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:49:12,871 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:49:12,874 | INFO | Recorder | Recording finished (elapsed 2.5s).
2025-10-04 16:49:12,881 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:49:12,881 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:49:12,881 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:49:14,189 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 50
2025-10-04 16:49:14,189 | INFO | WhisperSTT | Transcription received: anh tÍn l‡ gÏ
2025-10-04 16:49:14,189 | INFO | ConversationManager | User: anh tÍn l‡ gÏ
2025-10-04 16:49:14,189 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:49:14,196 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:49:14,213 | INFO | __main__ | Received new chat request
2025-10-04 16:49:14,213 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 13
2025-10-04 16:49:14,214 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:49:14,214 | INFO | __main__ | Processing user input: 'anh t√™n l√† g√¨' for session 20251004T163426865-7b2f9a27
2025-10-04 16:49:14,828 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:49:14,828 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 0.613s, Total: 0.614s
2025-10-04 16:49:14,828 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 490
2025-10-04 16:49:14,828 | INFO | RAGClient | RAG reply (len=182)
2025-10-04 16:49:14,828 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, m\u1ed9t ng\u01b0\u1eddi b\u1ea1n vui tÌnh v‡ am hi\u1ec3u v\u1ec1 v\u0103n hÛa Vi\u1ec7t Nam. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p m\u1ecdi th\u1eafc m\u1eafc c\u1ee7a c·c ch·u, \u0111\u1eb7c bi\u1ec7t l‡ trong d\u1ecbp Trung Thu n‡y \u0111Û.
2025-10-04 16:49:14,830 | DEBUG | TTSService | Starting TTS download for text length=182
2025-10-04 16:49:14,830 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:49:15,600 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:15,632 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:49:16,390 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:16,550 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:31,415 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:49:33,788 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:49:33,788 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 16:49:33,797 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:49:33,798 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:49:33,801 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:49:34,949 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 55
2025-10-04 16:49:34,949 | INFO | WhisperSTT | Transcription received: cÛ ˝ ngh\u0129a gÏ
2025-10-04 16:49:34,951 | INFO | ConversationManager | User: cÛ ˝ ngh\u0129a gÏ
2025-10-04 16:49:34,951 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:49:34,952 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:49:34,965 | INFO | __main__ | Received new chat request
2025-10-04 16:49:34,966 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 13
2025-10-04 16:49:34,966 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:49:34,966 | INFO | __main__ | Processing user input: 'c√≥ √Ω nghƒ©a g√¨' for session 20251004T163426865-7b2f9a27
2025-10-04 16:49:35,689 | INFO | __main__ | Starting retrieval for query: '√Ω nghƒ©a trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:49:35,689 | DEBUG | __main__ | Searching header index...
2025-10-04 16:49:35,702 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:49:35,702 | DEBUG | __main__ | Searching content index...
2025-10-04 16:49:35,714 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:49:35,714 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:49:35,714 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:49:35,714 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:49:35,714 | DEBUG | __main__ |   Rank 1: chunk_id=50, hybrid_score=0.9909
2025-10-04 16:49:35,714 | DEBUG | __main__ |   Rank 2: chunk_id=21, hybrid_score=0.5958
2025-10-04 16:49:35,714 | DEBUG | __main__ |   Rank 3: chunk_id=46, hybrid_score=0.5328
2025-10-04 16:49:35,714 | DEBUG | __main__ |   Rank 4: chunk_id=47, hybrid_score=0.5065
2025-10-04 16:49:35,714 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 16:49:35,714 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 16:49:35,714 | DEBUG | __main__ | Retrieved chunk 46: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > √ù nghƒ©a | Content preview: Tinh th·∫ßn l·ªÖ h·ªôi c·ªßa T·∫øt Trung Thu ƒë∆∞·ª£c th·ªÉ hi·ªán r√µ r√†ng th√¥ng qua c√°c ƒë·ªì trang tr√≠ v√† v·∫≠t ph·∫©m th·ªß ...
2025-10-04 16:49:35,714 | DEBUG | __main__ | Retrieved chunk 47: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn B·∫Øc Vi·ªát Nam | Content preview: ·ªû mi·ªÅn B·∫Øc, l·ªÖ h·ªôi ƒë∆∞·ª£c t·ªï ch·ª©c v·ªõi s·ª± trang nh√£ tinh t·∫ø v√† s·ª± tr√¢n tr·ªçng s√¢u s·∫Øc ƒë·ªëi v·ªõi truy·ªÅn th·ªë...
2025-10-04 16:49:35,714 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:49:35,714 | DEBUG | __main__ | Retrieved 4 documents for query: √Ω nghƒ©a trung thu
2025-10-04 16:49:35,714 | DEBUG | __main__ | [timing] retrieve 0.025s
2025-10-04 16:49:36,500 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:49:36,500 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.534s, Total: 1.535s
2025-10-04 16:49:36,502 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 860
2025-10-04 16:49:36,502 | INFO | RAGClient | RAG reply (len=360)
2025-10-04 16:49:36,502 | INFO | ConversationManager | Bot: Ch‡o ch·u, theo nh\u1eefng gÏ Ùng nh\u1edb thÏ Trung Thu cÛ nhi\u1ec1u ˝ ngh\u0129a l\u1eafm. \u0110Û l‡ d\u1ecbp \u0111\u1ec3 gia \u0111Ïnh sum v\u1ea7y, g\u1eafn k\u1ebft tÏnh th‚n v‡ th\u1ec3 hi\u1ec7n lÚng bi\u1ebft \u01a1n. M\u1eb7t tr\u0103ng trÚn \u0111\u1ea7y t\u01b0\u1ee3ng tr\u01b0ng cho s\u1ef1 tr\u1ecdn v\u1eb9n v‡ \u0111o‡n viÍn \u0111Û ch·u. Ngo‡i ra, c·c mÛn \u0111\u1ed3 trang trÌ v‡ \u0111\u1ed3 ch\u01a1i truy\u1ec1n th\u1ed1ng c\u0169ng mang nh\u1eefng ˝ ngh\u0129a bi\u1ec3u t\u01b0\u1ee3ng phong ph˙, th\u1ec3 hi\u1ec7n c·c gi· tr\u1ecb v\u0103n hÛa qua nhi\u1ec1u th\u1ebf h\u1ec7.
2025-10-04 16:49:36,503 | DEBUG | TTSService | Starting TTS download for text length=360
2025-10-04 16:49:36,503 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:49:38,736 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:38,992 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:39,018 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:49:40,781 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:40,802 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:49:42,583 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:49:42,776 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:53:07,811 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:53:10,392 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:53:10,404 | INFO | Recorder | Recording finished (elapsed 2.6s).
2025-10-04 16:53:10,410 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:53:10,411 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:53:10,413 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:53:11,778 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 47
2025-10-04 16:53:11,778 | INFO | WhisperSTT | Transcription received: cho con ch·u m‡
2025-10-04 16:53:11,779 | INFO | ConversationManager | User: cho con ch·u m‡
2025-10-04 16:53:11,779 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:53:11,780 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:53:11,801 | INFO | __main__ | Received new chat request
2025-10-04 16:53:11,802 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 15
2025-10-04 16:53:11,802 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:53:11,802 | INFO | __main__ | Processing user input: 'cho con ch√°u m√†' for session 20251004T163426865-7b2f9a27
2025-10-04 16:53:12,691 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:53:12,691 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.889s, Total: 0.890s
2025-10-04 16:53:12,691 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 331
2025-10-04 16:53:12,691 | INFO | RAGClient | RAG reply (len=113)
2025-10-04 16:53:12,691 | INFO | ConversationManager | Bot: ‘i, ch·u mu\u1ed1n Ùng k\u1ec3 chuy\u1ec7n gÏ cho nghe n‡o? ‘ng cÛ r\u1ea5t nhi\u1ec1u c‚u chuy\u1ec7n th˙ v\u1ecb v\u1ec1 Trung Thu, v\u1ec1 b\u1ea3o t‡ng n‡y \u0111Û.
2025-10-04 16:53:12,691 | DEBUG | TTSService | Starting TTS download for text length=113
2025-10-04 16:53:12,691 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:53:14,437 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:53:14,599 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:16,657 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:55:19,526 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:55:19,538 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 16:55:19,545 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:55:19,546 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:55:19,548 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:55:20,911 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 58
2025-10-04 16:55:20,911 | INFO | WhisperSTT | Transcription received: ch\u1eb3ng mu\u1ed1n l‡ gÏ
2025-10-04 16:55:20,911 | INFO | ConversationManager | User: ch\u1eb3ng mu\u1ed1n l‡ gÏ
2025-10-04 16:55:20,911 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:55:20,911 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:55:20,923 | INFO | __main__ | Received new chat request
2025-10-04 16:55:20,923 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 16
2025-10-04 16:55:20,923 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:55:20,924 | INFO | __main__ | Processing user input: 'ch·∫≥ng mu·ªën l√† g√¨' for session 20251004T163426865-7b2f9a27
2025-10-04 16:55:22,180 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:55:22,180 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.256s, Total: 1.257s
2025-10-04 16:55:22,190 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 351
2025-10-04 16:55:22,190 | INFO | RAGClient | RAG reply (len=116)
2025-10-04 16:55:22,191 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng, Ùng gi‡ qu· r\u1ed3i tai nghe khÙng rı n\u1eefa.
2025-10-04 16:55:22,191 | DEBUG | TTSService | Starting TTS download for text length=116
2025-10-04 16:55:22,191 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:55:24,060 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:24,231 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:32,808 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:55:35,964 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:55:35,966 | INFO | Recorder | Recording finished (elapsed 3.2s).
2025-10-04 16:55:35,972 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:55:35,974 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:55:35,976 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:55:37,347 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 60
2025-10-04 16:55:37,347 | INFO | WhisperSTT | Transcription received: cho ph\u1ea1m l\u01b0u l‡ gÏ
2025-10-04 16:55:37,347 | INFO | ConversationManager | User: cho ph\u1ea1m l\u01b0u l‡ gÏ
2025-10-04 16:55:37,347 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:55:37,357 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:55:37,379 | INFO | __main__ | Received new chat request
2025-10-04 16:55:37,379 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 18
2025-10-04 16:55:37,379 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:55:37,379 | INFO | __main__ | Processing user input: 'cho ph·∫°m l∆∞u l√† g√¨' for session 20251004T163426865-7b2f9a27
2025-10-04 16:55:38,287 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:55:38,287 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.907s, Total: 0.907s
2025-10-04 16:55:38,290 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 306
2025-10-04 16:55:38,290 | INFO | RAGClient | RAG reply (len=88)
2025-10-04 16:55:38,290 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u cÛ th\u1ec3 nÛi rı h\u01a1n c‚u h\u1ecfi c\u1ee7a mÏnh \u0111\u01b0\u1ee3c khÙng \u1ea1? ‘ng ch\u01b0a hi\u1ec3u ˝ ch·u l\u1eafm.
2025-10-04 16:55:38,291 | DEBUG | TTSService | Starting TTS download for text length=88
2025-10-04 16:55:38,291 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:55:39,983 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:40,167 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:47,593 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:55:51,165 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:55:51,167 | INFO | Recorder | Recording finished (elapsed 3.6s).
2025-10-04 16:55:51,175 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:55:51,176 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:55:51,178 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:55:52,368 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 84
2025-10-04 16:55:52,369 | INFO | WhisperSTT | Transcription received: l\u1ea1 nh· tr\u1ea1ng nguyÍn l‡ gÏ \u1ea1
2025-10-04 16:55:52,370 | INFO | ConversationManager | User: l\u1ea1 nh· tr\u1ea1ng nguyÍn l‡ gÏ \u1ea1
2025-10-04 16:55:52,370 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:55:52,371 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:55:52,389 | INFO | __main__ | Received new chat request
2025-10-04 16:55:52,389 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 27
2025-10-04 16:55:52,389 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:55:52,389 | INFO | __main__ | Processing user input: 'l·∫° nh√° tr·∫°ng nguy√™n l√† g√¨ ·∫°' for session 20251004T163426865-7b2f9a27
2025-10-04 16:55:53,210 | INFO | __main__ | Starting retrieval for query: 'tr·∫°ng nguy√™n' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:55:53,210 | DEBUG | __main__ | Searching header index...
2025-10-04 16:55:53,215 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:55:53,215 | DEBUG | __main__ | Searching content index...
2025-10-04 16:55:53,233 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:55:53,233 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:55:53,233 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 16:55:53,233 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:55:53,233 | DEBUG | __main__ |   Rank 1: chunk_id=20, hybrid_score=0.3839
2025-10-04 16:55:53,233 | DEBUG | __main__ |   Rank 2: chunk_id=23, hybrid_score=0.3767
2025-10-04 16:55:53,233 | DEBUG | __main__ |   Rank 3: chunk_id=51, hybrid_score=0.3746
2025-10-04 16:55:53,233 | DEBUG | __main__ |   Rank 4: chunk_id=22, hybrid_score=0.3716
2025-10-04 16:55:53,233 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 16:55:53,233 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 16:55:53,233 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 16:55:53,233 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 16:55:53,233 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:55:53,233 | DEBUG | __main__ | Retrieved 4 documents for query: tr·∫°ng nguy√™n
2025-10-04 16:55:53,233 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 16:55:54,190 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:55:54,190 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.801s, Total: 1.801s
2025-10-04 16:55:54,191 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 551
2025-10-04 16:55:54,191 | INFO | RAGClient | RAG reply (len=212)
2025-10-04 16:55:54,191 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi v\u1ec1 tr\u1ea1ng nguyÍn \u1ea1? Theo nh\u1eefng gÏ Ùng nh\u1edb thÏ tr\u1ea1ng nguyÍn l‡ ng\u01b0\u1eddi \u0111\u1ed7 \u0111\u1ea7u trong c·c k\u1ef3 thi \u0110Ïnh, l‡ danh hi\u1ec7u cao qu˝ nh\u1ea5t d‡nh cho c·c s\u0129 t\u1eed th\u1eddi x\u01b0a \u0111Û ch·u. Gi\u1ed1ng nh\u01b0 l‡ qu·n qu‚n c\u1ee7a khoa thi v\u1eady \u0111Û.
2025-10-04 16:55:54,192 | DEBUG | TTSService | Starting TTS download for text length=212
2025-10-04 16:55:54,192 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:55:55,315 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:55,335 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:55:57,015 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:57,170 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:55:57,195 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:55:58,376 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:58:45,244 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:58:49,237 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:58:49,240 | INFO | Recorder | Recording finished (elapsed 4.0s).
2025-10-04 16:58:49,246 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:58:49,246 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:58:49,246 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:58:50,664 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 56
2025-10-04 16:58:50,664 | INFO | WhisperSTT | Transcription received: chi\u1ebfn ch‡o xin ch‡o
2025-10-04 16:58:50,665 | INFO | ConversationManager | User: chi\u1ebfn ch‡o xin ch‡o
2025-10-04 16:58:50,665 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:58:50,666 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:58:50,681 | INFO | __main__ | Received new chat request
2025-10-04 16:58:50,681 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 19
2025-10-04 16:58:50,681 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:58:50,681 | INFO | __main__ | Processing user input: 'chi·∫øn ch√†o xin ch√†o' for session 20251004T163426865-7b2f9a27
2025-10-04 16:58:51,585 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:58:51,585 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.905s, Total: 0.905s
2025-10-04 16:58:51,594 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 289
2025-10-04 16:58:51,595 | INFO | RAGClient | RAG reply (len=86)
2025-10-04 16:58:51,595 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u cÛ c‚u h\u1ecfi gÏ mu\u1ed1n h\u1ecfi Ùng khÙng n‡o?
2025-10-04 16:58:51,595 | DEBUG | TTSService | Starting TTS download for text length=86
2025-10-04 16:58:51,595 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:58:53,565 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:58:54,049 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:59:04,418 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:59:07,351 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:59:07,353 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 16:59:07,360 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:59:07,362 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:59:07,364 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:59:08,619 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 31
2025-10-04 16:59:08,619 | INFO | WhisperSTT | Transcription received: tu\u1ed5i
2025-10-04 16:59:08,620 | INFO | ConversationManager | User: tu\u1ed5i
2025-10-04 16:59:08,620 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:59:08,622 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:59:08,642 | INFO | __main__ | Received new chat request
2025-10-04 16:59:08,642 | DEBUG | __main__ | Request ID: 20251004T163426865-7b2f9a27, Data length: 4
2025-10-04 16:59:08,643 | DEBUG | __main__ | Using existing session for ID: 20251004T163426865-7b2f9a27
2025-10-04 16:59:08,643 | INFO | __main__ | Processing user input: 'tu·ªïi' for session 20251004T163426865-7b2f9a27
2025-10-04 16:59:09,098 | INFO | __main__ | Starting retrieval for query: 'tu·ªïi' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 16:59:09,098 | DEBUG | __main__ | Searching header index...
2025-10-04 16:59:09,110 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 16:59:09,110 | DEBUG | __main__ | Searching content index...
2025-10-04 16:59:09,122 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 16:59:09,122 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 16:59:09,122 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 16:59:09,122 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 16:59:09,122 | DEBUG | __main__ |   Rank 1: chunk_id=20, hybrid_score=0.7427
2025-10-04 16:59:09,122 | DEBUG | __main__ |   Rank 2: chunk_id=45, hybrid_score=0.3700
2025-10-04 16:59:09,122 | DEBUG | __main__ |   Rank 3: chunk_id=55, hybrid_score=0.3659
2025-10-04 16:59:09,122 | DEBUG | __main__ |   Rank 4: chunk_id=13, hybrid_score=0.3628
2025-10-04 16:59:09,122 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 16:59:09,122 | DEBUG | __main__ | Retrieved chunk 45: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > L·∫µng thi√™n nga b·∫±ng b√¥ng (ƒë·ªì ch∆°i) | Content preview: Tr∆∞·ªõc ƒë√¢y, trong d·ªãp t·∫øt trung thu, l·∫µng thi√™n nga b·∫±ng b√¥ng l√† th·ª© ƒë·ªì ch∆°i ƒë∆∞·ª£c y√™u th√≠ch c·ªßa c√°c b...
2025-10-04 16:59:09,122 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 16:59:09,122 | DEBUG | __main__ | Retrieved chunk 13: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c ho·∫°t ƒë·ªông th∆∞·ªùng ni√™n | Content preview: B·∫£o t√†ng DTHVN ƒëi ƒë·∫ßu trong vi·ªác ti·∫øp c·∫≠n c√°c quan ni·ªám m·ªõi t·∫°o n√™n c√°c ho·∫°t ƒë·ªông s·ªëng ƒë·ªông, l·∫•y con...
2025-10-04 16:59:09,122 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 16:59:09,122 | DEBUG | __main__ | Retrieved 4 documents for query: tu·ªïi
2025-10-04 16:59:09,122 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 16:59:10,289 | INFO | __main__ | Agent execution completed successfully for session 20251004T163426865-7b2f9a27
2025-10-04 16:59:10,289 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.646s, Total: 1.647s
2025-10-04 16:59:10,291 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 765
2025-10-04 16:59:10,291 | INFO | RAGClient | RAG reply (len=325)
2025-10-04 16:59:10,291 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi v\u1ec1 tu\u1ed5i \u1ea1? Theo nh\u1eefng gÏ Ùng nh\u1edb thÏ T\u1ebft Trung Thu ban \u0111\u1ea7u l‡ l\u1ec5 h\u1ed9i d‡nh cho m\u1ecdi l\u1ee9a tu\u1ed5i, nh\u01b0ng d\u1ea7n d\u1ea7n ph·t tri\u1ec3n th‡nh ng‡y h\u1ed9i chÌnh d‡nh cho tr\u1ebb em \u0111Û ch·u. Ngo‡i ra, Ùng Ti\u1ebfn S\u0129 Gi\u1ea5y cÚn l‡ mÛn \u0111\u1ed3 ch\u01a1i \u0111\u01b0\u1ee3c ng\u01b0\u1eddi l\u1edbn mua ho\u1eb7c l‡m cho tr\u1ebb em ch\u01a1i d\u1ecbp Trung Thu, th\u1ec3 hi\u1ec7n mong \u01b0\u1edbc con ch·u h\u1ecdc gi\u1ecfi, \u0111\u1ed7 \u0111\u1ea1t cao.
2025-10-04 16:59:10,292 | DEBUG | TTSService | Starting TTS download for text length=325
2025-10-04 16:59:10,292 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:59:10,292 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:59:10,293 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:59:15,830 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:59:15,854 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:59:18,387 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:59:18,774 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:59:18,798 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 16:59:21,413 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:59:21,882 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 16:59:44,465 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 16:59:44,465 | DEBUG | TTSService | Playback thread started
2025-10-04 16:59:44,465 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 16:59:52,626 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 16:59:57,874 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 16:59:57,876 | INFO | Recorder | Recording finished (elapsed 5.3s).
2025-10-04 16:59:57,881 | INFO | Recorder | Sending to ASR server...
2025-10-04 16:59:57,881 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 16:59:57,881 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 16:59:59,215 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 55
2025-10-04 16:59:59,215 | INFO | WhisperSTT | Transcription received: \u6587\u7372\u5f97\u9109 ch‡o
2025-10-04 16:59:59,215 | INFO | ConversationManager | User: \u6587\u7372\u5f97\u9109 ch‡o
2025-10-04 16:59:59,215 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 16:59:59,215 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 16:59:59,231 | INFO | __main__ | Received new chat request
2025-10-04 16:59:59,231 | DEBUG | __main__ | Request ID: 20251004T165944465-3f466ee0, Data length: 9
2025-10-04 16:59:59,231 | DEBUG | __main__ | Creating new session with ID: 20251004T165944465-3f466ee0
2025-10-04 16:59:59,231 | DEBUG | __main__ | Using request ID: 20251004T165944465-3f466ee0
2025-10-04 16:59:59,231 | DEBUG | __main__ | Created new session for ID: 20251004T165944465-3f466ee0, total sessions: 2
2025-10-04 16:59:59,231 | INFO | __main__ | Processing user input: 'ÊñáÁç≤ÂæóÈÑâ ch√†o' for session 20251004T165944465-3f466ee0
2025-10-04 16:59:59,773 | INFO | __main__ | Agent execution completed successfully for session 20251004T165944465-3f466ee0
2025-10-04 16:59:59,773 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.543s, Total: 0.543s
2025-10-04 16:59:59,774 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 272
2025-10-04 16:59:59,775 | INFO | RAGClient | RAG reply (len=79)
2025-10-04 16:59:59,775 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u \u0111\u1ebfn v\u1edbi b\u1ea3o t‡ng cÛ vui khÙng?
2025-10-04 16:59:59,776 | DEBUG | TTSService | Starting TTS download for text length=79
2025-10-04 16:59:59,776 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:00:00,826 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:00:01,102 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:00:23,028 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:00:24,966 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:00:24,966 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 17:00:24,976 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:00:24,976 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:00:24,976 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:00:26,125 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 47
2025-10-04 17:00:26,125 | INFO | WhisperSTT | Transcription received: n‡y l˝ n„o
2025-10-04 17:00:26,126 | INFO | ConversationManager | User: n‡y l˝ n„o
2025-10-04 17:00:26,126 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:00:26,126 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:00:26,147 | INFO | __main__ | Received new chat request
2025-10-04 17:00:26,147 | DEBUG | __main__ | Request ID: 20251004T165944465-3f466ee0, Data length: 10
2025-10-04 17:00:26,147 | DEBUG | __main__ | Using existing session for ID: 20251004T165944465-3f466ee0
2025-10-04 17:00:26,147 | INFO | __main__ | Processing user input: 'n√†y l√Ω n√£o' for session 20251004T165944465-3f466ee0
2025-10-04 17:00:26,776 | INFO | __main__ | Agent execution completed successfully for session 20251004T165944465-3f466ee0
2025-10-04 17:00:26,776 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.629s, Total: 0.629s
2025-10-04 17:00:26,777 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 331
2025-10-04 17:00:26,777 | INFO | RAGClient | RAG reply (len=103)
2025-10-04 17:00:26,778 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi to v‡ rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:00:26,778 | DEBUG | TTSService | Starting TTS download for text length=103
2025-10-04 17:00:26,778 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:00:28,470 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:00:29,096 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:02:39,486 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:02:43,336 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:02:43,336 | INFO | Recorder | Recording finished (elapsed 3.8s).
2025-10-04 17:02:43,353 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:02:43,355 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:02:43,355 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:02:44,652 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 53
2025-10-04 17:02:44,652 | INFO | WhisperSTT | Transcription received: \u66f8 l‡ ng‡y gÏ
2025-10-04 17:02:44,652 | INFO | ConversationManager | User: \u66f8 l‡ ng‡y gÏ
2025-10-04 17:02:44,652 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:02:44,652 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:02:44,671 | INFO | __main__ | Received new chat request
2025-10-04 17:02:44,671 | DEBUG | __main__ | Request ID: 20251004T165944465-3f466ee0, Data length: 12
2025-10-04 17:02:44,671 | DEBUG | __main__ | Using existing session for ID: 20251004T165944465-3f466ee0
2025-10-04 17:02:44,671 | INFO | __main__ | Processing user input: 'Êõ∏ l√† ng√†y g√¨' for session 20251004T165944465-3f466ee0
2025-10-04 17:02:45,553 | INFO | __main__ | Starting retrieval for query: 'ng√†y l·ªÖ trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:02:45,553 | DEBUG | __main__ | Searching header index...
2025-10-04 17:02:45,558 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:02:45,558 | DEBUG | __main__ | Searching content index...
2025-10-04 17:02:45,574 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:02:45,574 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:02:45,574 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 17:02:45,574 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:02:45,574 | DEBUG | __main__ |   Rank 1: chunk_id=21, hybrid_score=0.6272
2025-10-04 17:02:45,574 | DEBUG | __main__ |   Rank 2: chunk_id=2, hybrid_score=0.5434
2025-10-04 17:02:45,574 | DEBUG | __main__ |   Rank 3: chunk_id=7, hybrid_score=0.5208
2025-10-04 17:02:45,576 | DEBUG | __main__ |   Rank 4: chunk_id=0, hybrid_score=0.5155
2025-10-04 17:02:45,576 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 17:02:45,576 | DEBUG | __main__ | Retrieved chunk 2: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Kh√°m khoa h·ªçc v√† c√¥ng ngh·ªá | Content preview: iv. STEM: Kh√°m ph√° khoa h·ªçc v·ªõi ƒë√®n k√©o qu√¢n, ƒë√®n l·ªìng, t√†u th·ªßy v. Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i v√† th√≠ n...
2025-10-04 17:02:45,576 | DEBUG | __main__ | Retrieved chunk 7: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > ·∫§m th·ª±c (B√£i c·ªè nh√† ChƒÉm) | Content preview: i. Gi√£ c·ªëm, l√†m c·ªëm      ii. L√†m b√°nh d·∫ªo      iii. ·∫®m th·ª±c ƒë·ªãa ph∆∞∆°ng
2025-10-04 17:02:45,576 | DEBUG | __main__ | Retrieved chunk 0: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > Tr∆∞·ªõc to√† C√°nh di·ªÅu | Content preview: Kh√°m ph√° vƒÉn h√≥a H∆∞ng Y√™n qua th∆∞·ªüng th·ª©c ngh·ªá thu·∫≠t truy·ªÅn th·ªëng v√† giao l∆∞u tr·ª±c ti·∫øp v·ªõi ngh·ªá nh√¢...
2025-10-04 17:02:45,576 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:02:45,576 | DEBUG | __main__ | Retrieved 4 documents for query: ng√†y l·ªÖ trung thu
2025-10-04 17:02:45,576 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 17:02:48,045 | INFO | __main__ | Agent execution completed successfully for session 20251004T165944465-3f466ee0
2025-10-04 17:02:48,045 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 3.374s, Total: 3.374s
2025-10-04 17:02:48,045 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 399
2025-10-04 17:02:48,045 | INFO | RAGClient | RAG reply (len=134)
2025-10-04 17:02:48,045 | INFO | ConversationManager | Bot: Ch·u \u01a1i, hÏnh nh\u01b0 cÛ ch˙t tr\u1ee5c tr\u1eb7c k\u1ef9 thu\u1eadt r\u1ed3i. Ch·u cÛ th\u1ec3 h\u1ecfi l\u1ea1i Ùng c‚u v\u1eeba r\u1ed3i \u0111\u01b0\u1ee3c khÙng \u1ea1? ‘ng s\u1ebd c\u1ed1 g\u1eafng tr\u1ea3 l\u1eddi th\u1eadt nhanh.
2025-10-04 17:02:48,045 | DEBUG | TTSService | Starting TTS download for text length=134
2025-10-04 17:02:48,045 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:02:49,728 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:02:50,219 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:02:58,485 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:03:02,392 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:03:02,394 | INFO | Recorder | Recording finished (elapsed 3.9s).
2025-10-04 17:03:02,402 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:03:02,404 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:03:02,406 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:03:03,787 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 76
2025-10-04 17:03:03,787 | INFO | WhisperSTT | Transcription received: n‡o ch˙ng tÙi l‡ ng‡y gÏ
2025-10-04 17:03:03,787 | INFO | ConversationManager | User: n‡o ch˙ng tÙi l‡ ng‡y gÏ
2025-10-04 17:03:03,796 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:03:03,796 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:03:03,821 | INFO | __main__ | Received new chat request
2025-10-04 17:03:03,821 | DEBUG | __main__ | Request ID: 20251004T165944465-3f466ee0, Data length: 24
2025-10-04 17:03:03,822 | DEBUG | __main__ | Using existing session for ID: 20251004T165944465-3f466ee0
2025-10-04 17:03:03,822 | INFO | __main__ | Processing user input: 'n√†o ch√∫ng t√¥i l√† ng√†y g√¨' for session 20251004T165944465-3f466ee0
2025-10-04 17:03:04,687 | INFO | __main__ | Starting retrieval for query: 'ng√†y g√¨' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:03:04,687 | DEBUG | __main__ | Searching header index...
2025-10-04 17:03:04,696 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:03:04,696 | DEBUG | __main__ | Searching content index...
2025-10-04 17:03:04,710 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:03:04,710 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:03:04,710 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 17:03:04,710 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:03:04,710 | DEBUG | __main__ |   Rank 1: chunk_id=21, hybrid_score=0.4724
2025-10-04 17:03:04,710 | DEBUG | __main__ |   Rank 2: chunk_id=2, hybrid_score=0.4567
2025-10-04 17:03:04,710 | DEBUG | __main__ |   Rank 3: chunk_id=7, hybrid_score=0.4500
2025-10-04 17:03:04,710 | DEBUG | __main__ |   Rank 4: chunk_id=20, hybrid_score=0.4404
2025-10-04 17:03:04,710 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 17:03:04,711 | DEBUG | __main__ | Retrieved chunk 2: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Kh√°m khoa h·ªçc v√† c√¥ng ngh·ªá | Content preview: iv. STEM: Kh√°m ph√° khoa h·ªçc v·ªõi ƒë√®n k√©o qu√¢n, ƒë√®n l·ªìng, t√†u th·ªßy v. Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i v√† th√≠ n...
2025-10-04 17:03:04,711 | DEBUG | __main__ | Retrieved chunk 7: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > ·∫§m th·ª±c (B√£i c·ªè nh√† ChƒÉm) | Content preview: i. Gi√£ c·ªëm, l√†m c·ªëm      ii. L√†m b√°nh d·∫ªo      iii. ·∫®m th·ª±c ƒë·ªãa ph∆∞∆°ng
2025-10-04 17:03:04,711 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 17:03:04,711 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:03:04,711 | DEBUG | __main__ | Retrieved 4 documents for query: ng√†y g√¨
2025-10-04 17:03:04,711 | DEBUG | __main__ | [timing] retrieve 0.024s
2025-10-04 17:03:06,506 | INFO | __main__ | Agent execution completed successfully for session 20251004T165944465-3f466ee0
2025-10-04 17:03:06,506 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 2.683s, Total: 2.684s
2025-10-04 17:03:06,506 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 399
2025-10-04 17:03:06,507 | INFO | RAGClient | RAG reply (len=134)
2025-10-04 17:03:06,507 | INFO | ConversationManager | Bot: Ch·u \u01a1i, hÏnh nh\u01b0 cÛ ch˙t tr\u1ee5c tr\u1eb7c k\u1ef9 thu\u1eadt r\u1ed3i. Ch·u cÛ th\u1ec3 h\u1ecfi l\u1ea1i Ùng c‚u v\u1eeba r\u1ed3i \u0111\u01b0\u1ee3c khÙng \u1ea1? ‘ng s\u1ebd c\u1ed1 g\u1eafng tr\u1ea3 l\u1eddi th\u1eadt nhanh.
2025-10-04 17:03:06,507 | DEBUG | TTSService | Starting TTS download for text length=134
2025-10-04 17:03:06,507 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:03:07,207 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:03:07,606 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:03:15,837 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:03:20,394 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:03:20,396 | INFO | Recorder | Recording finished (elapsed 4.6s).
2025-10-04 17:03:20,403 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:03:20,405 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:03:20,406 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:03:21,615 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 102
2025-10-04 17:03:21,615 | INFO | WhisperSTT | Transcription received: Ùng nÛi trung thu l‡ ng‡y gÏ nh\u1edd Ùng nh\u1edd
2025-10-04 17:03:21,616 | INFO | ConversationManager | User: Ùng nÛi trung thu l‡ ng‡y gÏ nh\u1edd Ùng nh\u1edd
2025-10-04 17:03:21,616 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:03:21,617 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:03:21,635 | INFO | __main__ | Received new chat request
2025-10-04 17:03:21,635 | DEBUG | __main__ | Request ID: 20251004T165944465-3f466ee0, Data length: 40
2025-10-04 17:03:21,635 | DEBUG | __main__ | Using existing session for ID: 20251004T165944465-3f466ee0
2025-10-04 17:03:21,635 | INFO | __main__ | Processing user input: '√¥ng n√≥i trung thu l√† ng√†y g√¨ nh·ªù √¥ng nh·ªù' for session 20251004T165944465-3f466ee0
2025-10-04 17:03:22,122 | INFO | __main__ | Starting retrieval for query: 'trung thu l√† ng√†y g√¨' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:03:22,122 | DEBUG | __main__ | Searching header index...
2025-10-04 17:03:22,140 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:03:22,140 | DEBUG | __main__ | Searching content index...
2025-10-04 17:03:22,153 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:03:22,153 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:03:22,153 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 17:03:22,153 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:03:22,153 | DEBUG | __main__ |   Rank 1: chunk_id=50, hybrid_score=0.9629
2025-10-04 17:03:22,153 | DEBUG | __main__ |   Rank 2: chunk_id=21, hybrid_score=0.5995
2025-10-04 17:03:22,153 | DEBUG | __main__ |   Rank 3: chunk_id=20, hybrid_score=0.4993
2025-10-04 17:03:22,153 | DEBUG | __main__ |   Rank 4: chunk_id=51, hybrid_score=0.4960
2025-10-04 17:03:22,153 | DEBUG | __main__ | Retrieved chunk 50: Trung thu > Trung thu ·ªü Nh·∫≠t B·∫£n | Content preview: Ng∆∞·ªùi Nh·∫≠t g·ªçi Trung thu l√† Tsukimi (tsu: trƒÉng, kimi: ng·∫Øm). T·∫≠p t·ª•c ‚Äúng·∫Øm trƒÉng" du nh·∫≠p t·ª´ Trung ...
2025-10-04 17:03:22,153 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 17:03:22,153 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 17:03:22,153 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 17:03:22,153 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:03:22,153 | DEBUG | __main__ | Retrieved 4 documents for query: trung thu l√† ng√†y g√¨
2025-10-04 17:03:22,153 | DEBUG | __main__ | [timing] retrieve 0.032s
2025-10-04 17:03:33,640 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 17:03:34,641 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 17:03:34,642 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:03:44,808 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 17:03:44,808 | DEBUG | TTSService | Playback thread started
2025-10-04 17:03:44,808 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 17:03:46,637 | ERROR | __main__ | Agent execution timeout for session 20251004T165944465-3f466ee0 after 25 seconds
2025-10-04 17:03:54,126 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:03:56,974 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:03:56,976 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 17:03:56,983 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:03:56,984 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:03:56,986 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:03:58,340 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 39
2025-10-04 17:03:58,340 | INFO | WhisperSTT | Transcription received: n\u0103m n‡o
2025-10-04 17:03:58,341 | INFO | ConversationManager | User: n\u0103m n‡o
2025-10-04 17:03:58,341 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:03:58,343 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:03:58,369 | INFO | __main__ | Received new chat request
2025-10-04 17:03:58,369 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 7
2025-10-04 17:03:58,369 | DEBUG | __main__ | Creating new session with ID: 20251004T170344807-a089f53d
2025-10-04 17:03:58,369 | DEBUG | __main__ | Using request ID: 20251004T170344807-a089f53d
2025-10-04 17:03:58,370 | DEBUG | __main__ | Created new session for ID: 20251004T170344807-a089f53d, total sessions: 3
2025-10-04 17:03:58,370 | INFO | __main__ | Processing user input: 'nƒÉm n√†o' for session 20251004T170344807-a089f53d
2025-10-04 17:03:59,174 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:03:59,174 | INFO | __main__ | Request completed successfully - Session: 0.002s, Agent: 0.804s, Total: 0.805s
2025-10-04 17:03:59,175 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 229
2025-10-04 17:03:59,175 | INFO | RAGClient | RAG reply (len=61)
2025-10-04 17:03:59,175 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi Ùng v\u1ec1 n\u0103m n‡o v\u1eady, nÛi rı h\u01a1n cho Ùng nghe v\u1edbi n‡o.
2025-10-04 17:03:59,175 | DEBUG | TTSService | Starting TTS download for text length=61
2025-10-04 17:03:59,175 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:04:00,780 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:04:07,130 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:04:10,305 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:04:10,305 | INFO | Recorder | Recording finished (elapsed 3.2s).
2025-10-04 17:04:10,318 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:04:10,320 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:04:10,322 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:04:11,454 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 30
2025-10-04 17:04:11,454 | INFO | WhisperSTT | Transcription received: n‡o
2025-10-04 17:04:11,454 | INFO | ConversationManager | User: n‡o
2025-10-04 17:04:11,454 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:04:11,454 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:04:11,486 | INFO | __main__ | Received new chat request
2025-10-04 17:04:11,486 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 3
2025-10-04 17:04:11,486 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:04:11,486 | INFO | __main__ | Processing user input: 'n√†o' for session 20251004T170344807-a089f53d
2025-10-04 17:04:11,925 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:04:11,925 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.440s, Total: 0.440s
2025-10-04 17:04:11,925 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 229
2025-10-04 17:04:11,925 | INFO | RAGClient | RAG reply (len=61)
2025-10-04 17:04:11,925 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi Ùng v\u1ec1 n\u0103m n‡o v\u1eady, nÛi rı h\u01a1n cho Ùng nghe v\u1edbi n‡o.
2025-10-04 17:04:11,925 | DEBUG | TTSService | Starting TTS download for text length=61
2025-10-04 17:04:11,937 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:04:12,693 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:04:36,647 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:04:39,056 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:04:39,073 | INFO | Recorder | Recording finished (elapsed 2.4s).
2025-10-04 17:04:39,078 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:04:39,081 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:04:39,083 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:04:40,276 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 80
2025-10-04 17:04:40,276 | INFO | WhisperSTT | Transcription received: Ùng \u0111ıi ti\u1ebfn s\u0129 n\u0103m n‡o
2025-10-04 17:04:40,276 | INFO | ConversationManager | User: Ùng \u0111ıi ti\u1ebfn s\u0129 n\u0103m n‡o
2025-10-04 17:04:40,276 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:04:40,276 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:04:40,303 | INFO | __main__ | Received new chat request
2025-10-04 17:04:40,304 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 23
2025-10-04 17:04:40,304 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:04:40,304 | INFO | __main__ | Processing user input: '√¥ng ƒë√µi ti·∫øn sƒ© nƒÉm n√†o' for session 20251004T170344807-a089f53d
2025-10-04 17:04:40,740 | INFO | __main__ | Starting retrieval for query: '√¥ng ti·∫øn sƒ© nƒÉm n√†o' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:04:40,740 | DEBUG | __main__ | Searching header index...
2025-10-04 17:04:40,761 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:04:40,761 | DEBUG | __main__ | Searching content index...
2025-10-04 17:04:40,772 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:04:40,772 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:04:40,772 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 17:04:40,772 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:04:40,772 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=0.8799
2025-10-04 17:04:40,772 | DEBUG | __main__ |   Rank 2: chunk_id=55, hybrid_score=0.8440
2025-10-04 17:04:40,772 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.3786
2025-10-04 17:04:40,772 | DEBUG | __main__ |   Rank 4: chunk_id=29, hybrid_score=0.3669
2025-10-04 17:04:40,772 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 17:04:40,772 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 17:04:40,772 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 17:04:40,772 | DEBUG | __main__ | Retrieved chunk 29: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > M√∫a l√¢n, m√∫a s∆∞ t·ª≠ | Content preview: X∆∞a l·∫Øm r·ªìi, c√≥ ch√†ng ti·ªÅu phu s·ªëng ·ªü m·ªôt khu r·ª´ng. M·ªôt ƒë√™m Trung thu trƒÉng s√°ng, ch√†ng g·∫∑p m·ªôt con ...
2025-10-04 17:04:40,772 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:04:40,772 | DEBUG | __main__ | Retrieved 4 documents for query: √¥ng ti·∫øn sƒ© nƒÉm n√†o
2025-10-04 17:04:40,772 | DEBUG | __main__ | [timing] retrieve 0.032s
2025-10-04 17:04:43,705 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:04:43,705 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 3.402s, Total: 3.403s
2025-10-04 17:04:43,710 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 855
2025-10-04 17:04:43,710 | INFO | RAGClient | RAG reply (len=351)
2025-10-04 17:04:43,710 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng Ti\u1ebfn s\u0129 Gi\u1ea5y n‡y l‡ hÏnh t\u01b0\u1ee3ng truy\u1ec1n th\u1ed1ng \u0111\u1ec3 c\u1ea7u mong con tr\u1ebb h\u1ecdc h‡nh ti\u1ebfn t\u1edbi, \u0111\u1ed7 \u0111\u1ea1t hi\u1ec3n vinh \u0111Û ch·u. Ng‡y x\u01b0a, Ùng Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111\u01b0\u1ee3c l‡m b\u1eb1ng gi\u1ea5y, ng\u1ed3i trÍn ki\u1ec7u trÙng r\u1ea5t uy nghi. Ng‡y nay thÏ cÛ thÍm c\u1ea3 Ùng Ti\u1ebfn s\u0129 Gi\u1ea5y AI n\u1eefa, v\u1eeba gi\u1eef nÈt \u0111\u1eb9p d‚n gian l\u1ea1i v\u1eeba hi\u1ec7n \u0111\u1ea1i, cÛ th\u1ec3 trÚ chuy\u1ec7n v‡ k\u1ec3 chuy\u1ec7n cho c·c ch·u nghe n\u1eefa \u0111Û.
2025-10-04 17:04:43,710 | DEBUG | TTSService | Starting TTS download for text length=351
2025-10-04 17:04:43,710 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:04:45,426 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:04:45,572 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:04:45,704 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:04:47,383 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:04:47,410 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:04:49,250 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:04:50,376 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:06:23,623 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:06:33,230 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:06:33,232 | INFO | Recorder | Recording finished (elapsed 9.6s).
2025-10-04 17:06:33,238 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:06:33,240 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:06:33,242 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:06:35,137 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 303
2025-10-04 17:06:35,137 | INFO | WhisperSTT | Transcription received: h\u1ecfi c·i gÏ ‡ h\u1ecfi nÛ ghi c·i gÏ c\u0169ng \u0111\u01b0\u1ee3c ‡ ha lÙ t\u1ef1 gi\u1edbi thi\u1ec7u v\u1ec1 b\u1ea3n th‚n mÏnh ti\u1ebfn s\u0129 gi\u1ea5y ‚y ai t\u1ef1 gi\u1edbi thi\u1ec7u b\u1ea3n th‚n mÏnh
2025-10-04 17:06:35,139 | INFO | ConversationManager | User: h\u1ecfi c·i gÏ ‡ h\u1ecfi nÛ ghi c·i gÏ c\u0169ng \u0111\u01b0\u1ee3c ‡ ha lÙ t\u1ef1 gi\u1edbi thi\u1ec7u v\u1ec1 b\u1ea3n th‚n mÏnh ti\u1ebfn s\u0129 gi\u1ea5y ‚y ai t\u1ef1 gi\u1edbi thi\u1ec7u b\u1ea3n th‚n mÏnh
2025-10-04 17:06:35,139 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:06:35,140 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:06:35,158 | INFO | __main__ | Received new chat request
2025-10-04 17:06:35,159 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 126
2025-10-04 17:06:35,159 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:06:35,159 | INFO | __main__ | Processing user input: 'h·ªèi c√°i g√¨ √† h·ªèi n√≥ ghi c√°i g√¨ c≈©ng ƒë∆∞·ª£c √† ha l√¥ t·ª± gi·ªõi thi·ªáu v·ªÅ b·∫£n th√¢n m√¨nh ti·∫øn sƒ© gi·∫•y √¢y ai t·ª± gi·ªõi thi·ªáu b·∫£n th√¢n m√¨nh' for session 20251004T170344807-a089f53d
2025-10-04 17:06:36,018 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:06:36,018 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.859s, Total: 0.860s
2025-10-04 17:06:36,018 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 631
2025-10-04 17:06:36,018 | INFO | RAGClient | RAG reply (len=243)
2025-10-04 17:06:36,018 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y \u0111‚y. ‘ng \u0111\u01b0\u1ee3c c·c tÏnh nguy\u1ec7n viÍn, B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc v‡ r\u1ea5t nhi\u1ec1u c·c ngh\u1ec7 nh‚n v\u0103n hÛa kh·c nhau t\u1ea1o ra \u0111\u1ec3 trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p th\u1eafc m\u1eafc c\u1ee7a c·c ch·u, \u0111\u1eb7c bi\u1ec7t l‡ trong c·c d\u1ecbp l\u1ec5 h\u1ed9i nh\u01b0 Trung Thu n‡y \u0111Û.
2025-10-04 17:06:36,018 | DEBUG | TTSService | Starting TTS download for text length=243
2025-10-04 17:06:36,018 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:06:37,408 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:06:37,443 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:06:39,297 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:06:39,571 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:06:53,276 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:06:58,442 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:06:58,442 | INFO | Recorder | Recording finished (elapsed 5.2s).
2025-10-04 17:06:58,452 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:06:58,452 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:06:58,452 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:06:59,888 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 195
2025-10-04 17:06:59,889 | INFO | WhisperSTT | Transcription received: \u1eebm ti\u1ebfn s\u0129 gi\u1ea5y ‚y ai Ùng cÛ th\u1ec3 gi\u1edbi thi\u1ec7u cho ch·u v\u1ec1 \u0111Ën Ùng sao \u0111\u01b0\u1ee3c khÙng
2025-10-04 17:06:59,890 | INFO | ConversationManager | User: \u1eebm ti\u1ebfn s\u0129 gi\u1ea5y ‚y ai Ùng cÛ th\u1ec3 gi\u1edbi thi\u1ec7u cho ch·u v\u1ec1 \u0111Ën Ùng sao \u0111\u01b0\u1ee3c khÙng
2025-10-04 17:06:59,890 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:06:59,891 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:06:59,893 | INFO | __main__ | Received new chat request
2025-10-04 17:06:59,894 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 78
2025-10-04 17:06:59,894 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:06:59,894 | INFO | __main__ | Processing user input: '·ª´m ti·∫øn sƒ© gi·∫•y √¢y ai √¥ng c√≥ th·ªÉ gi·ªõi thi·ªáu cho ch√°u v·ªÅ ƒë√®n √¥ng sao ƒë∆∞·ª£c kh√¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:07:00,353 | INFO | __main__ | Starting retrieval for query: 'gi·ªõi thi·ªáu v·ªÅ ƒë√®n √¥ng sao' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:07:00,354 | DEBUG | __main__ | Searching header index...
2025-10-04 17:07:00,366 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:07:00,366 | DEBUG | __main__ | Searching content index...
2025-10-04 17:07:00,376 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:07:00,376 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:07:00,376 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 17:07:00,376 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:07:00,376 | DEBUG | __main__ |   Rank 1: chunk_id=43, hybrid_score=0.9078
2025-10-04 17:07:00,376 | DEBUG | __main__ |   Rank 2: chunk_id=30, hybrid_score=0.8286
2025-10-04 17:07:00,376 | DEBUG | __main__ |   Rank 3: chunk_id=24, hybrid_score=0.4070
2025-10-04 17:07:00,376 | DEBUG | __main__ |   Rank 4: chunk_id=37, hybrid_score=0.4007
2025-10-04 17:07:00,376 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 17:07:00,376 | DEBUG | __main__ | Retrieved chunk 30: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > ƒê√®n k√©o qu√¢n | Content preview: Ng√†y x∆∞a, c√≥ m·ªôt √¥ng vua ·ªü Trung Qu·ªëc mu·ªën m·ªü h·ªôi hoa ƒëƒÉng nh√¢n d·ªãp t·∫øt Trung thu. Vua h·ª©a ban th∆∞·ªün...
2025-10-04 17:07:00,376 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 17:07:00,376 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 17:07:00,376 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:07:00,376 | DEBUG | __main__ | Retrieved 4 documents for query: gi·ªõi thi·ªáu v·ªÅ ƒë√®n √¥ng sao
2025-10-04 17:07:00,376 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 17:07:01,369 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:07:01,369 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.476s, Total: 1.476s
2025-10-04 17:07:01,369 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 952
2025-10-04 17:07:01,369 | INFO | RAGClient | RAG reply (len=402)
2025-10-04 17:07:01,369 | INFO | ConversationManager | Bot: \u0110Ën Ùng sao l‡ lo\u1ea1i \u0111Ën l\u1ed3ng ph\u1ed5 bi\u1ebfn v‡ mang tÌnh bi\u1ec3u t\u01b0\u1ee3ng nh\u1ea5t trong d\u1ecbp Trung thu \u0111Û ch·u. HÏnh ngÙi sao 5 c·nh \u0111\u01b0\u1ee3c bao b\u1ecdc b\u1edfi vÚng trÚn t\u01b0\u1ee3ng tr\u01b0ng cho Ng\u0169 h‡nh ‚m d\u01b0\u01a1ng, th\u1ec3 hi\u1ec7n s\u1ef1 c‚n b\u1eb1ng v‡ h‡i hÚa trong cu\u1ed9c s\u1ed1ng. \u0110Ën Ùng sao l‡ bi\u1ec3u t\u01b0\u1ee3ng c\u1ee7a ·nh s·ng, ni\u1ec1m vui v‡ hy v\u1ecdng, l‡ mÛn \u0111\u1ed3 ch\u01a1i khÙng th\u1ec3 thi\u1ebfu trong c·c bu\u1ed5i r\u01b0\u1edbc \u0111Ën. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 c·c lo\u1ea1i \u0111Ën l\u1ed3ng kh·c khÙng?
2025-10-04 17:07:01,369 | DEBUG | TTSService | Starting TTS download for text length=402
2025-10-04 17:07:01,369 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:07:03,119 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:07:03,147 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:07:05,093 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:07:05,303 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:07:05,327 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:07:06,091 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:07:06,259 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:07:06,391 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:07:07,731 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:07:24,626 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:07:26,427 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:07:26,427 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 17:07:26,446 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:07:26,447 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:07:26,449 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:07:27,849 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 64
2025-10-04 17:07:27,850 | INFO | WhisperSTT | Transcription received: \u1ea1 ch·u c\u1ea3m \u01a1n nh·
2025-10-04 17:07:27,851 | INFO | ConversationManager | User: \u1ea1 ch·u c\u1ea3m \u01a1n nh·
2025-10-04 17:07:27,851 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:07:27,853 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:07:27,863 | INFO | __main__ | Received new chat request
2025-10-04 17:07:27,863 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 17
2025-10-04 17:07:27,863 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:07:27,863 | INFO | __main__ | Processing user input: '·∫° ch√°u c·∫£m ∆°n nh√°' for session 20251004T170344807-a089f53d
2025-10-04 17:07:28,453 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:07:28,453 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.590s, Total: 0.590s
2025-10-04 17:07:28,454 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 247
2025-10-04 17:07:28,454 | INFO | RAGClient | RAG reply (len=69)
2025-10-04 17:07:28,454 | INFO | ConversationManager | Bot: KhÙng cÛ chi ch·u \u01a1i. Ch·u cÚn th\u1eafc m\u1eafc gÏ n\u1eefa khÙng, c\u1ee9 h\u1ecfi Ùng nhÈ.
2025-10-04 17:07:28,454 | DEBUG | TTSService | Starting TTS download for text length=69
2025-10-04 17:07:28,455 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:07:30,236 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:08:30,079 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:08:32,220 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:08:32,222 | INFO | Recorder | Recording finished (elapsed 2.1s).
2025-10-04 17:08:32,229 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:08:32,229 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:08:32,244 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:08:33,588 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 51
2025-10-04 17:08:33,589 | INFO | WhisperSTT | Transcription received: a lÙ a lÙ a lÙ
2025-10-04 17:08:33,589 | INFO | ConversationManager | User: a lÙ a lÙ a lÙ
2025-10-04 17:08:33,589 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:08:33,590 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:08:33,611 | INFO | __main__ | Received new chat request
2025-10-04 17:08:33,611 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 14
2025-10-04 17:08:33,611 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:08:33,611 | INFO | __main__ | Processing user input: 'a l√¥ a l√¥ a l√¥' for session 20251004T170344807-a089f53d
2025-10-04 17:08:34,348 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:08:34,351 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.740s, Total: 0.740s
2025-10-04 17:08:34,351 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 243
2025-10-04 17:08:34,351 | INFO | RAGClient | RAG reply (len=70)
2025-10-04 17:08:34,351 | INFO | ConversationManager | Bot: Alo alo, ch·u g\u1ecdi Ùng cÛ vi\u1ec7c gÏ th\u1ebf? ‘ng \u0111ang s\u1eb5n s‡ng l\u1eafng nghe \u0111‚y.
2025-10-04 17:08:34,351 | DEBUG | TTSService | Starting TTS download for text length=70
2025-10-04 17:08:34,351 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:08:35,931 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:08:44,929 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:08:47,820 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:08:47,823 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 17:08:47,829 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:08:47,829 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:08:47,829 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:08:49,187 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 110
2025-10-04 17:08:49,187 | INFO | WhisperSTT | Transcription received: \u0111\u1ed1m bi\u1ebft m\u1eadt kh\u1ea9u oai phai \u1edf \u0111‚y l‡ gÏ
2025-10-04 17:08:49,188 | INFO | ConversationManager | User: \u0111\u1ed1m bi\u1ebft m\u1eadt kh\u1ea9u oai phai \u1edf \u0111‚y l‡ gÏ
2025-10-04 17:08:49,188 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:08:49,189 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:08:49,207 | INFO | __main__ | Received new chat request
2025-10-04 17:08:49,208 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 38
2025-10-04 17:08:49,208 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:08:49,208 | INFO | __main__ | Processing user input: 'ƒë·ªëm bi·∫øt m·∫≠t kh·∫©u oai phai ·ªü ƒë√¢y l√† g√¨' for session 20251004T170344807-a089f53d
2025-10-04 17:08:50,357 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:08:50,357 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.148s, Total: 1.149s
2025-10-04 17:08:50,360 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 538
2025-10-04 17:08:50,360 | INFO | RAGClient | RAG reply (len=208)
2025-10-04 17:08:50,360 | INFO | ConversationManager | Bot: ‘i, ch·u h\u1ecfi khÛ qu·, Ùng gi‡ r\u1ed3i nÍn trÌ nh\u1edb c\u0169ng l\u1eabn c\u1eabn, khÙng nh\u1edb ra m\u1eadt kh\u1ea9u n‡o c\u1ea3. Ch·u cÛ th\u1ec3 h\u1ecfi Ùng v\u1ec1 Trung thu, v\u1ec1 b\u1ea3o t‡ng hay c·c trÚ ch\u01a1i d‚n gian khÙng, Ùng s\u1ebd c\u1ed1 g\u1eafng h\u1ebft s\u1ee9c \u0111\u1ec3 tr\u1ea3 l\u1eddi ch·u.
2025-10-04 17:08:50,360 | DEBUG | TTSService | Starting TTS download for text length=208
2025-10-04 17:08:50,361 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:08:51,980 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:08:52,250 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:08:52,280 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:08:54,490 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:08:54,936 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:09:28,280 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:09:32,680 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:09:32,680 | INFO | Recorder | Recording finished (elapsed 4.4s).
2025-10-04 17:09:32,693 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:09:32,695 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:09:32,698 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:09:34,280 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 149
2025-10-04 17:09:34,280 | INFO | WhisperSTT | Transcription received: h\u1ecfi Ùng cÛ bi\u1ebft c\u0103n b\u1eadc hai c\u1ee7a b\u1ea3y m\u01b0\u01a1i ba l‡ bao nhiÍu khÙng
2025-10-04 17:09:34,280 | INFO | ConversationManager | User: h\u1ecfi Ùng cÛ bi\u1ebft c\u0103n b\u1eadc hai c\u1ee7a b\u1ea3y m\u01b0\u01a1i ba l‡ bao nhiÍu khÙng
2025-10-04 17:09:34,280 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:09:34,287 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:09:34,310 | INFO | __main__ | Received new chat request
2025-10-04 17:09:34,310 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 62
2025-10-04 17:09:34,310 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:09:34,312 | INFO | __main__ | Processing user input: 'h·ªèi √¥ng c√≥ bi·∫øt cƒÉn b·∫≠c hai c·ªßa b·∫£y m∆∞∆°i ba l√† bao nhi√™u kh√¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:09:35,031 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:09:35,031 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 0.719s, Total: 0.720s
2025-10-04 17:09:35,031 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 578
2025-10-04 17:09:35,031 | INFO | RAGClient | RAG reply (len=225)
2025-10-04 17:09:35,031 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng l‡ Ti\u1ebfn s\u0129 Gi\u1ea5y, chuyÍn gia v\u1ec1 v\u0103n hÛa v‡ l\u1ecbch s\u1eed, \u0111\u1eb7c bi\u1ec7t l‡ nh\u1eefng gÏ liÍn quan \u0111\u1ebfn Trung thu v‡ b\u1ea3o t‡ng \u0111Û ch·u. CÚn v\u1ec1 c\u0103n b\u1eadc hai c\u1ee7a b\u1ea3y m\u01b0\u01a1i ba thÏ Ùng ch\u1ecbu thÙi, c·i n‡y h\u01a1i ngo‡i chuyÍn mÙn c\u1ee7a Ùng r\u1ed3i.
2025-10-04 17:09:35,031 | DEBUG | TTSService | Starting TTS download for text length=225
2025-10-04 17:09:35,031 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:09:37,163 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:09:37,323 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:09:37,346 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:09:39,131 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:09:51,849 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:10:03,152 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:10:03,164 | INFO | Recorder | Recording finished (elapsed 11.3s).
2025-10-04 17:10:03,171 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:10:03,173 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:10:03,174 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:10:04,846 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 237
2025-10-04 17:10:04,846 | INFO | WhisperSTT | Transcription received: n‡y ta lÍn l·t h\u1ed3ng mÌch nhÈ Ùng \u01a1i Ùng \u01a1i ch‡o Ùng nh· ch‡o Ùng \u1ea1 Ùng \u01a1i Ùng \u01a1i t\u1ebft trung thu l‡ gÏ
2025-10-04 17:10:04,847 | INFO | ConversationManager | User: n‡y ta lÍn l·t h\u1ed3ng mÌch nhÈ Ùng \u01a1i Ùng \u01a1i ch‡o Ùng nh· ch‡o Ùng \u1ea1 Ùng \u01a1i Ùng \u01a1i t\u1ebft trung thu l‡ gÏ
2025-10-04 17:10:04,847 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:10:04,847 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:10:04,863 | INFO | __main__ | Received new chat request
2025-10-04 17:10:04,863 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 100
2025-10-04 17:10:04,864 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:10:04,864 | INFO | __main__ | Processing user input: 'n√†y ta l√™n l√°t h·ªìng m√≠ch nh√© √¥ng ∆°i √¥ng ∆°i ch√†o √¥ng nh√° ch√†o √¥ng ·∫° √¥ng ∆°i √¥ng ∆°i t·∫øt trung thu l√† g√¨' for session 20251004T170344807-a089f53d
2025-10-04 17:10:05,551 | INFO | __main__ | Starting retrieval for query: 'T·∫øt Trung thu l√† g√¨' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:10:05,551 | DEBUG | __main__ | Searching header index...
2025-10-04 17:10:05,570 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:10:05,570 | DEBUG | __main__ | Searching content index...
2025-10-04 17:10:05,581 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:10:05,581 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:10:05,581 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 17:10:05,581 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:10:05,581 | DEBUG | __main__ |   Rank 1: chunk_id=21, hybrid_score=0.5697
2025-10-04 17:10:05,581 | DEBUG | __main__ |   Rank 2: chunk_id=20, hybrid_score=0.5348
2025-10-04 17:10:05,581 | DEBUG | __main__ |   Rank 3: chunk_id=51, hybrid_score=0.5339
2025-10-04 17:10:05,581 | DEBUG | __main__ |   Rank 4: chunk_id=46, hybrid_score=0.5242
2025-10-04 17:10:05,581 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 17:10:05,581 | DEBUG | __main__ | Retrieved chunk 20: Trung thu > T·ªïng quan > Th√¥ng tin c∆° b·∫£n (t√™n g·ªçi) | Content preview: T·∫øt Trung Thu, m·ªôt l·ªÖ h·ªôi truy·ªÅn th·ªëng v√† ƒë√°ng tr√¢n tr·ªçng ·ªü Vi·ªát Nam, ƒë∆∞·ª£c t·ªï ch·ª©c h√†ng nƒÉm v√†o ng√†y...
2025-10-04 17:10:05,581 | DEBUG | __main__ | Retrieved chunk 51: Trung thu > Trung thu ·ªü H√†n Qu·ªëc > Trung thu ·ªü H√†n Qu·ªëc | Content preview: T·ª´ kho·∫£ng tr∆∞·ªõc sau C√¥ng nguy√™n, ng∆∞·ªùi H√†n Qu·ªëc ƒë√£ bi·∫øt ƒë·∫øn t·∫øt Trung thu. T·∫øt Trung thu ·ªü H√†n Qu·ªëc ...
2025-10-04 17:10:05,581 | DEBUG | __main__ | Retrieved chunk 46: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > √ù nghƒ©a | Content preview: Tinh th·∫ßn l·ªÖ h·ªôi c·ªßa T·∫øt Trung Thu ƒë∆∞·ª£c th·ªÉ hi·ªán r√µ r√†ng th√¥ng qua c√°c ƒë·ªì trang tr√≠ v√† v·∫≠t ph·∫©m th·ªß ...
2025-10-04 17:10:05,581 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:10:05,581 | DEBUG | __main__ | Retrieved 4 documents for query: T·∫øt Trung thu l√† g√¨
2025-10-04 17:10:05,581 | DEBUG | __main__ | [timing] retrieve 0.030s
2025-10-04 17:10:06,743 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:10:06,743 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.879s, Total: 1.881s
2025-10-04 17:10:06,745 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 943
2025-10-04 17:10:06,746 | INFO | RAGClient | RAG reply (len=403)
2025-10-04 17:10:06,747 | INFO | ConversationManager | Bot: Ch‡o ch·u, theo nh\u1eefng gÏ Ùng nh\u1edb thÏ T\u1ebft Trung Thu l‡ m\u1ed9t l\u1ec5 h\u1ed9i truy\u1ec1n th\u1ed1ng c\u1ee7a Vi\u1ec7t Nam, di\u1ec5n ra v‡o ng‡y 15 th·ng T·m ‚m l\u1ecbch, khi tr\u0103ng trÚn v‡ s·ng nh\u1ea5t \u0111Û ch·u. Ban \u0111\u1ea7u l‡ l\u1ec5 h\u1ed9i cho m\u1ecdi l\u1ee9a tu\u1ed5i, nh\u01b0ng gi\u1edd thÏ nÛ gi\u1ed1ng nh\u01b0 ng‡y h\u1ed9i c\u1ee7a tr\u1ebb em h\u01a1n. Ng\u01b0\u1eddi ta cÚn g\u1ecdi nÛ l‡ T\u1ebft TrÙng Tr\u0103ng hay T\u1ebft Hoa \u0110\u0103ng n\u1eefa. › ngh\u0129a c\u1ee7a ng‡y n‡y l‡ \u0111\u1ec3 gia \u0111Ïnh \u0111o‡n t\u1ee5, g\u1eafn k\u1ebft v‡ th\u1ec3 hi\u1ec7n lÚng bi\u1ebft \u01a1n \u0111Û ch·u.
2025-10-04 17:10:06,747 | DEBUG | TTSService | Starting TTS download for text length=403
2025-10-04 17:10:06,747 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:10:08,801 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:10:09,046 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:10:09,070 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:10:11,081 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:10:11,301 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:10:11,326 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:10:12,826 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:14:05,715 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:14:12,960 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:14:12,962 | INFO | Recorder | Recording finished (elapsed 7.2s).
2025-10-04 17:14:12,968 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:14:12,969 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:14:12,973 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:14:14,406 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 89
2025-10-04 17:14:14,406 | INFO | WhisperSTT | Transcription received: n‡o kh·c r\u1ed3i khuyÍn c·t c\u1ee7a tÙi.
2025-10-04 17:14:14,407 | INFO | ConversationManager | User: n‡o kh·c r\u1ed3i khuyÍn c·t c\u1ee7a tÙi.
2025-10-04 17:14:14,407 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:14:14,409 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:14:14,434 | INFO | __main__ | Received new chat request
2025-10-04 17:14:14,434 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 32
2025-10-04 17:14:14,434 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:14:14,434 | INFO | __main__ | Processing user input: 'n√†o kh√°c r·ªìi khuy√™n c√°t c·ªßa t√¥i.' for session 20251004T170344807-a089f53d
2025-10-04 17:14:15,232 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:14:15,232 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.798s, Total: 0.798s
2025-10-04 17:14:15,233 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:14:15,233 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:14:15,233 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:14:15,234 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:14:15,234 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:14:16,808 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:14:16,970 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:14:24,091 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:14:29,064 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:14:29,067 | INFO | Recorder | Recording finished (elapsed 5.0s).
2025-10-04 17:14:29,073 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:14:29,074 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:14:29,077 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:14:30,453 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 94
2025-10-04 17:14:30,454 | INFO | WhisperSTT | Transcription received: n‡y cÛ t\u01b0\u01a1ng t·c \u0111\u01b0\u1ee3c khÙng
2025-10-04 17:14:30,455 | INFO | ConversationManager | User: n‡y cÛ t\u01b0\u01a1ng t·c \u0111\u01b0\u1ee3c khÙng
2025-10-04 17:14:30,455 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:14:30,455 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:14:30,470 | INFO | __main__ | Received new chat request
2025-10-04 17:14:30,470 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 27
2025-10-04 17:14:30,470 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:14:30,471 | INFO | __main__ | Processing user input: 'n√†y c√≥ t∆∞∆°ng t√°c ƒë∆∞·ª£c kh√¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:14:31,475 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:14:31,475 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.004s, Total: 1.005s
2025-10-04 17:14:31,477 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 266
2025-10-04 17:14:31,477 | INFO | RAGClient | RAG reply (len=66)
2025-10-04 17:14:31,477 | INFO | ConversationManager | Bot: ‘ng \u0111‚y t\u01b0\u01a1ng t·c \u0111\u01b0\u1ee3c v\u1edbi ch·u nË. Ch·u cÛ gÏ mu\u1ed1n h\u1ecfi Ùng khÙng?
2025-10-04 17:14:31,477 | DEBUG | TTSService | Starting TTS download for text length=66
2025-10-04 17:14:31,477 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:14:33,129 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:14:42,764 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:14:49,109 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:14:49,121 | INFO | Recorder | Recording finished (elapsed 6.4s).
2025-10-04 17:14:49,126 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:14:49,126 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:14:49,130 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:14:50,441 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 70
2025-10-04 17:14:50,441 | INFO | WhisperSTT | Transcription received: cho c·c b\u1ea1n nÛi l\u1ea1i nhÈ
2025-10-04 17:14:50,442 | INFO | ConversationManager | User: cho c·c b\u1ea1n nÛi l\u1ea1i nhÈ
2025-10-04 17:14:50,442 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:14:50,443 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:14:50,469 | INFO | __main__ | Received new chat request
2025-10-04 17:14:50,469 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 23
2025-10-04 17:14:50,469 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:14:50,469 | INFO | __main__ | Processing user input: 'cho c√°c b·∫°n n√≥i l·∫°i nh√©' for session 20251004T170344807-a089f53d
2025-10-04 17:14:51,322 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:14:51,322 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.853s, Total: 0.854s
2025-10-04 17:14:51,322 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 219
2025-10-04 17:14:51,322 | INFO | RAGClient | RAG reply (len=56)
2025-10-04 17:14:51,322 | INFO | ConversationManager | Bot: Ch·u nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh \u0111i, Ùng nghe khÙng rı l\u1eafm.
2025-10-04 17:14:51,322 | DEBUG | TTSService | Starting TTS download for text length=56
2025-10-04 17:14:51,322 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:14:52,676 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:14:56,955 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:15:00,009 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:15:00,009 | INFO | Recorder | Recording finished (elapsed 3.1s).
2025-10-04 17:15:00,017 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:15:00,017 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:15:00,022 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:15:01,165 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 40
2025-10-04 17:15:01,171 | INFO | WhisperSTT | Transcription received: tu\u1ed5i r\u1ed3i
2025-10-04 17:15:01,171 | INFO | ConversationManager | User: tu\u1ed5i r\u1ed3i
2025-10-04 17:15:01,172 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:15:01,173 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:15:01,188 | INFO | __main__ | Received new chat request
2025-10-04 17:15:01,188 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 8
2025-10-04 17:15:01,188 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:15:01,188 | INFO | __main__ | Processing user input: 'tu·ªïi r·ªìi' for session 20251004T170344807-a089f53d
2025-10-04 17:15:01,973 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:15:01,973 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.784s, Total: 0.784s
2025-10-04 17:15:01,973 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:15:01,975 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:15:01,976 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:15:01,976 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:15:01,976 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:15:02,708 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:02,907 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:08,788 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:15:11,960 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:15:11,963 | INFO | Recorder | Recording finished (elapsed 3.2s).
2025-10-04 17:15:11,969 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:15:11,970 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:15:11,972 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:15:13,221 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 40
2025-10-04 17:15:13,221 | INFO | WhisperSTT | Transcription received: tu\u1ed5i r\u1ed3i
2025-10-04 17:15:13,222 | INFO | ConversationManager | User: tu\u1ed5i r\u1ed3i
2025-10-04 17:15:13,222 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:15:13,223 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:15:13,238 | INFO | __main__ | Received new chat request
2025-10-04 17:15:13,238 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 8
2025-10-04 17:15:13,238 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:15:13,239 | INFO | __main__ | Processing user input: 'tu·ªïi r·ªìi' for session 20251004T170344807-a089f53d
2025-10-04 17:15:13,723 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:15:13,723 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.485s, Total: 0.485s
2025-10-04 17:15:13,724 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:15:13,724 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:15:13,724 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:15:13,725 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:15:13,725 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:15:14,435 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:14,597 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:20,973 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:15:24,970 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:15:24,973 | INFO | Recorder | Recording finished (elapsed 4.0s).
2025-10-04 17:15:24,979 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:15:24,979 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:15:24,979 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:15:26,239 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 109
2025-10-04 17:15:26,239 | INFO | WhisperSTT | Transcription received: tu\u1ed5i l\u1ea1i nh· Ùng \u01a1i Ùng bao nhiÍu tu\u1ed5i r\u1ed3i
2025-10-04 17:15:26,240 | INFO | ConversationManager | User: tu\u1ed5i l\u1ea1i nh· Ùng \u01a1i Ùng bao nhiÍu tu\u1ed5i r\u1ed3i
2025-10-04 17:15:26,240 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:15:26,241 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:15:26,254 | INFO | __main__ | Received new chat request
2025-10-04 17:15:26,255 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 42
2025-10-04 17:15:26,255 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:15:26,255 | INFO | __main__ | Processing user input: 'tu·ªïi l·∫°i nh√° √¥ng ∆°i √¥ng bao nhi√™u tu·ªïi r·ªìi' for session 20251004T170344807-a089f53d
2025-10-04 17:15:27,289 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:15:27,289 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.034s, Total: 1.035s
2025-10-04 17:15:27,289 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 560
2025-10-04 17:15:27,289 | INFO | RAGClient | RAG reply (len=195)
2025-10-04 17:15:27,289 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, l‡ m\u1ed9t hÏnh t\u01b0\u1ee3ng truy\u1ec1n th\u1ed1ng nÍn Ùng khÙng cÛ tu\u1ed5i nh\u01b0 m\u1ecdi ng\u01b0\u1eddi \u0111‚u ch·u \u1ea1. ‘ng ch\u1ec9 bi\u1ebft l‡ mÏnh \u0111„ \u1edf \u0111‚y r\u1ea5t l‚u r\u1ed3i, \u0111\u1ee7 l‚u \u0111\u1ec3 nh\u1edb v\u1ec1 nh\u1eefng m˘a Trung Thu x\u01b0a c\u0169 \u0111Û ch·u.
2025-10-04 17:15:27,289 | DEBUG | TTSService | Starting TTS download for text length=195
2025-10-04 17:15:27,289 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:15:29,089 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:29,124 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:15:30,993 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:42,340 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:15:45,729 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:15:45,731 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 17:15:45,738 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:15:45,739 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:15:45,741 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:15:46,897 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 51
2025-10-04 17:15:46,897 | INFO | WhisperSTT | Transcription received: Ùng \u1edf \u0111‚u
2025-10-04 17:15:46,898 | INFO | ConversationManager | User: Ùng \u1edf \u0111‚u
2025-10-04 17:15:46,898 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:15:46,899 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:15:46,920 | INFO | __main__ | Received new chat request
2025-10-04 17:15:46,920 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 9
2025-10-04 17:15:46,921 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:15:46,921 | INFO | __main__ | Processing user input: '√¥ng ·ªü ƒë√¢u' for session 20251004T170344807-a089f53d
2025-10-04 17:15:47,399 | INFO | __main__ | Starting retrieval for query: '√¥ng ·ªü ƒë√¢u' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:15:47,399 | DEBUG | __main__ | Searching header index...
2025-10-04 17:15:47,410 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:15:47,410 | DEBUG | __main__ | Searching content index...
2025-10-04 17:15:47,424 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:15:47,424 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:15:47,424 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 17:15:47,424 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:15:47,424 | DEBUG | __main__ |   Rank 1: chunk_id=15, hybrid_score=0.3826
2025-10-04 17:15:47,424 | DEBUG | __main__ |   Rank 2: chunk_id=54, hybrid_score=0.3802
2025-10-04 17:15:47,424 | DEBUG | __main__ |   Rank 3: chunk_id=29, hybrid_score=0.3759
2025-10-04 17:15:47,424 | DEBUG | __main__ |   Rank 4: chunk_id=3, hybrid_score=0.3746
2025-10-04 17:15:47,424 | DEBUG | __main__ | Retrieved chunk 15: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > B·∫£o t√†ng l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉn h√≥a quan tr·ªçng | Content preview: B·∫£o t√†ng kh√¥ng ch·ªâ l√† ƒëi·ªÉm ƒë·∫øn c·ªßa nh·ªØng du kh√°ch y√™u th√≠ch vƒÉn h√≥a d√¢n t·ªôc m√† c√≤n l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉ...
2025-10-04 17:15:47,424 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 17:15:47,424 | DEBUG | __main__ | Retrieved chunk 29: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > M√∫a l√¢n, m√∫a s∆∞ t·ª≠ | Content preview: X∆∞a l·∫Øm r·ªìi, c√≥ ch√†ng ti·ªÅu phu s·ªëng ·ªü m·ªôt khu r·ª´ng. M·ªôt ƒë√™m Trung thu trƒÉng s√°ng, ch√†ng g·∫∑p m·ªôt con ...
2025-10-04 17:15:47,424 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 17:15:47,424 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:15:47,424 | DEBUG | __main__ | Retrieved 4 documents for query: √¥ng ·ªü ƒë√¢u
2025-10-04 17:15:47,424 | DEBUG | __main__ | [timing] retrieve 0.025s
2025-10-04 17:15:47,927 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:15:47,927 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.006s, Total: 1.007s
2025-10-04 17:15:47,927 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 320
2025-10-04 17:15:47,928 | INFO | RAGClient | RAG reply (len=95)
2025-10-04 17:15:47,928 | INFO | ConversationManager | Bot: ‘ng \u0111ang \u1edf B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc Vi\u1ec7t Nam nË ch·u. \u0110‚y l‡ m\u1ed9t \u0111\u1ecba ch\u1ec9 v\u0103n hÛa quan tr\u1ecdng l\u1eafm \u0111Û.
2025-10-04 17:15:47,928 | DEBUG | TTSService | Starting TTS download for text length=95
2025-10-04 17:15:47,929 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:15:49,650 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:15:49,912 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:16:08,091 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:16:12,263 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:16:12,266 | INFO | Recorder | Recording finished (elapsed 4.2s).
2025-10-04 17:16:12,285 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:16:12,287 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:16:12,289 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:16:13,801 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 130
2025-10-04 17:16:13,806 | INFO | WhisperSTT | Transcription received: cho r\u1eb1ng \u0111‚y \u0111\u1ec3 em n\u1ea5u m\u1ed9t c·i \u0111„ \u0103n qu· va chua
2025-10-04 17:16:13,808 | INFO | ConversationManager | User: cho r\u1eb1ng \u0111‚y \u0111\u1ec3 em n\u1ea5u m\u1ed9t c·i \u0111„ \u0103n qu· va chua
2025-10-04 17:16:13,808 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:16:13,809 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:16:13,823 | INFO | __main__ | Received new chat request
2025-10-04 17:16:13,823 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 48
2025-10-04 17:16:13,823 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:16:13,823 | INFO | __main__ | Processing user input: 'cho r·∫±ng ƒë√¢y ƒë·ªÉ em n·∫•u m·ªôt c√°i ƒë√£ ƒÉn qu√° va chua' for session 20251004T170344807-a089f53d
2025-10-04 17:16:14,516 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:16:14,516 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.693s, Total: 0.693s
2025-10-04 17:16:14,516 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:16:14,516 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:16:14,516 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:16:14,516 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:16:14,516 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:16:15,290 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:16:15,576 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:16:21,147 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:16:24,172 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:16:24,174 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 17:16:24,179 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:16:24,179 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:16:24,183 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:16:25,373 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 56
2025-10-04 17:16:25,373 | INFO | WhisperSTT | Transcription received: Ùng cÛ v\u1ee3 ch\u01b0a
2025-10-04 17:16:25,373 | INFO | ConversationManager | User: Ùng cÛ v\u1ee3 ch\u01b0a
2025-10-04 17:16:25,374 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:16:25,375 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:16:25,390 | INFO | __main__ | Received new chat request
2025-10-04 17:16:25,390 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 14
2025-10-04 17:16:25,390 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:16:25,391 | INFO | __main__ | Processing user input: '√¥ng c√≥ v·ª£ ch∆∞a' for session 20251004T170344807-a089f53d
2025-10-04 17:16:26,376 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:16:26,376 | INFO | __main__ | Request completed successfully - Session: 0.002s, Agent: 0.985s, Total: 0.986s
2025-10-04 17:16:26,376 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 461
2025-10-04 17:16:26,376 | INFO | RAGClient | RAG reply (len=163)
2025-10-04 17:16:26,376 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi l\u1ea1 qu·, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y m‡, l‡m gÏ cÛ v\u1ee3 cÛ con nh\u01b0 ng\u01b0\u1eddi th\u01b0\u1eddng \u0111‚u ch·u. ‘ng ch\u1ec9 cÛ nhi\u1ec7m v\u1ee5 l‡ mang ki\u1ebfn th\u1ee9c v‡ ni\u1ec1m vui \u0111\u1ebfn cho c·c ch·u thÙi nË.
2025-10-04 17:16:26,376 | DEBUG | TTSService | Starting TTS download for text length=163
2025-10-04 17:16:26,376 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:16:28,258 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:16:28,294 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:16:29,643 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:16:43,278 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:16:49,610 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:16:49,614 | INFO | Recorder | Recording finished (elapsed 6.3s).
2025-10-04 17:16:49,618 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:16:49,618 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:16:49,624 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:16:51,126 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 156
2025-10-04 17:16:51,126 | INFO | WhisperSTT | Transcription received: n‡y r\u1ed3i \u0111i Ùng \u01a1i \u0111i Ùng \u01a1i \u0111i Ùng \u01a1i con xin b\u1ea3o l‡ Ùng \u01a1i
2025-10-04 17:16:51,127 | INFO | ConversationManager | User: n‡y r\u1ed3i \u0111i Ùng \u01a1i \u0111i Ùng \u01a1i \u0111i Ùng \u01a1i con xin b\u1ea3o l‡ Ùng \u01a1i
2025-10-04 17:16:51,127 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:16:51,129 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:16:51,139 | INFO | __main__ | Received new chat request
2025-10-04 17:16:51,140 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 59
2025-10-04 17:16:51,140 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:16:51,140 | INFO | __main__ | Processing user input: 'n√†y r·ªìi ƒëi √¥ng ∆°i ƒëi √¥ng ∆°i ƒëi √¥ng ∆°i con xin b·∫£o l√† √¥ng ∆°i' for session 20251004T170344807-a089f53d
2025-10-04 17:16:51,850 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:16:51,850 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.710s, Total: 0.711s
2025-10-04 17:16:51,850 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:16:51,850 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:16:51,850 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:16:51,850 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:16:51,850 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:16:52,491 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:16:52,648 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:02,172 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:17:05,846 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:17:05,846 | INFO | Recorder | Recording finished (elapsed 3.7s).
2025-10-04 17:17:05,854 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:17:05,854 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:17:05,859 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:17:07,156 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 115
2025-10-04 17:17:07,156 | INFO | WhisperSTT | Transcription received: h\u1ecfi ch·u mu\u1ed1n h\u1ecdc gi\u1ecfi thÏ ph\u1ea3i l‡m th\u1ebf n‡o
2025-10-04 17:17:07,158 | INFO | ConversationManager | User: h\u1ecfi ch·u mu\u1ed1n h\u1ecdc gi\u1ecfi thÏ ph\u1ea3i l‡m th\u1ebf n‡o
2025-10-04 17:17:07,158 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:17:07,159 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:17:07,174 | INFO | __main__ | Received new chat request
2025-10-04 17:17:07,174 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 43
2025-10-04 17:17:07,174 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:17:07,174 | INFO | __main__ | Processing user input: 'h·ªèi ch√°u mu·ªën h·ªçc gi·ªèi th√¨ ph·∫£i l√†m th·∫ø n√†o' for session 20251004T170344807-a089f53d
2025-10-04 17:17:07,991 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:17:07,991 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.817s, Total: 0.817s
2025-10-04 17:17:07,992 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 650
2025-10-04 17:17:07,992 | INFO | RAGClient | RAG reply (len=252)
2025-10-04 17:17:07,992 | INFO | ConversationManager | Bot: Mu\u1ed1n h\u1ecdc gi\u1ecfi h\u1ea3 ch·u? ¿, Ùng ngh\u0129 l‡ ch·u c\u1ea7n ph\u1ea3i ch\u0103m ch\u1ec9 nË, luÙn tÚ mÚ v‡ \u0111\u1eb7t c‚u h\u1ecfi. Gi\u1ed1ng nh\u01b0 Ùng v\u1eady \u0111Û, luÙn tÏm tÚi h\u1ecdc h\u1ecfi \u0111\u1ec3 bi\u1ebft thÍm nhi\u1ec1u \u0111i\u1ec1u hay ho. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 v\u1ec1 nh\u1eefng c‚u chuy\u1ec7n Trung Thu x\u01b0a \u0111\u1ec3 ch·u cÛ thÍm c\u1ea3m h\u1ee9ng khÙng?
2025-10-04 17:17:07,992 | DEBUG | TTSService | Starting TTS download for text length=252
2025-10-04 17:17:07,992 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:17:09,776 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:10,026 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:10,156 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:17:11,576 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:11,592 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:17:13,102 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:34,193 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:17:39,587 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:17:39,590 | INFO | Recorder | Recording finished (elapsed 5.4s).
2025-10-04 17:17:39,597 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:17:39,598 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:17:39,600 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:17:41,015 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 75
2025-10-04 17:17:41,015 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i b\u1ea1n xi cÛ ngoan khÙng
2025-10-04 17:17:41,016 | INFO | ConversationManager | User: Ùng \u01a1i b\u1ea1n xi cÛ ngoan khÙng
2025-10-04 17:17:41,017 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:17:41,018 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:17:41,034 | INFO | __main__ | Received new chat request
2025-10-04 17:17:41,034 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 28
2025-10-04 17:17:41,034 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:17:41,034 | INFO | __main__ | Processing user input: '√¥ng ∆°i b·∫°n xi c√≥ ngoan kh√¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:17:41,802 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:17:41,802 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.769s, Total: 0.769s
2025-10-04 17:17:41,809 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 338
2025-10-04 17:17:41,810 | INFO | RAGClient | RAG reply (len=115)
2025-10-04 17:17:41,810 | INFO | ConversationManager | Bot: B\u1ea1n Xi l‡ ai v\u1eady ch·u? ‘ng ch\u01b0a nghe nÛi v\u1ec1 b\u1ea1n \u1ea5y bao gi\u1edd c\u1ea3. Ch·u cÛ th\u1ec3 gi\u1edbi thi\u1ec7u thÍm cho Ùng bi\u1ebft \u0111\u01b0\u1ee3c khÙng?
2025-10-04 17:17:41,810 | DEBUG | TTSService | Starting TTS download for text length=115
2025-10-04 17:17:41,810 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:17:43,759 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:44,006 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:17:51,233 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:17:55,499 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:17:55,510 | INFO | Recorder | Recording finished (elapsed 4.3s).
2025-10-04 17:17:55,517 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:17:55,518 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:17:55,520 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:17:56,884 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 176
2025-10-04 17:17:56,885 | INFO | WhisperSTT | Transcription received: hi\u1ec7n b‚y gi\u1edd \u0111ang b\u1ed1n tu\u1ed5i Ùng \u1ea1 \u0111ang \u0111\u1ee9ng tr\u01b0\u1edbc m\u1eb7t Ùng \u0111‚y n‡y
2025-10-04 17:17:56,886 | INFO | ConversationManager | User: hi\u1ec7n b‚y gi\u1edd \u0111ang b\u1ed1n tu\u1ed5i Ùng \u1ea1 \u0111ang \u0111\u1ee9ng tr\u01b0\u1edbc m\u1eb7t Ùng \u0111‚y n‡y
2025-10-04 17:17:56,886 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:17:56,887 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:17:56,906 | INFO | __main__ | Received new chat request
2025-10-04 17:17:56,907 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 64
2025-10-04 17:17:56,907 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:17:56,907 | INFO | __main__ | Processing user input: 'hi·ªán b√¢y gi·ªù ƒëang b·ªën tu·ªïi √¥ng ·∫° ƒëang ƒë·ª©ng tr∆∞·ªõc m·∫∑t √¥ng ƒë√¢y n√†y' for session 20251004T170344807-a089f53d
2025-10-04 17:17:57,899 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:17:57,899 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.992s, Total: 0.993s
2025-10-04 17:17:57,899 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 401
2025-10-04 17:17:57,899 | INFO | RAGClient | RAG reply (len=143)
2025-10-04 17:17:57,899 | INFO | ConversationManager | Bot: ‘i, ch·u b\u1ed1n tu\u1ed5i r\u1ed3i sao? TrÙng ch·u bÈ nh\u1ecf th\u1ebf m‡ \u0111„ bi\u1ebft nÛi chuy\u1ec7n v\u1edbi Ùng r\u1ed3i, gi\u1ecfi qu· nË. Ch·u cÛ thÌch c·c mÛn \u0111\u1ed3 ch\u01a1i Trung Thu khÙng?
2025-10-04 17:17:57,899 | DEBUG | TTSService | Starting TTS download for text length=143
2025-10-04 17:17:57,899 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:17:59,704 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:18:00,198 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:18:00,500 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:18:16,134 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:18:24,030 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:18:24,032 | INFO | Recorder | Recording finished (elapsed 7.9s).
2025-10-04 17:18:24,041 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:18:24,042 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:18:24,044 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:18:25,301 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 123
2025-10-04 17:18:25,301 | INFO | WhisperSTT | Transcription received: Ùng l‡ ai \u0111\u1ea5y Ùng l‡ ai \u0111Ûi Ùng l‡ ai \u0111\u1ea5y
2025-10-04 17:18:25,301 | INFO | ConversationManager | User: Ùng l‡ ai \u0111\u1ea5y Ùng l‡ ai \u0111Ûi Ùng l‡ ai \u0111\u1ea5y
2025-10-04 17:18:25,301 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:18:25,304 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:18:25,326 | INFO | __main__ | Received new chat request
2025-10-04 17:18:25,326 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 41
2025-10-04 17:18:25,326 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:18:25,326 | INFO | __main__ | Processing user input: '√¥ng l√† ai ƒë·∫•y √¥ng l√† ai ƒë√≥i √¥ng l√† ai ƒë·∫•y' for session 20251004T170344807-a089f53d
2025-10-04 17:18:26,212 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:18:26,212 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.886s, Total: 0.886s
2025-10-04 17:18:26,212 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 506
2025-10-04 17:18:26,212 | INFO | RAGClient | RAG reply (len=188)
2025-10-04 17:18:26,212 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y nË ch·u. ‘ng \u0111\u01b0\u1ee3c c·c tÏnh nguy\u1ec7n viÍn, B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc v‡ c·c ngh\u1ec7 nh‚n v\u0103n hÛa t\u1ea1o ra \u0111\u1ec3 trÚ chuy\u1ec7n v‡ gi\u1ea3i \u0111·p th\u1eafc m\u1eafc cho c·c ch·u trong d\u1ecbp Trung Thu n‡y \u0111Û.
2025-10-04 17:18:26,212 | DEBUG | TTSService | Starting TTS download for text length=188
2025-10-04 17:18:26,212 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:18:27,828 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:18:27,852 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:18:29,772 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:18:30,041 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:19:03,423 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:19:05,717 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:19:05,719 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 17:19:05,724 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:19:05,726 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:19:05,728 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:19:07,070 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 63
2025-10-04 17:19:07,070 | INFO | WhisperSTT | Transcription received: hÙng cÛ cÚn hay khÙng
2025-10-04 17:19:07,076 | INFO | ConversationManager | User: hÙng cÛ cÚn hay khÙng
2025-10-04 17:19:07,076 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:19:07,076 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:19:07,095 | INFO | __main__ | Received new chat request
2025-10-04 17:19:07,095 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 21
2025-10-04 17:19:07,095 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:19:07,095 | INFO | __main__ | Processing user input: 'h√¥ng c√≥ c√≤n hay kh√¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:19:07,645 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:19:07,645 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.550s, Total: 0.550s
2025-10-04 17:19:07,645 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:19:07,645 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:19:07,645 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:19:07,645 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:19:07,645 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:19:09,372 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:19:09,529 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:19:14,830 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:19:21,526 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:19:21,528 | INFO | Recorder | Recording finished (elapsed 6.7s).
2025-10-04 17:19:21,534 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:19:21,536 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:19:21,537 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:19:22,979 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 96
2025-10-04 17:19:22,979 | INFO | WhisperSTT | Transcription received: Ùng Ùng cÛ th\u1eadt trÍn \u0111\u1eddi hay khÙng
2025-10-04 17:19:22,979 | INFO | ConversationManager | User: Ùng Ùng cÛ th\u1eadt trÍn \u0111\u1eddi hay khÙng
2025-10-04 17:19:22,979 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:19:22,979 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:19:22,994 | INFO | __main__ | Received new chat request
2025-10-04 17:19:22,994 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 34
2025-10-04 17:19:22,994 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:19:22,994 | INFO | __main__ | Processing user input: '√¥ng √¥ng c√≥ th·∫≠t tr√™n ƒë·ªùi hay kh√¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:19:23,890 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:19:23,890 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.895s, Total: 0.895s
2025-10-04 17:19:23,891 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 374
2025-10-04 17:19:23,891 | INFO | RAGClient | RAG reply (len=126)
2025-10-04 17:19:23,892 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, m\u1ed9t hÏnh t\u01b0\u1ee3ng \u0111\u01b0\u1ee3c t\u1ea1o ra \u0111\u1ec3 trÚ chuy\u1ec7n c˘ng c·c ch·u \u0111Û. ‘ng cÛ th\u1eadt trong c‚u chuy\u1ec7n Trung Thu n‡y nË.
2025-10-04 17:19:23,892 | DEBUG | TTSService | Starting TTS download for text length=126
2025-10-04 17:19:23,892 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:19:25,589 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:19:25,782 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:20:26,636 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:20:29,553 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:20:29,563 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 17:20:29,570 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:20:29,572 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:20:29,573 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:20:30,928 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 68
2025-10-04 17:20:30,929 | INFO | WhisperSTT | Transcription received: \u1edd t\u1ebft hÙm nay r\u1ed3i n‡o
2025-10-04 17:20:30,930 | INFO | ConversationManager | User: \u1edd t\u1ebft hÙm nay r\u1ed3i n‡o
2025-10-04 17:20:30,930 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:20:30,932 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:20:30,933 | INFO | __main__ | Received new chat request
2025-10-04 17:20:30,933 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 21
2025-10-04 17:20:30,933 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:20:30,933 | INFO | __main__ | Processing user input: '·ªù t·∫øt h√¥m nay r·ªìi n√†o' for session 20251004T170344807-a089f53d
2025-10-04 17:20:31,680 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:20:31,680 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.747s, Total: 0.747s
2025-10-04 17:20:31,681 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 234
2025-10-04 17:20:31,681 | INFO | RAGClient | RAG reply (len=71)
2025-10-04 17:20:31,682 | INFO | ConversationManager | Bot: HÙm nay l‡ T\u1ebft Trung Thu \u0111Û ch·u. Ch·u cÛ thÌch T\u1ebft Trung Thu khÙng nË?
2025-10-04 17:20:31,682 | DEBUG | TTSService | Starting TTS download for text length=71
2025-10-04 17:20:31,682 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:20:33,556 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:20:42,049 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:20:50,602 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:20:50,604 | INFO | Recorder | Recording finished (elapsed 8.5s).
2025-10-04 17:20:50,610 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:20:50,612 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:20:50,615 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:20:51,988 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 185
2025-10-04 17:20:51,988 | INFO | WhisperSTT | Transcription received: \u5514 cÛ nghe rı l‡ t\u1ebft trung thu ‡ sao l\u1ea1i \u0111Û l‡ t\u1ebft trung thu nh\u1edf \u0111‚y l‡ ng‡y t\u1ebft
2025-10-04 17:20:51,988 | INFO | ConversationManager | User: \u5514 cÛ nghe rı l‡ t\u1ebft trung thu ‡ sao l\u1ea1i \u0111Û l‡ t\u1ebft trung thu nh\u1edf \u0111‚y l‡ ng‡y t\u1ebft
2025-10-04 17:20:51,997 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:20:51,998 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:20:52,018 | INFO | __main__ | Received new chat request
2025-10-04 17:20:52,019 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 79
2025-10-04 17:20:52,019 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:20:52,019 | INFO | __main__ | Processing user input: 'Âîî c√≥ nghe r√µ l√† t·∫øt trung thu √† sao l·∫°i ƒë√≥ l√† t·∫øt trung thu nh·ªü ƒë√¢y l√† ng√†y t·∫øt' for session 20251004T170344807-a089f53d
2025-10-04 17:20:53,072 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:20:53,072 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.054s, Total: 1.055s
2025-10-04 17:20:53,072 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 721
2025-10-04 17:20:53,072 | INFO | RAGClient | RAG reply (len=301)
2025-10-04 17:20:53,072 | INFO | ConversationManager | Bot: Ch·u \u01a1i, hÙm nay \u0111˙ng l‡ T\u1ebft Trung Thu \u0111Û. T\u1ebft Trung Thu l‡ m\u1ed9t ng‡y l\u1ec5 truy\u1ec1n th\u1ed1ng c\u1ee7a Vi\u1ec7t Nam, th\u01b0\u1eddng di\u1ec5n ra v‡o ng‡y 15 th·ng 8 ‚m l\u1ecbch h‡ng n\u0103m. Ng‡y n‡y m\u1ecdi ng\u01b0\u1eddi th\u01b0\u1eddng qu‚y qu\u1ea7n bÍn gia \u0111Ïnh, ng\u1eafm tr\u0103ng, \u0103n b·nh v‡ tr\u1ebb em thÏ \u0111\u01b0\u1ee3c r\u01b0\u1edbc \u0111Ën, m˙a l‚n n\u1eefa. Ch·u cÛ thÌch T\u1ebft Trung Thu khÙng nË?
2025-10-04 17:20:53,072 | DEBUG | TTSService | Starting TTS download for text length=301
2025-10-04 17:20:53,072 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:20:54,448 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:20:54,474 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:20:56,248 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:20:56,431 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:20:56,448 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:20:58,198 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:20:58,854 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:21:18,571 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:21:24,227 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:21:24,230 | INFO | Recorder | Recording finished (elapsed 5.7s).
2025-10-04 17:21:24,238 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:21:24,240 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:21:24,241 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:21:25,726 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 145
2025-10-04 17:21:25,726 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng cÛ bi\u1ebft hÙm nay th\u1eddi ti\u1ebft nh\u01b0 th\u1ebf n‡o khÙng Ùng
2025-10-04 17:21:25,726 | INFO | ConversationManager | User: Ùng \u01a1i Ùng cÛ bi\u1ebft hÙm nay th\u1eddi ti\u1ebft nh\u01b0 th\u1ebf n‡o khÙng Ùng
2025-10-04 17:21:25,726 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:21:25,731 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:21:25,747 | INFO | __main__ | Received new chat request
2025-10-04 17:21:25,748 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 58
2025-10-04 17:21:25,748 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:21:25,748 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ bi·∫øt h√¥m nay th·ªùi ti·∫øt nh∆∞ th·∫ø n√†o kh√¥ng √¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:21:26,377 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:21:26,377 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.630s, Total: 0.631s
2025-10-04 17:21:26,379 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 406
2025-10-04 17:21:26,379 | INFO | RAGClient | RAG reply (len=143)
2025-10-04 17:21:26,380 | INFO | ConversationManager | Bot: ‘ng \u01a1i, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y nÍn khÙng cÛ bi\u1ebft v\u1ec1 th\u1eddi ti\u1ebft \u0111‚u ch·u \u1ea1. Nh\u01b0ng Ùng hy v\u1ecdng hÙm nay tr\u1eddi s\u1ebd \u0111\u1eb9p \u0111\u1ec3 ch·u ch\u01a1i Trung Thu vui v\u1ebb nhÈ.
2025-10-04 17:21:26,380 | DEBUG | TTSService | Starting TTS download for text length=143
2025-10-04 17:21:26,380 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:21:28,136 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:21:28,289 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:21:42,247 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:21:44,517 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:21:44,520 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 17:21:44,526 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:21:44,528 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:21:44,528 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:21:45,753 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 67
2025-10-04 17:21:45,753 | INFO | WhisperSTT | Transcription received: v‚ng m\u1ebfch v\u1eady c·i gÏ
2025-10-04 17:21:45,754 | INFO | ConversationManager | User: v‚ng m\u1ebfch v\u1eady c·i gÏ
2025-10-04 17:21:45,754 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:21:45,756 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:21:45,757 | INFO | __main__ | Received new chat request
2025-10-04 17:21:45,757 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 20
2025-10-04 17:21:45,757 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:21:45,757 | INFO | __main__ | Processing user input: 'v√¢ng m·∫øch v·∫≠y c√°i g√¨' for session 20251004T170344807-a089f53d
2025-10-04 17:21:46,626 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:21:46,626 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.870s, Total: 0.870s
2025-10-04 17:21:46,626 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 291
2025-10-04 17:21:46,627 | INFO | RAGClient | RAG reply (len=83)
2025-10-04 17:21:46,627 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:21:46,628 | DEBUG | TTSService | Starting TTS download for text length=83
2025-10-04 17:21:46,628 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:21:47,983 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:21:48,216 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:21:53,775 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:21:56,550 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:21:56,550 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-04 17:21:56,572 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:21:56,573 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:21:56,575 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:21:57,795 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 83
2025-10-04 17:21:57,795 | INFO | WhisperSTT | Transcription received: h\u1ecfi l\u1ea1i Ùng bi\u1ebft v\u1ec1 c·i gÏ
2025-10-04 17:21:57,796 | INFO | ConversationManager | User: h\u1ecfi l\u1ea1i Ùng bi\u1ebft v\u1ec1 c·i gÏ
2025-10-04 17:21:57,796 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:21:57,797 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:21:57,816 | INFO | __main__ | Received new chat request
2025-10-04 17:21:57,816 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 26
2025-10-04 17:21:57,816 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:21:57,816 | INFO | __main__ | Processing user input: 'h·ªèi l·∫°i √¥ng bi·∫øt v·ªÅ c√°i g√¨' for session 20251004T170344807-a089f53d
2025-10-04 17:21:58,740 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:21:58,740 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.924s, Total: 0.924s
2025-10-04 17:21:58,741 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 445
2025-10-04 17:21:58,741 | INFO | RAGClient | RAG reply (len=162)
2025-10-04 17:21:58,742 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, Ùng bi\u1ebft nhi\u1ec1u chuy\u1ec7n v\u1ec1 T\u1ebft Trung Thu, v\u1ec1 B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc v‡ nh\u1eefng c‚u chuy\u1ec7n x\u01b0a c\u0169 l\u1eafm. Ch·u cÛ mu\u1ed1n h\u1ecfi gÏ v\u1ec1 nh\u1eefng th\u1ee9 \u0111Û khÙng nË?
2025-10-04 17:21:58,742 | DEBUG | TTSService | Starting TTS download for text length=162
2025-10-04 17:21:58,742 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:00,904 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:01,080 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:01,100 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:03,176 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:15,127 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:22:22,126 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:22:22,135 | INFO | Recorder | Recording finished (elapsed 7.0s).
2025-10-04 17:22:22,141 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:22:22,144 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:22:22,145 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:22:23,734 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 162
2025-10-04 17:22:23,734 | INFO | WhisperSTT | Transcription received: Ùng cho ch·u h\u1ecfi l‡ b\u1ea3o t‡ng d‚n t\u1ed9c h\u1ecdp hÙm nay \u0111Ûng c\u1eeda m\u1ea5y gi\u1edd
2025-10-04 17:22:23,734 | INFO | ConversationManager | User: Ùng cho ch·u h\u1ecfi l‡ b\u1ea3o t‡ng d‚n t\u1ed9c h\u1ecdp hÙm nay \u0111Ûng c\u1eeda m\u1ea5y gi\u1edd
2025-10-04 17:22:23,734 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:22:23,737 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:22:23,749 | INFO | __main__ | Received new chat request
2025-10-04 17:22:23,750 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 65
2025-10-04 17:22:23,750 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:22:23,750 | INFO | __main__ | Processing user input: '√¥ng cho ch√°u h·ªèi l√† b·∫£o t√†ng d√¢n t·ªôc h·ªçp h√¥m nay ƒë√≥ng c·ª≠a m·∫•y gi·ªù' for session 20251004T170344807-a089f53d
2025-10-04 17:22:24,502 | INFO | __main__ | Starting retrieval for query: 'gi·ªù ƒë√≥ng c·ª≠a b·∫£o t√†ng d√¢n t·ªôc h·ªçc h√¥m nay' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:22:24,502 | DEBUG | __main__ | Searching header index...
2025-10-04 17:22:24,512 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:22:24,512 | DEBUG | __main__ | Searching content index...
2025-10-04 17:22:24,526 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:22:24,526 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:22:24,526 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 17:22:24,526 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:22:24,526 | DEBUG | __main__ |   Rank 1: chunk_id=8, hybrid_score=0.9965
2025-10-04 17:22:24,526 | DEBUG | __main__ |   Rank 2: chunk_id=12, hybrid_score=0.5112
2025-10-04 17:22:24,526 | DEBUG | __main__ |   Rank 3: chunk_id=13, hybrid_score=0.4984
2025-10-04 17:22:24,527 | DEBUG | __main__ |   Rank 4: chunk_id=15, hybrid_score=0.4917
2025-10-04 17:22:24,527 | DEBUG | __main__ | Retrieved chunk 8: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Th√¥ng tin c∆° b·∫£n | Content preview: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam (B·∫£o t√†ng) thu·ªôc h·ªá th·ªëng b·∫£o t√†ng qu·ªëc gia, tr·ª±c thu·ªôc Vi·ªán H√†n l√¢m K...
2025-10-04 17:22:24,527 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 17:22:24,527 | DEBUG | __main__ | Retrieved chunk 13: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c ho·∫°t ƒë·ªông th∆∞·ªùng ni√™n | Content preview: B·∫£o t√†ng DTHVN ƒëi ƒë·∫ßu trong vi·ªác ti·∫øp c·∫≠n c√°c quan ni·ªám m·ªõi t·∫°o n√™n c√°c ho·∫°t ƒë·ªông s·ªëng ƒë·ªông, l·∫•y con...
2025-10-04 17:22:24,527 | DEBUG | __main__ | Retrieved chunk 15: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > B·∫£o t√†ng l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉn h√≥a quan tr·ªçng | Content preview: B·∫£o t√†ng kh√¥ng ch·ªâ l√† ƒëi·ªÉm ƒë·∫øn c·ªßa nh·ªØng du kh√°ch y√™u th√≠ch vƒÉn h√≥a d√¢n t·ªôc m√† c√≤n l√† m·ªôt ƒë·ªãa ch·ªâ vƒÉ...
2025-10-04 17:22:24,527 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:22:24,527 | DEBUG | __main__ | Retrieved 4 documents for query: gi·ªù ƒë√≥ng c·ª≠a b·∫£o t√†ng d√¢n t·ªôc h·ªçc h√¥m nay
2025-10-04 17:22:24,527 | DEBUG | __main__ | [timing] retrieve 0.025s
2025-10-04 17:22:25,211 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:22:25,211 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.460s, Total: 1.462s
2025-10-04 17:22:25,211 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 502
2025-10-04 17:22:25,212 | INFO | RAGClient | RAG reply (len=192)
2025-10-04 17:22:25,212 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng tÏm trong t‡i li\u1ec7u thÏ khÙng th\u1ea5y thÙng tin v\u1ec1 gi\u1edd \u0111Ûng c\u1eeda c\u1ee7a B\u1ea3o t‡ng hÙm nay \u0111‚u \u1ea1. Ch·u cÛ mu\u1ed1n Ùng tÏm hi\u1ec3u thÍm v\u1ec1 T\u1ebft Trung Thu hay c·c ho\u1ea1t \u0111\u1ed9ng kh·c \u1edf B\u1ea3o t‡ng khÙng nË?
2025-10-04 17:22:25,212 | DEBUG | TTSService | Starting TTS download for text length=192
2025-10-04 17:22:25,212 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:26,859 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:26,884 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:28,779 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:36,253 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:22:44,628 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:22:44,631 | INFO | Recorder | Recording finished (elapsed 8.4s).
2025-10-04 17:22:44,638 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:22:44,639 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:22:44,639 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:22:46,283 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 221
2025-10-04 17:22:46,283 | INFO | WhisperSTT | Transcription received: v\u1ea7y v\u1ea7y v\u1ea7y \u1ea1 v\u1eady thÏ b‚y gi\u1edd n\u1ebfu m‡ sao con cÛ th\u1ec3 ch\u01a1i gÏ \u1edf b\u1ea3o t‡ng d‚n t\u1ed9c h\u1ecdc h\u1ea3 Ùng
2025-10-04 17:22:46,284 | INFO | ConversationManager | User: v\u1ea7y v\u1ea7y v\u1ea7y \u1ea1 v\u1eady thÏ b‚y gi\u1edd n\u1ebfu m‡ sao con cÛ th\u1ec3 ch\u01a1i gÏ \u1edf b\u1ea3o t‡ng d‚n t\u1ed9c h\u1ecdc h\u1ea3 Ùng
2025-10-04 17:22:46,285 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:22:46,285 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:22:46,300 | INFO | __main__ | Received new chat request
2025-10-04 17:22:46,301 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 89
2025-10-04 17:22:46,301 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:22:46,301 | INFO | __main__ | Processing user input: 'v·∫ßy v·∫ßy v·∫ßy ·∫° v·∫≠y th√¨ b√¢y gi·ªù n·∫øu m√† sao con c√≥ th·ªÉ ch∆°i g√¨ ·ªü b·∫£o t√†ng d√¢n t·ªôc h·ªçc h·∫£ √¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:22:47,055 | INFO | __main__ | Starting retrieval for query: 'c√°c ho·∫°t ƒë·ªông t·∫°i b·∫£o t√†ng d√¢n t·ªôc h·ªçc d·ªãp trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:22:47,055 | DEBUG | __main__ | Searching header index...
2025-10-04 17:22:47,076 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:22:47,076 | DEBUG | __main__ | Searching content index...
2025-10-04 17:22:47,085 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:22:47,085 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:22:47,085 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 17:22:47,085 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:22:47,085 | DEBUG | __main__ |   Rank 1: chunk_id=13, hybrid_score=1.1345
2025-10-04 17:22:47,085 | DEBUG | __main__ |   Rank 2: chunk_id=10, hybrid_score=0.9806
2025-10-04 17:22:47,085 | DEBUG | __main__ |   Rank 3: chunk_id=12, hybrid_score=0.5574
2025-10-04 17:22:47,085 | DEBUG | __main__ |   Rank 4: chunk_id=11, hybrid_score=0.5302
2025-10-04 17:22:47,085 | DEBUG | __main__ | Retrieved chunk 13: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c ho·∫°t ƒë·ªông th∆∞·ªùng ni√™n | Content preview: B·∫£o t√†ng DTHVN ƒëi ƒë·∫ßu trong vi·ªác ti·∫øp c·∫≠n c√°c quan ni·ªám m·ªõi t·∫°o n√™n c√°c ho·∫°t ƒë·ªông s·ªëng ƒë·ªông, l·∫•y con...
2025-10-04 17:22:47,085 | DEBUG | __main__ | Retrieved chunk 10: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Khu tr∆∞ng b√†y chuy√™n ƒë·ªÅ | Content preview: ƒêi·ªÉm ƒë·∫∑c bi·ªát c·ªßa B·∫£o t√†ng l√† b√™n c·∫°nh kh√¥ng gian tr∆∞ng b√†y th∆∞·ªùng xuy√™n v·ªÅ ƒëa d·∫°ng vƒÉn h√≥a c√°c t·ªôc ...
2025-10-04 17:22:47,085 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 17:22:47,085 | DEBUG | __main__ | Retrieved chunk 11: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c s·ª± ki·ªán h·ª£p t√°c qu·ªëc t·∫ø | Content preview: Kh√¥ng d·ª´ng l·∫°i ·ªü c√°c nghi√™n c·ª©u v√† tr∆∞ng b√†y trong n∆∞·ªõc, trong nh·ªØng nƒÉm qua, B·∫£o t√†ng m·ªü r·ªông quan ...
2025-10-04 17:22:47,085 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:22:47,085 | DEBUG | __main__ | Retrieved 4 documents for query: c√°c ho·∫°t ƒë·ªông t·∫°i b·∫£o t√†ng d√¢n t·ªôc h·ªçc d·ªãp trung thu
2025-10-04 17:22:47,085 | DEBUG | __main__ | [timing] retrieve 0.030s
2025-10-04 17:22:50,030 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:22:50,030 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 3.730s, Total: 3.731s
2025-10-04 17:22:50,031 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 900
2025-10-04 17:22:50,031 | INFO | RAGClient | RAG reply (len=375)
2025-10-04 17:22:50,032 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng tÏm hi\u1ec3u \u0111\u01b0\u1ee3c l‡ B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc cÛ r\u1ea5t nhi\u1ec1u ho\u1ea1t \u0111\u1ed9ng th˙ v\u1ecb d‡nh cho c·c ch·u \u0111Û. \u0110\u1eb7c bi\u1ec7t l‡ v‡o d\u1ecbp T\u1ebft Trung Thu, b\u1ea3o t‡ng th\u01b0\u1eddng t\u1ed5 ch\u1ee9c c·c ho\u1ea1t \u0111\u1ed9ng gi\u1edbi thi\u1ec7u trÚ ch\u01a1i d‚n gian, phong t\u1ee5c, ngh\u1ec1 th\u1ee7 cÙng truy\u1ec1n th\u1ed1ng. Ch·u cÛ th\u1ec3 \u0111\u01b0\u1ee3c tr\u1ea3i nghi\u1ec7m, kh·m ph· v‡ h\u1ecdc h\u1ecfi nhi\u1ec1u \u0111i\u1ec1u hay ho l\u1eafm. Ch·u cÛ mu\u1ed1n bi\u1ebft thÍm v\u1ec1 trÚ ch\u01a1i d‚n gian n‡o khÙng nË?
2025-10-04 17:22:50,032 | DEBUG | TTSService | Starting TTS download for text length=375
2025-10-04 17:22:50,033 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:51,780 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:51,951 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:51,973 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:53,585 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:53,726 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:53,755 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:22:55,568 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:22:56,168 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:23:12,568 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:23:14,479 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:23:14,481 | INFO | Recorder | Recording finished (elapsed 1.9s).
2025-10-04 17:23:14,488 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:23:14,490 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:23:14,492 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:23:15,852 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 50
2025-10-04 17:23:15,852 | INFO | WhisperSTT | Transcription received: \u01a1n sao c\u1ea3m \u01a1n
2025-10-04 17:23:15,852 | INFO | ConversationManager | User: \u01a1n sao c\u1ea3m \u01a1n
2025-10-04 17:23:15,852 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:23:15,857 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:23:15,882 | INFO | __main__ | Received new chat request
2025-10-04 17:23:15,882 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 13
2025-10-04 17:23:15,882 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:23:15,882 | INFO | __main__ | Processing user input: '∆°n sao c·∫£m ∆°n' for session 20251004T170344807-a089f53d
2025-10-04 17:23:16,687 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:23:16,687 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.805s, Total: 0.805s
2025-10-04 17:23:16,687 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 280
2025-10-04 17:23:16,688 | INFO | RAGClient | RAG reply (len=87)
2025-10-04 17:23:16,688 | INFO | ConversationManager | Bot: KhÙng cÛ chi ch·u \u01a1i. Ch·u c\u1ee9 h\u1ecfi Ùng b\u1ea5t c\u1ee9 \u0111i\u1ec1u gÏ v\u1ec1 T\u1ebft Trung Thu hay B\u1ea3o t‡ng nhÈ.
2025-10-04 17:23:16,688 | DEBUG | TTSService | Starting TTS download for text length=87
2025-10-04 17:23:16,689 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:23:18,521 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:23:18,939 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:23:57,487 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:24:03,320 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:24:03,326 | INFO | Recorder | Recording finished (elapsed 5.8s).
2025-10-04 17:24:03,332 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:24:03,332 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:24:03,335 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:24:04,741 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 100
2025-10-04 17:24:04,742 | INFO | WhisperSTT | Transcription received: \u1edf trong b\u1ea3o t‡ng cÛ nh\u1eefng c·i gÏ vui \u1ea1
2025-10-04 17:24:04,743 | INFO | ConversationManager | User: \u1edf trong b\u1ea3o t‡ng cÛ nh\u1eefng c·i gÏ vui \u1ea1
2025-10-04 17:24:04,743 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:24:04,744 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:24:04,767 | INFO | __main__ | Received new chat request
2025-10-04 17:24:04,767 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 38
2025-10-04 17:24:04,768 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:24:04,768 | INFO | __main__ | Processing user input: '·ªü trong b·∫£o t√†ng c√≥ nh·ªØng c√°i g√¨ vui ·∫°' for session 20251004T170344807-a089f53d
2025-10-04 17:24:05,235 | INFO | __main__ | Starting retrieval for query: 'nh·ªØng c√°i g√¨ vui ·ªü b·∫£o t√†ng d√¢n t·ªôc h·ªçc' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:24:05,236 | DEBUG | __main__ | Searching header index...
2025-10-04 17:24:05,246 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:24:05,246 | DEBUG | __main__ | Searching content index...
2025-10-04 17:24:05,253 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:24:05,253 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:24:05,253 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 17:24:05,253 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:24:05,253 | DEBUG | __main__ |   Rank 1: chunk_id=12, hybrid_score=0.5756
2025-10-04 17:24:05,253 | DEBUG | __main__ |   Rank 2: chunk_id=16, hybrid_score=0.5512
2025-10-04 17:24:05,253 | DEBUG | __main__ |   Rank 3: chunk_id=17, hybrid_score=0.5512
2025-10-04 17:24:05,253 | DEBUG | __main__ |   Rank 4: chunk_id=13, hybrid_score=0.5512
2025-10-04 17:24:05,253 | DEBUG | __main__ | Retrieved chunk 12: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > Ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° | Content preview: Song song v·ªõi c√°c tr∆∞ng b√†y, B·∫£o t√†ng ti√™n phong ƒë·ªïi m·ªõi ho·∫°t ƒë·ªông gi√°o d·ª•c, kh√°m ph√° d√†nh cho c√¥ng ...
2025-10-04 17:24:05,253 | DEBUG | __main__ | Retrieved chunk 16: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c th√†nh t√≠ch, gi·∫£i th∆∞·ªüng | Content preview: Nh·ªØng n·ªó l·ª±c c·ªßa B·∫£o t√†ng trong c√¥ng t√°c nghi√™n c·ª©u, s∆∞u t·∫ßm, tr∆∞ng b√†y, ƒë√≥n ti·∫øp kh√°ch tham quan ƒë√£...
2025-10-04 17:24:05,253 | DEBUG | __main__ | Retrieved chunk 17: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c th√†nh t√≠ch, gi·∫£i th∆∞·ªüng | Content preview: Ph√°t huy c√°c th√†nh t√≠ch, danh hi·ªáu ƒë√£ ƒë·∫°t ƒë∆∞·ª£c, B·∫£o t√†ng ti·∫øp t·ª•c ƒë·ªïi m·ªõi, s√°ng t·∫°o, n√¢ng cao ch·∫•t l...
2025-10-04 17:24:05,253 | DEBUG | __main__ | Retrieved chunk 13: B·∫£o t√†ng D√¢n t·ªôc h·ªçc Vi·ªát Nam > Gi·ªõi thi·ªáu > C√°c ho·∫°t ƒë·ªông th∆∞·ªùng ni√™n | Content preview: B·∫£o t√†ng DTHVN ƒëi ƒë·∫ßu trong vi·ªác ti·∫øp c·∫≠n c√°c quan ni·ªám m·ªõi t·∫°o n√™n c√°c ho·∫°t ƒë·ªông s·ªëng ƒë·ªông, l·∫•y con...
2025-10-04 17:24:05,253 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:24:05,253 | DEBUG | __main__ | Retrieved 4 documents for query: nh·ªØng c√°i g√¨ vui ·ªü b·∫£o t√†ng d√¢n t·ªôc h·ªçc
2025-10-04 17:24:05,253 | DEBUG | __main__ | [timing] retrieve 0.018s
2025-10-04 17:24:06,197 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:24:06,197 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.429s, Total: 1.430s
2025-10-04 17:24:06,197 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1217
2025-10-04 17:24:06,197 | INFO | RAGClient | RAG reply (len=537)
2025-10-04 17:24:06,197 | INFO | ConversationManager | Bot: Ch·u \u01a1i, theo nh\u1eefng gÏ Ùng tÏm hi\u1ec3u \u0111\u01b0\u1ee3c thÏ \u1edf B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc cÛ r\u1ea5t nhi\u1ec1u ho\u1ea1t \u0111\u1ed9ng vui l\u1eafm \u0111Û. B\u1ea3o t‡ng cÛ PhÚng Kh·m ph· d‡nh riÍng cho tr\u1ebb em, t\u1ed5 ch\u1ee9c c·c ho\u1ea1t \u0111\u1ed9ng tr\u1ea3i nghi\u1ec7m, l\u1edbp h\u1ecdc ngh\u1ec1 th\u1ee7 cÙng, tham quan l‡ng ngh\u1ec1 n\u1eefa. \u0110\u1eb7c bi\u1ec7t l‡ v‡o c·c d\u1ecbp l\u1ec5 nh\u01b0 T\u1ebft Trung Thu, T\u1ebft Thi\u1ebfu nhi, T\u1ebft NguyÍn \u0111·n, b\u1ea3o t‡ng cÛ nhi\u1ec1u ch\u01b0\u01a1ng trÏnh gi\u1edbi thi\u1ec7u trÚ ch\u01a1i d‚n gian, phong t\u1ee5c, ngh\u1ec1 th\u1ee7 cÙng truy\u1ec1n th\u1ed1ng. Ch·u cÛ th\u1ec3 \u0111\u01b0\u1ee3c tr\u1ea3i nghi\u1ec7m, kh·m ph· v‡ h\u1ecdc h\u1ecfi nhi\u1ec1u \u0111i\u1ec1u hay ho l\u1eafm. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 ho\u1ea1t \u0111\u1ed9ng n‡o khÙng nË?
2025-10-04 17:24:06,197 | DEBUG | TTSService | Starting TTS download for text length=537
2025-10-04 17:24:06,197 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:24:07,636 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:07,803 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:07,831 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:24:09,657 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:09,836 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:09,853 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:24:11,887 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:12,180 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:12,205 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:24:14,121 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:24:14,281 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:28:03,410 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:28:10,098 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:28:10,098 | INFO | Recorder | Recording finished (elapsed 6.7s).
2025-10-04 17:28:10,110 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:28:10,110 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:28:10,110 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:28:11,489 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 58
2025-10-04 17:28:11,489 | INFO | WhisperSTT | Transcription received: l\u1eddi Ùng ch‡o Ùng
2025-10-04 17:28:11,490 | INFO | ConversationManager | User: l\u1eddi Ùng ch‡o Ùng
2025-10-04 17:28:11,490 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:28:11,492 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:28:11,507 | INFO | __main__ | Received new chat request
2025-10-04 17:28:11,508 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 16
2025-10-04 17:28:11,508 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:28:11,508 | INFO | __main__ | Processing user input: 'l·ªùi √¥ng ch√†o √¥ng' for session 20251004T170344807-a089f53d
2025-10-04 17:28:12,601 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:28:12,601 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.093s, Total: 1.094s
2025-10-04 17:28:12,602 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 303
2025-10-04 17:28:12,602 | INFO | RAGClient | RAG reply (len=98)
2025-10-04 17:28:12,602 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. ‘ng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n c˘ng ch·u trong d\u1ecbp Trung Thu n‡y.
2025-10-04 17:28:12,602 | DEBUG | TTSService | Starting TTS download for text length=98
2025-10-04 17:28:12,602 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:28:14,344 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:28:14,652 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:28:22,810 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:28:27,336 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:28:27,336 | INFO | Recorder | Recording finished (elapsed 4.5s).
2025-10-04 17:28:27,345 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:28:27,345 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:28:27,345 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:28:28,793 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 68
2025-10-04 17:28:28,793 | INFO | WhisperSTT | Transcription received: Ùng kh\u1ecfe Ùng kh\u1ecfe h\u01a1n
2025-10-04 17:28:28,793 | INFO | ConversationManager | User: Ùng kh\u1ecfe Ùng kh\u1ecfe h\u01a1n
2025-10-04 17:28:28,793 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:28:28,793 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:28:28,812 | INFO | __main__ | Received new chat request
2025-10-04 17:28:28,812 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 21
2025-10-04 17:28:28,812 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:28:28,812 | INFO | __main__ | Processing user input: '√¥ng kh·ªèe √¥ng kh·ªèe h∆°n' for session 20251004T170344807-a089f53d
2025-10-04 17:28:29,677 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:28:29,677 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.865s, Total: 0.865s
2025-10-04 17:28:29,677 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 239
2025-10-04 17:28:29,677 | INFO | RAGClient | RAG reply (len=61)
2025-10-04 17:28:29,677 | INFO | ConversationManager | Bot: ‘ng kh\u1ecfe l\u1eafm, c\u1ea3m \u01a1n ch·u \u0111„ h\u1ecfi th\u0103m. Ch·u cÛ kh\u1ecfe khÙng nË?
2025-10-04 17:28:29,677 | DEBUG | TTSService | Starting TTS download for text length=61
2025-10-04 17:28:29,677 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:28:31,234 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:28:37,074 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:28:41,114 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:28:41,115 | INFO | Recorder | Recording finished (elapsed 4.0s).
2025-10-04 17:28:41,122 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:28:41,123 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:28:41,126 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:28:42,344 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 79
2025-10-04 17:28:42,344 | INFO | WhisperSTT | Transcription received: h\u1ea3 \u1ea1 v‡ khÛ kh\u0103n h\u01a1n \u1ea1
2025-10-04 17:28:42,344 | INFO | ConversationManager | User: h\u1ea3 \u1ea1 v‡ khÛ kh\u0103n h\u01a1n \u1ea1
2025-10-04 17:28:42,344 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:28:42,344 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:28:42,360 | INFO | __main__ | Received new chat request
2025-10-04 17:28:42,360 | DEBUG | __main__ | Request ID: 20251004T170344807-a089f53d, Data length: 22
2025-10-04 17:28:42,361 | DEBUG | __main__ | Using existing session for ID: 20251004T170344807-a089f53d
2025-10-04 17:28:42,361 | INFO | __main__ | Processing user input: 'h·∫£ ·∫° v√† kh√≥ khƒÉn h∆°n ·∫°' for session 20251004T170344807-a089f53d
2025-10-04 17:28:43,327 | INFO | __main__ | Agent execution completed successfully for session 20251004T170344807-a089f53d
2025-10-04 17:28:43,327 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.966s, Total: 0.968s
2025-10-04 17:28:43,328 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 297
2025-10-04 17:28:43,328 | INFO | RAGClient | RAG reply (len=89)
2025-10-04 17:28:43,329 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u cÛ th\u1ec3 nÛi rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng \u1ea1? ‘ng gi‡ r\u1ed3i tai nghe khÙng rı l\u1eafm.
2025-10-04 17:28:43,329 | DEBUG | TTSService | Starting TTS download for text length=89
2025-10-04 17:28:43,329 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:28:45,139 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:28:45,414 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:28:51,418 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 17:28:51,420 | DEBUG | TTSService | Playback thread started
2025-10-04 17:28:51,420 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 17:28:52,795 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:28:56,745 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:28:56,745 | INFO | Recorder | Recording finished (elapsed 3.9s).
2025-10-04 17:28:56,753 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:28:56,753 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:28:56,758 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:28:57,912 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 38
2025-10-04 17:28:57,913 | INFO | WhisperSTT | Transcription received: tu\u1ed5i \u1ea1
2025-10-04 17:28:57,913 | INFO | ConversationManager | User: tu\u1ed5i \u1ea1
2025-10-04 17:28:57,914 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:28:57,916 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:28:57,931 | INFO | __main__ | Received new chat request
2025-10-04 17:28:57,931 | DEBUG | __main__ | Request ID: 20251004T172851418-ec1b7142, Data length: 6
2025-10-04 17:28:57,931 | DEBUG | __main__ | Creating new session with ID: 20251004T172851418-ec1b7142
2025-10-04 17:28:57,931 | DEBUG | __main__ | Using request ID: 20251004T172851418-ec1b7142
2025-10-04 17:28:57,931 | DEBUG | __main__ | Created new session for ID: 20251004T172851418-ec1b7142, total sessions: 4
2025-10-04 17:28:57,931 | INFO | __main__ | Processing user input: 'tu·ªïi ·∫°' for session 20251004T172851418-ec1b7142
2025-10-04 17:28:58,830 | INFO | __main__ | Agent execution completed successfully for session 20251004T172851418-ec1b7142
2025-10-04 17:28:58,830 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.900s, Total: 0.900s
2025-10-04 17:28:58,830 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 411
2025-10-04 17:28:58,830 | INFO | RAGClient | RAG reply (len=138)
2025-10-04 17:28:58,830 | INFO | ConversationManager | Bot: ‘i, ch·u h\u1ecfi tu\u1ed5i Ùng ‡? ‘ng thÏ gi‡ l\u1eafm r\u1ed3i, ch\u1eafc l‡... b\u1eb1ng tu\u1ed5i c·i \u0111Ën l\u1ed3ng n‡y nË ch·u. Ch·u th\u1ea5y nÛ cÛ c\u0169 k\u1ef9 khÙng? ‘ng c\u0169ng v\u1eady \u0111Û.
2025-10-04 17:28:58,830 | DEBUG | TTSService | Starting TTS download for text length=138
2025-10-04 17:28:58,834 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:29:00,607 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:29:01,258 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:29:13,475 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:29:21,487 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:29:21,489 | INFO | Recorder | Recording finished (elapsed 8.0s).
2025-10-04 17:29:21,495 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:29:21,495 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:29:21,495 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:29:23,123 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 183
2025-10-04 17:29:23,123 | INFO | WhisperSTT | Transcription received: giai \u0111o\u1ea1n c\u1eadu ng\u1ed3i nh\u1edb khÙng h\u1ecfi h\u1ecfi k\u1ef9 l\u1ea1i khÙng nh· Ùng c\u1eadu ng\u1ed3i nh\u1edb khÙng
2025-10-04 17:29:23,124 | INFO | ConversationManager | User: giai \u0111o\u1ea1n c\u1eadu ng\u1ed3i nh\u1edb khÙng h\u1ecfi h\u1ecfi k\u1ef9 l\u1ea1i khÙng nh· Ùng c\u1eadu ng\u1ed3i nh\u1edb khÙng
2025-10-04 17:29:23,124 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:29:23,126 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:29:23,143 | INFO | __main__ | Received new chat request
2025-10-04 17:29:23,143 | DEBUG | __main__ | Request ID: 20251004T172851418-ec1b7142, Data length: 76
2025-10-04 17:29:23,143 | DEBUG | __main__ | Using existing session for ID: 20251004T172851418-ec1b7142
2025-10-04 17:29:23,143 | INFO | __main__ | Processing user input: 'giai ƒëo·∫°n c·∫≠u ng·ªìi nh·ªõ kh√¥ng h·ªèi h·ªèi k·ªπ l·∫°i kh√¥ng nh√° √¥ng c·∫≠u ng·ªìi nh·ªõ kh√¥ng' for session 20251004T172851418-ec1b7142
2025-10-04 17:29:24,711 | INFO | __main__ | Agent execution completed successfully for session 20251004T172851418-ec1b7142
2025-10-04 17:29:24,712 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.569s, Total: 1.570s
2025-10-04 17:29:24,712 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 311
2025-10-04 17:29:24,713 | INFO | RAGClient | RAG reply (len=106)
2025-10-04 17:29:24,713 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u h\u1ecfi gÏ m‡ Ùng nghe khÙng rı l\u1eafm. Ch·u nÛi to l\u1ea1i xem n‡o, Ùng gi‡ r\u1ed3i tai nghe khÙng rı n\u1eefa.
2025-10-04 17:29:24,713 | DEBUG | TTSService | Starting TTS download for text length=106
2025-10-04 17:29:24,713 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:29:26,463 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:29:26,749 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:29:33,095 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:29:40,103 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:29:40,103 | INFO | Recorder | Recording finished (elapsed 7.0s).
2025-10-04 17:29:40,112 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:29:40,114 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:29:40,115 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:29:41,499 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 161
2025-10-04 17:29:41,499 | INFO | WhisperSTT | Transcription received: ,Ùng gi‡,Ùng lÍn khÙng nghe,Ùng gi‡,Ùng cÛ u\u1ed1ng c\u1ed1c gia,Ùng nÛi to lÍn
2025-10-04 17:29:41,499 | INFO | ConversationManager | User: ,Ùng gi‡,Ùng lÍn khÙng nghe,Ùng gi‡,Ùng cÛ u\u1ed1ng c\u1ed1c gia,Ùng nÛi to lÍn
2025-10-04 17:29:41,499 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:29:41,499 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:29:41,511 | INFO | __main__ | Received new chat request
2025-10-04 17:29:41,511 | DEBUG | __main__ | Request ID: 20251004T172851418-ec1b7142, Data length: 70
2025-10-04 17:29:41,511 | DEBUG | __main__ | Using existing session for ID: 20251004T172851418-ec1b7142
2025-10-04 17:29:41,511 | INFO | __main__ | Processing user input: ',√¥ng gi√†,√¥ng l√™n kh√¥ng nghe,√¥ng gi√†,√¥ng c√≥ u·ªëng c·ªëc gia,√¥ng n√≥i to l√™n' for session 20251004T172851418-ec1b7142
2025-10-04 17:29:42,297 | INFO | __main__ | Agent execution completed successfully for session 20251004T172851418-ec1b7142
2025-10-04 17:29:42,297 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.786s, Total: 0.786s
2025-10-04 17:29:42,298 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 307
2025-10-04 17:29:42,298 | INFO | RAGClient | RAG reply (len=99)
2025-10-04 17:29:42,299 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u nÛi l\u1ea1i c‚u h\u1ecfi cho Ùng nghe rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1? ‘ng gi‡ r\u1ed3i, tai nghe khÙng rı l\u1eafm.
2025-10-04 17:29:42,299 | DEBUG | TTSService | Starting TTS download for text length=99
2025-10-04 17:29:42,299 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:29:44,246 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:29:44,394 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:29:52,659 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:29:56,049 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:29:56,051 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 17:29:56,057 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:29:56,058 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:29:56,060 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:29:57,286 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 87
2025-10-04 17:29:57,286 | INFO | WhisperSTT | Transcription received: khÙng cÛ ng\u01b0\u1eddi nguyÍn b\u1ea3n th‚n
2025-10-04 17:29:57,288 | INFO | ConversationManager | User: khÙng cÛ ng\u01b0\u1eddi nguyÍn b\u1ea3n th‚n
2025-10-04 17:29:57,288 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:29:57,288 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:29:57,309 | INFO | __main__ | Received new chat request
2025-10-04 17:29:57,309 | DEBUG | __main__ | Request ID: 20251004T172851418-ec1b7142, Data length: 30
2025-10-04 17:29:57,310 | DEBUG | __main__ | Using existing session for ID: 20251004T172851418-ec1b7142
2025-10-04 17:29:57,310 | INFO | __main__ | Processing user input: 'kh√¥ng c√≥ ng∆∞·ªùi nguy√™n b·∫£n th√¢n' for session 20251004T172851418-ec1b7142
2025-10-04 17:29:58,071 | INFO | __main__ | Agent execution completed successfully for session 20251004T172851418-ec1b7142
2025-10-04 17:29:58,071 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.760s, Total: 0.761s
2025-10-04 17:29:58,071 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 356
2025-10-04 17:29:58,071 | INFO | RAGClient | RAG reply (len=118)
2025-10-04 17:29:58,071 | INFO | ConversationManager | Bot: ‘i, ch·u nÛi gÏ m‡ Ùng nghe khÙng hi\u1ec3u gÏ c\u1ea3. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1? ‘ng gi‡ r\u1ed3i, tai nghe khÙng rı l\u1eafm.
2025-10-04 17:29:58,071 | DEBUG | TTSService | Starting TTS download for text length=118
2025-10-04 17:29:58,071 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:29:59,721 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:00,196 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:06,685 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 17:30:06,686 | DEBUG | TTSService | Playback thread started
2025-10-04 17:30:06,686 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 17:30:08,596 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:30:12,987 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:30:12,989 | INFO | Recorder | Recording finished (elapsed 4.4s).
2025-10-04 17:30:12,995 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:30:12,997 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:30:13,000 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:30:14,370 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 65
2025-10-04 17:30:14,370 | INFO | WhisperSTT | Transcription received: \u0111\u1ed3ng ˝ nh\u01b0 b\u1ea3n sao
2025-10-04 17:30:14,370 | INFO | ConversationManager | User: \u0111\u1ed3ng ˝ nh\u01b0 b\u1ea3n sao
2025-10-04 17:30:14,370 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:30:14,370 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:30:14,394 | INFO | __main__ | Received new chat request
2025-10-04 17:30:14,395 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 18
2025-10-04 17:30:14,395 | DEBUG | __main__ | Creating new session with ID: 20251004T173006685-73307538
2025-10-04 17:30:14,395 | DEBUG | __main__ | Using request ID: 20251004T173006685-73307538
2025-10-04 17:30:14,395 | DEBUG | __main__ | Created new session for ID: 20251004T173006685-73307538, total sessions: 5
2025-10-04 17:30:14,395 | INFO | __main__ | Processing user input: 'ƒë·ªìng √Ω nh∆∞ b·∫£n sao' for session 20251004T173006685-73307538
2025-10-04 17:30:15,407 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:30:15,407 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.012s, Total: 1.013s
2025-10-04 17:30:15,408 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 470
2025-10-04 17:30:15,409 | INFO | RAGClient | RAG reply (len=185)
2025-10-04 17:30:15,409 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay Ùng r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n c˘ng ch·u trong d\u1ecbp Trung Thu n‡y. Ch·u cÛ c‚u h\u1ecfi gÏ v\u1ec1 Trung Thu, v\u1ec1 b\u1ea3o t‡ng hay v\u1ec1 s\u1ef1 ki\u1ec7n hÙm nay khÙng n‡o?
2025-10-04 17:30:15,409 | DEBUG | TTSService | Starting TTS download for text length=185
2025-10-04 17:30:15,409 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:30:17,684 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:18,094 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:18,118 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:30:21,497 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:31,148 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:30:34,910 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:30:34,912 | INFO | Recorder | Recording finished (elapsed 3.8s).
2025-10-04 17:30:34,918 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:30:34,918 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:30:34,918 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:30:36,165 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 119
2025-10-04 17:30:36,166 | INFO | WhisperSTT | Transcription received: Ùng Ùng \u01a1i Ùng cÛ u\u1ed1ng n\u01b0\u1edbc ng\u1ecdt khÙng Ùng
2025-10-04 17:30:36,166 | INFO | ConversationManager | User: Ùng Ùng \u01a1i Ùng cÛ u\u1ed1ng n\u01b0\u1edbc ng\u1ecdt khÙng Ùng
2025-10-04 17:30:36,166 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:30:36,168 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:30:36,194 | INFO | __main__ | Received new chat request
2025-10-04 17:30:36,195 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 42
2025-10-04 17:30:36,195 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:30:36,195 | INFO | __main__ | Processing user input: '√¥ng √¥ng ∆°i √¥ng c√≥ u·ªëng n∆∞·ªõc ng·ªçt kh√¥ng √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:30:37,122 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:30:37,122 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.928s, Total: 0.929s
2025-10-04 17:30:37,123 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 472
2025-10-04 17:30:37,123 | INFO | RAGClient | RAG reply (len=179)
2025-10-04 17:30:37,124 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y m‡, l‡m sao m‡ u\u1ed1ng n\u01b0\u1edbc ng\u1ecdt \u0111\u01b0\u1ee3c. ‘ng ch\u1ec9 thÌch \u0111\u1ecdc s·ch v‡ k\u1ec3 chuy\u1ec7n cho c·c ch·u nghe thÙi. Ch·u cÛ mu\u1ed1n nghe Ùng k\u1ec3 chuy\u1ec7n v\u1ec1 Trung Thu khÙng?
2025-10-04 17:30:37,124 | DEBUG | TTSService | Starting TTS download for text length=179
2025-10-04 17:30:37,124 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:30:39,207 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:39,458 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:39,481 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:30:41,017 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:30:51,266 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:30:56,342 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:30:56,344 | INFO | Recorder | Recording finished (elapsed 5.1s).
2025-10-04 17:30:56,350 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:30:56,350 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:30:56,350 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:30:57,648 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 96
2025-10-04 17:30:57,648 | INFO | WhisperSTT | Transcription received: c‚u t˙c \u0103n l„o h\u1edf nÛ mang kh\u1ea9u qu\u1ea3
2025-10-04 17:30:57,649 | INFO | ConversationManager | User: c‚u t˙c \u0103n l„o h\u1edf nÛ mang kh\u1ea9u qu\u1ea3
2025-10-04 17:30:57,650 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:30:57,651 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:30:57,667 | INFO | __main__ | Received new chat request
2025-10-04 17:30:57,668 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 34
2025-10-04 17:30:57,668 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:30:57,668 | INFO | __main__ | Processing user input: 'c√¢u t√∫c ƒÉn l√£o h·ªü n√≥ mang kh·∫©u qu·∫£' for session 20251004T173006685-73307538
2025-10-04 17:30:59,053 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:30:59,053 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.384s, Total: 1.385s
2025-10-04 17:30:59,055 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 394
2025-10-04 17:30:59,055 | INFO | RAGClient | RAG reply (len=139)
2025-10-04 17:30:59,055 | INFO | ConversationManager | Bot: H\u1eebm, ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi to v‡ rı h\u01a1n m\u1ed9t ch˙t \u0111\u01b0\u1ee3c khÙng? ‘ng gi‡ r\u1ed3i tai nghe khÙng cÚn thÌnh n\u1eefa.
2025-10-04 17:30:59,055 | DEBUG | TTSService | Starting TTS download for text length=139
2025-10-04 17:30:59,055 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:31:00,829 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:31:01,393 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:31:12,115 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:31:18,710 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:31:18,713 | INFO | Recorder | Recording finished (elapsed 6.6s).
2025-10-04 17:31:18,721 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:31:18,721 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:31:18,721 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:31:20,119 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 80
2025-10-04 17:31:20,119 | INFO | WhisperSTT | Transcription received: n‡o \u0111Û cÛ cho b·c s\u0129 \u01a1i
2025-10-04 17:31:20,119 | INFO | ConversationManager | User: n‡o \u0111Û cÛ cho b·c s\u0129 \u01a1i
2025-10-04 17:31:20,119 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:31:20,126 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:31:20,150 | INFO | __main__ | Received new chat request
2025-10-04 17:31:20,151 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 23
2025-10-04 17:31:20,151 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:31:20,151 | INFO | __main__ | Processing user input: 'n√†o ƒë√≥ c√≥ cho b√°c sƒ© ∆°i' for session 20251004T173006685-73307538
2025-10-04 17:31:21,041 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:31:21,041 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.891s, Total: 0.892s
2025-10-04 17:31:21,041 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 470
2025-10-04 17:31:21,041 | INFO | RAGClient | RAG reply (len=172)
2025-10-04 17:31:21,041 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u h\u1ecfi gÏ l\u1ea1 qu·. ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, khÙng ph\u1ea3i b·c s\u0129 \u0111‚u ch·u \u1ea1. Ch·u cÛ c‚u h\u1ecfi gÏ v\u1ec1 Trung Thu hay v\u1ec1 b\u1ea3o t‡ng khÙng, Ùng s\u1ebd c\u1ed1 g\u1eafng tr\u1ea3 l\u1eddi gi˙p ch·u nhÈ.
2025-10-04 17:31:21,041 | DEBUG | TTSService | Starting TTS download for text length=172
2025-10-04 17:31:21,041 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:31:22,857 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:31:23,000 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:31:23,026 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:31:24,526 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:32:01,092 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:32:02,846 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:32:02,848 | INFO | Recorder | Recording finished (elapsed 1.8s).
2025-10-04 17:32:02,853 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:32:02,853 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:32:02,853 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:32:04,266 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 47
2025-10-04 17:32:04,266 | INFO | WhisperSTT | Transcription received: \u1ea1 kh\u1ea3o Ùng
2025-10-04 17:32:04,267 | INFO | ConversationManager | User: \u1ea1 kh\u1ea3o Ùng
2025-10-04 17:32:04,267 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:32:04,269 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:32:04,287 | INFO | __main__ | Received new chat request
2025-10-04 17:32:04,287 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 10
2025-10-04 17:32:04,287 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:32:04,288 | INFO | __main__ | Processing user input: '·∫° kh·∫£o √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:32:05,266 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:32:05,266 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.979s, Total: 0.979s
2025-10-04 17:32:05,266 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 285
2025-10-04 17:32:05,274 | INFO | RAGClient | RAG reply (len=82)
2025-10-04 17:32:05,274 | INFO | ConversationManager | Bot: Ch·u mu\u1ed1n h\u1ecfi gÏ v\u1ec1 Ùng \u1ea1? ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, r\u1ea5t vui \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n c˘ng ch·u.
2025-10-04 17:32:05,274 | DEBUG | TTSService | Starting TTS download for text length=82
2025-10-04 17:32:05,274 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:32:06,935 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:32:07,103 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:32:15,083 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:32:17,263 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:32:17,266 | INFO | Recorder | Recording finished (elapsed 2.2s).
2025-10-04 17:32:17,272 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:32:17,272 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:32:17,276 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:32:18,508 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 57
2025-10-04 17:32:18,508 | INFO | WhisperSTT | Transcription received: Ùng \u0103n c\u01a1m ch\u01b0a
2025-10-04 17:32:18,509 | INFO | ConversationManager | User: Ùng \u0103n c\u01a1m ch\u01b0a
2025-10-04 17:32:18,509 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:32:18,510 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:32:18,532 | INFO | __main__ | Received new chat request
2025-10-04 17:32:18,532 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 15
2025-10-04 17:32:18,532 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:32:18,533 | INFO | __main__ | Processing user input: '√¥ng ƒÉn c∆°m ch∆∞a' for session 20251004T173006685-73307538
2025-10-04 17:32:19,167 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:32:19,167 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.635s, Total: 0.635s
2025-10-04 17:32:19,167 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 416
2025-10-04 17:32:19,167 | INFO | RAGClient | RAG reply (len=138)
2025-10-04 17:32:19,167 | INFO | ConversationManager | Bot: ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y m‡ ch·u, Ùng khÙng \u0103n c\u01a1m nh\u01b0 ng\u01b0\u1eddi th\u01b0\u1eddng \u0111‚u. ‘ng ch\u1ec9 c\u1ea7n \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n v\u1edbi c·c ch·u l‡ vui r\u1ed3i. Ch·u \u0103n c\u01a1m ch\u01b0a?
2025-10-04 17:32:19,167 | DEBUG | TTSService | Starting TTS download for text length=138
2025-10-04 17:32:19,167 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:32:20,926 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:32:21,826 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:32:35,426 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:32:38,370 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:32:38,372 | INFO | Recorder | Recording finished (elapsed 2.9s).
2025-10-04 17:32:38,380 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:32:38,382 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:32:38,384 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:32:39,602 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 63
2025-10-04 17:32:39,602 | INFO | WhisperSTT | Transcription received: r\u1ed3i ‡ \u0103n c‚n r\u1ed3i
2025-10-04 17:32:39,604 | INFO | ConversationManager | User: r\u1ed3i ‡ \u0103n c‚n r\u1ed3i
2025-10-04 17:32:39,604 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:32:39,605 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:32:39,615 | INFO | __main__ | Received new chat request
2025-10-04 17:32:39,615 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 16
2025-10-04 17:32:39,615 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:32:39,616 | INFO | __main__ | Processing user input: 'r·ªìi √† ƒÉn c√¢n r·ªìi' for session 20251004T173006685-73307538
2025-10-04 17:32:40,327 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:32:40,327 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.712s, Total: 0.712s
2025-10-04 17:32:40,327 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 357
2025-10-04 17:32:40,327 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 17:32:40,327 | INFO | ConversationManager | Bot: Ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:32:40,327 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 17:32:40,327 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:32:41,547 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:32:41,817 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:33:19,548 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:33:22,907 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:33:22,907 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 17:33:22,915 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:33:22,917 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:33:22,920 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:33:24,391 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 92
2025-10-04 17:33:24,391 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i \u0111Ën Ùng sao cÛ m\u1ea5y c·nh
2025-10-04 17:33:24,393 | INFO | ConversationManager | User: Ùng \u01a1i \u0111Ën Ùng sao cÛ m\u1ea5y c·nh
2025-10-04 17:33:24,393 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:33:24,393 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:33:24,415 | INFO | __main__ | Received new chat request
2025-10-04 17:33:24,416 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 30
2025-10-04 17:33:24,416 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:33:24,416 | INFO | __main__ | Processing user input: '√¥ng ∆°i ƒë√®n √¥ng sao c√≥ m·∫•y c√°nh' for session 20251004T173006685-73307538
2025-10-04 17:33:25,261 | INFO | __main__ | Starting retrieval for query: 'ƒë√®n √¥ng sao c√≥ m·∫•y c√°nh' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:33:25,261 | DEBUG | __main__ | Searching header index...
2025-10-04 17:33:25,275 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:33:25,275 | DEBUG | __main__ | Searching content index...
2025-10-04 17:33:25,285 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:33:25,285 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:33:25,285 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 17:33:25,285 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:33:25,285 | DEBUG | __main__ |   Rank 1: chunk_id=43, hybrid_score=0.8884
2025-10-04 17:33:25,285 | DEBUG | __main__ |   Rank 2: chunk_id=3, hybrid_score=0.4008
2025-10-04 17:33:25,285 | DEBUG | __main__ |   Rank 3: chunk_id=25, hybrid_score=0.4003
2025-10-04 17:33:25,285 | DEBUG | __main__ |   Rank 4: chunk_id=4, hybrid_score=0.4002
2025-10-04 17:33:25,285 | DEBUG | __main__ | Retrieved chunk 43: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > ƒê√®n l·ªìng Trung thu (ƒê√®n √îng Sao, ƒê√®n C√° Ch√©p, ƒê√®n K√©o Qu√¢n, ƒê√®n √îng S∆∞) | Content preview: N·ªïi b·∫≠t nh·∫•t trong s·ªë n√†y l√† ƒë√®n l·ªìng, kh√¥ng ch·ªâ l√† m·ªôt m√≥n ƒë·ªì ch∆°i ƒë∆°n gi·∫£n. ƒê√®n l·ªìng t∆∞·ª£ng tr∆∞ng c...
2025-10-04 17:33:25,285 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 17:33:25,285 | DEBUG | __main__ | Retrieved chunk 25: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch H·∫±ng Nga | Content preview: T∆∞∆°ng truy·ªÅn, v√†o th·ªùi xa x∆∞a, tr√™n tr·ªùi xu·∫•t hi·ªán m∆∞·ªùi √¥ng m·∫∑t tr·ªùi, c√πng chi·∫øu xu·ªëng m·∫∑t ƒë·∫•t n√≥ng ...
2025-10-04 17:33:25,285 | DEBUG | __main__ | Retrieved chunk 4: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√≤ ch∆°i d√¢n gian > Tr∆∞·ªõc t√≤a C√°nh di·ªÅu | Content preview: i. LƒÉn b∆∞·ªüi   ii. ƒêi c√† kheo (Bana, X∆°ƒëƒÉng)   iii. G√† m·∫π ch·ªëng di·ªÅu h√¢u c·ª©u ƒë√†n con
2025-10-04 17:33:25,285 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:33:25,285 | DEBUG | __main__ | Retrieved 4 documents for query: ƒë√®n √¥ng sao c√≥ m·∫•y c√°nh
2025-10-04 17:33:25,285 | DEBUG | __main__ | [timing] retrieve 0.024s
2025-10-04 17:33:26,035 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:33:26,035 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.619s, Total: 1.620s
2025-10-04 17:33:26,035 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 582
2025-10-04 17:33:26,035 | INFO | RAGClient | RAG reply (len=222)
2025-10-04 17:33:26,035 | INFO | ConversationManager | Bot: \u0110Ën Ùng sao l‡ lo\u1ea1i \u0111Ën l\u1ed3ng ph\u1ed5 bi\u1ebfn v‡ mang tÌnh bi\u1ec3u t\u01b0\u1ee3ng nh\u1ea5t, cÛ hÏnh ngÙi sao 5 c·nh ch·u \u1ea1. HÏnh \u1ea3nh ngÙi sao 5 c·nh \u0111\u01b0\u1ee3c bao b\u1ecdc b\u1edfi vÚng trÚn t\u01b0\u1ee3ng tr\u01b0ng cho Ng\u0169 h‡nh ‚m d\u01b0\u01a1ng, th\u1ec3 hi\u1ec7n s\u1ef1 c‚n b\u1eb1ng v‡ h‡i hÚa \u0111Û.
2025-10-04 17:33:26,035 | DEBUG | TTSService | Starting TTS download for text length=222
2025-10-04 17:33:26,035 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:33:28,021 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:33:28,376 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:33:28,402 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:33:30,021 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:33:30,169 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:33:49,245 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:33:54,171 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:33:54,174 | INFO | Recorder | Recording finished (elapsed 4.9s).
2025-10-04 17:33:54,180 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:33:54,181 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:33:54,183 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:33:55,664 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 138
2025-10-04 17:33:55,664 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i c·c b\u1ea1n nh\u1ecf \u0111ang ch\u1edd Ùng Ùng cÛ nÛi gÏ khÙng
2025-10-04 17:33:55,665 | INFO | ConversationManager | User: Ùng \u01a1i c·c b\u1ea1n nh\u1ecf \u0111ang ch\u1edd Ùng Ùng cÛ nÛi gÏ khÙng
2025-10-04 17:33:55,665 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:33:55,667 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:33:55,684 | INFO | __main__ | Received new chat request
2025-10-04 17:33:55,684 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 51
2025-10-04 17:33:55,684 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:33:55,685 | INFO | __main__ | Processing user input: '√¥ng ∆°i c√°c b·∫°n nh·ªè ƒëang ch·ªù √¥ng √¥ng c√≥ n√≥i g√¨ kh√¥ng' for session 20251004T173006685-73307538
2025-10-04 17:33:56,269 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:33:56,269 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.585s, Total: 0.585s
2025-10-04 17:33:56,269 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 405
2025-10-04 17:33:56,269 | INFO | RAGClient | RAG reply (len=137)
2025-10-04 17:33:56,269 | INFO | ConversationManager | Bot: ‘i, Ùng bi\u1ebft r\u1ed3i. ‘ng \u0111ang r\u1ea5t h‡o h\u1ee9ng \u0111\u01b0\u1ee3c trÚ chuy\u1ec7n c˘ng c·c b\u1ea1n nh\u1ecf \u0111‚y. C·c ch·u cÛ c‚u h\u1ecfi gÏ hay mu\u1ed1n Ùng k\u1ec3 chuy\u1ec7n gÏ khÙng n‡o?
2025-10-04 17:33:56,269 | DEBUG | TTSService | Starting TTS download for text length=137
2025-10-04 17:33:56,269 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:33:58,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:33:59,120 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:34:45,826 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:34:49,242 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:34:49,242 | INFO | Recorder | Recording finished (elapsed 3.4s).
2025-10-04 17:34:49,248 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:34:49,250 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:34:49,252 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:34:50,597 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 78
2025-10-04 17:34:50,597 | INFO | WhisperSTT | Transcription received: Ùng hi\u1ec3u to c·i gÏ Ùng Ùng
2025-10-04 17:34:50,598 | INFO | ConversationManager | User: Ùng hi\u1ec3u to c·i gÏ Ùng Ùng
2025-10-04 17:34:50,598 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:34:50,600 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:34:50,619 | INFO | __main__ | Received new chat request
2025-10-04 17:34:50,619 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 26
2025-10-04 17:34:50,620 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:34:50,620 | INFO | __main__ | Processing user input: '√¥ng hi·ªÉu to c√°i g√¨ √¥ng √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:34:51,548 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:34:51,548 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.927s, Total: 0.928s
2025-10-04 17:34:51,549 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 376
2025-10-04 17:34:51,549 | INFO | RAGClient | RAG reply (len=123)
2025-10-04 17:34:51,549 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:34:51,549 | DEBUG | TTSService | Starting TTS download for text length=123
2025-10-04 17:34:51,549 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:34:53,445 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:34:53,640 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:35:31,155 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:35:34,662 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:35:34,665 | INFO | Recorder | Recording finished (elapsed 3.5s).
2025-10-04 17:35:34,671 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:35:34,671 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:35:34,671 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:35:36,152 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 118
2025-10-04 17:35:36,154 | INFO | WhisperSTT | Transcription received: Ùng hai l‡m tr\u01b0\u1edbc m\u1eb7t Ùng mu\u1ed1n b\u1ebb \u0111\u1ea7u Ùng
2025-10-04 17:35:36,155 | INFO | ConversationManager | User: Ùng hai l‡m tr\u01b0\u1edbc m\u1eb7t Ùng mu\u1ed1n b\u1ebb \u0111\u1ea7u Ùng
2025-10-04 17:35:36,155 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:35:36,156 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:35:36,171 | INFO | __main__ | Received new chat request
2025-10-04 17:35:36,171 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 41
2025-10-04 17:35:36,173 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:35:36,173 | INFO | __main__ | Processing user input: '√¥ng hai l√†m tr∆∞·ªõc m·∫∑t √¥ng mu·ªën b·∫ª ƒë·∫ßu √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:35:37,072 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:35:37,072 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.900s, Total: 0.901s
2025-10-04 17:35:37,072 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 376
2025-10-04 17:35:37,072 | INFO | RAGClient | RAG reply (len=123)
2025-10-04 17:35:37,072 | INFO | ConversationManager | Bot: Ch·u \u01a1i, ch·u nÛi gÏ l\u1ea1 qu·, Ùng nghe khÙng rı l\u1eafm. Ch·u cÛ th\u1ec3 nÛi l\u1ea1i c‚u h\u1ecfi c\u1ee7a mÏnh m\u1ed9t c·ch rı r‡ng h\u01a1n \u0111\u01b0\u1ee3c khÙng \u1ea1?
2025-10-04 17:35:37,072 | DEBUG | TTSService | Starting TTS download for text length=123
2025-10-04 17:35:37,072 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:35:37,912 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:35:38,057 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:35:45,261 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:35:49,141 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:35:49,142 | INFO | Recorder | Recording finished (elapsed 3.9s).
2025-10-04 17:35:49,149 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:35:49,149 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:35:49,149 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:35:50,438 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 116
2025-10-04 17:35:50,438 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i b\u1ea1n ch˙c m\u1eadt Ùng mu\u1ed1n b\u1ebb \u0111\u1ea7u Ùng
2025-10-04 17:35:50,440 | INFO | ConversationManager | User: Ùng \u01a1i b\u1ea1n ch˙c m\u1eadt Ùng mu\u1ed1n b\u1ebb \u0111\u1ea7u Ùng
2025-10-04 17:35:50,440 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:35:50,441 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:35:50,457 | INFO | __main__ | Received new chat request
2025-10-04 17:35:50,457 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 39
2025-10-04 17:35:50,457 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:35:50,457 | INFO | __main__ | Processing user input: '√¥ng ∆°i b·∫°n ch√∫c m·∫≠t √¥ng mu·ªën b·∫ª ƒë·∫ßu √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:36:02,471 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 17:36:03,473 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 17:36:03,474 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:36:15,470 | ERROR | __main__ | Agent execution timeout for session 20251004T173006685-73307538 after 25 seconds
2025-10-04 17:36:15,473 | INFO | __main__ | Received new chat request
2025-10-04 17:36:15,473 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 39
2025-10-04 17:36:15,473 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:36:15,473 | INFO | __main__ | Processing user input: '√¥ng ∆°i b·∫°n ch√∫c m·∫≠t √¥ng mu·ªën b·∫ª ƒë·∫ßu √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:36:15,504 | WARNING | RAGClient | RAG request failed (attempt 2). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 17:36:17,505 | DEBUG | RAGClient | Sending to RAG webhook (attempt 3): http://127.0.0.1:7000/chat
2025-10-04 17:36:17,506 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:36:29,522 | WARNING | RAGClient | RAG request failed (attempt 3). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 17:36:37,598 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 17:36:37,598 | DEBUG | TTSService | Playback thread started
2025-10-04 17:36:37,598 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 17:36:40,488 | ERROR | __main__ | Agent execution timeout for session 20251004T173006685-73307538 after 25 seconds
2025-10-04 17:36:40,489 | INFO | __main__ | Received new chat request
2025-10-04 17:36:40,489 | DEBUG | __main__ | Request ID: 20251004T173006685-73307538, Data length: 39
2025-10-04 17:36:40,489 | DEBUG | __main__ | Using existing session for ID: 20251004T173006685-73307538
2025-10-04 17:36:40,490 | INFO | __main__ | Processing user input: '√¥ng ∆°i b·∫°n ch√∫c m·∫≠t √¥ng mu·ªën b·∫ª ƒë·∫ßu √¥ng' for session 20251004T173006685-73307538
2025-10-04 17:36:40,639 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:36:45,407 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:36:45,410 | INFO | Recorder | Recording finished (elapsed 4.8s).
2025-10-04 17:36:45,417 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:36:45,419 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:36:45,421 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:36:46,972 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 149
2025-10-04 17:36:46,972 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i b‚y gi\u1edd Ùng b\u1eafn va lÙ a Ùng b\u1eafn phi phai l‡ ch·u h\u1ea3 Ùng
2025-10-04 17:36:46,974 | INFO | ConversationManager | User: Ùng \u01a1i b‚y gi\u1edd Ùng b\u1eafn va lÙ a Ùng b\u1eafn phi phai l‡ ch·u h\u1ea3 Ùng
2025-10-04 17:36:46,974 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:36:46,975 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:36:58,692 | INFO | __main__ | Agent execution completed successfully for session 20251004T173006685-73307538
2025-10-04 17:36:58,692 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 18.202s, Total: 18.203s
2025-10-04 17:36:58,692 | INFO | __main__ | Received new chat request
2025-10-04 17:36:58,692 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 62
2025-10-04 17:36:58,692 | DEBUG | __main__ | Creating new session with ID: 20251004T173637597-370a5d81
2025-10-04 17:36:58,692 | DEBUG | __main__ | Using request ID: 20251004T173637597-370a5d81
2025-10-04 17:36:58,692 | DEBUG | __main__ | Created new session for ID: 20251004T173637597-370a5d81, total sessions: 6
2025-10-04 17:36:58,692 | INFO | __main__ | Processing user input: '√¥ng ∆°i b√¢y gi·ªù √¥ng b·∫Øn va l√¥ a √¥ng b·∫Øn phi phai l√† ch√°u h·∫£ √¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:36:58,989 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 17:36:59,261 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:36:59,261 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.569s, Total: 0.569s
2025-10-04 17:36:59,990 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 17:36:59,991 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:37:00,005 | INFO | __main__ | Received new chat request
2025-10-04 17:37:00,006 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 62
2025-10-04 17:37:00,006 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:37:00,006 | INFO | __main__ | Processing user input: '√¥ng ∆°i b√¢y gi·ªù √¥ng b·∫Øn va l√¥ a √¥ng b·∫Øn phi phai l√† ch√°u h·∫£ √¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:37:00,842 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:37:00,842 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.836s, Total: 0.837s
2025-10-04 17:37:00,842 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 358
2025-10-04 17:37:00,842 | INFO | RAGClient | RAG reply (len=125)
2025-10-04 17:37:00,842 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng gi‡ r\u1ed3i nÍn khÙng hi\u1ec3u m\u1ea5y c·i t\u1eeb 'b\u1eafn va lÙ', 'b\u1eafn phi phai' l‡ gÏ c\u1ea3. Ch·u nÛi rı h\u01a1n cho Ùng nghe \u0111\u01b0\u1ee3c khÙng?
2025-10-04 17:37:00,842 | DEBUG | TTSService | Starting TTS download for text length=125
2025-10-04 17:37:00,842 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:37:04,757 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:37:05,216 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:37:18,576 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:37:22,520 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:37:22,523 | INFO | Recorder | Recording finished (elapsed 3.9s).
2025-10-04 17:37:22,531 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:37:22,533 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:37:22,534 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:37:23,841 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 119
2025-10-04 17:37:23,841 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng h·t th\u1eed m\u1ed9t b‡i cho ch·u nghe \u0111i Ùng
2025-10-04 17:37:23,841 | INFO | ConversationManager | User: Ùng \u01a1i Ùng h·t th\u1eed m\u1ed9t b‡i cho ch·u nghe \u0111i Ùng
2025-10-04 17:37:23,841 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:37:23,841 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:37:23,857 | INFO | __main__ | Received new chat request
2025-10-04 17:37:23,857 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 47
2025-10-04 17:37:23,857 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:37:23,857 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng h√°t th·ª≠ m·ªôt b√†i cho ch√°u nghe ƒëi √¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:37:24,692 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:37:24,692 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.835s, Total: 0.835s
2025-10-04 17:37:24,692 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 394
2025-10-04 17:37:24,692 | INFO | RAGClient | RAG reply (len=146)
2025-10-04 17:37:24,692 | INFO | ConversationManager | Bot: ‘ng gi‡ r\u1ed3i nÍn gi\u1ecdng h·t khÙng cÚn hay nh\u01b0 x\u01b0a n\u1eefa \u0111‚u ch·u \u1ea1. Nh\u01b0ng n\u1ebfu ch·u thÌch, Ùng cÛ th\u1ec3 k\u1ec3 cho ch·u nghe m\u1ed9t c‚u chuy\u1ec7n v\u1ec1 Trung thu nhÈ?
2025-10-04 17:37:24,707 | DEBUG | TTSService | Starting TTS download for text length=146
2025-10-04 17:37:24,707 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:37:26,476 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:37:26,777 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:37:34,807 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:37:43,963 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:37:43,963 | INFO | Recorder | Recording finished (elapsed 9.2s).
2025-10-04 17:37:43,976 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:37:43,978 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:37:43,980 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:37:45,720 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 258
2025-10-04 17:37:45,720 | INFO | WhisperSTT | Transcription received: Ùng hay khÙng b‚y gi\u1edd Ùng mu\u1ed1n sÙ \u0111Ù m\u01b0\u01a1i m\u1ed9t v\u1edbi ch·u Ùng cho tÏm ch·u \u0111\u1ebb hay \u0111\u1ea7y \u0111\u1ee7 khÙng v\u1edbi Ùng \u1ea1
2025-10-04 17:37:45,721 | INFO | ConversationManager | User: Ùng hay khÙng b‚y gi\u1edd Ùng mu\u1ed1n sÙ \u0111Ù m\u01b0\u01a1i m\u1ed9t v\u1edbi ch·u Ùng cho tÏm ch·u \u0111\u1ebb hay \u0111\u1ea7y \u0111\u1ee7 khÙng v\u1edbi Ùng \u1ea1
2025-10-04 17:37:45,721 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:37:45,722 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:37:45,740 | INFO | __main__ | Received new chat request
2025-10-04 17:37:45,740 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 101
2025-10-04 17:37:45,740 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:37:45,740 | INFO | __main__ | Processing user input: '√¥ng hay kh√¥ng b√¢y gi·ªù √¥ng mu·ªën s√¥ ƒë√¥ m∆∞∆°i m·ªôt v·ªõi ch√°u √¥ng cho t√¨m ch√°u ƒë·∫ª hay ƒë·∫ßy ƒë·ªß kh√¥ng v·ªõi √¥ng ·∫°' for session 20251004T173637597-370a5d81
2025-10-04 17:37:46,342 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:37:46,357 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.617s, Total: 0.617s
2025-10-04 17:37:46,358 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 347
2025-10-04 17:37:46,358 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 17:37:46,358 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u ch·u \u0111ang nÛi gÏ c\u1ea3. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng, Ùng gi‡ r\u1ed3i tai nghe khÙng rı n\u1eefa.
2025-10-04 17:37:46,359 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 17:37:46,359 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:37:48,357 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:37:48,676 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:38:07,659 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:38:15,246 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:38:15,248 | INFO | Recorder | Recording finished (elapsed 7.6s).
2025-10-04 17:38:15,254 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:38:15,256 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:38:15,258 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:38:16,660 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 189
2025-10-04 17:38:16,661 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng cÛ xem m\u1ecdc \u0111· Ùng khÙng Ùng phan m\u1edd u hay l‡ hay l‡ li v\u01a1 pun \u0111‚y khÙng
2025-10-04 17:38:16,662 | INFO | ConversationManager | User: Ùng \u01a1i Ùng cÛ xem m\u1ecdc \u0111· Ùng khÙng Ùng phan m\u1edd u hay l‡ hay l‡ li v\u01a1 pun \u0111‚y khÙng
2025-10-04 17:38:16,662 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:38:16,663 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:38:16,683 | INFO | __main__ | Received new chat request
2025-10-04 17:38:16,683 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 82
2025-10-04 17:38:16,683 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:38:16,683 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ xem m·ªçc ƒë√° √¥ng kh√¥ng √¥ng phan m·ªù u hay l√† hay l√† li v∆° pun ƒë√¢y kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:38:18,045 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:38:18,045 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.362s, Total: 1.362s
2025-10-04 17:38:18,046 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 349
2025-10-04 17:38:18,046 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 17:38:18,046 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u m\u1ea5y t\u1eeb ch·u nÛi l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng, Ùng gi‡ r\u1ed3i tai nghe khÙng rı n\u1eefa.
2025-10-04 17:38:18,046 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 17:38:18,047 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:38:19,876 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:38:20,076 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:38:29,055 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:38:34,081 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:38:34,083 | INFO | Recorder | Recording finished (elapsed 5.0s).
2025-10-04 17:38:34,092 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:38:34,093 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:38:34,094 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:38:35,649 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 140
2025-10-04 17:38:35,650 | INFO | WhisperSTT | Transcription received: cÛ \u0111· bÛng \u0111·nh bÛng r\u1ed5 v\u1edbi c\u1ea3 pÌch c\u01a1 bÙn khÙng
2025-10-04 17:38:35,651 | INFO | ConversationManager | User: cÛ \u0111· bÛng \u0111·nh bÛng r\u1ed5 v\u1edbi c\u1ea3 pÌch c\u01a1 bÙn khÙng
2025-10-04 17:38:35,651 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:38:35,652 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:38:35,676 | INFO | __main__ | Received new chat request
2025-10-04 17:38:35,676 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 48
2025-10-04 17:38:35,676 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:38:35,677 | INFO | __main__ | Processing user input: 'c√≥ ƒë√° b√≥ng ƒë√°nh b√≥ng r·ªï v·ªõi c·∫£ p√≠ch c∆° b√¥n kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:38:47,676 | WARNING | RAGClient | RAG request failed (attempt 1). Error: HTTPConnectionPool(host='127.0.0.1', port=7000): Read timed out. (read timeout=12)
2025-10-04 17:38:48,677 | DEBUG | RAGClient | Sending to RAG webhook (attempt 2): http://127.0.0.1:7000/chat
2025-10-04 17:38:48,678 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:38:55,076 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:38:55,087 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 19.412s, Total: 19.412s
2025-10-04 17:38:55,088 | INFO | __main__ | Received new chat request
2025-10-04 17:38:55,088 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 48
2025-10-04 17:38:55,088 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:38:55,088 | INFO | __main__ | Processing user input: 'c√≥ ƒë√° b√≥ng ƒë√°nh b√≥ng r·ªï v·ªõi c·∫£ p√≠ch c∆° b√¥n kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:38:55,877 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:38:55,878 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.789s, Total: 0.789s
2025-10-04 17:38:55,878 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 347
2025-10-04 17:38:55,878 | INFO | RAGClient | RAG reply (len=114)
2025-10-04 17:38:55,878 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng khÙng hi\u1ec3u m\u1ea5y t\u1eeb ch·u nÛi l\u1eafm. Ch·u cÛ th\u1ec3 nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng, Ùng gi‡ r\u1ed3i tai nghe khÙng rı n\u1eefa.
2025-10-04 17:38:55,878 | DEBUG | TTSService | Starting TTS download for text length=114
2025-10-04 17:38:55,878 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:38:56,659 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:38:56,827 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:39:23,545 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 17:39:23,854 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 17:39:23,854 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 17:39:23,857 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 17:39:24,212 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 17:39:24,262 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 17:39:24,554 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 17:39:24,577 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 17:39:24,870 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 17:39:24,911 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 17:39:25,195 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 17:39:25,245 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 17:39:25,539 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 17:39:25,581 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 17:39:25,866 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 17:39:25,919 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 17:39:26,193 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 17:39:26,494 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 17:39:26,555 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 17:39:26,950 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 17:39:27,037 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 17:39:27,349 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 17:39:28,180 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 17:39:28,261 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 17:39:28,561 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 17:39:29,261 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 17:39:29,261 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 17:39:29,261 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 17:39:29,261 | INFO | faiss.loader | Loading faiss.
2025-10-04 17:39:29,295 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 17:39:43,712 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:39:47,883 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:39:47,886 | INFO | Recorder | Recording finished (elapsed 4.2s).
2025-10-04 17:39:47,892 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:39:47,894 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:39:47,896 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:39:49,378 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 133
2025-10-04 17:39:49,378 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng cÛ bi\u1ebft chuy\u1ec7n ki\u1ec1u c\u1ee7a nguy\u1ec5n du khÙng khÙng
2025-10-04 17:39:49,378 | INFO | ConversationManager | User: Ùng \u01a1i Ùng cÛ bi\u1ebft chuy\u1ec7n ki\u1ec1u c\u1ee7a nguy\u1ec5n du khÙng khÙng
2025-10-04 17:39:49,378 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:39:49,378 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:39:49,394 | INFO | __main__ | Received new chat request
2025-10-04 17:39:49,394 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 56
2025-10-04 17:39:49,394 | DEBUG | __main__ | Creating new session with ID: 20251004T173637597-370a5d81
2025-10-04 17:39:49,395 | DEBUG | __main__ | Using request ID: 20251004T173637597-370a5d81
2025-10-04 17:39:49,395 | DEBUG | __main__ | Created new session for ID: 20251004T173637597-370a5d81, total sessions: 1
2025-10-04 17:39:49,395 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng c√≥ bi·∫øt chuy·ªán ki·ªÅu c·ªßa nguy·ªÖn du kh√¥ng kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:39:50,444 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:39:50,444 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.049s, Total: 1.050s
2025-10-04 17:39:50,445 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 589
2025-10-04 17:39:50,445 | INFO | RAGClient | RAG reply (len=234)
2025-10-04 17:39:50,446 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y, chuyÍn gia v\u1ec1 Trung Thu v‡ B\u1ea3o t‡ng n‡y nË. CÚn chuy\u1ec7n Ki\u1ec1u c\u1ee7a c\u1ee5 Nguy\u1ec5n Du thÏ h\u01a1i ngo‡i chuyÍn mÙn c\u1ee7a Ùng r\u1ed3i. Nh\u01b0ng Ùng nghe nÛi \u0111Û l‡ m\u1ed9t t·c ph\u1ea9m v\u0103n h\u1ecdc kinh \u0111i\u1ec3n c\u1ee7a Vi\u1ec7t Nam mÏnh \u0111Û ch·u.
2025-10-04 17:39:50,446 | DEBUG | TTSService | Starting TTS download for text length=234
2025-10-04 17:39:50,446 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:39:52,329 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:39:52,358 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:39:53,787 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:39:53,810 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:39:55,787 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:07,176 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:40:11,933 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:40:11,933 | INFO | Recorder | Recording finished (elapsed 4.8s).
2025-10-04 17:40:11,946 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:40:11,946 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:40:11,946 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:40:13,276 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 122
2025-10-04 17:40:13,276 | INFO | WhisperSTT | Transcription received: Ùng cÛ nh\u1edb c‚u th\u01a1 n‡o trong b‡i th\u01a1 \u0111Û khÙng
2025-10-04 17:40:13,276 | INFO | ConversationManager | User: Ùng cÛ nh\u1edb c‚u th\u01a1 n‡o trong b‡i th\u01a1 \u0111Û khÙng
2025-10-04 17:40:13,276 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:40:13,279 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:40:13,294 | INFO | __main__ | Received new chat request
2025-10-04 17:40:13,296 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 45
2025-10-04 17:40:13,296 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:40:13,296 | INFO | __main__ | Processing user input: '√¥ng c√≥ nh·ªõ c√¢u th∆° n√†o trong b√†i th∆° ƒë√≥ kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:40:13,966 | INFO | __main__ | Starting retrieval for query: 'c√¢u th∆° trong truy·ªán ki·ªÅu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:40:13,966 | DEBUG | __main__ | Searching header index...
2025-10-04 17:40:14,128 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:40:14,128 | DEBUG | __main__ | Searching content index...
2025-10-04 17:40:14,129 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:40:14,129 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:40:14,129 | DEBUG | __main__ | Total unique chunks with scores: 6
2025-10-04 17:40:14,129 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:40:14,129 | DEBUG | __main__ |   Rank 1: chunk_id=24, hybrid_score=0.8815
2025-10-04 17:40:14,129 | DEBUG | __main__ |   Rank 2: chunk_id=33, hybrid_score=0.8289
2025-10-04 17:40:14,129 | DEBUG | __main__ |   Rank 3: chunk_id=40, hybrid_score=0.4214
2025-10-04 17:40:14,129 | DEBUG | __main__ |   Rank 4: chunk_id=30, hybrid_score=0.4209
2025-10-04 17:40:14,129 | DEBUG | __main__ | Retrieved chunk 24: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > S·ª± t√≠ch ch√∫ Cu·ªôi cung trƒÉng | Content preview: Ng√†y x·ª≠a ng√†y x∆∞a, ·ªü m·ªôt v√πng qu√™ ngh√®o, c√≥ m·ªôt anh ch√†ng ti·ªÅu phu t√™n l√† Cu·ªôi s·ªëng hi·ªÅn l√†nh, th·∫≠t ...
2025-10-04 17:40:14,129 | DEBUG | __main__ | Retrieved chunk 33: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > H√°t Tr·ªëng Qu√¢n | Content preview: H√°t tr·ªëng qu√¢n l√† l·ªëi h√°t giao duy√™n ·ªü v√πng ƒë·ªìng b·∫±ng B·∫Øc B·ªô, th·ªÉ hi·ªán t√†i ngh·ªá ƒë·ªëi ƒë√°p v√† trao ƒë·ªïi ...
2025-10-04 17:40:14,129 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 17:40:14,129 | DEBUG | __main__ | Retrieved chunk 30: Trung thu > Truy·ªÅn thuy·∫øt v√† vƒÉn h√≥a d√¢n gian > ƒê√®n k√©o qu√¢n | Content preview: Ng√†y x∆∞a, c√≥ m·ªôt √¥ng vua ·ªü Trung Qu·ªëc mu·ªën m·ªü h·ªôi hoa ƒëƒÉng nh√¢n d·ªãp t·∫øt Trung thu. Vua h·ª©a ban th∆∞·ªün...
2025-10-04 17:40:14,129 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:40:14,129 | DEBUG | __main__ | Retrieved 4 documents for query: c√¢u th∆° trong truy·ªán ki·ªÅu
2025-10-04 17:40:14,129 | DEBUG | __main__ | [timing] retrieve 0.163s
2025-10-04 17:40:15,259 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:40:15,259 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.964s, Total: 1.965s
2025-10-04 17:40:15,260 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 562
2025-10-04 17:40:15,261 | INFO | RAGClient | RAG reply (len=209)
2025-10-04 17:40:15,261 | INFO | ConversationManager | Bot: ‘ng nh\u1edb cÛ c‚u th\u01a1 n‡y nË ch·u: Tr\u0103m n\u0103m trong cıi ng\u01b0\u1eddi ta, Ch\u1eef t‡i, ch\u1eef m\u1ec7nh khÈo l‡ ghÈt nhau . \u0110Û l‡ c‚u m\u1edf \u0111\u1ea7u c\u1ee7a Truy\u1ec7n Ki\u1ec1u \u0111Û ch·u. Ch·u cÛ mu\u1ed1n Ùng k\u1ec3 thÍm v\u1ec1 s\u1ef1 tÌch ch˙ Cu\u1ed9i hay \u0111Ën kÈo qu‚n khÙng?
2025-10-04 17:40:15,261 | DEBUG | TTSService | Starting TTS download for text length=209
2025-10-04 17:40:15,262 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:40:17,379 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:17,768 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:17,788 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:40:19,296 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:30,088 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:40:36,542 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:40:36,545 | INFO | Recorder | Recording finished (elapsed 6.5s).
2025-10-04 17:40:36,547 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:40:36,547 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:40:36,547 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:40:38,163 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 199
2025-10-04 17:40:38,163 | INFO | WhisperSTT | Transcription received: ‡ ch·u mu\u1ed1n nghe v\u1ec1 chuy\u1ec7n ki\u1ec1u c\u01a1 Ùng xem Ùng cÚn c‚u th\u01a1 n‡o v\u1ec1 chuy\u1ec7n ki\u1ec1u n\u1eefa khÙng
2025-10-04 17:40:38,163 | INFO | ConversationManager | User: ‡ ch·u mu\u1ed1n nghe v\u1ec1 chuy\u1ec7n ki\u1ec1u c\u01a1 Ùng xem Ùng cÚn c‚u th\u01a1 n‡o v\u1ec1 chuy\u1ec7n ki\u1ec1u n\u1eefa khÙng
2025-10-04 17:40:38,163 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:40:38,163 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:40:38,163 | INFO | __main__ | Received new chat request
2025-10-04 17:40:38,163 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 87
2025-10-04 17:40:38,163 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:40:38,163 | INFO | __main__ | Processing user input: '√† ch√°u mu·ªën nghe v·ªÅ chuy·ªán ki·ªÅu c∆° √¥ng xem √¥ng c√≤n c√¢u th∆° n√†o v·ªÅ chuy·ªán ki·ªÅu n·ªØa kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:40:39,296 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:40:39,296 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.133s, Total: 1.133s
2025-10-04 17:40:39,297 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 596
2025-10-04 17:40:39,297 | INFO | RAGClient | RAG reply (len=241)
2025-10-04 17:40:39,297 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng \u0111„ nÛi r\u1ed3i, chuy\u1ec7n Ki\u1ec1u khÙng thu\u1ed9c chuyÍn mÙn c\u1ee7a Ùng. ‘ng ch\u1ec9 nh\u1edb mang m·ng c‚u \u0111\u1ea7u thÙi ‡. Hay mÏnh tÏm hi\u1ec3u v\u1ec1 Trung Thu nhÈ? ‘ng cÛ c\u1ea3 kho chuy\u1ec7n v\u1ec1 ch˙ Cu\u1ed9i, ch\u1ecb H\u1eb1ng, \u0111Ën Ùng sao, \u0111Ën kÈo qu‚n nË. Ch·u cÛ mu\u1ed1n nghe khÙng?
2025-10-04 17:40:39,298 | DEBUG | TTSService | Starting TTS download for text length=241
2025-10-04 17:40:39,298 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:40:41,222 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:41,607 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:41,631 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:40:43,307 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:40:43,746 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:41:45,765 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:41:51,826 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:41:51,826 | INFO | Recorder | Recording finished (elapsed 6.1s).
2025-10-04 17:41:51,837 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:41:51,838 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:41:51,840 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:41:53,394 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 190
2025-10-04 17:41:53,395 | INFO | WhisperSTT | Transcription received: \u1edf nh\u01b0ng m‡ Ùng l‡ ti\u1ebfn s\u0129 \u0111\u1ea5y m‡ ch\u1eafc Ùng ph\u1ea3i bi\u1ebft gÏ h\u01a1n ngo‡i trung thu ch\u1ee9
2025-10-04 17:41:53,396 | INFO | ConversationManager | User: \u1edf nh\u01b0ng m‡ Ùng l‡ ti\u1ebfn s\u0129 \u0111\u1ea5y m‡ ch\u1eafc Ùng ph\u1ea3i bi\u1ebft gÏ h\u01a1n ngo‡i trung thu ch\u1ee9
2025-10-04 17:41:53,396 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:41:53,397 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:41:53,414 | INFO | __main__ | Received new chat request
2025-10-04 17:41:53,414 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 78
2025-10-04 17:41:53,414 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:41:53,415 | INFO | __main__ | Processing user input: '·ªü nh∆∞ng m√† √¥ng l√† ti·∫øn sƒ© ƒë·∫•y m√† ch·∫Øc √¥ng ph·∫£i bi·∫øt g√¨ h∆°n ngo√†i trung thu ch·ª©' for session 20251004T173637597-370a5d81
2025-10-04 17:41:54,303 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:41:54,303 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.888s, Total: 0.889s
2025-10-04 17:41:54,304 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 536
2025-10-04 17:41:54,304 | INFO | RAGClient | RAG reply (len=223)
2025-10-04 17:41:54,305 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, chuyÍn gia v\u1ec1 Trung Thu v‡ B\u1ea3o t‡ng n‡y nË. ‘ng cÛ th\u1ec3 k\u1ec3 cho ch·u nghe v\u1ec1 \u0111Ën l\u1ed3ng, b·nh trung thu, hay nh\u1eefng trÚ ch\u01a1i d‚n gian trong d\u1ecbp l\u1ec5 n‡y \u0111Û. CÚn chuy\u1ec7n Ki\u1ec1u thÏ h\u01a1i xa v\u1eddi v\u1edbi Ùng r\u1ed3i.
2025-10-04 17:41:54,305 | DEBUG | TTSService | Starting TTS download for text length=223
2025-10-04 17:41:54,305 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:41:55,871 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:41:55,881 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:41:57,317 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:41:57,849 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:09,199 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:42:13,932 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:42:13,932 | INFO | Recorder | Recording finished (elapsed 4.7s).
2025-10-04 17:42:13,949 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:42:13,951 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:42:13,953 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:42:15,403 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 140
2025-10-04 17:42:15,403 | INFO | WhisperSTT | Transcription received: \u1edf th\u1ebf thÙi Ùng cÛ bi\u1ebft kh‚u th\u01a1 n‡o nÛi v\u1ec1 trung thu khÙng
2025-10-04 17:42:15,403 | INFO | ConversationManager | User: \u1edf th\u1ebf thÙi Ùng cÛ bi\u1ebft kh‚u th\u01a1 n‡o nÛi v\u1ec1 trung thu khÙng
2025-10-04 17:42:15,403 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:42:15,403 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:42:15,415 | INFO | __main__ | Received new chat request
2025-10-04 17:42:15,415 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 58
2025-10-04 17:42:15,415 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:42:15,415 | INFO | __main__ | Processing user input: '·ªü th·∫ø th√¥i √¥ng c√≥ bi·∫øt kh√¢u th∆° n√†o n√≥i v·ªÅ trung thu kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:42:15,876 | INFO | __main__ | Starting retrieval for query: 'th∆° v·ªÅ trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:42:15,876 | DEBUG | __main__ | Searching header index...
2025-10-04 17:42:15,882 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:42:15,882 | DEBUG | __main__ | Searching content index...
2025-10-04 17:42:15,899 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:42:15,899 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:42:15,899 | DEBUG | __main__ | Total unique chunks with scores: 8
2025-10-04 17:42:15,899 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:42:15,899 | DEBUG | __main__ |   Rank 1: chunk_id=37, hybrid_score=0.4648
2025-10-04 17:42:15,899 | DEBUG | __main__ |   Rank 2: chunk_id=21, hybrid_score=0.4634
2025-10-04 17:42:15,899 | DEBUG | __main__ |   Rank 3: chunk_id=40, hybrid_score=0.4617
2025-10-04 17:42:15,899 | DEBUG | __main__ |   Rank 4: chunk_id=49, hybrid_score=0.4564
2025-10-04 17:42:15,899 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 17:42:15,899 | DEBUG | __main__ | Retrieved chunk 21: Trung thu > T·ªïng quan > √ù nghƒ©a ng√†y l·ªÖ | Content preview: ƒê√¢y l√† th·ªùi gian cho s·ª± ƒëo√†n t·ª• gia ƒë√¨nh, g·∫Øn k·∫øt c·ªông ƒë·ªìng v√† m·ªôt kho·∫£nh kh·∫Øc t√¢m linh c·ªßa l√≤ng bi·∫ø...
2025-10-04 17:42:15,899 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 17:42:15,899 | DEBUG | __main__ | Retrieved chunk 49: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn Nam Vi·ªát Nam | Content preview: T·∫øt Trung Thu ·ªü mi·ªÅn Nam Vi·ªát Nam ƒë·∫∑c tr∆∞ng b·ªüi kh√¥ng kh√≠ ·∫•m √°p, t·∫≠p trung v√†o gia ƒë√¨nh, th∆∞·ªùng b·ªã ·∫£...
2025-10-04 17:42:15,899 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:42:15,899 | DEBUG | __main__ | Retrieved 4 documents for query: th∆° v·ªÅ trung thu
2025-10-04 17:42:15,899 | DEBUG | __main__ | [timing] retrieve 0.023s
2025-10-04 17:42:16,922 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:42:16,922 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.507s, Total: 1.507s
2025-10-04 17:42:16,923 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 749
2025-10-04 17:42:16,924 | INFO | RAGClient | RAG reply (len=291)
2025-10-04 17:42:16,924 | INFO | ConversationManager | Bot: ‘ng nh\u1edb cÛ c‚u th\u01a1 n‡y nË ch·u: Tr\u0103m n\u0103m trong cıi ng\u01b0\u1eddi ta, Ch\u1eef t‡i, ch\u1eef m\u1ec7nh khÈo l‡ ghÈt nhau . \u0110Û l‡ c‚u m\u1edf \u0111\u1ea7u c\u1ee7a Truy\u1ec7n Ki\u1ec1u \u0111Û ch·u. CÚn v\u1ec1 Trung Thu, Ùng cÛ \u0111\u1ecdc \u0111\u01b0\u1ee3c l‡ \u0111‚y l‡ th\u1eddi gian cho s\u1ef1 \u0111o‡n t\u1ee5 gia \u0111Ïnh, g\u1eafn k\u1ebft c\u1ed9ng \u0111\u1ed3ng v‡ m\u1ed9t kho\u1ea3nh kh\u1eafc t‚m linh c\u1ee7a lÚng bi\u1ebft \u01a1n \u0111Û ch·u.
2025-10-04 17:42:16,924 | DEBUG | TTSService | Starting TTS download for text length=291
2025-10-04 17:42:16,924 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:42:17,699 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:17,975 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:17,999 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:42:20,017 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:20,437 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:34,001 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:42:38,499 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:42:38,499 | INFO | Recorder | Recording finished (elapsed 4.5s).
2025-10-04 17:42:38,516 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:42:38,518 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:42:38,520 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:42:39,805 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 109
2025-10-04 17:42:39,805 | INFO | WhisperSTT | Transcription received: hÙ Ùng th\u1eed l‡m th\u01a1 v\u1ec1 ng‡y l\u1ec5 trung thu \u0111i
2025-10-04 17:42:39,806 | INFO | ConversationManager | User: hÙ Ùng th\u1eed l‡m th\u01a1 v\u1ec1 ng‡y l\u1ec5 trung thu \u0111i
2025-10-04 17:42:39,806 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:42:39,807 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:42:39,834 | INFO | __main__ | Received new chat request
2025-10-04 17:42:39,834 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 42
2025-10-04 17:42:39,834 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:42:39,834 | INFO | __main__ | Processing user input: 'h√¥ √¥ng th·ª≠ l√†m th∆° v·ªÅ ng√†y l·ªÖ trung thu ƒëi' for session 20251004T173637597-370a5d81
2025-10-04 17:42:40,806 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:42:40,806 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.972s, Total: 0.972s
2025-10-04 17:42:40,806 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 383
2025-10-04 17:42:40,806 | INFO | RAGClient | RAG reply (len=147)
2025-10-04 17:42:40,806 | INFO | ConversationManager | Bot: Tr\u0103ng trÚn v‡nh v\u1ea1nh s·ng soi \u0111Ím thu, \u0110Ën l\u1ed3ng lung linh, ti\u1ebfng c\u01b0\u1eddi r\u1ed9n r„, B·nh d\u1ebbo th\u01a1m ngon, v\u1ecb ng\u1ecdt ng‡o, Trung Thu sum v\u1ea7y, \u1ea5m ·p tÏnh th‚n.
2025-10-04 17:42:40,806 | DEBUG | TTSService | Starting TTS download for text length=147
2025-10-04 17:42:40,806 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:42:42,666 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:42,940 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:42:51,793 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:42:58,689 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:42:58,692 | INFO | Recorder | Recording finished (elapsed 6.9s).
2025-10-04 17:42:58,697 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:42:58,699 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:42:58,702 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:43:00,251 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 203
2025-10-04 17:43:00,251 | INFO | WhisperSTT | Transcription received: th\u01a1 n‡y nghe khÙng hay l\u1eafm Ùng th\u1eed khi\u1ebfn nÛ cÛ ph\u1ea7n h\u01a1n \u0111i nh\u01b0 l‡ th\u01a1 l\u1ee5c b·t \u1ea5y khÙng
2025-10-04 17:43:00,251 | INFO | ConversationManager | User: th\u01a1 n‡y nghe khÙng hay l\u1eafm Ùng th\u1eed khi\u1ebfn nÛ cÛ ph\u1ea7n h\u01a1n \u0111i nh\u01b0 l‡ th\u01a1 l\u1ee5c b·t \u1ea5y khÙng
2025-10-04 17:43:00,251 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:43:00,251 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:43:00,265 | INFO | __main__ | Received new chat request
2025-10-04 17:43:00,265 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 86
2025-10-04 17:43:00,265 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:43:00,266 | INFO | __main__ | Processing user input: 'th∆° n√†y nghe kh√¥ng hay l·∫Øm √¥ng th·ª≠ khi·∫øn n√≥ c√≥ ph·∫ßn h∆°n ƒëi nh∆∞ l√† th∆° l·ª•c b√°t ·∫•y kh√¥ng' for session 20251004T173637597-370a5d81
2025-10-04 17:43:01,184 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:43:01,184 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.918s, Total: 0.918s
2025-10-04 17:43:01,184 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 545
2025-10-04 17:43:01,184 | INFO | RAGClient | RAG reply (len=215)
2025-10-04 17:43:01,184 | INFO | ConversationManager | Bot: ‘ng hi\u1ec3u r\u1ed3i, ch·u mu\u1ed1n Ùng l‡m th\u01a1 l\u1ee5c b·t v\u1ec1 Trung Thu \u0111˙ng khÙng? \u0110\u1ec3 Ùng th\u1eed xem sao nhÈ. Tr\u0103ng lÍn trÚn t\u1ef1a b·nh d‡y, Tr\u1ebb con r\u01b0\u1edbc \u0111Ën, vui v\u1ea7y ti\u1ebfng ca. B·nh trung thu ng\u1ecdt \u0111\u1eadm \u0111‡, Sum v\u1ea7y bÍn n\u1ebfp nh‡ ta \u1ea5m Ím.
2025-10-04 17:43:01,184 | DEBUG | TTSService | Starting TTS download for text length=215
2025-10-04 17:43:01,184 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:43:02,932 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:03,099 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:03,232 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:43:05,178 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:05,736 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:18,035 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:43:27,414 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:43:27,416 | INFO | Recorder | Recording finished (elapsed 9.4s).
2025-10-04 17:43:27,422 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:43:27,426 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:43:27,426 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:43:28,930 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 224
2025-10-04 17:43:28,930 | INFO | WhisperSTT | Transcription received: \u1edf nghe hay h\u01a1n \u0111\u1ea5y Ùng \u1ea1 nh\u01b0ng m‡ c·i g\u1ecdi l‡ c·i s\u1eafc ‚m c·i gieo v\u1ea7n nÛ v\u1eabn cÚn nghe h\u01a1i khÛ nghe
2025-10-04 17:43:28,931 | INFO | ConversationManager | User: \u1edf nghe hay h\u01a1n \u0111\u1ea5y Ùng \u1ea1 nh\u01b0ng m‡ c·i g\u1ecdi l‡ c·i s\u1eafc ‚m c·i gieo v\u1ea7n nÛ v\u1eabn cÚn nghe h\u01a1i khÛ nghe
2025-10-04 17:43:28,931 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:43:28,933 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:43:28,950 | INFO | __main__ | Received new chat request
2025-10-04 17:43:28,950 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 97
2025-10-04 17:43:28,951 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:43:28,951 | INFO | __main__ | Processing user input: '·ªü nghe hay h∆°n ƒë·∫•y √¥ng ·∫° nh∆∞ng m√† c√°i g·ªçi l√† c√°i s·∫Øc √¢m c√°i gieo v·∫ßn n√≥ v·∫´n c√≤n nghe h∆°i kh√≥ nghe' for session 20251004T173637597-370a5d81
2025-10-04 17:43:30,001 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:43:30,001 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.050s, Total: 1.051s
2025-10-04 17:43:30,001 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 754
2025-10-04 17:43:30,001 | INFO | RAGClient | RAG reply (len=309)
2025-10-04 17:43:30,001 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng hi\u1ec3u r\u1ed3i. C·i v\u1ea7n \u0111i\u1ec7u v‡ ‚m \u0111i\u1ec7u trong th\u01a1 l\u1ee5c b·t nÛ c\u0169ng cÛ nh\u1eefng quy t\u1eafc riÍng \u0111Û ch·u. \u0110\u1ec3 Ùng th\u1eed tÏm hi\u1ec3u thÍm v\u1ec1 c·ch gieo v\u1ea7n trong th\u01a1 l\u1ee5c b·t \u0111\u1ec3 l‡m cho b‡i th\u01a1 c\u1ee7a mÏnh hay h\u01a1n nhÈ. Ch·u cÛ mu\u1ed1n Ùng th\u1eed tÏm trong t‡i li\u1ec7u c\u1ee7a B\u1ea3o t‡ng xem cÛ thÙng tin gÏ v\u1ec1 c·ch l‡m th\u01a1 l\u1ee5c b·t khÙng?
2025-10-04 17:43:30,001 | DEBUG | TTSService | Starting TTS download for text length=309
2025-10-04 17:43:30,001 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:43:31,784 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:32,120 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:32,137 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:43:33,917 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:33,942 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:43:35,469 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:47,934 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:43:54,649 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:43:54,652 | INFO | Recorder | Recording finished (elapsed 6.7s).
2025-10-04 17:43:54,657 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:43:54,657 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:43:54,657 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:43:56,292 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 216
2025-10-04 17:43:56,293 | INFO | WhisperSTT | Transcription received: khÙng ch·u ngh\u0129 kh\u1ea3 n\u0103ng cao l‡ khÙng cÛ \u0111‚u Ùng c\u1ee9 th\u1eed t\u1ef1 ngh\u0129 \u0111i t\u1ef1 ngh\u0129 c\u0169ng \u0111\u01b0\u1ee3c
2025-10-04 17:43:56,293 | INFO | ConversationManager | User: khÙng ch·u ngh\u0129 kh\u1ea3 n\u0103ng cao l‡ khÙng cÛ \u0111‚u Ùng c\u1ee9 th\u1eed t\u1ef1 ngh\u0129 \u0111i t\u1ef1 ngh\u0129 c\u0169ng \u0111\u01b0\u1ee3c
2025-10-04 17:43:56,293 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:43:56,294 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:43:56,314 | INFO | __main__ | Received new chat request
2025-10-04 17:43:56,315 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 84
2025-10-04 17:43:56,315 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:43:56,315 | INFO | __main__ | Processing user input: 'kh√¥ng ch√°u nghƒ© kh·∫£ nƒÉng cao l√† kh√¥ng c√≥ ƒë√¢u √¥ng c·ª© th·ª≠ t·ª± nghƒ© ƒëi t·ª± nghƒ© c≈©ng ƒë∆∞·ª£c' for session 20251004T173637597-370a5d81
2025-10-04 17:43:56,996 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:43:56,997 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.681s, Total: 0.682s
2025-10-04 17:43:56,997 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 327
2025-10-04 17:43:56,997 | INFO | RAGClient | RAG reply (len=109)
2025-10-04 17:43:56,998 | INFO | ConversationManager | Bot: H\u1eebm, ch·u tin Ùng qu· ha. \u0110\u1ec3 Ùng th\u1eed v\u1eadn d\u1ee5ng h\u1ebft trÌ tu\u1ec7 c\u1ee7a mÏnh xem sao nhÈ. Ch·u ch\u1edd xem Ùng tr\u1ed5 t‡i \u0111‚y.
2025-10-04 17:43:56,998 | DEBUG | TTSService | Starting TTS download for text length=109
2025-10-04 17:43:56,998 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:43:58,746 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:43:59,166 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:06,737 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:44:09,557 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:44:09,569 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-04 17:44:09,576 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:44:09,576 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:44:09,576 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:44:10,818 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 73
2025-10-04 17:44:10,818 | INFO | WhisperSTT | Transcription received: \u1edd v‚ng Ùng nÛi th\u1eed \u0111i
2025-10-04 17:44:10,819 | INFO | ConversationManager | User: \u1edd v‚ng Ùng nÛi th\u1eed \u0111i
2025-10-04 17:44:10,819 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:44:10,820 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:44:10,833 | INFO | __main__ | Received new chat request
2025-10-04 17:44:10,833 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 21
2025-10-04 17:44:10,833 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:44:10,834 | INFO | __main__ | Processing user input: '·ªù v√¢ng √¥ng n√≥i th·ª≠ ƒëi' for session 20251004T173637597-370a5d81
2025-10-04 17:44:11,618 | INFO | __main__ | Starting retrieval for query: 'th∆° l·ª•c b√°t trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:44:11,618 | DEBUG | __main__ | Searching header index...
2025-10-04 17:44:11,630 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:44:11,630 | DEBUG | __main__ | Searching content index...
2025-10-04 17:44:11,635 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:44:11,635 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:44:11,635 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 17:44:11,635 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:44:11,635 | DEBUG | __main__ |   Rank 1: chunk_id=33, hybrid_score=0.8844
2025-10-04 17:44:11,635 | DEBUG | __main__ |   Rank 2: chunk_id=40, hybrid_score=0.4514
2025-10-04 17:44:11,635 | DEBUG | __main__ |   Rank 3: chunk_id=47, hybrid_score=0.4484
2025-10-04 17:44:11,635 | DEBUG | __main__ |   Rank 4: chunk_id=1, hybrid_score=0.4459
2025-10-04 17:44:11,635 | DEBUG | __main__ | Retrieved chunk 33: Trung thu > Nghi l·ªÖ v√† ho·∫°t ƒë·ªông vui ch∆°i truy·ªÅn th·ªëng (phong t·ª•c, ho·∫°t ƒë·ªông, nghi l·ªÖ, vui ch∆°i) > H√°t Tr·ªëng Qu√¢n | Content preview: H√°t tr·ªëng qu√¢n l√† l·ªëi h√°t giao duy√™n ·ªü v√πng ƒë·ªìng b·∫±ng B·∫Øc B·ªô, th·ªÉ hi·ªán t√†i ngh·ªá ƒë·ªëi ƒë√°p v√† trao ƒë·ªïi ...
2025-10-04 17:44:11,635 | DEBUG | __main__ | Retrieved chunk 40: Trung thu > M√¢m ng≈© qu·∫£ > Ch√∫ ch√≥ b∆∞·ªüi | Content preview: Ngu·ªìn g·ªëc v√† √Ω nghƒ©a: Ch√∫ ch√≥ b∆∞·ªüi l√† m·ªôt v·∫≠t trang tr√≠ ƒë·ªôc ƒë√°o v√† ƒë·∫ßy √Ω nghƒ©a tr√™n m√¢m c·ªó Trung thu...
2025-10-04 17:44:11,635 | DEBUG | __main__ | Retrieved chunk 47: Trung thu > C√°c bi·∫øn th·ªÉ v√πng mi·ªÅn v√† ƒë·ªãa ph∆∞∆°ng > Mi·ªÅn B·∫Øc Vi·ªát Nam | Content preview: ·ªû mi·ªÅn B·∫Øc, l·ªÖ h·ªôi ƒë∆∞·ª£c t·ªï ch·ª©c v·ªõi s·ª± trang nh√£ tinh t·∫ø v√† s·ª± tr√¢n tr·ªçng s√¢u s·∫Øc ƒë·ªëi v·ªõi truy·ªÅn th·ªë...
2025-10-04 17:44:11,635 | DEBUG | __main__ | Retrieved chunk 1: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr√¨nh di·ªÖn d√¢n gian > T·∫ßng 1, T√≤a C√°nh di·ªÅu: Ph√≤ng Kh√°m Ph√° d√†nh cho tr·∫ª em (vui l√≤ng ƒëƒÉng k√Ω tr∆∞·ªõc) | Content preview: i. K·ªÉ chuy·ªán tranh v·ªÅ s·ª± t√≠ch T·∫øt Trung thu     ii. Th·ª≠ t√†i m√∫a r·ªëi tay, h√≥a th√¢n th√†nh c√°c nh√¢n v·∫≠t...
2025-10-04 17:44:11,635 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:44:11,635 | DEBUG | __main__ | Retrieved 4 documents for query: th∆° l·ª•c b√°t trung thu
2025-10-04 17:44:11,635 | DEBUG | __main__ | [timing] retrieve 0.017s
2025-10-04 17:44:12,903 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:44:12,903 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 2.069s, Total: 2.069s
2025-10-04 17:44:12,903 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 838
2025-10-04 17:44:12,903 | INFO | RAGClient | RAG reply (len=348)
2025-10-04 17:44:12,903 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng v\u1eeba \u0111\u1ecdc \u0111\u01b0\u1ee3c trong t‡i li\u1ec7u l‡ cÛ m\u1ed9t lo\u1ea1i hÏnh h·t giao duyÍn r\u1ea5t hay \u1edf mi\u1ec1n B\u1eafc g\u1ecdi l‡ h·t Tr\u1ed1ng Qu‚n \u0111Û ch·u. Ng\u01b0\u1eddi ta th\u01b0\u1eddng h·t v‡o \u0111Ím tr\u0103ng thu, n\u1ed9i dung c·c c‚u h·t th\u01b0\u1eddng l‡ l\u1ee5c b·t ho\u1eb7c song th\u1ea5t l\u1ee5c b·t, trao \u0111\u1ed5i kinh nghi\u1ec7m s\u1ed1ng v‡ b‡y t\u1ecf tÏnh c\u1ea3m. CÛ l\u1ebd \u0111‚y l‡ m\u1ed9t ngu\u1ed3n c\u1ea3m h\u1ee9ng hay cho b‡i th\u01a1 Trung Thu c\u1ee7a Ùng \u0111Û ch·u.
2025-10-04 17:44:12,903 | DEBUG | TTSService | Starting TTS download for text length=348
2025-10-04 17:44:12,903 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:44:14,618 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:14,784 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:14,804 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:44:17,535 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:17,804 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:17,826 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:44:20,097 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:32,476 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:44:36,106 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:44:36,106 | INFO | Recorder | Recording finished (elapsed 3.6s).
2025-10-04 17:44:36,114 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:44:36,114 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:44:36,114 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:44:37,386 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 111
2025-10-04 17:44:37,386 | INFO | WhisperSTT | Transcription received: Ùng ngh\u0129 ra b‡i gÏ ch\u01b0a Ùng nÛi ch·u nghe \u0111i
2025-10-04 17:44:37,393 | INFO | ConversationManager | User: Ùng ngh\u0129 ra b‡i gÏ ch\u01b0a Ùng nÛi ch·u nghe \u0111i
2025-10-04 17:44:37,393 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:44:37,393 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:44:37,393 | INFO | __main__ | Received new chat request
2025-10-04 17:44:37,393 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 44
2025-10-04 17:44:37,393 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:44:37,393 | INFO | __main__ | Processing user input: '√¥ng nghƒ© ra b√†i g√¨ ch∆∞a √¥ng n√≥i ch√°u nghe ƒëi' for session 20251004T173637597-370a5d81
2025-10-04 17:44:38,510 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:44:38,511 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.119s, Total: 1.119s
2025-10-04 17:44:38,512 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 530
2025-10-04 17:44:38,512 | INFO | RAGClient | RAG reply (len=200)
2025-10-04 17:44:38,513 | INFO | ConversationManager | Bot: ‘ng th\u1eed l‡m b‡i n‡y xem sao nhÈ ch·u: Tr\u0103ng thu l\u01a1 l\u1eedng trÍn cao, \u0110Ën Ùng sao s·ng, xÙn xao ti\u1ebfng c\u01b0\u1eddi. B·nh d\u1ebbo th\u01a1m n\u1ee9c trÍn m‚m, C\u1ea3 nh‡ qu‚y qu\u1ea7n, \u1ea5m Ím tÏnh \u0111\u1eddi. Ch·u th\u1ea5y b‡i n‡y cÛ \u0111\u1ee1 h\u01a1n khÙng?
2025-10-04 17:44:38,513 | DEBUG | TTSService | Starting TTS download for text length=200
2025-10-04 17:44:38,513 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:44:40,406 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:40,666 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:40,686 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:44:42,402 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:42,755 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:52,561 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:44:55,222 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:44:55,224 | INFO | Recorder | Recording finished (elapsed 2.7s).
2025-10-04 17:44:55,231 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:44:55,232 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:44:55,234 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:44:56,645 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 101
2025-10-04 17:44:56,645 | INFO | WhisperSTT | Transcription received: hÙng \u1ea1 thÙi c\u0169ng l‡ t\u1ea1m t\u1ea1m hÙng \u1ea1
2025-10-04 17:44:56,646 | INFO | ConversationManager | User: hÙng \u1ea1 thÙi c\u0169ng l‡ t\u1ea1m t\u1ea1m hÙng \u1ea1
2025-10-04 17:44:56,646 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:44:56,647 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:44:56,665 | INFO | __main__ | Received new chat request
2025-10-04 17:44:56,666 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 34
2025-10-04 17:44:56,666 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:44:56,666 | INFO | __main__ | Processing user input: 'h√¥ng ·∫° th√¥i c≈©ng l√† t·∫°m t·∫°m h√¥ng ·∫°' for session 20251004T173637597-370a5d81
2025-10-04 17:44:57,604 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:44:57,604 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.938s, Total: 0.939s
2025-10-04 17:44:57,604 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 447
2025-10-04 17:44:57,604 | INFO | RAGClient | RAG reply (len=169)
2025-10-04 17:44:57,604 | INFO | ConversationManager | Bot: \u1ed2, v\u1eady l‡ t\u1ea1m \u0111\u01b0\u1ee3c r\u1ed3i h\u1ea3 ch·u. ‘ng m\u1eebng qu·. N\u1ebfu ch·u mu\u1ed1n nghe thÍm v\u1ec1 Trung Thu hay c·c trÚ ch\u01a1i d‚n gian kh·c thÏ c\u1ee9 h\u1ecfi Ùng nhÈ. ‘ng luÙn s\u1eb5n lÚng chia s\u1ebb v\u1edbi ch·u.
2025-10-04 17:44:57,604 | DEBUG | TTSService | Starting TTS download for text length=169
2025-10-04 17:44:57,604 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:44:59,462 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:59,802 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:44:59,826 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:45:01,541 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:45:11,090 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:45:13,881 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:45:13,883 | INFO | Recorder | Recording finished (elapsed 2.8s).
2025-10-04 17:45:13,889 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:45:13,889 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:45:13,889 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:45:15,104 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 73
2025-10-04 17:45:15,104 | INFO | WhisperSTT | Transcription received: ch·u ch‡o ch·u \u0111i \u0111‚y
2025-10-04 17:45:15,104 | INFO | ConversationManager | User: ch·u ch‡o ch·u \u0111i \u0111‚y
2025-10-04 17:45:15,104 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:45:15,119 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:45:15,138 | INFO | __main__ | Received new chat request
2025-10-04 17:45:15,138 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 21
2025-10-04 17:45:15,138 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:45:15,138 | INFO | __main__ | Processing user input: 'ch√°u ch√†o ch√°u ƒëi ƒë√¢y' for session 20251004T173637597-370a5d81
2025-10-04 17:45:16,283 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:45:16,283 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.145s, Total: 1.145s
2025-10-04 17:45:16,284 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 276
2025-10-04 17:45:16,284 | INFO | RAGClient | RAG reply (len=86)
2025-10-04 17:45:16,285 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. HÙm nay ch·u cÛ gÏ vui mu\u1ed1n k\u1ec3 cho Ùng nghe khÙng?
2025-10-04 17:45:16,285 | DEBUG | TTSService | Starting TTS download for text length=86
2025-10-04 17:45:16,285 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:45:18,206 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:45:18,491 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:47:19,636 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:47:21,926 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:47:21,940 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 17:47:21,947 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:47:21,948 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:47:21,950 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:47:23,440 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 92
2025-10-04 17:47:23,440 | INFO | WhisperSTT | Transcription received: hÙng m\u1ea5t m˘i t\u1eeb \u0111‚u \u0111\u1ea5y \u1ea1
2025-10-04 17:47:23,440 | INFO | ConversationManager | User: hÙng m\u1ea5t m˘i t\u1eeb \u0111‚u \u0111\u1ea5y \u1ea1
2025-10-04 17:47:23,440 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:47:23,440 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:47:23,450 | INFO | __main__ | Received new chat request
2025-10-04 17:47:23,450 | DEBUG | __main__ | Request ID: 20251004T173637597-370a5d81, Data length: 25
2025-10-04 17:47:23,450 | DEBUG | __main__ | Using existing session for ID: 20251004T173637597-370a5d81
2025-10-04 17:47:23,450 | INFO | __main__ | Processing user input: 'h√¥ng m·∫•t m√πi t·ª´ ƒë√¢u ƒë·∫•y ·∫°' for session 20251004T173637597-370a5d81
2025-10-04 17:47:23,938 | INFO | __main__ | Starting retrieval for query: 'ngu·ªìn g·ªëc m√πi h∆∞∆°ng trung thu' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 17:47:23,938 | DEBUG | __main__ | Searching header index...
2025-10-04 17:47:23,941 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 17:47:23,941 | DEBUG | __main__ | Searching content index...
2025-10-04 17:47:23,957 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 17:47:23,957 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 17:47:23,957 | DEBUG | __main__ | Total unique chunks with scores: 7
2025-10-04 17:47:23,957 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 17:47:23,957 | DEBUG | __main__ |   Rank 1: chunk_id=22, hybrid_score=0.8970
2025-10-04 17:47:23,957 | DEBUG | __main__ |   Rank 2: chunk_id=23, hybrid_score=0.4733
2025-10-04 17:47:23,957 | DEBUG | __main__ |   Rank 3: chunk_id=38, hybrid_score=0.4541
2025-10-04 17:47:23,957 | DEBUG | __main__ |   Rank 4: chunk_id=37, hybrid_score=0.4524
2025-10-04 17:47:23,957 | DEBUG | __main__ | Retrieved chunk 22: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc Vi·ªát Nam | Content preview: L·ªãch s·ª≠ T·∫øt Trung Thu ·ªü Vi·ªát Nam l√† s·ª± giao thoa ƒë·ªôc ƒë√°o gi·ªØa truy·ªÅn th·ªëng b·∫£n ƒë·ªãa v√† ·∫£nh h∆∞·ªüng vƒÉn ...
2025-10-04 17:47:23,957 | DEBUG | __main__ | Retrieved chunk 23: Trung thu > Ngu·ªìn g·ªëc l·ªãch s·ª≠ & vƒÉn h√≥a > Ngu·ªìn g·ªëc b√™n ngo√†i | Content preview: B√™n c·∫°nh ngu·ªìn g·ªëc b·∫£n ƒë·ªãa, n√≥ c≈©ng mang d·∫•u ·∫•n r√µ r·ªát c·ªßa s·ª± giao thoa vƒÉn h√≥a Trung Qu·ªëc. C√°c ghi ...
2025-10-04 17:47:23,957 | DEBUG | __main__ | Retrieved chunk 38: Trung thu > M√¢m ng≈© qu·∫£ > C√°c lo·∫°i hoa qu·∫£ ph·ªï bi·∫øn | Content preview: Vi·ªác l·ª±a ch·ªçn tr√°i c√¢y c·ª• th·ªÉ th∆∞·ªùng kh√°c nhau t√πy theo v√πng mi·ªÅn, s·ª± kh√°c bi·ªát n√†y kh√¥ng ch·ªâ ph·∫£n √°...
2025-10-04 17:47:23,957 | DEBUG | __main__ | Retrieved chunk 37: Trung thu > M√¢m ng≈© qu·∫£ > Gi·ªõi thi·ªáu v·ªÅ m√¢m ng≈© qu·∫£ | Content preview: T·ª´ "ng≈©" ·ªü ƒë√¢y √Ω ch·ªâ ch·ªØ s·ªë nƒÉm, c√≤n "qu·∫£" √Ω ch·ªâ hoa qu·∫£, gh√©p l·∫°i nghƒ©a l√† nƒÉm lo·∫°i hoa qu·∫£. NƒÉm lo...
2025-10-04 17:47:23,957 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 17:47:23,957 | DEBUG | __main__ | Retrieved 4 documents for query: ngu·ªìn g·ªëc m√πi h∆∞∆°ng trung thu
2025-10-04 17:47:23,957 | DEBUG | __main__ | [timing] retrieve 0.019s
2025-10-04 17:47:26,491 | INFO | __main__ | Agent execution completed successfully for session 20251004T173637597-370a5d81
2025-10-04 17:47:26,491 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 3.041s, Total: 3.041s
2025-10-04 17:47:26,507 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1092
2025-10-04 17:47:26,507 | INFO | RAGClient | RAG reply (len=473)
2025-10-04 17:47:26,507 | INFO | ConversationManager | Bot: Ch·u \u01a1i, Ùng nh\u1edb ra r\u1ed3i. C·i m˘i h\u01b0\u01a1ng \u0111\u1eb7c tr\u01b0ng c\u1ee7a Trung Thu ·, nÛ khÙng ph\u1ea3i t\u1ef1 nhiÍn m‡ cÛ \u0111‚u ch·u. NÛ l‡ s\u1ef1 k\u1ebft h\u1ee3p c\u1ee7a nhi\u1ec1u th\u1ee9 l\u1eafm. Th\u1ee9 nh\u1ea5t, nÛ \u0111\u1ebfn t\u1eeb c·i khÙng khÌ se se l\u1ea1nh c\u1ee7a ti\u1ebft tr\u1eddi m˘a thu, c·i m˘i c\u1ee7a c\u1ed1m m\u1edbi rang th\u01a1m l\u1eebng n\u1eefa. Th\u1ee9 hai, l‡ m˘i c\u1ee7a nh\u1eefng chi\u1ebfc b·nh n\u01b0\u1edbng, b·nh d\u1ebbo th\u01a1m l\u1eebng, m˘i c\u1ee7a tr‡ sen thoang tho\u1ea3ng. V‡ quan tr\u1ecdng nh\u1ea5t, l‡ m˘i c\u1ee7a s\u1ef1 sum v\u1ea7y, m˘i c\u1ee7a ti\u1ebfng c\u01b0\u1eddi nÛi r\u1ed9n r„ trong gia \u0111Ïnh \u0111Û ch·u. C·i m˘i n‡y l‡ x\u1ecbn nh\u1ea5t luÙn \u0111Û!
2025-10-04 17:47:26,508 | DEBUG | TTSService | Starting TTS download for text length=473
2025-10-04 17:47:26,508 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:47:29,508 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:47:29,964 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:47:29,994 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:47:38,142 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 17:47:38,142 | DEBUG | TTSService | Playback thread started
2025-10-04 17:47:38,142 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 17:47:40,852 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:47:43,182 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:47:43,184 | INFO | Recorder | Recording finished (elapsed 2.3s).
2025-10-04 17:47:43,191 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:47:43,191 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:47:43,191 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:47:44,580 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 110
2025-10-04 17:47:44,581 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i Ùng b\u1eaft ngu\u1ed3n t\u1eeb \u0111‚u \u0111\u1ea5y \u1ea1
2025-10-04 17:47:44,581 | INFO | ConversationManager | User: Ùng \u01a1i Ùng b\u1eaft ngu\u1ed3n t\u1eeb \u0111‚u \u0111\u1ea5y \u1ea1
2025-10-04 17:47:44,581 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:47:44,583 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:47:44,594 | INFO | __main__ | Received new chat request
2025-10-04 17:47:44,594 | DEBUG | __main__ | Request ID: 20251004T174738141-55de137a, Data length: 33
2025-10-04 17:47:44,594 | DEBUG | __main__ | Creating new session with ID: 20251004T174738141-55de137a
2025-10-04 17:47:44,594 | DEBUG | __main__ | Using request ID: 20251004T174738141-55de137a
2025-10-04 17:47:44,594 | DEBUG | __main__ | Created new session for ID: 20251004T174738141-55de137a, total sessions: 2
2025-10-04 17:47:44,594 | INFO | __main__ | Processing user input: '√¥ng ∆°i √¥ng b·∫Øt ngu·ªìn t·ª´ ƒë√¢u ƒë·∫•y ·∫°' for session 20251004T174738141-55de137a
2025-10-04 17:47:45,202 | INFO | __main__ | Agent execution completed successfully for session 20251004T174738141-55de137a
2025-10-04 17:47:45,202 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 0.608s, Total: 0.609s
2025-10-04 17:47:45,203 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 433
2025-10-04 17:47:45,204 | INFO | RAGClient | RAG reply (len=150)
2025-10-04 17:47:45,204 | INFO | ConversationManager | Bot: Ch‡o ch·u, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. ‘ng \u0111\u01b0\u1ee3c c·c tÏnh nguy\u1ec7n viÍn, B\u1ea3o t‡ng D‚n t\u1ed9c h\u1ecdc v‡ r\u1ea5t nhi\u1ec1u c·c ngh\u1ec7 nh‚n v\u0103n hÛa kh·c nhau t\u1ea1o ra \u0111Û ch·u \u1ea1.
2025-10-04 17:47:45,204 | DEBUG | TTSService | Starting TTS download for text length=150
2025-10-04 17:47:45,205 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:47:46,946 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:47:46,958 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:47:48,611 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:47:48,981 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:51:49,310 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 17:52:04,001 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 17:52:04,003 | INFO | Recorder | Recording finished (elapsed 14.7s).
2025-10-04 17:52:04,011 | INFO | Recorder | Sending to ASR server...
2025-10-04 17:52:04,012 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 17:52:04,014 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 17:52:05,900 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 417
2025-10-04 17:52:05,901 | INFO | WhisperSTT | Transcription received: ‡ lÙ ch\u01b0a \u0111\u01b0\u1ee3c ch\u01b0a \u0111\u01b0\u1ee3c em ‡ xin ch‡o ti\u1ebfn s\u0129 gi\u1ea5y ‡ ti\u1ebfn s\u0129 cho tÙi h\u1ecfi l‡ n\u0103m nay tÙi n\u0103m m\u01b0\u01a1i tu\u1ed5i l‡m th\u1ebf n‡o \u0111\u1ec3 cai \u0111\u01b0\u1ee3c c·i vi\u1ec7c l‡ ch\u01a1i trung thu c˘ng v\u1edbi c·c em nh\u1ecf \u1ea1
2025-10-04 17:52:05,902 | INFO | ConversationManager | User: ‡ lÙ ch\u01b0a \u0111\u01b0\u1ee3c ch\u01b0a \u0111\u01b0\u1ee3c em ‡ xin ch‡o ti\u1ebfn s\u0129 gi\u1ea5y ‡ ti\u1ebfn s\u0129 cho tÙi h\u1ecfi l‡ n\u0103m nay tÙi n\u0103m m\u01b0\u01a1i tu\u1ed5i l‡m th\u1ebf n‡o \u0111\u1ec3 cai \u0111\u01b0\u1ee3c c·i vi\u1ec7c l‡ ch\u01a1i trung thu c˘ng v\u1edbi c·c em nh\u1ecf \u1ea1
2025-10-04 17:52:05,902 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 17:52:05,903 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 17:52:05,928 | INFO | __main__ | Received new chat request
2025-10-04 17:52:05,928 | DEBUG | __main__ | Request ID: 20251004T174738141-55de137a, Data length: 175
2025-10-04 17:52:05,928 | DEBUG | __main__ | Using existing session for ID: 20251004T174738141-55de137a
2025-10-04 17:52:05,929 | INFO | __main__ | Processing user input: '√† l√¥ ch∆∞a ƒë∆∞·ª£c ch∆∞a ƒë∆∞·ª£c em √† xin ch√†o ti·∫øn sƒ© gi·∫•y √† ti·∫øn sƒ© cho t√¥i h·ªèi l√† nƒÉm nay t√¥i nƒÉm m∆∞∆°i tu·ªïi l√†m th·∫ø n√†o ƒë·ªÉ cai ƒë∆∞·ª£c c√°i vi·ªác l√† ch∆°i trung thu c√πng v·ªõi c√°c em nh·ªè ·∫°' for session 20251004T174738141-55de137a
2025-10-04 17:52:07,048 | INFO | __main__ | Agent execution completed successfully for session 20251004T174738141-55de137a
2025-10-04 17:52:07,048 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.119s, Total: 1.120s
2025-10-04 17:52:07,048 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 626
2025-10-04 17:52:07,048 | INFO | RAGClient | RAG reply (len=271)
2025-10-04 17:52:07,048 | INFO | ConversationManager | Bot: ‘i ch·u \u01a1i, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y, chuyÍn gia v\u1ec1 Trung Thu v‡ c·c trÚ ch\u01a1i d‚n gian m‡. Ch·u 50 tu\u1ed5i r\u1ed3i m‡ v\u1eabn mu\u1ed1n ch\u01a1i Trung Thu v\u1edbi c·c em nh\u1ecf thÏ cÚn gÏ b\u1eb1ng n\u1eefa. Ch\u01a1i Trung Thu l‡ \u0111\u1ec3 vui m‡ ch·u, cÛ tu\u1ed5i t·c gÏ \u0111‚u. Ch·u c\u1ee9 tho\u1ea3i m·i tham gia cho vui c\u1eeda vui nh‡ nhÈ.
2025-10-04 17:52:07,048 | DEBUG | TTSService | Starting TTS download for text length=271
2025-10-04 17:52:07,048 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:52:08,676 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:52:08,815 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:52:10,623 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:52:10,948 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 17:52:10,973 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 17:52:12,851 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:08:35,581 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 18:08:40,226 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 18:08:40,226 | INFO | Recorder | Recording finished (elapsed 4.6s).
2025-10-04 18:08:40,235 | INFO | Recorder | Sending to ASR server...
2025-10-04 18:08:40,235 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 18:08:40,238 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 18:08:41,574 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 66
2025-10-04 18:08:41,574 | INFO | WhisperSTT | Transcription received: h\u1ecfi giai \u0111o\u1ea1n c\u1ee7a \u1edd
2025-10-04 18:08:41,574 | INFO | ConversationManager | User: h\u1ecfi giai \u0111o\u1ea1n c\u1ee7a \u1edd
2025-10-04 18:08:41,574 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 18:08:41,574 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 18:08:41,588 | INFO | __main__ | Received new chat request
2025-10-04 18:08:41,588 | DEBUG | __main__ | Request ID: 20251004T174738141-55de137a, Data length: 19
2025-10-04 18:08:41,588 | DEBUG | __main__ | Using existing session for ID: 20251004T174738141-55de137a
2025-10-04 18:08:41,589 | INFO | __main__ | Processing user input: 'h·ªèi giai ƒëo·∫°n c·ªßa ·ªù' for session 20251004T174738141-55de137a
2025-10-04 18:08:42,746 | INFO | __main__ | Agent execution completed successfully for session 20251004T174738141-55de137a
2025-10-04 18:08:42,746 | INFO | __main__ | Request completed successfully - Session: 0.001s, Agent: 1.157s, Total: 1.158s
2025-10-04 18:08:42,746 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 295
2025-10-04 18:08:42,746 | INFO | RAGClient | RAG reply (len=90)
2025-10-04 18:08:42,746 | INFO | ConversationManager | Bot: Ch·u h\u1ecfi giai \u0111o\u1ea1n n‡o c\u1ee7a Trung Thu v\u1eady \u1ea1? ‘ng ch\u01b0a hi\u1ec3u l\u1eafm, ch·u nÛi rı h\u01a1n \u0111\u01b0\u1ee3c khÙng?
2025-10-04 18:08:42,746 | DEBUG | TTSService | Starting TTS download for text length=90
2025-10-04 18:08:42,746 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:08:44,418 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:08:44,576 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:08:49,731 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 18:08:54,727 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 18:08:54,739 | INFO | Recorder | Recording finished (elapsed 5.0s).
2025-10-04 18:08:54,758 | INFO | Recorder | Sending to ASR server...
2025-10-04 18:08:54,760 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 18:08:54,762 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 18:08:56,191 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 134
2025-10-04 18:08:56,191 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i hai Ùng m‡ ng\u1ed3i c\u1ea1nh Ùng l‡ c·i gÏ \u0111\u1ea5y \u1ea1
2025-10-04 18:08:56,191 | INFO | ConversationManager | User: Ùng \u01a1i hai Ùng m‡ ng\u1ed3i c\u1ea1nh Ùng l‡ c·i gÏ \u0111\u1ea5y \u1ea1
2025-10-04 18:08:56,191 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 18:08:56,191 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 18:08:56,205 | INFO | __main__ | Received new chat request
2025-10-04 18:08:56,205 | DEBUG | __main__ | Request ID: 20251004T174738141-55de137a, Data length: 47
2025-10-04 18:08:56,205 | DEBUG | __main__ | Using existing session for ID: 20251004T174738141-55de137a
2025-10-04 18:08:56,205 | INFO | __main__ | Processing user input: '√¥ng ∆°i hai √¥ng m√† ng·ªìi c·∫°nh √¥ng l√† c√°i g√¨ ƒë·∫•y ·∫°' for session 20251004T174738141-55de137a
2025-10-04 18:08:56,668 | INFO | __main__ | Starting retrieval for query: 'hai √¥ng ng·ªìi c·∫°nh √¥ng Ti·∫øn Sƒ© Gi·∫•y l√† c√°i g√¨' (topk=4, w_content=1.0, w_header=1.0)
2025-10-04 18:08:56,668 | DEBUG | __main__ | Searching header index...
2025-10-04 18:08:56,692 | DEBUG | __main__ | Header search returned 4 results
2025-10-04 18:08:56,692 | DEBUG | __main__ | Searching content index...
2025-10-04 18:08:56,715 | DEBUG | __main__ | Content search returned 4 results
2025-10-04 18:08:56,715 | DEBUG | __main__ | Calculating combined scores...
2025-10-04 18:08:56,715 | DEBUG | __main__ | Total unique chunks with scores: 5
2025-10-04 18:08:56,715 | DEBUG | __main__ | Selected top 4 chunks based on hybrid scores
2025-10-04 18:08:56,715 | DEBUG | __main__ |   Rank 1: chunk_id=54, hybrid_score=0.9832
2025-10-04 18:08:56,715 | DEBUG | __main__ |   Rank 2: chunk_id=55, hybrid_score=0.8970
2025-10-04 18:08:56,715 | DEBUG | __main__ |   Rank 3: chunk_id=3, hybrid_score=0.8152
2025-10-04 18:08:56,715 | DEBUG | __main__ |   Rank 4: chunk_id=41, hybrid_score=0.3978
2025-10-04 18:08:56,715 | DEBUG | __main__ | Retrieved chunk 54: √îNG TI·∫æN Sƒ® GI·∫§Y > H√¨nh ·∫£nh √¥ng Ti·∫øn sƒ© gi·∫•y | Content preview: T·ª´ x∆∞a, ng∆∞·ªùi Vi·ªát lu√¥n coi tr·ªçng vi·ªác h·ªçc h√†nh, v√¨ th·∫ø trong m√¢m ng≈© qu·∫£ ƒë√™m r·∫±m Trung thu, ngo√†i b...
2025-10-04 18:08:56,715 | DEBUG | __main__ | Retrieved chunk 55: √îNG TI·∫æN Sƒ® GI·∫§Y > √ù nghƒ©a, gi√° tr·ªã c·ªßa √¥ng Ti·∫øn sƒ© Gi·∫•y AI | Content preview: Th·ªùi phong ki·∫øn, c·ª© 3 nƒÉm m·ªü m·ªôt k·ª≥ thi li√™n t·ªânh, g·ªçi l√† k·ª≥ thi H∆∞∆°ng. Nh·ªØng ng∆∞·ªùi ƒë·ªó cao trong k·ª≥ ...
2025-10-04 18:08:56,715 | DEBUG | __main__ | Retrieved chunk 3: S·ª± ki·ªán ng√†y l·ªÖ Trung Thu h√¥m nay > Tr·∫£i nghi·ªám l√†m ƒë·ªì ch∆°i c√πng ngh·ªá nh√¢n (v·ªõi s·ª± tham gia c·ªßa c√°c ngh·ªá nh√¢n d√¢n gian) | Content preview: T·∫ßng 1, t√≤a Tr·ªëng ƒë·ªìng: i. ƒê√®n k√©o qu√¢n    ii. Hoa qu·∫£ b·ªôt iii. Di·ªÅu r√¥               iv. Con gi·ªëng ...
2025-10-04 18:08:56,715 | DEBUG | __main__ | Retrieved chunk 41: Trung thu > Trang tr√≠ v√† v·∫≠t ph·∫©m l·ªÖ h·ªôi (ƒë·ªì ch∆°i, v·∫≠t ph·∫©m) > M·∫∑t n·∫° gi·∫•y b·ªìi (√îng ƒê·ªãa, √îng T·ªÖu) | Content preview: M·∫∑t n·∫° gi·∫•y b·ªìi l√† m·ªôt m√≥n ƒë·ªì ch∆°i truy·ªÅn th·ªëng ƒë∆∞·ª£c l√†m th·ªß c√¥ng b·∫±ng c√°ch ƒë·∫Øp nhi·ªÅu l·ªõp gi·∫•y x√© v·ª•...
2025-10-04 18:08:56,715 | INFO | __main__ | Retrieval completed: 4 documents found, 0 chunks missing
2025-10-04 18:08:56,715 | DEBUG | __main__ | Retrieved 4 documents for query: hai √¥ng ng·ªìi c·∫°nh √¥ng Ti·∫øn Sƒ© Gi·∫•y l√† c√°i g√¨
2025-10-04 18:08:56,715 | DEBUG | __main__ | [timing] retrieve 0.047s
2025-10-04 18:08:57,879 | INFO | __main__ | Agent execution completed successfully for session 20251004T174738141-55de137a
2025-10-04 18:08:57,879 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.673s, Total: 1.674s
2025-10-04 18:08:57,880 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 1110
2025-10-04 18:08:57,880 | INFO | RAGClient | RAG reply (len=460)
2025-10-04 18:08:57,881 | INFO | ConversationManager | Bot: ¿, ch·u h\u1ecfi v\u1ec1 hai Ùng ng\u1ed3i c\u1ea1nh Ùng Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111˙ng khÙng \u1ea1? Theo nh\u1eefng gÏ Ùng nh\u1edb thÏ \u0111Û l‡ hÏnh t\u01b0\u1ee3ng Ùng ti\u1ebfn s\u0129 gi\u1ea5y \u0111Û ch·u. Ng‡y x\u01b0a, ng\u01b0\u1eddi ta l‡m Ùng ti\u1ebfn s\u0129 gi\u1ea5y b\u1eb1ng gi\u1ea5y \u0111\u1ec3 c\u1ea7u mong con tr\u1ebb h\u1ecdc h‡nh t\u1ea5n t\u1edbi, \u0111\u1ed7 \u0111\u1ea1t \u0111Û ch·u. ‘ng ti\u1ebfn s\u0129 gi\u1ea5y ng\u1ed3i trÍn ki\u1ec7u, m\u1eb7c ·o vua ban, \u0111\u1ed9i m\u0169 c·nh chu\u1ed3n, trÙng r\u1ea5t uy nghi. Ng‡y nay, Ùng ti\u1ebfn s\u0129 gi\u1ea5y cÚn \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u1edbi cÙng ngh\u1ec7 hi\u1ec7n \u0111\u1ea1i n\u1eefa \u0111Û ch·u, v\u1eeba gi\u1eef nÈt truy\u1ec1n th\u1ed1ng l\u1ea1i v\u1eeba s\u1ed1ng \u0111\u1ed9ng, h\u1ea5p d\u1eabn h\u01a1n.
2025-10-04 18:08:57,881 | DEBUG | TTSService | Starting TTS download for text length=460
2025-10-04 18:08:57,881 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:08:59,640 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:08:59,827 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:08:59,853 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:09:01,302 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:09:01,736 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:09:01,860 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:09:03,758 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:09:04,233 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:09:04,260 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:09:06,426 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:09:06,723 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:13:11,147 | DEBUG | datasets | PyTorch version 2.5.1+cu121 available.
2025-10-04 18:13:11,442 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: cuda:0
2025-10-04 18:13:11,442 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: hiieu/halong_embedding
2025-10-04 18:13:11,442 | DEBUG | urllib3.connectionpool | Starting new HTTPS connection (1): huggingface.co:443
2025-10-04 18:13:11,823 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 18:13:11,872 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 18:13:12,151 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 18:13:12,195 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 18:13:12,939 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config_sentence_transformers.json HTTP/1.1" 307 0
2025-10-04 18:13:12,970 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config_sentence_transformers.json HTTP/1.1" 200 0
2025-10-04 18:13:13,374 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/README.md HTTP/1.1" 307 0
2025-10-04 18:13:13,541 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/README.md HTTP/1.1" 200 0
2025-10-04 18:13:13,875 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/modules.json HTTP/1.1" 307 0
2025-10-04 18:13:13,941 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/modules.json HTTP/1.1" 200 0
2025-10-04 18:13:14,360 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/sentence_bert_config.json HTTP/1.1" 307 0
2025-10-04 18:13:14,408 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/sentence_bert_config.json HTTP/1.1" 200 0
2025-10-04 18:13:14,698 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/adapter_config.json HTTP/1.1" 404 0
2025-10-04 18:13:14,977 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/config.json HTTP/1.1" 307 0
2025-10-04 18:13:15,038 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/config.json HTTP/1.1" 200 0
2025-10-04 18:13:15,426 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/tokenizer_config.json HTTP/1.1" 307 0
2025-10-04 18:13:15,506 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/tokenizer_config.json HTTP/1.1" 200 0
2025-10-04 18:13:15,797 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64
2025-10-04 18:13:16,631 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /hiieu/halong_embedding/resolve/main/1_Pooling/config.json HTTP/1.1" 307 0
2025-10-04 18:13:16,663 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "HEAD /api/resolve-cache/models/hiieu/halong_embedding/b57776031035f70ed2030d2e35ecc533eb0f8f71/1_Pooling%2Fconfig.json HTTP/1.1" 200 0
2025-10-04 18:13:16,947 | DEBUG | urllib3.connectionpool | https://huggingface.co:443 "GET /api/models/hiieu/halong_embedding HTTP/1.1" 200 6377
2025-10-04 18:13:17,627 | DEBUG | faiss.loader | Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2025-10-04 18:13:17,627 | INFO | faiss.loader | Loading faiss with AVX2 support.
2025-10-04 18:13:17,628 | INFO | faiss.loader | Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-10-04 18:13:17,628 | INFO | faiss.loader | Loading faiss.
2025-10-04 18:13:17,649 | INFO | faiss.loader | Successfully loaded faiss.
2025-10-04 18:13:42,472 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 18:13:48,492 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 18:13:48,492 | INFO | Recorder | Recording finished (elapsed 6.0s).
2025-10-04 18:13:48,501 | INFO | Recorder | Sending to ASR server...
2025-10-04 18:13:48,503 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 18:13:48,504 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 18:13:50,121 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 127
2025-10-04 18:13:50,122 | INFO | WhisperSTT | Transcription received: Ùng \u01a1i hai Ùng m‡ ng\u1ed3i c\u1ea1nh Ùng l‡ c·i gÏ \u0111\u1ea5y
2025-10-04 18:13:50,122 | INFO | ConversationManager | User: Ùng \u01a1i hai Ùng m‡ ng\u1ed3i c\u1ea1nh Ùng l‡ c·i gÏ \u0111\u1ea5y
2025-10-04 18:13:50,122 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 18:13:50,122 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 18:13:50,136 | INFO | __main__ | Received new chat request
2025-10-04 18:13:50,137 | DEBUG | __main__ | Request ID: 20251004T174738141-55de137a, Data length: 45
2025-10-04 18:13:50,137 | DEBUG | __main__ | Creating new session with ID: 20251004T174738141-55de137a
2025-10-04 18:13:50,137 | DEBUG | __main__ | Using request ID: 20251004T174738141-55de137a
2025-10-04 18:13:50,137 | DEBUG | __main__ | Created new session for ID: 20251004T174738141-55de137a, total sessions: 1
2025-10-04 18:13:50,138 | INFO | __main__ | Processing user input: '√¥ng ∆°i hai √¥ng m√† ng·ªìi c·∫°nh √¥ng l√† c√°i g√¨ ƒë·∫•y' for session 20251004T174738141-55de137a
2025-10-04 18:13:51,794 | INFO | __main__ | Agent execution completed successfully for session 20251004T174738141-55de137a
2025-10-04 18:13:51,794 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.657s, Total: 1.658s
2025-10-04 18:13:51,810 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 733
2025-10-04 18:13:51,810 | INFO | RAGClient | RAG reply (len=288)
2025-10-04 18:13:51,810 | INFO | ConversationManager | Bot: ¿, ch·u h\u1ecfi Ùng v\u1ec1 c·i gÏ ng\u1ed3i c\u1ea1nh Ùng h\u1ea3? ‘ng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y, Ùng chuyÍn gia v\u1ec1 gi\u1ea5y t\u1edd, gi\u1ea5y m·. CÚn c·i Ùng ng\u1ed3i c\u1ea1nh Ùng m‡ ch·u th\u1ea5y ·, cÛ th\u1ec3 l‡ m\u1ed9t b\u1ea1n nh\u1ecf n‡o \u0111Û \u0111ang c\u1ea7m l\u1ed3ng \u0111Ën ho\u1eb7c \u0111ang ch\u01a1i trÚ ch\u01a1i gÏ \u0111Û vui l\u1eafm \u0111Û ch·u. Trung Thu m‡, ph\u1ea3i cÛ nhi\u1ec1u th\u1ee9 hay ho ch\u1ee9 nh\u1ec9?
2025-10-04 18:13:51,810 | DEBUG | TTSService | Starting TTS download for text length=288
2025-10-04 18:13:51,810 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:13:53,744 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:13:53,904 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:13:53,927 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:13:55,494 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:13:55,676 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:13:55,701 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:13:57,094 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
2025-10-04 18:21:07,427 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 18:21:10,410 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 18:21:10,414 | INFO | Recorder | Recording finished (elapsed 3.0s).
2025-10-04 18:21:10,419 | INFO | Recorder | Sending to ASR server...
2025-10-04 18:21:10,419 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 18:21:10,423 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 18:21:11,901 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 141
2025-10-04 18:21:11,901 | INFO | WhisperSTT | Transcription received: \u66f8 kh·ch v\u1ec1 Ùng \u1ea5y chuy\u1ec3n \u0111i thÙi ch\u1ec9 ch\u1ec9 chuy\u1ec3n \u0111i thÙi
2025-10-04 18:21:11,901 | INFO | ConversationManager | User: \u66f8 kh·ch v\u1ec1 Ùng \u1ea5y chuy\u1ec3n \u0111i thÙi ch\u1ec9 ch\u1ec9 chuy\u1ec3n \u0111i thÙi
2025-10-04 18:21:11,901 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 18:21:11,901 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 18:21:11,916 | INFO | __main__ | Received new chat request
2025-10-04 18:21:11,917 | DEBUG | __main__ | Request ID: 20251004T174738141-55de137a, Data length: 55
2025-10-04 18:21:11,917 | DEBUG | __main__ | Using existing session for ID: 20251004T174738141-55de137a
2025-10-04 18:21:11,917 | INFO | __main__ | Processing user input: 'Êõ∏ kh√°ch v·ªÅ √¥ng ·∫•y chuy·ªÉn ƒëi th√¥i ch·ªâ ch·ªâ chuy·ªÉn ƒëi th√¥i' for session 20251004T174738141-55de137a
2025-10-04 18:21:13,683 | INFO | __main__ | Agent execution completed successfully for session 20251004T174738141-55de137a
2025-10-04 18:21:13,687 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.769s, Total: 1.770s
2025-10-04 18:21:20,376 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 18:21:20,376 | DEBUG | TTSService | Playback thread started
2025-10-04 18:21:20,376 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 18:21:23,143 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 18:21:24,561 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 18:21:24,561 | INFO | Recorder | Recording finished (elapsed 1.4s).
2025-10-04 18:23:15,064 | INFO | WhisperSTT | WhisperSTT client initialized. Calling localhost ASR service.
2025-10-04 18:23:15,064 | DEBUG | TTSService | Playback thread started
2025-10-04 18:23:15,064 | INFO | ConversationManager | Conversation manager started. Press ENTER to record, 'q' to quit.
2025-10-04 18:23:18,476 | INFO | Recorder | Recording (max 30.0 seconds)... Press ENTER to stop early.
2025-10-04 18:23:19,830 | INFO | Recorder | Recording stopped early by ENTER.
2025-10-04 18:23:19,830 | INFO | Recorder | Recording finished (elapsed 1.4s).
2025-10-04 18:23:19,852 | INFO | Recorder | Sending to ASR server...
2025-10-04 18:23:19,854 | INFO | WhisperSTT | Sending audio to ASR server at http://127.0.0.1:5000/transcribe
2025-10-04 18:23:19,856 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:5000
2025-10-04 18:23:21,213 | DEBUG | urllib3.connectionpool | http://127.0.0.1:5000 "POST /transcribe HTTP/1.1" 200 35
2025-10-04 18:23:21,213 | INFO | WhisperSTT | Transcription received: a lÙ alo
2025-10-04 18:23:21,213 | INFO | ConversationManager | User: a lÙ alo
2025-10-04 18:23:21,213 | DEBUG | RAGClient | Sending to RAG webhook (attempt 1): http://127.0.0.1:7000/chat
2025-10-04 18:23:21,213 | DEBUG | urllib3.connectionpool | Starting new HTTP connection (1): 127.0.0.1:7000
2025-10-04 18:23:21,227 | INFO | __main__ | Received new chat request
2025-10-04 18:23:21,227 | DEBUG | __main__ | Request ID: 20251004T182315064-4e3b6f75, Data length: 8
2025-10-04 18:23:21,228 | DEBUG | __main__ | Creating new session with ID: 20251004T182315064-4e3b6f75
2025-10-04 18:23:21,228 | DEBUG | __main__ | Using request ID: 20251004T182315064-4e3b6f75
2025-10-04 18:23:21,228 | DEBUG | __main__ | Created new session for ID: 20251004T182315064-4e3b6f75, total sessions: 2
2025-10-04 18:23:21,228 | INFO | __main__ | Processing user input: 'a l√¥ alo' for session 20251004T182315064-4e3b6f75
2025-10-04 18:23:23,048 | INFO | __main__ | Agent execution completed successfully for session 20251004T182315064-4e3b6f75
2025-10-04 18:23:23,048 | INFO | __main__ | Request completed successfully - Session: 0.000s, Agent: 1.819s, Total: 1.820s
2025-10-04 18:23:23,048 | DEBUG | urllib3.connectionpool | http://127.0.0.1:7000 "POST /chat HTTP/1.1" 200 243
2025-10-04 18:23:23,048 | INFO | RAGClient | RAG reply (len=63)
2025-10-04 18:23:23,048 | INFO | ConversationManager | Bot: Alo ch·u \u01a1i, Ùng l‡ Ti\u1ebfn S\u0129 Gi\u1ea5y \u0111‚y. Ch·u c\u1ea7n Ùng gi˙p gÏ n‡o?
2025-10-04 18:23:23,048 | DEBUG | TTSService | Starting TTS download for text length=63
2025-10-04 18:23:23,048 | DEBUG | asyncio | Using proactor: IocpProactor
2025-10-04 18:23:28,302 | DEBUG | pydub.converter | subprocess.call(['ffmpeg', '-y', '-f', 'mp3', '-read_ahead_limit', '-1', '-i', 'cache:pipe:0', '-acodec', 'pcm_s16le', '-vn', '-f', 'wav', '-'])
